(()=>{var e={46035:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(59713)),o=n(r(34575)),s=n(r(93913)),a=n(r(63858)),c=n(r(15499)),u=n(r(47813)),p=n(r(83905));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(){function e(t){var r,n=this,i=t.dialogServiceConnector;(0,o.default)(this,e),this.dialogServiceConnector=i,this.activity$=(0,u.default)(new a.default((function(e){n._activityObserver=e,r.next(0),r.next(1),i.connect((function(){r.next(2)}),(function(e){r.next(4),console.warn("botframework-directlinespeech-sdk: Failed to connect",{error:e})}))}))),this.connectionStatus$=(0,u.default)(new a.default((function(e){r=e}))),i.activityReceived=function(e,t){var r=t.activity,i=t.audioStream;try{n._activityObserver&&n._activityObserver.next(l(l({},r),{},{channelData:l(l({},r.channelData),{},{speechSynthesisUtterance:new p.default(i)}),from:l(l({},r.from),{},{role:"bot"}),replyToId:void 0,timestamp:(new Date).toISOString()}))}catch(e){console.error(e)}}}return(0,s.default)(e,[{key:"end",value:function(){try{this.dialogServiceConnector.close()}catch(e){if(!~e.message.indexOf("already disposed"))throw e}}},{key:"postActivity",value:function(e){e=l(l({},e),{},{from:{role:"user"}});try{var t=(0,c.default)().toString(36).substr(2);return!(!e.channelData||!e.channelData.speech)||this.dialogServiceConnector.sendActivityAsync(JSON.stringify(e)),this._activityObserver&&this._activityObserver.next(l(l({},e),{},{id:t,timestamp:(new Date).toISOString()})),a.default.of(t)}catch(e){return new a.default((function(t){return t.error(e)}))}}}]),e}();t.default=v},83905:(e,t,r)=>{"use strict";var n=r(95318),i=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(34575)),s=n(r(93913)),a=n(r(2205)),c=n(r(78585)),u=n(r(29754)),p=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(56434));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}var l=function(e){(0,a.default)(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,u.default)(t);if(r){var i=(0,u.default)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,c.default)(this,e)});function i(e){var t;if((0,o.default)(this,i),t=n.call(this),e&&(!e.format||"function"!=typeof e.read))throw new Error("botframework-directlinespeech-sdk: If the first argument is specified, it must be a Cognitive Services audio stream.");return t.audioStream=e,t}return(0,s.default)(i,[{key:"onboundary",get:function(){return(0,p.getEventAttributeValue)(this,"boundary")},set:function(e){(0,p.setEventAttributeValue)(this,"boundary",e)}},{key:"onend",get:function(){return(0,p.getEventAttributeValue)(this,"end")},set:function(e){(0,p.setEventAttributeValue)(this,"end",e)}},{key:"onerror",get:function(){return(0,p.getEventAttributeValue)(this,"error")},set:function(e){(0,p.setEventAttributeValue)(this,"error",e)}},{key:"onstart",get:function(){return(0,p.getEventAttributeValue)(this,"start")},set:function(e){(0,p.setEventAttributeValue)(this,"start",e)}}]),i}(p.default);t.default=l},57241:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return d.apply(this,arguments)};var i=n(r(87757)),o=n(r(48926)),s=r(55369),a=n(r(5420)),c=n(r(46035)),u=n(r(38829)),p=n(r(40460)),h=n(r(70279)),l=9e5,v=12e4;function d(){return(d=(0,o.default)(i.default.mark((function e(t){var r,n,d,f,g,y,m,S,b,C,P,w,R,I,O,E,T,A,_,x,k,M,D,j,z,N;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.audioConfig,n=t.audioContext,d=t.audioInputDeviceId,f=t.enableInternalHTTPSupport,g=t.enableTelemetry,y=t.fetchCredentials,m=t.speechRecognitionEndpointId,S=t.speechRecognitionLanguage,b=void 0===S?"undefined"!=typeof window&&void 0!==window.navigator&&window.navigator.language||"en-US":S,C=t.speechSynthesisDeploymentId,P=t.speechSynthesisOutputFormat,w=t.textNormalization,R=t.userID,I=t.username,y){e.next=3;break}throw new Error('"fetchCredentials" must be specified.');case 3:return e.next=5,(0,h.default)(y);case 5:if(O=e.sent,E=O.authorizationToken,T=O.directLineToken,A=O.directLineSpeechHostname,_=O.region,x=O.subscriptionKey,!(!E&&!x||E&&x||E&&"string"!=typeof E||x&&"string"!=typeof x||f&&!T)){e.next=13;break}throw new Error('"fetchCredentials" must return either "authorizationToken" or "subscriptionKey" as a non-empty string only. If enableInternalHTTPSupport is set to true, then it should also return a non-empty "directLineToken"');case 13:if(void 0!==g&&console.warn("botframework-directlinespeech: Telemetry options are not yet supported. Please refer to Cognitive Services documentation for details."),!(A&&_||!A&&!_)){e.next=16;break}throw new Error('"fetchCredentials" must return either "directLineSpeechHostname" or "region" and it must not be an empty string.');case 16:if(!A){e.next=23;break}if("string"==typeof A){e.next=19;break}throw new Error('"fetchCredentials" must return "directLineSpeechHostname" as a string.');case 19:if(!f){e.next=21;break}throw new Error('"fetchCredentials" must not return "directLineSpeechHostname" if "enableInternalHTTPSupport" is set.');case 21:e.next=25;break;case 23:if("string"==typeof _){e.next=25;break}throw new Error('"fetchCredentials" must return "region" as a string.');case 25:return r&&d?console.warn('botframework-directlinespeech-sdk: Only "audioConfig" or "audioInputDeviceId" can be specified, but not both; ignoring "audioInputDeviceId".'):r||(r=d?s.AudioConfig.fromMicrophoneInput(d):s.AudioConfig.fromDefaultMicrophoneInput()),m&&console.warn('botframework-directlinespeech: Custom Speech is currently not supported; ignoring "speechRecognitionEndpointId".'),C&&console.warn('botframework-directlinespeech: Custom Voice is currently not supported; ignoring "speechSynthesisDeploymentId".'),P&&console.warn('botframework-directlinespeech: Synthesis output format is currently not supported; ignoring "speechSynthesisOutputFormat".'),w&&console.warn('botframework-directlinespeech: Text normalization is currently not supported; ignoring "textNormalization".'),(R||I)&&console.warn('botframework-directlinespeech: Custom "userId" and "username" are currently not supported and are ignored.'),A?E?(k=s.BotFrameworkConfig.fromHost(new URL("wss://".concat(A)))).setProperty(s.PropertyId.SpeechServiceAuthorization_Token,E):k=s.BotFrameworkConfig.fromHost(new URL("wss://".concat(A)),x):(k=E?s.BotFrameworkConfig.fromAuthorizationToken(E,_):s.BotFrameworkConfig.fromSubscription(x,_),f&&(k.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,"wss://".concat(encodeURI(_),".convai.speech.microsoft.com/directline/api/v1")),k.setProperty(s.PropertyId.Conversation_Agent_Connection_Id,T))),k.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,b),R&&k.setProperty(s.PropertyId.Conversation_From_Id,R),M=(0,u.default)(new s.DialogServiceConnector(k,r)),E&&(D=setInterval((0,o.default)(i.default.mark((function e(){var t,r,n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.privIsDisposed&&clearInterval(D),e.next=3,(0,h.default)(y);case 3:if(t=e.sent,r=t.authorizationToken,n=t.directLineSpeechHostname,o=t.region,r){e.next=9;break}return e.abrupt("return",console.warn('botframework-directlinespeech-sdk: Renew token failed because "fetchCredentials" call returned no authorization token.'));case 9:if(!A){e.next=14;break}if(A===n){e.next=12;break}return e.abrupt("return",console.warn('botframework-directlinespeech-sdk: "directLineSpeechHostname" change is not supported for renewed token. Authorization token is not renewed.'));case 12:e.next=16;break;case 14:if(_===o){e.next=16;break}return e.abrupt("return",console.warn("botframework-directlinespeech-sdk: Region change is not supported for renewed token. Authorization token is not renewed."));case 16:M.authorizationToken=r;case 17:case"end":return e.stop()}}),e)}))),v)),f&&(j=setInterval((0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M.privIsDisposed&&clearInterval(j),e.next=3,(0,p.default)(T);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",console.warn("botframework-directlinespeech-sdk: Renew token failed because call to refresh token Direct Line API did not return a new token."));case 6:k.setProperty(s.PropertyId.Conversation_Agent_Connection_Id,t),M.properties.setProperty(s.PropertyId.Conversation_Agent_Connection_Id,t),M.connect();case 9:case"end":return e.stop()}}),e)}))),l)),z=new c.default({dialogServiceConnector:M}),N=(0,a.default)({audioContext:n,enableTelemetry:g,recognizer:M,textNormalization:w}),e.abrupt("return",{directLine:z,webSpeechPonyfillFactory:N});case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},52011:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n,i=t.channels,o=t.samplesPerSec,s=new Array(3).fill().map((function(){return e.createBuffer(i,r,o)})),a=[],c=[],u=function t(){"number"!=typeof n&&(n=e.currentTime);var r=e.createBufferSource(),i=c.shift();if("function"==typeof i)i();else if(i){var o=s.shift();if(!o)return void c.unshift(i);!function(e){for(var t=e.numberOfChannels,r=0;r<t;r++){var n=e.getChannelData(r);[].fill.call(n,0)}}(o),function(e,t){for(var r=e.numberOfChannels,n=0;n<r;n++){var i=t[+n];if(e.copyToChannel)e.copyToChannel(i,n);else for(var o=i.length,s=e.getChannelData(n),a=0;a<o;a++)s[+a]=i[+a]}}(o,i),r.buffer=o,r.connect(e.destination),r.start(n),a.push(r),n+=o.duration,r.addEventListener("ended",(function(){a=a.filter((function(e){return e!==r})),s.push(o),t()}))}};return{cancelAll:function(){c.splice(0),a.forEach((function(e){return e.stop()}))},flush:function(){return new Promise((function(e){return c.push(e)}))},push:function(e){if(!e)throw new Error("multiChannelArray must not be falsy.");c.push(e),u()}}}},81155:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=[],t={cancelAll:function(){e.forEach((function(e){return(0,e.cancel)()}))},push:function(t){var r,n=(0,s.default)(),a=(0,s.default)(),c={promise:a.promise},u=c.cancel=function(){t=function(){return{result:Promise.reject(new Error("cancelled before start"))}},r&&r(),n.reject(new Error("cancelled in the midway"))},p=function(){var s=(0,o.default)(i.default.mark((function o(){var s,u,p;return i.default.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=t(),u=s.abort,p=s.result,r=u,i.prev=2,i.t0=a,i.next=6,Promise.race([p,n.promise]);case 6:i.t1=i.sent,i.t0.resolve.call(i.t0,i.t1),i.next=13;break;case 10:i.prev=10,i.t2=i.catch(2),a.reject(i.t2);case 13:e=e.filter((function(e){return e!==c}));case 14:case"end":return i.stop()}}),o,null,[[2,10]])})));return function(){return s.apply(this,arguments)}}(),h=e[e.length-1],l=h&&h.promise||Promise.resolve();return e.push(c),l.then(p,p),{cancel:u,result:a.promise}}};return Object.defineProperty(t,"length",{get:function(){return e.length}}),t};var i=n(r(87757)),o=n(r(48926)),s=n(r(2480))},5420:(e,t,r)=>{"use strict";var n=r(95318),i=r(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.audioContext,r=e.enableTelemetry,n=e.ponyfill,i=void 0===n?{AudioContext:window.AudioContext||window.webkitAudioContext}:n,S=e.recognizer,b=e.textNormalization;return i.AudioContext?function(){var e=(0,v.createSpeechRecognitionPonyfillFromRecognizer)({createRecognizer:function(){return S},enableTelemetry:r,looseEvents:!0,textNormalization:b}),n=e.SpeechGrammarList,C=e.SpeechRecognition;t||(t=new i.AudioContext);var P=(0,d.default)(),w=P.cancelAll,R=P.push,I=function(e){(0,u.default)(v,e);var r,n,i=(r=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,h.default)(r);if(n){var i=(0,h.default)(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return(0,p.default)(this,e)});function v(){return(0,a.default)(this,v),i.apply(this,arguments)}return(0,c.default)(v,[{key:"cancel",value:function(){w()}},{key:"getVoices",value:function(){return[]}},{key:"speak",value:function(e){R((function(){var r=new l.AbortController,n=r.signal;return{abort:r.abort.bind(r),result:(0,s.default)(o.default.mark((function r(){return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.dispatchEvent(new f.Event("start")),r.prev=1,!e.audioStream){r.next=7;break}return r.next=5,(0,g.default)(t,e.audioStream,{signal:n});case 5:r.next=9;break;case 7:return r.next=9,(0,y.default)(t);case 9:r.next=15;break;case 11:if(r.prev=11,r.t0=r.catch(1),"aborted"===r.t0.message){r.next=15;break}return r.abrupt("return",e.dispatchEvent(new ErrorEvent(r.t0)));case 15:e.dispatchEvent(new f.Event("end"));case 16:case"end":return r.stop()}}),r,null,[[1,11]])})))()}})).result.catch((function(e){if(!/^cancelled/i.test(e.message))throw e}))}},{key:"onvoiceschanged",get:function(){return(0,f.getEventAttributeValue)(this,"voiceschanged")},set:function(e){(0,f.setEventAttributeValue)(this,"voiceschanged",e)}}]),v}(f.default);return{SpeechGrammarList:n,SpeechRecognition:C,speechSynthesis:new I,SpeechSynthesisUtterance:m.default}}:(console.warn("botframework-directlinespeech-sdk: This browser does not support Web Audio API. Speech support is disabled."),function(){return{}})};var o=n(r(87757)),s=n(r(48926)),a=n(r(34575)),c=n(r(93913)),u=n(r(2205)),p=n(r(78585)),h=n(r(29754)),l=r(16418),v=r(91937),d=n(r(81155)),f=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(56434)),g=n(r(84417)),y=n(r(3409)),m=n(r(83905));function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}},38829:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t;return e.listenOnceAsync=s(e.listenOnceAsync.bind(e),(function(e,r){t=(0,o.default)();for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return[s(e,null,(function(e){return t.resolve(e),e})),s(r,null,(function(e){return t.reject(e),e}))].concat(i)})),e.startContinuousRecognitionAsync=function(t,r){e.listenOnceAsync((function(){}),(function(e){t=null,r&&r(e)})),setTimeout((function(){r=null,t&&t()}),0)},e};var i=n(r(319)),o=n(r(2480));function s(e,t,r){return function(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];o=t?t.apply(void 0,(0,i.default)(o)):o;var a=e.apply(void 0,(0,i.default)(o));return r?r(a):a}}},84417:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return y.apply(this,arguments)};var i=n(r(87757)),o=n(r(59713)),s=n(r(48926)),a=n(r(52011));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=44100,h=4096;function l(e,t){for(var r=new Float32Array(e.length),n=0;n<e.length;n++)r[+n]=e[+n]/t;return r}function v(e,t){switch(e.bitsPerSample){case 8:return l(new Int8Array(t),128);case 16:return l(new Int16Array(t),32768);case 32:return l(new Int32Array(t),2147483648);default:throw new Error("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}function d(e){return new Promise((function(t,r){e.onabort=function(){return r(new Error("aborted"))}}))}function f(e,t){for(var r=t.channels,n=new Array(r),i=e.length/r,o=0;o<r;o++){var s=new Float32Array(i);n[+o]=s;for(var a=0;a<i;a++)s[+a]=e[a*r+o]}return n}function g(e,t){if(1===t)return e;for(var r,n=new Array(t).fill(e[0]),i=new Float32Array(e.length*t),o=0;o<e.length;o++)for(var s=e[+o],a=o*t,c=0;c<t;c++)n.shift(),n.push(s),i[a+c]=(r=n).reduce((function(e,t){return e+t}),0)/r.length;return i}function y(){return y=(0,s.default)(i.default.mark((function e(t,r){var n,o,s,c,l=arguments;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>2&&void 0!==l[2]?l[2]:{},o=n.signal,s=void 0===o?{}:o,t){e.next=5;break}throw new Error("botframework-directlinespeech-sdk: audioContext must be specified.");case 5:if(r){e.next=9;break}throw new Error("botframework-directlinespeech-sdk: stream must be specified.");case 9:if(r.format){e.next=13;break}throw new Error("botframework-directlinespeech-sdk: stream is missing format.");case 13:if("function"==typeof r.read){e.next=15;break}throw new Error("botframework-directlinespeech-sdk: stream is missing read().");case 15:return c=[],e.prev=16,e.delegateYield(i.default.mark((function e(){var n,o,c,l,y,m,S,b,C,P,w,R,I;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.format,o=d(s),c=new Uint8Array(h),l=function(){return Promise.race([o.catch((function(){})),r.read(c.buffer).then((function(e){return e===c.byteLength?c:e?c.slice(0,e):void 0}))])},!s.aborted){e.next=6;break}throw new Error("aborted");case 6:for(y=n.samplesPerSec,"audio-24khz-48kbitrate-mono-mp3"===n.requestAudioFormatString&&(y=16e3),m=y,S=1;m<p&&m<96e3;)S++,m=y*S;return b=(0,a.default)(t,u(u({},n),{},{samplesPerSec:m}),h/(n.bitsPerSample/8)*S),e.next=14,l();case 14:C=e.sent,P=0;case 16:if(!(C&&P<1e3)||s.aborted){e.next=29;break}if(!s.aborted){e.next=19;break}return e.abrupt("break",29);case 19:w=v(n,C.buffer),R=f(w,n),I=R.map((function(e){return g(e,S)})),b.push(I);case 23:return e.next=25,l();case 25:C=e.sent,P++,e.next=16;break;case 29:if(o.catch((function(){return b.cancelAll()})),!s.aborted){e.next=32;break}throw new Error("aborted");case 32:return e.next=34,Promise.race([o,b.flush()]);case 34:case"end":return e.stop()}}),e)}))(),"t0",18);case 18:return e.prev=18,c.forEach((function(e){return e.stop()})),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[16,,18,21]])}))),y.apply(this,arguments)}},3409:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return h.apply(this,arguments)};var i=n(r(87757)),o=n(r(48926)),s=r(33704),a=n(r(90875)),c="SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU3LjU2LjEwMQAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7//////////////////////////////////////////////////////////////////8AAAAATGF2YzU3LjY0AAAAAAAAAAAAAAAAJAUHAAAAAAAAAYYoRBqpAAAAAAD/+xDEAAPAAAGkAAAAIAAANIAAAARMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMQpg8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV";function u(e,t){return new Promise((function(r,n){var i=e.decodeAudioData(t,r,n);i&&"function"==typeof i.then&&r(i)}))}function p(e,t,r){return new Promise((function(n,i){var o,s,c,u=new a.default,p=new a.default,h=(s="statechange",c=function(e){return"closed"===e.target.state&&u.eventListener()},(o=e).addEventListener(s,c),function(){return o.removeEventListener(s,c)});try{r.buffer=t,r.onended=p.eventListener,r.connect(e.destination),r.start(0),Promise.race([u.upcoming(),p.upcoming()]).then(n)}catch(e){i(e)}finally{h()}}))}function h(){return(h=(0,o.default)(i.default.mark((function e(t){var r,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.createBufferSource(),e.next=3,u(t,(0,s.decode)(c));case 3:return n=e.sent,e.next=6,p(t,n,r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},70279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"function"==typeof e?e():e}},47813:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=[];return new Observable((function(n){return t||(t=e.subscribe({complete:function(){r.forEach((function(e){return e.complete()}))},error:function(e){r.forEach((function(t){return t.error(e)}))},next:function(e){r.forEach((function(t){return t.next(e)}))}})),r.push(n),function(){(r=r.filter((function(e){return e!==n}))).length||(t.unsubscribe(),t=null)}}))}},11692:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return p.apply(this,arguments)};var i=n(r(87757)),o=n(r(59713)),s=n(r(48926)),a=n(r(83300));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(){return(p=(0,s.default)(i.default.mark((function e(t,r){var n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.default)(t,u(u({},r),{},{headers:u(u({},r.headers),{},{accept:"application/json"})}));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Failed to fetch JSON from server due to ".concat(n.status));case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},40460:(e,t,r)=>{"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.apply(this,arguments)};var i=n(r(87757)),o=n(r(48926)),s=n(r(11692));function a(){return(a=(0,o.default)(i.default.mark((function e(t){var r,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.default)("https://directline.botframework.com/v3/directline/tokens/refresh",{headers:{authorization:"Bearer ".concat(t)},method:"POST"});case 2:return r=e.sent,n=r.token,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},41511:(e,t,r)=>{e.exports=r(83363)},11128:(e,t,r)=>{e.exports=r(57784)},39392:(e,t,r)=>{e.exports=r(15868)},54943:(e,t,r)=>{e.exports=r(14471)},20368:(e,t,r)=>{e.exports=r(57396)},63978:(e,t,r)=>{e.exports=r(41910)},34074:(e,t,r)=>{e.exports=r(79427)},48604:(e,t,r)=>{e.exports=r(64477)},21611:(e,t,r)=>{e.exports=r(96507)},86902:(e,t,r)=>{e.exports=r(23059)},85507:(e,t,r)=>{e.exports=r(16670)},93476:(e,t,r)=>{e.exports=r(27460)},65420:(e,t,r)=>{e.exports=r(92547)},94727:(e,t,r)=>{e.exports=r(37168)},52424:(e,t,r)=>{e.exports=r(72010)},53592:(e,t,r)=>{e.exports=r(27385)},78363:(e,t,r)=>{e.exports=r(81522)},19996:(e,t,r)=>{e.exports=r(32209)},95238:(e,t,r)=>{e.exports=r(81493)},189:(e,t,r)=>{e.exports=r(76094)},44341:(e,t,r)=>{e.exports=r(73685)},24889:(e,t,r)=>{e.exports=r(74303)},79542:(e,t,r)=>{e.exports=r(55122)},13535:(e,t,r)=>{e.exports=r(10856)},51446:(e,t,r)=>{e.exports=r(86600)},23882:(e,t,r)=>{e.exports=r(9759)},34243:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},5824:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},26394:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},69198:(e,t,r)=>{var n=r(44341);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),n(e,i.key,i)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),n(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},86418:(e,t,r)=>{var n=r(51446),i=r(19996),o=r(78363),s=r(79299);e.exports=function(e,t){var r=void 0!==n&&i(e)||e["@@iterator"];if(!r){if(o(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,c=function(){};return{s:c,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,p=!0,h=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return p=e.done,e},e:function(e){h=!0,u=e},f:function(){try{p||null==r.return||r.return()}finally{if(h)throw u}}}},e.exports.__esModule=!0,e.exports.default=e.exports},10098:(e,t,r)=>{var n=r(13535),i=r(66380),o=r(8647),s=r(214);e.exports=function(e){var t=o();return function(){var r,o=i(e);if(t){var a=i(this).constructor;r=n(o,arguments,a)}else r=o.apply(this,arguments);return s(this,r)}},e.exports.__esModule=!0,e.exports.default=e.exports},66380:(e,t,r)=>{var n=r(79542),i=r(24889);function o(t){return e.exports=o=n?i:function(e){return e.__proto__||i(e)},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},51379:(e,t,r)=>{var n=r(189),i=r(44341),o=r(5613);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=n(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i(e,"prototype",{writable:!1}),t&&o(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},60530:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},8647:(e,t,r)=>{var n=r(13535);e.exports=function(){if("undefined"==typeof Reflect||!n)return!1;if(n.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(n(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},214:(e,t,r)=>{var n=r(23765).default,i=r(5824);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},5613:(e,t,r)=>{var n=r(79542);function i(t,r){return e.exports=i=n||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,i(t,r)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},23765:(e,t,r)=>{var n=r(51446),i=r(23882);function o(t){return e.exports=o="function"==typeof n&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof n&&e.constructor===n&&e!==n.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},79299:(e,t,r)=>{var n=r(95238),i=r(53592),o=r(34243);e.exports=function(e,t){var r;if(e){if("string"==typeof e)return o(e,t);var s=n(r=Object.prototype.toString.call(e)).call(r,8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?i(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?o(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},67228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0},23646:(e,t,r)=>{var n=r(67228);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},81506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},48926:e=>{function t(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var s=e.apply(r,n);function a(e){t(s,i,o,a,c,"next",e)}function c(e){t(s,i,o,a,c,"throw",e)}a(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},34575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},69100:(e,t,r)=>{var n=r(99489),i=r(57067);function o(t,r,s){return i()?(e.exports=o=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=o=function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o},e.exports.default=e.exports,e.exports.__esModule=!0),o.apply(null,arguments)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},93913:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0},59713:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},16525:(e,t,r)=>{var n=r(58331);function i(t,r,o){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,r){var i=n(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(r):o.value}},e.exports.default=e.exports,e.exports.__esModule=!0),i(t,r,o||t)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},29754:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},2205:(e,t,r)=>{var n=r(99489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},70430:e=>{e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.default=e.exports,e.exports.__esModule=!0},57067:e=>{e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},46860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},98206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},78585:(e,t,r)=>{var n=r(50008).default,i=r(81506);e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},2911:(e,t,r)=>{var n=r(58331),i=r(59713);function o(e,t,r,s){return o="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,o){var s,a=n(e,t);if(a){if((s=Object.getOwnPropertyDescriptor(a,t)).set)return s.set.call(o,r),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(o,t)){if(!s.writable)return!1;s.value=r,Object.defineProperty(o,t,s)}else i(o,t,r);return!0},o(e,t,r,s)}e.exports=function(e,t,r,n,i){if(!o(e,t,r,n||e)&&i)throw new Error("failed to set property");return r},e.exports.default=e.exports,e.exports.__esModule=!0},99489:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(r,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},58331:(e,t,r)=>{var n=r(29754);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},319:(e,t,r)=>{var n=r(23646),i=r(46860),o=r(60379),s=r(98206);e.exports=function(e){return n(e)||i(e)||o(e)||s()},e.exports.default=e.exports,e.exports.__esModule=!0},50008:e=>{function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},60379:(e,t,r)=>{var n=r(67228);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},65957:(e,t,r)=>{var n=r(29754),i=r(99489),o=r(70430),s=r(69100);function a(t){var r="function"==typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.default=e.exports,e.exports.__esModule=!0,a(t)}e.exports=a,e.exports.default=e.exports,e.exports.__esModule=!0},87757:(e,t,r)=>{e.exports=r(35666)},16418:(e,t,r)=>{"use strict";var n,i,o=r(60530).default,s=o(r(26394)),a=o(r(69198)),c=o(r(51379)),u=o(r(10098)),p=o(r(86418)),h=o(r(23765)),l=o(r(54943)),v=o(r(63978)),d=o(r(34074)),f=o(r(48604)),g=o(r(21611)),y=o(r(52424)),m=o(r(11128)),S=o(r(86902)),b=o(r(85507)),C=o(r(39392)),P=o(r(41511)),w=o(r(20368)),R=o(r(65420)),I=o(r(94727)),O=l.default,E=v.default,T=d.default,A=f.default,_=g.default,x=Object.prototype.hasOwnProperty,k=function(e,t){return function(){return t||(0,e[A(e)[0]])((t={exports:{}}).exports,t),t.exports}},M=k({"../abort-controller/node_modules/event-target-shim/dist/event-target-shim.js":function(e,t){(0,v.default)(e,"__esModule",{value:!0});var r=new y.default,n=new y.default;function i(e){var t=r.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function o(e){null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener)}function s(e,t){r.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||(0,m.default)()}),(0,v.default)(this,"isTrusted",{value:!1,enumerable:!0});for(var n=(0,S.default)(t),i=0;i<n.length;++i){var o=n[i];o in this||(0,v.default)(this,o,a(o))}}function a(e){return{get:function(){return i(this).event[e]},set:function(t){i(this).event[e]=t},configurable:!0,enumerable:!0}}function c(e){return{value:function(){var t=i(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function u(e){if(null==e||e===Object.prototype)return s;var t=n.get(e);return null==t&&(t=function(e,t){var r=(0,S.default)(t);if(0===r.length)return e;function n(t,r){e.call(this,t,r)}n.prototype=(0,l.default)(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(var i=0;i<r.length;++i){var o=r[i];if(!(o in e.prototype)){var s="function"==typeof(0,d.default)(t,o).value;(0,v.default)(n.prototype,o,s?c(o):a(o))}}return n}(u((0,g.default)(e)),e),n.set(e,t)),t}function p(e){return i(e).immediateStopped}function f(e,t){i(e).passiveListener=t}s.prototype={get type(){return i(this).event.type},get target(){return i(this).eventTarget},get currentTarget(){return i(this).currentTarget},composedPath:function(){var e=i(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return i(this).eventPhase},stopPropagation:function(){var e=i(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation:function(){var e=i(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(i(this).event.bubbles)},get cancelable(){return Boolean(i(this).event.cancelable)},preventDefault:function(){o(i(this))},get defaultPrevented(){return i(this).canceled},get composed(){return Boolean(i(this).event.composed)},get timeStamp(){return i(this).timeStamp},get srcElement(){return i(this).eventTarget},get cancelBubble(){return i(this).stopped},set cancelBubble(e){if(e){var t=i(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)}},get returnValue(){return!i(this).canceled},set returnValue(e){e||o(i(this))},initEvent:function(){}},(0,v.default)(s.prototype,"constructor",{value:s,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&((0,b.default)(s.prototype,window.Event.prototype),n.set(window.Event.prototype,s));var w=new y.default;function R(e){return null!==e&&"object"===(0,h.default)(e)}function I(e){var t=w.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function O(e,t){(0,v.default)(e,"on".concat(t),function(e){return{get:function(){for(var t=I(this).get(e);null!=t;){if(3===t.listenerType)return t.listener;t=t.next}return null},set:function(t){"function"==typeof t||R(t)||(t=null);for(var r=I(this),n=null,i=r.get(e);null!=i;)3===i.listenerType?null!==n?n.next=i.next:null!==i.next?r.set(e,i.next):r.delete(e):n=i,i=i.next;if(null!==t){var o={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===n?r.set(e,o):n.next=o}},configurable:!0,enumerable:!0}}(t))}function E(e){function t(){T.call(this)}t.prototype=(0,l.default)(T.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(var r=0;r<e.length;++r)O(t.prototype,e[r]);return t}function T(){if(!(this instanceof T)){if(1===arguments.length&&(0,P.default)(arguments[0]))return E(arguments[0]);if(arguments.length>0){for(var e=new Array(arguments.length),t=0;t<arguments.length;++t)e[t]=arguments[t];return E(e)}throw new TypeError("Cannot call a class as a function")}w.set(this,new C.default)}T.prototype={addEventListener:function(e,t,r){if(null!=t){if("function"!=typeof t&&!R(t))throw new TypeError("'listener' should be a function or an object.");var n=I(this),i=R(r),o=(i?Boolean(r.capture):Boolean(r))?1:2,s={listener:t,listenerType:o,passive:i&&Boolean(r.passive),once:i&&Boolean(r.once),next:null},a=n.get(e);if(void 0!==a){for(var c=null;null!=a;){if(a.listener===t&&a.listenerType===o)return;c=a,a=a.next}c.next=s}else n.set(e,s)}},removeEventListener:function(e,t,r){if(null!=t)for(var n=I(this),i=(R(r)?Boolean(r.capture):Boolean(r))?1:2,o=null,s=n.get(e);null!=s;){if(s.listener===t&&s.listenerType===i)return void(null!==o?o.next=s.next:null!==s.next?n.set(e,s.next):n.delete(e));o=s,s=s.next}},dispatchEvent:function(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');var t=I(this),r=e.type,n=t.get(r);if(null==n)return!0;for(var o=function(e,t){return new(u((0,g.default)(t)))(e,t)}(this,e),s=null;null!=n;){if(n.once?null!==s?s.next=n.next:null!==n.next?t.set(r,n.next):t.delete(r):s=n,f(o,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,o)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(o);if(p(o))break;n=n.next}return f(o,null),function(e,t){i(e).eventPhase=0}(o),function(e,t){i(e).currentTarget=null}(o),!o.defaultPrevented}},(0,v.default)(T.prototype,"constructor",{value:T,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&(0,b.default)(T.prototype,window.EventTarget.prototype),e.defineEventAttribute=O,e.EventTarget=T,e.default=T,t.exports=T,t.exports.EventTarget=t.exports.default=T,t.exports.defineEventAttribute=O}}),D=k({"../abort-controller/dist/abort-controller.js":function(e,t){(0,v.default)(e,"__esModule",{value:!0});var r=M(),n=function(e){(0,c.default)(r,e);var t=(0,u.default)(r);function r(){throw(0,s.default)(this,r),t.call(this),new TypeError("AbortSignal cannot be constructed directly")}return(0,a.default)(r,[{key:"aborted",get:function(){var e=i.get(this);if("boolean"!=typeof e)throw new TypeError("Expected 'this' to be an 'AbortSignal' object, but got ".concat(null===this?"null":(0,h.default)(this)));return e}}]),r}(r.EventTarget);r.defineEventAttribute(n.prototype,"abort");var i=new y.default;(0,w.default)(n.prototype,{aborted:{enumerable:!0}}),"function"==typeof R.default&&"symbol"===(0,h.default)(I.default)&&(0,v.default)(n.prototype,I.default,{configurable:!0,value:"AbortSignal"});var o=function(){function e(){var t;(0,s.default)(this,e),p.set(this,(t=(0,l.default)(n.prototype),r.EventTarget.call(t),i.set(t,!1),t))}return(0,a.default)(e,[{key:"signal",get:function(){return d(this)}},{key:"abort",value:function(){var e;e=d(this),!1===i.get(e)&&(i.set(e,!0),e.dispatchEvent({type:"abort"}))}}]),e}(),p=new y.default;function d(e){var t=p.get(e);if(null==t)throw new TypeError("Expected 'this' to be an 'AbortController' object, but got ".concat(null===e?"null":(0,h.default)(e)));return t}(0,w.default)(o.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof R.default&&"symbol"===(0,h.default)(I.default)&&(0,v.default)(o.prototype,I.default,{configurable:!0,value:"AbortController"}),e.AbortController=o,e.AbortSignal=n,e.default=o,t.exports=o,t.exports.AbortController=t.exports.default=o,t.exports.AbortSignal=n}}),j=(n=D(),function(e,t,r,n){if(t&&"object"===(0,h.default)(t)||"function"==typeof t){var i,o=(0,p.default)(A(t));try{var s=function(){var r=i.value;x.call(e,r)||"default"===r||E(e,r,{get:function(){return t[r]},enumerable:!(n=T(t,r))||n.enumerable})};for(o.s();!(i=o.n()).done;)s()}catch(e){o.e(e)}finally{o.f()}}return e}((i=E(null!=n?O(_(n)):{},"default",n&&n.__esModule?{get:function(){return n.default},enumerable:!0}:{value:n,enumerable:!0}),E(i,"__esModule",{value:!0})),n)),z=("undefined"==typeof window?{}:window).AbortController||j.default,N=("undefined"==typeof window?{}:window).AbortSignal||j.AbortSignal;e.exports={AbortController:z,AbortSignal:N,default:z}},33704:(e,t)=>{!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<e.length;n++)r[e.charCodeAt(n)]=n;t.encode=function(t){var r,n=new Uint8Array(t),i=n.length,o="";for(r=0;r<i;r+=3)o+=e[n[r]>>2],o+=e[(3&n[r])<<4|n[r+1]>>4],o+=e[(15&n[r+1])<<2|n[r+2]>>6],o+=e[63&n[r+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,n,i,o,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var p=new ArrayBuffer(a),h=new Uint8Array(p);for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)],i=r[e.charCodeAt(t+1)],o=r[e.charCodeAt(t+2)],s=r[e.charCodeAt(t+3)],h[u++]=n<<2|i>>4,h[u++]=(15&i)<<4|o>>2,h[u++]=(3&o)<<6|63&s;return p}}()},95299:(e,t,r)=>{var n=r(27698);e.exports=n},83450:(e,t,r)=>{var n=r(83363);e.exports=n},66820:(e,t,r)=>{var n=r(56243);e.exports=n},84234:(e,t,r)=>{var n=r(82073);e.exports=n},32271:(e,t,r)=>{var n=r(14471);e.exports=n},43536:(e,t,r)=>{var n=r(41910);e.exports=n},99565:(e,t,r)=>{var n=r(96507);e.exports=n},78690:(e,t,r)=>{var n=r(16670);e.exports=n},84670:(e,t,r)=>{var n=r(61895);e.exports=n},80281:(e,t,r)=>{var n=r(92547);e.exports=n},40031:(e,t,r)=>{var n=r(46509);e.exports=n},54493:(e,t,r)=>{r(77971),r(53242);var n=r(54058);e.exports=n.Array.from},24034:(e,t,r)=>{r(92737);var n=r(54058);e.exports=n.Array.isArray},24900:(e,t,r)=>{r(60186);var n=r(35703);e.exports=n("Array").slice},81103:(e,t,r)=>{r(95160);var n=r(54058);e.exports=n.Date.now},13830:(e,t,r)=>{r(66274),r(77971);var n=r(22902);e.exports=n},69601:(e,t,r)=>{var n=r(7046),i=r(24900),o=Array.prototype;e.exports=function(e){var t=e.slice;return e===o||n(o,e)&&t===o.slice?i:t}},91018:(e,t,r)=>{r(66274),r(37501),r(55967),r(77971);var n=r(54058);e.exports=n.Map},35254:(e,t,r)=>{r(53882);var n=r(54058).Object;e.exports=function(e,t){return n.create(e,t)}},7702:(e,t,r)=>{r(74979);var n=r(54058).Object,i=e.exports=function(e,t){return n.defineProperties(e,t)};n.defineProperties.sham&&(i.sham=!0)},48171:(e,t,r)=>{r(86450);var n=r(54058).Object,i=e.exports=function(e,t,r){return n.defineProperty(e,t,r)};n.defineProperty.sham&&(i.sham=!0)},286:(e,t,r)=>{r(46924);var n=r(54058).Object,i=e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)};n.getOwnPropertyDescriptor.sham&&(i.sham=!0)},83288:(e,t,r)=>{r(9816);var n=r(54058).Object;e.exports=function(e){return n.getOwnPropertyNames(e)}},13966:(e,t,r)=>{r(17405);var n=r(54058);e.exports=n.Object.getPrototypeOf},48494:(e,t,r)=>{r(21724);var n=r(54058);e.exports=n.Object.keys},3065:(e,t,r)=>{r(90108);var n=r(54058);e.exports=n.Object.setPrototypeOf},52956:(e,t,r)=>{r(47627),r(66274),r(55967),r(98881),r(4560),r(91302),r(44349),r(77971);var n=r(54058);e.exports=n.Promise},14983:(e,t,r)=>{r(7453);var n=r(54058);e.exports=n.Reflect.construct},57473:(e,t,r)=>{r(85906),r(55967),r(35824),r(8555),r(52615),r(21732),r(35903),r(1825),r(28394),r(45915),r(61766),r(62737),r(89911),r(74315),r(63131),r(64714),r(70659),r(69120),r(79413),r(1502);var n=r(54058);e.exports=n.Symbol},24227:(e,t,r)=>{r(66274),r(55967),r(77971),r(1825);var n=r(11477);e.exports=n.f("iterator")},85112:(e,t,r)=>{r(69120),r(79413),r(55967),r(1502),r(64714);var n=r(11477);e.exports=n.f("toStringTag")},32304:(e,t,r)=>{r(66274),r(55967),r(54334);var n=r(54058);e.exports=n.WeakMap},27385:(e,t,r)=>{var n=r(95299);e.exports=n},81522:(e,t,r)=>{var n=r(83450);e.exports=n},32209:(e,t,r)=>{var n=r(66820);e.exports=n},81493:(e,t,r)=>{var n=r(84234);e.exports=n},76094:(e,t,r)=>{var n=r(32271);e.exports=n},73685:(e,t,r)=>{var n=r(43536);e.exports=n},74303:(e,t,r)=>{var n=r(99565);e.exports=n},55122:(e,t,r)=>{var n=r(78690);e.exports=n},10856:(e,t,r)=>{var n=r(84670);e.exports=n},86600:(e,t,r)=>{var n=r(80281);r(28783),r(43975),r(65799),r(45414),r(46774),r(80620),r(36172),e.exports=n},9759:(e,t,r)=>{var n=r(40031);e.exports=n},24883:(e,t,r)=>{var n=r(21899),i=r(57475),o=r(69826),s=n.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not a function")}},174:(e,t,r)=>{var n=r(21899),i=r(24284),o=r(69826),s=n.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not a constructor")}},11851:(e,t,r)=>{var n=r(21899),i=r(57475),o=n.String,s=n.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw s("Can't set "+o(e)+" as a prototype")}},18479:e=>{e.exports=function(){}},5743:(e,t,r)=>{var n=r(21899),i=r(7046),o=n.TypeError;e.exports=function(e,t){if(i(t,e))return e;throw o("Incorrect invocation")}},96059:(e,t,r)=>{var n=r(21899),i=r(10941),o=n.String,s=n.TypeError;e.exports=function(e){if(i(e))return e;throw s(o(e)+" is not an object")}},97135:(e,t,r)=>{var n=r(95981);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},11354:(e,t,r)=>{"use strict";var n=r(21899),i=r(86843),o=r(78834),s=r(89678),a=r(75196),c=r(6782),u=r(24284),p=r(10623),h=r(55449),l=r(53476),v=r(22902),d=n.Array;e.exports=function(e){var t=s(e),r=u(this),n=arguments.length,f=n>1?arguments[1]:void 0,g=void 0!==f;g&&(f=i(f,n>2?arguments[2]:void 0));var y,m,S,b,C,P,w=v(t),R=0;if(!w||this==d&&c(w))for(y=p(t),m=r?new this(y):d(y);y>R;R++)P=g?f(t[R],R):t[R],h(m,R,P);else for(C=(b=l(t,w)).next,m=r?new this:[];!(S=o(C,b)).done;R++)P=g?a(b,f,[S.value,R],!0):S.value,h(m,R,P);return m.length=R,m}},31692:(e,t,r)=>{var n=r(74529),i=r(59413),o=r(10623),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c),p=i(s,u);if(e&&r!=r){for(;u>p;)if((a=c[p++])!=a)return!0}else for(;u>p;p++)if((e||p in c)&&c[p]===r)return e||p||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},3610:(e,t,r)=>{var n=r(86843),i=r(95329),o=r(37026),s=r(89678),a=r(10623),c=r(64692),u=i([].push),p=function(e){var t=1==e,r=2==e,i=3==e,p=4==e,h=6==e,l=7==e,v=5==e||h;return function(d,f,g,y){for(var m,S,b=s(d),C=o(b),P=n(f,g),w=a(C),R=0,I=y||c,O=t?I(d,w):r||l?I(d,0):void 0;w>R;R++)if((v||R in C)&&(S=P(m=C[R],R,b),e))if(t)O[R]=S;else if(S)switch(e){case 3:return!0;case 5:return m;case 6:return R;case 2:u(O,m)}else switch(e){case 4:return!1;case 7:u(O,m)}return h?-1:i||p?p:O}};e.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)}},50568:(e,t,r)=>{var n=r(95981),i=r(99813),o=r(53385),s=i("species");e.exports=function(e){return o>=51||!n((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},15790:(e,t,r)=>{var n=r(21899),i=r(59413),o=r(10623),s=r(55449),a=n.Array,c=Math.max;e.exports=function(e,t,r){for(var n=o(e),u=i(t,n),p=i(void 0===r?n:r,n),h=a(c(p-u,0)),l=0;u<p;u++,l++)s(h,l,e[u]);return h.length=l,h}},93765:(e,t,r)=>{var n=r(95329);e.exports=n([].slice)},5693:(e,t,r)=>{var n=r(21899),i=r(1052),o=r(24284),s=r(10941),a=r(99813)("species"),c=n.Array;e.exports=function(e){var t;return i(e)&&(t=e.constructor,(o(t)&&(t===c||i(t.prototype))||s(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?c:t}},64692:(e,t,r)=>{var n=r(5693);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},75196:(e,t,r)=>{var n=r(96059),i=r(7609);e.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){i(e,"throw",t)}}},21385:(e,t,r)=>{var n=r(99813)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},82532:(e,t,r)=>{var n=r(95329),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},9697:(e,t,r)=>{var n=r(21899),i=r(22885),o=r(57475),s=r(82532),a=r(99813)("toStringTag"),c=n.Object,u="Arguments"==s(function(){return arguments}());e.exports=i?s:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=c(e),a))?r:u?s(t):"Object"==(n=s(t))&&o(t.callee)?"Arguments":n}},38694:(e,t,r)=>{var n=r(95329)("".replace),i=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,s=o.test(i);e.exports=function(e,t){if(s&&"string"==typeof e)for(;t--;)e=n(e,o,"");return e}},85616:(e,t,r)=>{"use strict";var n=r(65988).f,i=r(29290),o=r(87524),s=r(86843),a=r(5743),c=r(93091),u=r(47771),p=r(94431),h=r(55746),l=r(21647).fastKey,v=r(45402),d=v.set,f=v.getterFor;e.exports={getConstructor:function(e,t,r,u){var p=e((function(e,n){a(e,v),d(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),h||(e.size=0),null!=n&&c(n,e[u],{that:e,AS_ENTRIES:r})})),v=p.prototype,g=f(t),y=function(e,t,r){var n,i,o=g(e),s=m(e,t);return s?s.value=r:(o.last=s={index:i=l(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=s),n&&(n.next=s),h?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},m=function(e,t){var r,n=g(e),i=l(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return o(v,{clear:function(){for(var e=g(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,h?e.size=0:this.size=0},delete:function(e){var t=this,r=g(t),n=m(t,e);if(n){var i=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),r.first==n&&(r.first=i),r.last==n&&(r.last=o),h?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=g(this),n=s(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!m(this,e)}}),o(v,r?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),h&&n(v,"size",{get:function(){return g(this).size}}),p},setStrong:function(e,t,r){var n=t+" Iterator",i=f(t),o=f(n);u(e,t,(function(e,t){d(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),p(t)}}},8850:(e,t,r)=>{"use strict";var n=r(95329),i=r(87524),o=r(21647).getWeakData,s=r(96059),a=r(10941),c=r(5743),u=r(93091),p=r(3610),h=r(90953),l=r(45402),v=l.set,d=l.getterFor,f=p.find,g=p.findIndex,y=n([].splice),m=0,S=function(e){return e.frozen||(e.frozen=new b)},b=function(){this.entries=[]},C=function(e,t){return f(e.entries,(function(e){return e[0]===t}))};b.prototype={get:function(e){var t=C(this,e);if(t)return t[1]},has:function(e){return!!C(this,e)},set:function(e,t){var r=C(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=g(this.entries,(function(t){return t[0]===e}));return~t&&y(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var p=e((function(e,i){c(e,l),v(e,{type:t,id:m++,frozen:void 0}),null!=i&&u(i,e[n],{that:e,AS_ENTRIES:r})})),l=p.prototype,f=d(t),g=function(e,t,r){var n=f(e),i=o(s(t),!0);return!0===i?S(n).set(t,r):i[n.id]=r,e};return i(l,{delete:function(e){var t=f(this);if(!a(e))return!1;var r=o(e);return!0===r?S(t).delete(e):r&&h(r,t.id)&&delete r[t.id]},has:function(e){var t=f(this);if(!a(e))return!1;var r=o(e);return!0===r?S(t).has(e):r&&h(r,t.id)}}),i(l,r?{get:function(e){var t=f(this);if(a(e)){var r=o(e);return!0===r?S(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return g(this,e,t)}}:{add:function(e){return g(this,e,!0)}}),p}}},24683:(e,t,r)=>{"use strict";var n=r(76887),i=r(21899),o=r(21647),s=r(95981),a=r(32029),c=r(93091),u=r(5743),p=r(57475),h=r(10941),l=r(90904),v=r(65988).f,d=r(3610).forEach,f=r(55746),g=r(45402),y=g.set,m=g.getterFor;e.exports=function(e,t,r){var g,S=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),C=S?"set":"add",P=i[e],w=P&&P.prototype,R={};if(f&&p(P)&&(b||w.forEach&&!s((function(){(new P).entries().next()})))){var I=(g=t((function(t,r){y(u(t,I),{type:e,collection:new P}),null!=r&&c(r,t[C],{that:t,AS_ENTRIES:S})}))).prototype,O=m(e);d(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in w)||b&&"clear"==e||a(I,e,(function(r,n){var i=O(this).collection;if(!t&&b&&!h(r))return"get"==e&&void 0;var o=i[e](0===r?0:r,n);return t?this:o}))})),b||v(I,"size",{configurable:!0,get:function(){return O(this).collection.size}})}else g=r.getConstructor(t,e,S,C),o.enable();return l(g,e,!1,!0),R[e]=g,n({global:!0,forced:!0},R),b||r.setStrong(g,e,S),g}},23489:(e,t,r)=>{var n=r(90953),i=r(31136),o=r(49677),s=r(65988);e.exports=function(e,t,r){for(var a=i(t),c=s.f,u=o.f,p=0;p<a.length;p++){var h=a[p];n(e,h)||r&&n(r,h)||c(e,h,u(t,h))}}},64160:(e,t,r)=>{var n=r(95981);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},31046:(e,t,r)=>{"use strict";var n=r(35143).IteratorPrototype,i=r(29290),o=r(31887),s=r(90904),a=r(12077),c=function(){return this};e.exports=function(e,t,r,u){var p=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),s(e,p,!1,!0),a[p]=c,e}},32029:(e,t,r)=>{var n=r(55746),i=r(65988),o=r(31887);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},31887:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},55449:(e,t,r)=>{"use strict";var n=r(83894),i=r(65988),o=r(31887);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},47771:(e,t,r)=>{"use strict";var n=r(76887),i=r(78834),o=r(82529),s=r(79417),a=r(57475),c=r(31046),u=r(249),p=r(88929),h=r(90904),l=r(32029),v=r(99754),d=r(99813),f=r(12077),g=r(35143),y=s.PROPER,m=s.CONFIGURABLE,S=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,C=d("iterator"),P="keys",w="values",R="entries",I=function(){return this};e.exports=function(e,t,r,s,d,g,O){c(r,t,s);var E,T,A,_=function(e){if(e===d&&j)return j;if(!b&&e in M)return M[e];switch(e){case P:case w:case R:return function(){return new r(this,e)}}return function(){return new r(this)}},x=t+" Iterator",k=!1,M=e.prototype,D=M[C]||M["@@iterator"]||d&&M[d],j=!b&&D||_(d),z="Array"==t&&M.entries||D;if(z&&(E=u(z.call(new e)))!==Object.prototype&&E.next&&(o||u(E)===S||(p?p(E,S):a(E[C])||v(E,C,I)),h(E,x,!0,!0),o&&(f[x]=I)),y&&d==w&&D&&D.name!==w&&(!o&&m?l(M,"name",w):(k=!0,j=function(){return i(D,this)})),d)if(T={values:_(w),keys:g?j:_(P),entries:_(R)},O)for(A in T)(b||k||!(A in M))&&v(M,A,T[A]);else n({target:t,proto:!0,forced:b||k},T);return o&&!O||M[C]===j||v(M,C,j,{name:d}),f[t]=j,T}},66349:(e,t,r)=>{var n=r(54058),i=r(90953),o=r(11477),s=r(65988).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},55746:(e,t,r)=>{var n=r(95981);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},61333:(e,t,r)=>{var n=r(21899),i=r(10941),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},63281:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},23321:e=>{e.exports="object"==typeof window},4470:(e,t,r)=>{var n=r(2861),i=r(21899);e.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==i.Pebble},22749:(e,t,r)=>{var n=r(2861);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},6049:(e,t,r)=>{var n=r(82532),i=r(21899);e.exports="process"==n(i.process)},58045:(e,t,r)=>{var n=r(2861);e.exports=/web0s(?!.*chrome)/i.test(n)},2861:(e,t,r)=>{var n=r(626);e.exports=n("navigator","userAgent")||""},53385:(e,t,r)=>{var n,i,o=r(21899),s=r(2861),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,p=u&&u.v8;p&&(i=(n=p.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},35703:(e,t,r)=>{var n=r(54058);e.exports=function(e){return n[e+"Prototype"]}},56759:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},18780:(e,t,r)=>{var n=r(95981),i=r(31887);e.exports=!n((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)}))},76887:(e,t,r)=>{"use strict";var n=r(21899),i=r(79730),o=r(95329),s=r(57475),a=r(49677).f,c=r(37252),u=r(54058),p=r(86843),h=r(32029),l=r(90953),v=function(e){var t=function(r,n,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,o)}return i(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var r,i,d,f,g,y,m,S,b=e.target,C=e.global,P=e.stat,w=e.proto,R=C?n:P?n[b]:(n[b]||{}).prototype,I=C?u:u[b]||h(u,b,{})[b],O=I.prototype;for(d in t)r=!c(C?d:b+(P?".":"#")+d,e.forced)&&R&&l(R,d),g=I[d],r&&(y=e.noTargetGet?(S=a(R,d))&&S.value:R[d]),f=r&&y?y:t[d],r&&typeof g==typeof f||(m=e.bind&&r?p(f,n):e.wrap&&r?v(f):w&&s(f)?o(f):f,(e.sham||f&&f.sham||g&&g.sham)&&h(m,"sham",!0),h(I,d,m),w&&(l(u,i=b+"Prototype")||h(u,i,{}),h(u[i],d,f),e.real&&O&&!O[d]&&h(O,d,f)))}},95981:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},45602:(e,t,r)=>{var n=r(95981);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},79730:(e,t,r)=>{var n=r(18285),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},86843:(e,t,r)=>{var n=r(95329),i=r(24883),o=r(18285),s=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},18285:(e,t,r)=>{var n=r(95981);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},98308:(e,t,r)=>{"use strict";var n=r(21899),i=r(95329),o=r(24883),s=r(10941),a=r(90953),c=r(93765),u=r(18285),p=n.Function,h=i([].concat),l=i([].join),v={},d=function(e,t,r){if(!a(v,t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";v[t]=p("C,a","return new C("+l(n,",")+")")}return v[t](e,r)};e.exports=u?p.bind:function(e){var t=o(this),r=t.prototype,n=c(arguments,1),i=function(){var r=h(n,c(arguments));return this instanceof i?d(t,r.length,r):t.apply(e,r)};return s(r)&&(i.prototype=r),i}},78834:(e,t,r)=>{var n=r(18285),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},79417:(e,t,r)=>{var n=r(55746),i=r(90953),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},95329:(e,t,r)=>{var n=r(18285),i=Function.prototype,o=i.bind,s=i.call,a=n&&o.bind(s,s);e.exports=n?function(e){return e&&a(e)}:function(e){return e&&function(){return s.apply(e,arguments)}}},626:(e,t,r)=>{var n=r(54058),i=r(21899),o=r(57475),s=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e])||s(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},22902:(e,t,r)=>{var n=r(9697),i=r(14229),o=r(12077),s=r(99813)("iterator");e.exports=function(e){if(null!=e)return i(e,s)||i(e,"@@iterator")||o[n(e)]}},53476:(e,t,r)=>{var n=r(21899),i=r(78834),o=r(24883),s=r(96059),a=r(69826),c=r(22902),u=n.TypeError;e.exports=function(e,t){var r=arguments.length<2?c(e):t;if(o(r))return s(i(r,e));throw u(a(e)+" is not iterable")}},14229:(e,t,r)=>{var n=r(24883);e.exports=function(e,t){var r=e[t];return null==r?void 0:n(r)}},21899:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},90953:(e,t,r)=>{var n=r(95329),i=r(89678),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},27748:e=>{e.exports={}},34845:(e,t,r)=>{var n=r(21899);e.exports=function(e,t){var r=n.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))}},15463:(e,t,r)=>{var n=r(626);e.exports=n("document","documentElement")},2840:(e,t,r)=>{var n=r(55746),i=r(95981),o=r(61333);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},37026:(e,t,r)=>{var n=r(21899),i=r(95329),o=r(95981),s=r(82532),a=n.Object,c=i("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?c(e,""):a(e)}:a},81302:(e,t,r)=>{var n=r(95329),i=r(57475),o=r(63030),s=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},53794:(e,t,r)=>{var n=r(10941),i=r(32029);e.exports=function(e,t){n(t)&&"cause"in t&&i(e,"cause",t.cause)}},21647:(e,t,r)=>{var n=r(76887),i=r(95329),o=r(27748),s=r(10941),a=r(90953),c=r(65988).f,u=r(10946),p=r(684),h=r(91584),l=r(99418),v=r(45602),d=!1,f=l("meta"),g=0,y=function(e){c(e,f,{value:{objectID:"O"+g++,weakData:{}}})},m=e.exports={enable:function(){m.enable=function(){},d=!0;var e=u.f,t=i([].splice),r={};r[f]=1,e(r).length&&(u.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===f){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,f)){if(!h(e))return"F";if(!t)return"E";y(e)}return e[f].objectID},getWeakData:function(e,t){if(!a(e,f)){if(!h(e))return!0;if(!t)return!1;y(e)}return e[f].weakData},onFreeze:function(e){return v&&d&&h(e)&&!a(e,f)&&y(e),e}};o[f]=!0},45402:(e,t,r)=>{var n,i,o,s=r(38019),a=r(21899),c=r(95329),u=r(10941),p=r(32029),h=r(90953),l=r(63030),v=r(44262),d=r(27748),f="Object already initialized",g=a.TypeError,y=a.WeakMap;if(s||l.state){var m=l.state||(l.state=new y),S=c(m.get),b=c(m.has),C=c(m.set);n=function(e,t){if(b(m,e))throw new g(f);return t.facade=e,C(m,e,t),t},i=function(e){return S(m,e)||{}},o=function(e){return b(m,e)}}else{var P=v("state");d[P]=!0,n=function(e,t){if(h(e,P))throw new g(f);return t.facade=e,p(e,P,t),t},i=function(e){return h(e,P)?e[P]:{}},o=function(e){return h(e,P)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return r}}}},6782:(e,t,r)=>{var n=r(99813),i=r(12077),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},1052:(e,t,r)=>{var n=r(82532);e.exports=Array.isArray||function(e){return"Array"==n(e)}},57475:e=>{e.exports=function(e){return"function"==typeof e}},24284:(e,t,r)=>{var n=r(95329),i=r(95981),o=r(57475),s=r(9697),a=r(626),c=r(81302),u=function(){},p=[],h=a("Reflect","construct"),l=/^\s*(?:class|function)\b/,v=n(l.exec),d=!l.exec(u),f=function(e){if(!o(e))return!1;try{return h(u,p,e),!0}catch(e){return!1}},g=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!v(l,c(e))}catch(e){return!0}};g.sham=!0,e.exports=!h||i((function(){var e;return f(f.call)||!f(Object)||!f((function(){e=!0}))||e}))?g:f},37252:(e,t,r)=>{var n=r(95981),i=r(57475),o=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r==p||r!=u&&(i(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",p=s.POLYFILL="P";e.exports=s},10941:(e,t,r)=>{var n=r(57475);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},82529:e=>{e.exports=!0},56664:(e,t,r)=>{var n=r(21899),i=r(626),o=r(57475),s=r(7046),a=r(32302),c=n.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&s(t.prototype,c(e))}},93091:(e,t,r)=>{var n=r(21899),i=r(86843),o=r(78834),s=r(96059),a=r(69826),c=r(6782),u=r(10623),p=r(7046),h=r(53476),l=r(22902),v=r(7609),d=n.TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,r){var n,y,m,S,b,C,P,w=r&&r.that,R=!(!r||!r.AS_ENTRIES),I=!(!r||!r.IS_ITERATOR),O=!(!r||!r.INTERRUPTED),E=i(t,w),T=function(e){return n&&v(n,"normal",e),new f(!0,e)},A=function(e){return R?(s(e),O?E(e[0],e[1],T):E(e[0],e[1])):O?E(e,T):E(e)};if(I)n=e;else{if(!(y=l(e)))throw d(a(e)+" is not iterable");if(c(y)){for(m=0,S=u(e);S>m;m++)if((b=A(e[m]))&&p(g,b))return b;return new f(!1)}n=h(e,y)}for(C=n.next;!(P=o(C,n)).done;){try{b=A(P.value)}catch(e){v(n,"throw",e)}if("object"==typeof b&&b&&p(g,b))return b}return new f(!1)}},7609:(e,t,r)=>{var n=r(78834),i=r(96059),o=r(14229);e.exports=function(e,t,r){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return i(s),r}},35143:(e,t,r)=>{"use strict";var n,i,o,s=r(95981),a=r(57475),c=r(29290),u=r(249),p=r(99754),h=r(99813),l=r(82529),v=h("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(n=i):d=!0),null==n||s((function(){var e={};return n[v].call(e)!==e}))?n={}:l&&(n=c(n)),a(n[v])||p(n,v,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},12077:e=>{e.exports={}},10623:(e,t,r)=>{var n=r(43057);e.exports=function(e){return n(e.length)}},66132:(e,t,r)=>{var n,i,o,s,a,c,u,p,h=r(21899),l=r(86843),v=r(49677).f,d=r(42941).set,f=r(22749),g=r(4470),y=r(58045),m=r(6049),S=h.MutationObserver||h.WebKitMutationObserver,b=h.document,C=h.process,P=h.Promise,w=v(h,"queueMicrotask"),R=w&&w.value;R||(n=function(){var e,t;for(m&&(e=C.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?s():o=void 0,e}}o=void 0,e&&e.enter()},f||m||y||!S||!b?!g&&P&&P.resolve?((u=P.resolve(void 0)).constructor=P,p=l(u.then,u),s=function(){p(n)}):m?s=function(){C.nextTick(n)}:(d=l(d,h),s=function(){d(n)}):(a=!0,c=b.createTextNode(""),new S(n).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),e.exports=R||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,s()),o=t}},19297:(e,t,r)=>{var n=r(21899);e.exports=n.Promise},72497:(e,t,r)=>{var n=r(53385),i=r(95981);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},38019:(e,t,r)=>{var n=r(21899),i=r(57475),o=r(81302),s=n.WeakMap;e.exports=i(s)&&/native code/.test(o(s))},69520:(e,t,r)=>{"use strict";var n=r(24883),i=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},14649:(e,t,r)=>{var n=r(85803);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:n(e)}},29290:(e,t,r)=>{var n,i=r(96059),o=r(59938),s=r(56759),a=r(27748),c=r(15463),u=r(61333),p=r(44262)("IE_PROTO"),h=function(){},l=function(e){return"<script>"+e+"<\/script>"},v=function(e){e.write(l("")),e.close();var t=e.parentWindow.Object;return e=null,t},d=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;d="undefined"!=typeof document?document.domain&&n?v(n):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(l("document.F=Object")),e.close(),e.F):v(n);for(var r=s.length;r--;)delete d.prototype[s[r]];return d()};a[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h.prototype=i(e),r=new h,h.prototype=null,r[p]=e):r=d(),void 0===t?r:o.f(r,t)}},59938:(e,t,r)=>{var n=r(55746),i=r(83937),o=r(65988),s=r(96059),a=r(74529),c=r(14771);t.f=n&&!i?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),i=c(t),u=i.length,p=0;u>p;)o.f(e,r=i[p++],n[r]);return e}},65988:(e,t,r)=>{var n=r(21899),i=r(55746),o=r(2840),s=r(83937),a=r(96059),c=r(83894),u=n.TypeError,p=Object.defineProperty,h=Object.getOwnPropertyDescriptor;t.f=i?s?function(e,t,r){if(a(e),t=c(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var n=h(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return p(e,t,r)}:p:function(e,t,r){if(a(e),t=c(t),a(r),o)try{return p(e,t,r)}catch(e){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},49677:(e,t,r)=>{var n=r(55746),i=r(78834),o=r(36760),s=r(31887),a=r(74529),c=r(83894),u=r(90953),p=r(2840),h=Object.getOwnPropertyDescriptor;t.f=n?h:function(e,t){if(e=a(e),t=c(t),p)try{return h(e,t)}catch(e){}if(u(e,t))return s(!i(o.f,e,t),e[t])}},684:(e,t,r)=>{var n=r(82532),i=r(74529),o=r(10946).f,s=r(15790),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==n(e)?function(e){try{return o(e)}catch(e){return s(a)}}(e):o(i(e))}},10946:(e,t,r)=>{var n=r(55629),i=r(56759).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},87857:(e,t)=>{t.f=Object.getOwnPropertySymbols},249:(e,t,r)=>{var n=r(21899),i=r(90953),o=r(57475),s=r(89678),a=r(44262),c=r(64160),u=a("IE_PROTO"),p=n.Object,h=p.prototype;e.exports=c?p.getPrototypeOf:function(e){var t=s(e);if(i(t,u))return t[u];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof p?h:null}},91584:(e,t,r)=>{var n=r(95981),i=r(10941),o=r(82532),s=r(97135),a=Object.isExtensible,c=n((function(){a(1)}));e.exports=c||s?function(e){return!!i(e)&&(!s||"ArrayBuffer"!=o(e))&&(!a||a(e))}:a},7046:(e,t,r)=>{var n=r(95329);e.exports=n({}.isPrototypeOf)},55629:(e,t,r)=>{var n=r(95329),i=r(90953),o=r(74529),s=r(31692).indexOf,a=r(27748),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,p=[];for(r in n)!i(a,r)&&i(n,r)&&c(p,r);for(;t.length>u;)i(n,r=t[u++])&&(~s(p,r)||c(p,r));return p}},14771:(e,t,r)=>{var n=r(55629),i=r(56759);e.exports=Object.keys||function(e){return n(e,i)}},36760:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},88929:(e,t,r)=>{var n=r(95329),i=r(96059),o=r(11851);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},95623:(e,t,r)=>{"use strict";var n=r(22885),i=r(9697);e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},39811:(e,t,r)=>{var n=r(21899),i=r(78834),o=r(57475),s=r(10941),a=n.TypeError;e.exports=function(e,t){var r,n;if("string"===t&&o(r=e.toString)&&!s(n=i(r,e)))return n;if(o(r=e.valueOf)&&!s(n=i(r,e)))return n;if("string"!==t&&o(r=e.toString)&&!s(n=i(r,e)))return n;throw a("Can't convert object to primitive value")}},31136:(e,t,r)=>{var n=r(626),i=r(95329),o=r(10946),s=r(87857),a=r(96059),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=s.f;return r?c(t,r(e)):t}},54058:e=>{e.exports={}},40002:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},56584:(e,t,r)=>{var n=r(96059),i=r(10941),o=r(69520);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=o.f(e);return(0,r.resolve)(t),r.promise}},18397:e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},87524:(e,t,r)=>{var n=r(99754);e.exports=function(e,t,r){for(var i in t)r&&r.unsafe&&e[i]?e[i]=t[i]:n(e,i,t[i],r);return e}},99754:(e,t,r)=>{var n=r(32029);e.exports=function(e,t,r,i){i&&i.enumerable?e[t]=r:n(e,t,r)}},48219:(e,t,r)=>{var n=r(21899).TypeError;e.exports=function(e){if(null==e)throw n("Can't call method on "+e);return e}},4911:(e,t,r)=>{var n=r(21899),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},94431:(e,t,r)=>{"use strict";var n=r(626),i=r(65988),o=r(99813),s=r(55746),a=o("species");e.exports=function(e){var t=n(e),r=i.f;s&&t&&!t[a]&&r(t,a,{configurable:!0,get:function(){return this}})}},90904:(e,t,r)=>{var n=r(22885),i=r(65988).f,o=r(32029),s=r(90953),a=r(95623),c=r(99813)("toStringTag");e.exports=function(e,t,r,u){if(e){var p=r?e:e.prototype;s(p,c)||i(p,c,{configurable:!0,value:t}),u&&!n&&o(p,"toString",a)}}},44262:(e,t,r)=>{var n=r(68726),i=r(99418),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},63030:(e,t,r)=>{var n=r(21899),i=r(4911),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},68726:(e,t,r)=>{var n=r(82529),i=r(63030);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:n?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},70487:(e,t,r)=>{var n=r(96059),i=r(174),o=r(99813)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||null==(r=n(s)[o])?t:i(r)}},64620:(e,t,r)=>{var n=r(95329),i=r(62435),o=r(85803),s=r(48219),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),p=function(e){return function(t,r){var n,p,h=o(s(t)),l=i(r),v=h.length;return l<0||l>=v?e?"":void 0:(n=c(h,l))<55296||n>56319||l+1===v||(p=c(h,l+1))<56320||p>57343?e?a(h,l):n:e?u(h,l,l+2):p-56320+(n-55296<<10)+65536}};e.exports={codeAt:p(!1),charAt:p(!0)}},42941:(e,t,r)=>{var n,i,o,s,a=r(21899),c=r(79730),u=r(86843),p=r(57475),h=r(90953),l=r(95981),v=r(15463),d=r(93765),f=r(61333),g=r(18348),y=r(22749),m=r(6049),S=a.setImmediate,b=a.clearImmediate,C=a.process,P=a.Dispatch,w=a.Function,R=a.MessageChannel,I=a.String,O=0,E={};try{n=a.location}catch(e){}var T=function(e){if(h(E,e)){var t=E[e];delete E[e],t()}},A=function(e){return function(){T(e)}},_=function(e){T(e.data)},x=function(e){a.postMessage(I(e),n.protocol+"//"+n.host)};S&&b||(S=function(e){g(arguments.length,1);var t=p(e)?e:w(e),r=d(arguments,1);return E[++O]=function(){c(t,void 0,r)},i(O),O},b=function(e){delete E[e]},m?i=function(e){C.nextTick(A(e))}:P&&P.now?i=function(e){P.now(A(e))}:R&&!y?(s=(o=new R).port2,o.port1.onmessage=_,i=u(s.postMessage,s)):a.addEventListener&&p(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!l(x)?(i=x,a.addEventListener("message",_,!1)):i="onreadystatechange"in f("script")?function(e){v.appendChild(f("script")).onreadystatechange=function(){v.removeChild(this),T(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:S,clear:b}},59413:(e,t,r)=>{var n=r(62435),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},74529:(e,t,r)=>{var n=r(37026),i=r(48219);e.exports=function(e){return n(i(e))}},62435:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){var n=+e;return n!=n||0===n?0:(n>0?r:t)(n)}},43057:(e,t,r)=>{var n=r(62435),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},89678:(e,t,r)=>{var n=r(21899),i=r(48219),o=n.Object;e.exports=function(e){return o(i(e))}},46935:(e,t,r)=>{var n=r(21899),i=r(78834),o=r(10941),s=r(56664),a=r(14229),c=r(39811),u=r(99813),p=n.TypeError,h=u("toPrimitive");e.exports=function(e,t){if(!o(e)||s(e))return e;var r,n=a(e,h);if(n){if(void 0===t&&(t="default"),r=i(n,e,t),!o(r)||s(r))return r;throw p("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},83894:(e,t,r)=>{var n=r(46935),i=r(56664);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},22885:(e,t,r)=>{var n={};n[r(99813)("toStringTag")]="z",e.exports="[object z]"===String(n)},85803:(e,t,r)=>{var n=r(21899),i=r(9697),o=n.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},69826:(e,t,r)=>{var n=r(21899).String;e.exports=function(e){try{return n(e)}catch(e){return"Object"}}},99418:(e,t,r)=>{var n=r(95329),i=0,o=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},32302:(e,t,r)=>{var n=r(72497);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},83937:(e,t,r)=>{var n=r(55746),i=r(95981);e.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},18348:(e,t,r)=>{var n=r(21899).TypeError;e.exports=function(e,t){if(e<t)throw n("Not enough arguments");return e}},11477:(e,t,r)=>{var n=r(99813);t.f=n},99813:(e,t,r)=>{var n=r(21899),i=r(68726),o=r(90953),s=r(99418),a=r(72497),c=r(32302),u=i("wks"),p=n.Symbol,h=p&&p.for,l=c?p:p&&p.withoutSetter||s;e.exports=function(e){if(!o(u,e)||!a&&"string"!=typeof u[e]){var t="Symbol."+e;a&&o(p,e)?u[e]=p[e]:u[e]=c&&h?h(t):l(t)}return u[e]}},47627:(e,t,r)=>{"use strict";var n=r(76887),i=r(21899),o=r(7046),s=r(249),a=r(88929),c=r(23489),u=r(29290),p=r(32029),h=r(31887),l=r(38694),v=r(53794),d=r(93091),f=r(14649),g=r(99813),y=r(18780),m=g("toStringTag"),S=i.Error,b=[].push,C=function(e,t){var r,n=arguments.length>2?arguments[2]:void 0,i=o(P,this);a?r=a(new S,i?s(this):P):(r=i?this:u(P),p(r,m,"Error")),void 0!==t&&p(r,"message",f(t)),y&&p(r,"stack",l(r.stack,1)),v(r,n);var c=[];return d(e,b,{that:c}),p(r,"errors",c),r};a?a(C,S):c(C,S,{name:!0});var P=C.prototype=u(S.prototype,{constructor:h(1,C),message:h(1,""),name:h(1,"AggregateError")});n({global:!0},{AggregateError:C})},85906:(e,t,r)=>{"use strict";var n=r(76887),i=r(21899),o=r(95981),s=r(1052),a=r(10941),c=r(89678),u=r(10623),p=r(55449),h=r(64692),l=r(50568),v=r(99813),d=r(53385),f=v("isConcatSpreadable"),g=9007199254740991,y="Maximum allowed index exceeded",m=i.TypeError,S=d>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),b=l("concat"),C=function(e){if(!a(e))return!1;var t=e[f];return void 0!==t?!!t:s(e)};n({target:"Array",proto:!0,forced:!S||!b},{concat:function(e){var t,r,n,i,o,s=c(this),a=h(s,0),l=0;for(t=-1,n=arguments.length;t<n;t++)if(C(o=-1===t?s:arguments[t])){if(l+(i=u(o))>g)throw m(y);for(r=0;r<i;r++,l++)r in o&&p(a,l,o[r])}else{if(l>=g)throw m(y);p(a,l++,o)}return a.length=l,a}})},53242:(e,t,r)=>{var n=r(76887),i=r(11354);n({target:"Array",stat:!0,forced:!r(21385)((function(e){Array.from(e)}))},{from:i})},92737:(e,t,r)=>{r(76887)({target:"Array",stat:!0},{isArray:r(1052)})},66274:(e,t,r)=>{"use strict";var n=r(74529),i=r(18479),o=r(12077),s=r(45402),a=r(65988).f,c=r(47771),u=r(82529),p=r(55746),h="Array Iterator",l=s.set,v=s.getterFor(h);e.exports=c(Array,"Array",(function(e,t){l(this,{type:h,target:n(e),index:0,kind:t})}),(function(){var e=v(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");var d=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!u&&p&&"values"!==d.name)try{a(d,"name",{value:"values"})}catch(e){}},60186:(e,t,r)=>{"use strict";var n=r(76887),i=r(21899),o=r(1052),s=r(24284),a=r(10941),c=r(59413),u=r(10623),p=r(74529),h=r(55449),l=r(99813),v=r(50568),d=r(93765),f=v("slice"),g=l("species"),y=i.Array,m=Math.max;n({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var r,n,i,l=p(this),v=u(l),f=c(e,v),S=c(void 0===t?v:t,v);if(o(l)&&(r=l.constructor,(s(r)&&(r===y||o(r.prototype))||a(r)&&null===(r=r[g]))&&(r=void 0),r===y||void 0===r))return d(l,f,S);for(n=new(void 0===r?y:r)(m(S-f,0)),i=0;f<S;f++,i++)f in l&&h(n,i,l[f]);return n.length=i,n}})},95160:(e,t,r)=>{var n=r(76887),i=r(21899),o=r(95329),s=i.Date,a=o(s.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return a(new s)}})},69120:(e,t,r)=>{var n=r(21899);r(90904)(n.JSON,"JSON",!0)},37501:(e,t,r)=>{"use strict";r(24683)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r(85616))},79413:()=>{},53882:(e,t,r)=>{r(76887)({target:"Object",stat:!0,sham:!r(55746)},{create:r(29290)})},74979:(e,t,r)=>{var n=r(76887),i=r(55746),o=r(59938).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!i},{defineProperties:o})},86450:(e,t,r)=>{var n=r(76887),i=r(55746),o=r(65988).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!i},{defineProperty:o})},46924:(e,t,r)=>{var n=r(76887),i=r(95981),o=r(74529),s=r(49677).f,a=r(55746),c=i((function(){s(1)}));n({target:"Object",stat:!0,forced:!a||c,sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},9816:(e,t,r)=>{var n=r(76887),i=r(95981),o=r(684).f;n({target:"Object",stat:!0,forced:i((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:o})},17405:(e,t,r)=>{var n=r(76887),i=r(95981),o=r(89678),s=r(249),a=r(64160);n({target:"Object",stat:!0,forced:i((function(){s(1)})),sham:!a},{getPrototypeOf:function(e){return s(o(e))}})},21724:(e,t,r)=>{var n=r(76887),i=r(89678),o=r(14771);n({target:"Object",stat:!0,forced:r(95981)((function(){o(1)}))},{keys:function(e){return o(i(e))}})},90108:(e,t,r)=>{r(76887)({target:"Object",stat:!0},{setPrototypeOf:r(88929)})},55967:()=>{},4560:(e,t,r)=>{"use strict";var n=r(76887),i=r(78834),o=r(24883),s=r(69520),a=r(40002),c=r(93091);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=s.f(t),n=r.resolve,u=r.reject,p=a((function(){var r=o(t.resolve),s=[],a=0,u=1;c(e,(function(e){var o=a++,c=!1;u++,i(r,t,e).then((function(e){c||(c=!0,s[o]={status:"fulfilled",value:e},--u||n(s))}),(function(e){c||(c=!0,s[o]={status:"rejected",reason:e},--u||n(s))}))})),--u||n(s)}));return p.error&&u(p.value),r.promise}})},91302:(e,t,r)=>{"use strict";var n=r(76887),i=r(24883),o=r(626),s=r(78834),a=r(69520),c=r(40002),u=r(93091),p="No one promise resolved";n({target:"Promise",stat:!0},{any:function(e){var t=this,r=o("AggregateError"),n=a.f(t),h=n.resolve,l=n.reject,v=c((function(){var n=i(t.resolve),o=[],a=0,c=1,v=!1;u(e,(function(e){var i=a++,u=!1;c++,s(n,t,e).then((function(e){u||v||(v=!0,h(e))}),(function(e){u||v||(u=!0,o[i]=e,--c||l(new r(o,p)))}))})),--c||l(new r(o,p))}));return v.error&&l(v.value),n.promise}})},44349:(e,t,r)=>{"use strict";var n=r(76887),i=r(82529),o=r(19297),s=r(95981),a=r(626),c=r(57475),u=r(70487),p=r(56584),h=r(99754);if(n({target:"Promise",proto:!0,real:!0,forced:!!o&&s((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,a("Promise")),r=c(e);return this.then(r?function(r){return p(t,e()).then((function(){return r}))}:e,r?function(r){return p(t,e()).then((function(){throw r}))}:e)}}),!i&&c(o)){var l=a("Promise").prototype.finally;o.prototype.finally!==l&&h(o.prototype,"finally",l,{unsafe:!0})}},98881:(e,t,r)=>{"use strict";var n,i,o,s,a=r(76887),c=r(82529),u=r(21899),p=r(626),h=r(78834),l=r(19297),v=r(99754),d=r(87524),f=r(88929),g=r(90904),y=r(94431),m=r(24883),S=r(57475),b=r(10941),C=r(5743),P=r(81302),w=r(93091),R=r(21385),I=r(70487),O=r(42941).set,E=r(66132),T=r(56584),A=r(34845),_=r(69520),x=r(40002),k=r(18397),M=r(45402),D=r(37252),j=r(99813),z=r(23321),N=r(6049),L=r(53385),B=j("species"),F="Promise",U=M.getterFor(F),q=M.set,V=M.getterFor(F),H=l&&l.prototype,W=l,K=H,J=u.TypeError,G=u.document,Q=u.process,$=_.f,X=$,Y=!!(G&&G.createEvent&&u.dispatchEvent),Z=S(u.PromiseRejectionEvent),ee="unhandledrejection",te=!1,re=D(F,(function(){var e=P(W),t=e!==String(W);if(!t&&66===L)return!0;if(c&&!K.finally)return!0;if(L>=51&&/native code/.test(e))return!1;var r=new W((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(r.constructor={})[B]=n,!(te=r.then((function(){}))instanceof n)||!t&&z&&!Z})),ne=re||!R((function(e){W.all(e).catch((function(){}))})),ie=function(e){var t;return!(!b(e)||!S(t=e.then))&&t},oe=function(e,t){var r,n,i,o=t.value,s=1==t.state,a=s?e.ok:e.fail,c=e.resolve,u=e.reject,p=e.domain;try{a?(s||(2===t.rejection&&pe(t),t.rejection=1),!0===a?r=o:(p&&p.enter(),r=a(o),p&&(p.exit(),i=!0)),r===e.promise?u(J("Promise-chain cycle")):(n=ie(r))?h(n,r,c,u):c(r)):u(o)}catch(e){p&&!i&&p.exit(),u(e)}},se=function(e,t){e.notified||(e.notified=!0,E((function(){for(var r,n=e.reactions;r=n.get();)oe(r,e);e.notified=!1,t&&!e.rejection&&ce(e)})))},ae=function(e,t,r){var n,i;Y?((n=G.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},!Z&&(i=u["on"+e])?i(n):e===ee&&A("Unhandled promise rejection",r)},ce=function(e){h(O,u,(function(){var t,r=e.facade,n=e.value;if(ue(e)&&(t=x((function(){N?Q.emit("unhandledRejection",n,r):ae(ee,r,n)})),e.rejection=N||ue(e)?2:1,t.error))throw t.value}))},ue=function(e){return 1!==e.rejection&&!e.parent},pe=function(e){h(O,u,(function(){var t=e.facade;N?Q.emit("rejectionHandled",t):ae("rejectionhandled",t,e.value)}))},he=function(e,t,r){return function(n){e(t,n,r)}},le=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,se(e,!0))},ve=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw J("Promise can't be resolved itself");var n=ie(t);n?E((function(){var r={done:!1};try{h(n,t,he(ve,r,e),he(le,r,e))}catch(t){le(r,t,e)}})):(e.value=t,e.state=1,se(e,!1))}catch(t){le({done:!1},t,e)}}};if(re&&(K=(W=function(e){C(this,K),m(e),h(n,this);var t=U(this);try{e(he(ve,t),he(le,t))}catch(e){le(t,e)}}).prototype,(n=function(e){q(this,{type:F,done:!1,notified:!1,parent:!1,reactions:new k,rejection:!1,state:0,value:void 0})}).prototype=d(K,{then:function(e,t){var r=V(this),n=$(I(this,W));return r.parent=!0,n.ok=!S(e)||e,n.fail=S(t)&&t,n.domain=N?Q.domain:void 0,0==r.state?r.reactions.add(n):E((function(){oe(n,r)})),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n,t=U(e);this.promise=e,this.resolve=he(ve,t),this.reject=he(le,t)},_.f=$=function(e){return e===W||e===o?new i(e):X(e)},!c&&S(l)&&H!==Object.prototype)){s=H.then,te||(v(H,"then",(function(e,t){var r=this;return new W((function(e,t){h(s,r,e,t)})).then(e,t)}),{unsafe:!0}),v(H,"catch",K.catch,{unsafe:!0}));try{delete H.constructor}catch(e){}f&&f(H,K)}a({global:!0,wrap:!0,forced:re},{Promise:W}),g(W,F,!1,!0),y(F),o=p(F),a({target:F,stat:!0,forced:re},{reject:function(e){var t=$(this);return h(t.reject,void 0,e),t.promise}}),a({target:F,stat:!0,forced:c||re},{resolve:function(e){return T(c&&this===o?W:this,e)}}),a({target:F,stat:!0,forced:ne},{all:function(e){var t=this,r=$(t),n=r.resolve,i=r.reject,o=x((function(){var r=m(t.resolve),o=[],s=0,a=1;w(e,(function(e){var c=s++,u=!1;a++,h(r,t,e).then((function(e){u||(u=!0,o[c]=e,--a||n(o))}),i)})),--a||n(o)}));return o.error&&i(o.value),r.promise},race:function(e){var t=this,r=$(t),n=r.reject,i=x((function(){var i=m(t.resolve);w(e,(function(e){h(i,t,e).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},7453:(e,t,r)=>{var n=r(76887),i=r(626),o=r(79730),s=r(98308),a=r(174),c=r(96059),u=r(10941),p=r(29290),h=r(95981),l=i("Reflect","construct"),v=Object.prototype,d=[].push,f=h((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),g=!h((function(){l((function(){}))})),y=f||g;n({target:"Reflect",stat:!0,forced:y,sham:y},{construct:function(e,t){a(e),c(t);var r=arguments.length<3?e:a(arguments[2]);if(g&&!f)return l(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return o(d,n,t),new(o(s,e,n))}var i=r.prototype,h=p(u(i)?i:v),y=o(e,h,t);return u(y)?y:h}})},1502:()=>{},77971:(e,t,r)=>{"use strict";var n=r(64620).charAt,i=r(85803),o=r(45402),s=r(47771),a="String Iterator",c=o.set,u=o.getterFor(a);s(String,"String",(function(e){c(this,{type:a,string:i(e),index:0})}),(function(){var e,t=u(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})}))},8555:(e,t,r)=>{r(66349)("asyncIterator")},52615:()=>{},21732:(e,t,r)=>{r(66349)("hasInstance")},35903:(e,t,r)=>{r(66349)("isConcatSpreadable")},1825:(e,t,r)=>{r(66349)("iterator")},35824:(e,t,r)=>{"use strict";var n=r(76887),i=r(21899),o=r(626),s=r(79730),a=r(78834),c=r(95329),u=r(82529),p=r(55746),h=r(72497),l=r(95981),v=r(90953),d=r(1052),f=r(57475),g=r(10941),y=r(7046),m=r(56664),S=r(96059),b=r(89678),C=r(74529),P=r(83894),w=r(85803),R=r(31887),I=r(29290),O=r(14771),E=r(10946),T=r(684),A=r(87857),_=r(49677),x=r(65988),k=r(59938),M=r(36760),D=r(93765),j=r(99754),z=r(68726),N=r(44262),L=r(27748),B=r(99418),F=r(99813),U=r(11477),q=r(66349),V=r(90904),H=r(45402),W=r(3610).forEach,K=N("hidden"),J="Symbol",G=F("toPrimitive"),Q=H.set,$=H.getterFor(J),X=Object.prototype,Y=i.Symbol,Z=Y&&Y.prototype,ee=i.TypeError,te=i.QObject,re=o("JSON","stringify"),ne=_.f,ie=x.f,oe=T.f,se=M.f,ae=c([].push),ce=z("symbols"),ue=z("op-symbols"),pe=z("string-to-symbol-registry"),he=z("symbol-to-string-registry"),le=z("wks"),ve=!te||!te.prototype||!te.prototype.findChild,de=p&&l((function(){return 7!=I(ie({},"a",{get:function(){return ie(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=ne(X,t);n&&delete X[t],ie(e,t,r),n&&e!==X&&ie(X,t,n)}:ie,fe=function(e,t){var r=ce[e]=I(Z);return Q(r,{type:J,tag:e,description:t}),p||(r.description=t),r},ge=function(e,t,r){e===X&&ge(ue,t,r),S(e);var n=P(t);return S(r),v(ce,n)?(r.enumerable?(v(e,K)&&e[K][n]&&(e[K][n]=!1),r=I(r,{enumerable:R(0,!1)})):(v(e,K)||ie(e,K,R(1,{})),e[K][n]=!0),de(e,n,r)):ie(e,n,r)},ye=function(e,t){S(e);var r=C(t),n=O(r).concat(Ce(r));return W(n,(function(t){p&&!a(me,r,t)||ge(e,t,r[t])})),e},me=function(e){var t=P(e),r=a(se,this,t);return!(this===X&&v(ce,t)&&!v(ue,t))&&(!(r||!v(this,t)||!v(ce,t)||v(this,K)&&this[K][t])||r)},Se=function(e,t){var r=C(e),n=P(t);if(r!==X||!v(ce,n)||v(ue,n)){var i=ne(r,n);return!i||!v(ce,n)||v(r,K)&&r[K][n]||(i.enumerable=!0),i}},be=function(e){var t=oe(C(e)),r=[];return W(t,(function(e){v(ce,e)||v(L,e)||ae(r,e)})),r},Ce=function(e){var t=e===X,r=oe(t?ue:C(e)),n=[];return W(r,(function(e){!v(ce,e)||t&&!v(X,e)||ae(n,ce[e])})),n};if(h||(j(Z=(Y=function(){if(y(Z,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?w(arguments[0]):void 0,t=B(e),r=function(e){this===X&&a(r,ue,e),v(this,K)&&v(this[K],t)&&(this[K][t]=!1),de(this,t,R(1,e))};return p&&ve&&de(X,t,{configurable:!0,set:r}),fe(t,e)}).prototype,"toString",(function(){return $(this).tag})),j(Y,"withoutSetter",(function(e){return fe(B(e),e)})),M.f=me,x.f=ge,k.f=ye,_.f=Se,E.f=T.f=be,A.f=Ce,U.f=function(e){return fe(F(e),e)},p&&(ie(Z,"description",{configurable:!0,get:function(){return $(this).description}}),u||j(X,"propertyIsEnumerable",me,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:Y}),W(O(le),(function(e){q(e)})),n({target:J,stat:!0,forced:!h},{for:function(e){var t=w(e);if(v(pe,t))return pe[t];var r=Y(t);return pe[t]=r,he[r]=t,r},keyFor:function(e){if(!m(e))throw ee(e+" is not a symbol");if(v(he,e))return he[e]},useSetter:function(){ve=!0},useSimple:function(){ve=!1}}),n({target:"Object",stat:!0,forced:!h,sham:!p},{create:function(e,t){return void 0===t?I(e):ye(I(e),t)},defineProperty:ge,defineProperties:ye,getOwnPropertyDescriptor:Se}),n({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:be,getOwnPropertySymbols:Ce}),n({target:"Object",stat:!0,forced:l((function(){A.f(1)}))},{getOwnPropertySymbols:function(e){return A.f(b(e))}}),re&&n({target:"JSON",stat:!0,forced:!h||l((function(){var e=Y();return"[null]"!=re([e])||"{}"!=re({a:e})||"{}"!=re(Object(e))}))},{stringify:function(e,t,r){var n=D(arguments),i=t;if((g(t)||void 0!==e)&&!m(e))return d(t)||(t=function(e,t){if(f(i)&&(t=a(i,this,e,t)),!m(t))return t}),n[1]=t,s(re,null,n)}}),!Z[G]){var Pe=Z.valueOf;j(Z,G,(function(e){return a(Pe,this)}))}V(Y,J),L[K]=!0},45915:(e,t,r)=>{r(66349)("matchAll")},28394:(e,t,r)=>{r(66349)("match")},61766:(e,t,r)=>{r(66349)("replace")},62737:(e,t,r)=>{r(66349)("search")},89911:(e,t,r)=>{r(66349)("species")},74315:(e,t,r)=>{r(66349)("split")},63131:(e,t,r)=>{r(66349)("toPrimitive")},64714:(e,t,r)=>{r(66349)("toStringTag")},70659:(e,t,r)=>{r(66349)("unscopables")},54334:(e,t,r)=>{"use strict";var n,i=r(21899),o=r(95329),s=r(87524),a=r(21647),c=r(24683),u=r(8850),p=r(10941),h=r(91584),l=r(45402).enforce,v=r(38019),d=!i.ActiveXObject&&"ActiveXObject"in i,f=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},g=c("WeakMap",f,u);if(v&&d){n=u.getConstructor(f,"WeakMap",!0),a.enable();var y=g.prototype,m=o(y.delete),S=o(y.has),b=o(y.get),C=o(y.set);s(y,{delete:function(e){if(p(e)&&!h(e)){var t=l(this);return t.frozen||(t.frozen=new n),m(this,e)||t.frozen.delete(e)}return m(this,e)},has:function(e){if(p(e)&&!h(e)){var t=l(this);return t.frozen||(t.frozen=new n),S(this,e)||t.frozen.has(e)}return S(this,e)},get:function(e){if(p(e)&&!h(e)){var t=l(this);return t.frozen||(t.frozen=new n),S(this,e)?b(this,e):t.frozen.get(e)}return b(this,e)},set:function(e,t){if(p(e)&&!h(e)){var r=l(this);r.frozen||(r.frozen=new n),S(this,e)?C(this,e,t):r.frozen.set(e,t)}else C(this,e,t);return this}})}},28783:(e,t,r)=>{r(66349)("asyncDispose")},43975:(e,t,r)=>{r(66349)("dispose")},65799:(e,t,r)=>{r(66349)("matcher")},45414:(e,t,r)=>{r(66349)("metadata")},46774:(e,t,r)=>{r(66349)("observable")},80620:(e,t,r)=>{r(66349)("patternMatch")},36172:(e,t,r)=>{r(66349)("replaceAll")},7634:(e,t,r)=>{r(66274);var n=r(63281),i=r(21899),o=r(9697),s=r(32029),a=r(12077),c=r(99813)("toStringTag");for(var u in n){var p=i[u],h=p&&p.prototype;h&&o(h)!==c&&s(h,c,u),a[u]=a.Array}},27698:(e,t,r)=>{var n=r(54493);e.exports=n},83363:(e,t,r)=>{var n=r(24034);e.exports=n},57784:(e,t,r)=>{var n=r(81103);e.exports=n},56243:(e,t,r)=>{var n=r(13830);r(7634),e.exports=n},82073:(e,t,r)=>{var n=r(69601);e.exports=n},15868:(e,t,r)=>{var n=r(91018);r(7634),e.exports=n},14471:(e,t,r)=>{var n=r(35254);e.exports=n},57396:(e,t,r)=>{var n=r(7702);e.exports=n},41910:(e,t,r)=>{var n=r(48171);e.exports=n},79427:(e,t,r)=>{var n=r(286);e.exports=n},64477:(e,t,r)=>{var n=r(83288);e.exports=n},96507:(e,t,r)=>{var n=r(13966);e.exports=n},23059:(e,t,r)=>{var n=r(48494);e.exports=n},16670:(e,t,r)=>{var n=r(3065);e.exports=n},27460:(e,t,r)=>{var n=r(52956);r(7634),e.exports=n},61895:(e,t,r)=>{var n=r(14983);e.exports=n},92547:(e,t,r)=>{var n=r(57473);r(7634),e.exports=n},46509:(e,t,r)=>{var n=r(24227);r(7634),e.exports=n},37168:(e,t,r)=>{var n=r(85112);e.exports=n},72010:(e,t,r)=>{var n=r(32304);r(7634),e.exports=n},85302:(e,t,r)=>{r(69720);var n=r(40857);e.exports=n.Object.entries},15634:(e,t,r)=>{var n=r(82107);e.exports=n},63858:(e,t,r)=>{r(1025),r(48824),r(41539),r(78783),r(33948);var n=r(40857);e.exports=n.Observable},19662:(e,t,r)=>{var n=r(60614),i=r(66330);e.exports=function(e){if(n(e))return e;throw TypeError(i(e)+" is not a function")}},96077:(e,t,r)=>{var n=r(60614);e.exports=function(e){if("object"==typeof e||n(e))return e;throw TypeError("Can't set "+String(e)+" as a prototype")}},51223:(e,t,r)=>{var n=r(5112),i=r(70030),o=r(3070),s=n("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},25787:e=>{e.exports=function(e,t,r){if(e instanceof t)return e;throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")}},19670:(e,t,r)=>{var n=r(70111);e.exports=function(e){if(n(e))return e;throw TypeError(String(e)+" is not an object")}},41318:(e,t,r)=>{var n=r(45656),i=r(51400),o=r(26244),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c),p=i(s,u);if(e&&r!=r){for(;u>p;)if((a=c[p++])!=a)return!0}else for(;u>p;p++)if((e||p in c)&&c[p]===r)return e||p||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},84326:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},70648:(e,t,r)=>{var n=r(51694),i=r(60614),o=r(84326),s=r(5112)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?r:a?o(t):"Object"==(n=o(t))&&i(t.callee)?"Arguments":n}},99920:(e,t,r)=>{var n=r(92597),i=r(53887),o=r(31236),s=r(3070);e.exports=function(e,t){for(var r=i(t),a=s.f,c=o.f,u=0;u<r.length;u++){var p=r[u];n(e,p)||a(e,p,c(t,p))}}},49920:(e,t,r)=>{var n=r(47293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},24994:(e,t,r)=>{"use strict";var n=r(13383).IteratorPrototype,i=r(70030),o=r(79114),s=r(58003),a=r(36485),c=function(){return this};e.exports=function(e,t,r){var u=t+" Iterator";return e.prototype=i(n,{next:o(1,r)}),s(e,u,!1,!0),a[u]=c,e}},68880:(e,t,r)=>{var n=r(19781),i=r(3070),o=r(79114);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},79114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},70654:(e,t,r)=>{"use strict";var n=r(82109),i=r(31913),o=r(76530),s=r(60614),a=r(24994),c=r(79518),u=r(27674),p=r(58003),h=r(68880),l=r(31320),v=r(5112),d=r(36485),f=r(13383),g=o.PROPER,y=o.CONFIGURABLE,m=f.IteratorPrototype,S=f.BUGGY_SAFARI_ITERATORS,b=v("iterator"),C="keys",P="values",w="entries",R=function(){return this};e.exports=function(e,t,r,o,v,f,I){a(r,t,o);var O,E,T,A=function(e){if(e===v&&D)return D;if(!S&&e in k)return k[e];switch(e){case C:case P:case w:return function(){return new r(this,e)}}return function(){return new r(this)}},_=t+" Iterator",x=!1,k=e.prototype,M=k[b]||k["@@iterator"]||v&&k[v],D=!S&&M||A(v),j="Array"==t&&k.entries||M;if(j&&(O=c(j.call(new e)))!==Object.prototype&&O.next&&(i||c(O)===m||(u?u(O,m):s(O[b])||l(O,b,R)),p(O,_,!0,!0),i&&(d[_]=R)),g&&v==P&&M&&M.name!==P&&(!i&&y?h(k,"name",P):(x=!0,D=function(){return M.call(this)})),v)if(E={values:A(P),keys:f?D:A(C),entries:A(w)},I)for(T in E)(S||x||!(T in k))&&l(k,T,E[T]);else n({target:t,proto:!0,forced:S||x},E);return i&&!I||k[b]===D||l(k,b,D,{name:v}),d[t]=D,E}},97235:(e,t,r)=>{var n=r(40857),i=r(92597),o=r(6061),s=r(3070).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||s(t,e,{value:o.f(e)})}},19781:(e,t,r)=>{var n=r(47293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},80317:(e,t,r)=>{var n=r(17854),i=r(70111),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},48324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:(e,t,r)=>{var n=r(80317)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},88113:(e,t,r)=>{var n=r(35005);e.exports=n("navigator","userAgent")||""},7392:(e,t,r)=>{var n,i,o=r(17854),s=r(88113),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,p=u&&u.v8;p?i=(n=p.split("."))[0]<4?1:n[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=n[1]),e.exports=i&&+i},80748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:(e,t,r)=>{var n=r(17854),i=r(31236).f,o=r(68880),s=r(31320),a=r(83505),c=r(99920),u=r(54705);e.exports=function(e,t){var r,p,h,l,v,d=e.target,f=e.global,g=e.stat;if(r=f?n:g?n[d]||a(d,{}):(n[d]||{}).prototype)for(p in t){if(l=t[p],h=e.noTargetGet?(v=i(r,p))&&v.value:r[p],!u(f?p:d+(g?".":"#")+p,e.forced)&&void 0!==h){if(typeof l==typeof h)continue;c(l,h)}(e.sham||h&&h.sham)&&o(l,"sham",!0),s(r,p,l,e)}}},47293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},49974:(e,t,r)=>{var n=r(19662);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},76530:(e,t,r)=>{var n=r(19781),i=r(92597),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},35005:(e,t,r)=>{var n=r(17854),i=r(60614),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e]):n[e]&&n[e][t]}},71246:(e,t,r)=>{var n=r(70648),i=r(58173),o=r(36485),s=r(5112)("iterator");e.exports=function(e){if(null!=e)return i(e,s)||i(e,"@@iterator")||o[n(e)]}},18554:(e,t,r)=>{var n=r(19662),i=r(19670),o=r(71246);e.exports=function(e,t){var r=arguments.length<2?o(e):t;if(n(r))return i(r.call(e));throw TypeError(String(e)+" is not iterable")}},58173:(e,t,r)=>{var n=r(19662);e.exports=function(e,t){var r=e[t];return null==r?void 0:n(r)}},17854:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},92597:(e,t,r)=>{var n=r(47908),i={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return i.call(n(e),t)}},3501:e=>{e.exports={}},842:(e,t,r)=>{var n=r(17854);e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},60490:(e,t,r)=>{var n=r(35005);e.exports=n("document","documentElement")},64664:(e,t,r)=>{var n=r(19781),i=r(47293),o=r(80317);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},68361:(e,t,r)=>{var n=r(47293),i=r(84326),o="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},42788:(e,t,r)=>{var n=r(60614),i=r(5465),o=Function.toString;n(i.inspectSource)||(i.inspectSource=function(e){return o.call(e)}),e.exports=i.inspectSource},29909:(e,t,r)=>{var n,i,o,s=r(68536),a=r(17854),c=r(70111),u=r(68880),p=r(92597),h=r(5465),l=r(6200),v=r(3501),d="Object already initialized",f=a.WeakMap;if(s||h.state){var g=h.state||(h.state=new f),y=g.get,m=g.has,S=g.set;n=function(e,t){if(m.call(g,e))throw new TypeError(d);return t.facade=e,S.call(g,e,t),t},i=function(e){return y.call(g,e)||{}},o=function(e){return m.call(g,e)}}else{var b=l("state");v[b]=!0,n=function(e,t){if(p(e,b))throw new TypeError(d);return t.facade=e,u(e,b,t),t},i=function(e){return p(e,b)?e[b]:{}},o=function(e){return p(e,b)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},97659:(e,t,r)=>{var n=r(5112),i=r(36485),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},60614:e=>{e.exports=function(e){return"function"==typeof e}},4411:(e,t,r)=>{var n=r(47293),i=r(60614),o=r(70648),s=r(35005),a=r(42788),c=[],u=s("Reflect","construct"),p=/^\s*(?:class|function)\b/,h=p.exec,l=!p.exec((function(){})),v=function(e){if(!i(e))return!1;try{return u(Object,c,e),!0}catch(e){return!1}};e.exports=!u||n((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?function(e){if(!i(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return l||!!h.call(p,a(e))}:v},54705:(e,t,r)=>{var n=r(47293),i=r(60614),o=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r==p||r!=u&&(i(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",p=s.POLYFILL="P";e.exports=s},70111:(e,t,r)=>{var n=r(60614);e.exports=function(e){return"object"==typeof e?null!==e:n(e)}},31913:e=>{e.exports=!1},52190:(e,t,r)=>{var n=r(60614),i=r(35005),o=r(43307);e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return n(t)&&Object(e)instanceof t}},20408:(e,t,r)=>{var n=r(19670),i=r(97659),o=r(26244),s=r(49974),a=r(18554),c=r(71246),u=r(99212),p=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var h,l,v,d,f,g,y,m=r&&r.that,S=!(!r||!r.AS_ENTRIES),b=!(!r||!r.IS_ITERATOR),C=!(!r||!r.INTERRUPTED),P=s(t,m,1+S+C),w=function(e){return h&&u(h,"normal",e),new p(!0,e)},R=function(e){return S?(n(e),C?P(e[0],e[1],w):P(e[0],e[1])):C?P(e,w):P(e)};if(b)h=e;else{if(!(l=c(e)))throw TypeError(String(e)+" is not iterable");if(i(l)){for(v=0,d=o(e);d>v;v++)if((f=R(e[v]))&&f instanceof p)return f;return new p(!1)}h=a(e,l)}for(g=h.next;!(y=g.call(h)).done;){try{f=R(y.value)}catch(e){u(h,"throw",e)}if("object"==typeof f&&f&&f instanceof p)return f}return new p(!1)}},99212:(e,t,r)=>{var n=r(19670),i=r(58173);e.exports=function(e,t,r){var o,s;n(e);try{if(!(o=i(e,"return"))){if("throw"===t)throw r;return r}o=o.call(e)}catch(e){s=!0,o=e}if("throw"===t)throw r;if(s)throw o;return n(o),r}},13383:(e,t,r)=>{"use strict";var n,i,o,s=r(47293),a=r(60614),c=r(70030),u=r(79518),p=r(31320),h=r(5112),l=r(31913),v=h("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=u(u(o)))!==Object.prototype&&(n=i):d=!0),null==n||s((function(){var e={};return n[v].call(e)!==e}))?n={}:l&&(n=c(n)),a(n[v])||p(n,v,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},36485:e=>{e.exports={}},26244:(e,t,r)=>{var n=r(17466);e.exports=function(e){return n(e.length)}},30133:(e,t,r)=>{var n=r(7392),i=r(47293);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},68536:(e,t,r)=>{var n=r(17854),i=r(60614),o=r(42788),s=n.WeakMap;e.exports=i(s)&&/native code/.test(o(s))},70030:(e,t,r)=>{var n,i=r(19670),o=r(36048),s=r(80748),a=r(3501),c=r(60490),u=r(80317),p=r(6200)("IE_PROTO"),h=function(){},l=function(e){return"<script>"+e+"<\/script>"},v=function(e){e.write(l("")),e.close();var t=e.parentWindow.Object;return e=null,t},d=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t;d="undefined"!=typeof document?document.domain&&n?v(n):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(l("document.F=Object")),e.close(),e.F):v(n);for(var r=s.length;r--;)delete d.prototype[s[r]];return d()};a[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h.prototype=i(e),r=new h,h.prototype=null,r[p]=e):r=d(),void 0===t?r:o(r,t)}},36048:(e,t,r)=>{var n=r(19781),i=r(3070),o=r(19670),s=r(81956);e.exports=n?Object.defineProperties:function(e,t){o(e);for(var r,n=s(t),a=n.length,c=0;a>c;)i.f(e,r=n[c++],t[r]);return e}},3070:(e,t,r)=>{var n=r(19781),i=r(64664),o=r(19670),s=r(34948),a=Object.defineProperty;t.f=n?a:function(e,t,r){if(o(e),t=s(t),o(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},31236:(e,t,r)=>{var n=r(19781),i=r(55296),o=r(79114),s=r(45656),a=r(34948),c=r(92597),u=r(64664),p=Object.getOwnPropertyDescriptor;t.f=n?p:function(e,t){if(e=s(e),t=a(t),u)try{return p(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},8006:(e,t,r)=>{var n=r(16324),i=r(80748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},25181:(e,t)=>{t.f=Object.getOwnPropertySymbols},79518:(e,t,r)=>{var n=r(92597),i=r(60614),o=r(47908),s=r(6200),a=r(49920),c=s("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof Object?u:null}},16324:(e,t,r)=>{var n=r(92597),i=r(45656),o=r(41318).indexOf,s=r(3501);e.exports=function(e,t){var r,a=i(e),c=0,u=[];for(r in a)!n(s,r)&&n(a,r)&&u.push(r);for(;t.length>c;)n(a,r=t[c++])&&(~o(u,r)||u.push(r));return u}},81956:(e,t,r)=>{var n=r(16324),i=r(80748);e.exports=Object.keys||function(e){return n(e,i)}},55296:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},27674:(e,t,r)=>{var n=r(19670),i=r(96077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,o){return n(r),i(o),t?e.call(r,o):r.__proto__=o,r}}():void 0)},44699:(e,t,r)=>{var n=r(19781),i=r(81956),o=r(45656),s=r(55296).f,a=function(e){return function(t){for(var r,a=o(t),c=i(a),u=c.length,p=0,h=[];u>p;)r=c[p++],n&&!s.call(a,r)||h.push(e?[r,a[r]]:a[r]);return h}};e.exports={entries:a(!0),values:a(!1)}},90288:(e,t,r)=>{"use strict";var n=r(51694),i=r(70648);e.exports=n?{}.toString:function(){return"[object "+i(this)+"]"}},92140:(e,t,r)=>{var n=r(60614),i=r(70111);e.exports=function(e,t){var r,o;if("string"===t&&n(r=e.toString)&&!i(o=r.call(e)))return o;if(n(r=e.valueOf)&&!i(o=r.call(e)))return o;if("string"!==t&&n(r=e.toString)&&!i(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},53887:(e,t,r)=>{var n=r(35005),i=r(8006),o=r(25181),s=r(19670);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(s(e)),r=o.f;return r?t.concat(r(e)):t}},40857:(e,t,r)=>{var n=r(17854);e.exports=n},12248:(e,t,r)=>{var n=r(31320);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},31320:(e,t,r)=>{var n=r(17854),i=r(60614),o=r(92597),s=r(68880),a=r(83505),c=r(42788),u=r(29909),p=r(76530).CONFIGURABLE,h=u.get,l=u.enforce,v=String(String).split("String");(e.exports=function(e,t,r,c){var u,h=!!c&&!!c.unsafe,d=!!c&&!!c.enumerable,f=!!c&&!!c.noTargetGet,g=c&&void 0!==c.name?c.name:t;i(r)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(r,"name")||p&&r.name!==g)&&s(r,"name",g),(u=l(r)).source||(u.source=v.join("string"==typeof g?g:""))),e!==n?(h?!f&&e[t]&&(d=!0):delete e[t],d?e[t]=r:s(e,t,r)):d?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return i(this)&&h(this).source||c(this)}))},84488:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},83505:(e,t,r)=>{var n=r(17854);e.exports=function(e,t){try{Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},96340:(e,t,r)=>{"use strict";var n=r(35005),i=r(3070),o=r(5112),s=r(19781),a=o("species");e.exports=function(e){var t=n(e),r=i.f;s&&t&&!t[a]&&r(t,a,{configurable:!0,get:function(){return this}})}},58003:(e,t,r)=>{var n=r(3070).f,i=r(92597),o=r(5112)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},6200:(e,t,r)=>{var n=r(72309),i=r(69711),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:(e,t,r)=>{var n=r(17854),i=r(83505),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},72309:(e,t,r)=>{var n=r(31913),i=r(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.18.3",mode:n?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},28710:(e,t,r)=>{var n=r(19303),i=r(41340),o=r(84488),s=function(e){return function(t,r){var s,a,c=i(o(t)),u=n(r),p=c.length;return u<0||u>=p?e?"":void 0:(s=c.charCodeAt(u))<55296||s>56319||u+1===p||(a=c.charCodeAt(u+1))<56320||a>57343?e?c.charAt(u):s:e?c.slice(u,u+2):a-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},51400:(e,t,r)=>{var n=r(19303),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},45656:(e,t,r)=>{var n=r(68361),i=r(84488);e.exports=function(e){return n(i(e))}},19303:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){var n=+e;return n!=n||0===n?0:(n>0?r:t)(n)}},17466:(e,t,r)=>{var n=r(19303),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},47908:(e,t,r)=>{var n=r(84488);e.exports=function(e){return Object(n(e))}},57593:(e,t,r)=>{var n=r(70111),i=r(52190),o=r(58173),s=r(92140),a=r(5112)("toPrimitive");e.exports=function(e,t){if(!n(e)||i(e))return e;var r,c=o(e,a);if(c){if(void 0===t&&(t="default"),r=c.call(e,t),!n(r)||i(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},34948:(e,t,r)=>{var n=r(57593),i=r(52190);e.exports=function(e){var t=n(e,"string");return i(t)?t:String(t)}},51694:(e,t,r)=>{var n={};n[r(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},41340:(e,t,r)=>{var n=r(70648);e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},66330:e=>{e.exports=function(e){try{return String(e)}catch(e){return"Object"}}},69711:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},43307:(e,t,r)=>{var n=r(30133);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6061:(e,t,r)=>{var n=r(5112);t.f=n},5112:(e,t,r)=>{var n=r(17854),i=r(72309),o=r(92597),s=r(69711),a=r(30133),c=r(43307),u=i("wks"),p=n.Symbol,h=c?p:p&&p.withoutSetter||s;e.exports=function(e){return o(u,e)&&(a||"string"==typeof u[e])||(a&&o(p,e)?u[e]=p[e]:u[e]=h("Symbol."+e)),u[e]}},66992:(e,t,r)=>{"use strict";var n=r(45656),i=r(51223),o=r(36485),s=r(29909),a=r(70654),c="Array Iterator",u=s.set,p=s.getterFor(c);e.exports=a(Array,"Array",(function(e,t){u(this,{type:c,target:n(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},69720:(e,t,r)=>{var n=r(82109),i=r(44699).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},41539:(e,t,r)=>{var n=r(51694),i=r(31320),o=r(90288);n||i(Object.prototype,"toString",o,{unsafe:!0})},78783:(e,t,r)=>{"use strict";var n=r(28710).charAt,i=r(41340),o=r(29909),s=r(70654),a="String Iterator",c=o.set,u=o.getterFor(a);s(String,"String",(function(e){c(this,{type:a,string:i(e),index:0})}),(function(){var e,t=u(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})}))},1025:(e,t,r)=>{"use strict";var n=r(82109),i=r(19781),o=r(96340),s=r(19662),a=r(60614),c=r(4411),u=r(19670),p=r(70111),h=r(25787),l=r(3070).f,v=r(31320),d=r(12248),f=r(18554),g=r(58173),y=r(20408),m=r(842),S=r(5112),b=r(29909),C=S("observable"),P=b.get,w=b.set,R=function(e){var t=e.cleanup;if(t){e.cleanup=void 0;try{t()}catch(e){m(e)}}},I=function(e){return void 0===e.observer},O=function(e){var t=e.facade;if(!i){t.closed=!0;var r=e.subscriptionObserver;r&&(r.closed=!0)}e.observer=void 0},E=function(e,t){var r,n=w(this,{cleanup:void 0,observer:u(e),subscriptionObserver:void 0});i||(this.closed=!1);try{(r=g(e,"start"))&&r.call(e,this)}catch(e){m(e)}if(!I(n)){var o=n.subscriptionObserver=new T(this);try{var c=t(o),p=c;null!=c&&(n.cleanup=a(c.unsubscribe)?function(){p.unsubscribe()}:s(c))}catch(e){return void o.error(e)}I(n)&&R(n)}};E.prototype=d({},{unsubscribe:function(){var e=P(this);I(e)||(O(e),R(e))}}),i&&l(E.prototype,"closed",{configurable:!0,get:function(){return I(P(this))}});var T=function(e){w(this,{subscription:e}),i||(this.closed=!1)};T.prototype=d({},{next:function(e){var t=P(P(this).subscription);if(!I(t)){var r=t.observer;try{var n=g(r,"next");n&&n.call(r,e)}catch(e){m(e)}}},error:function(e){var t=P(P(this).subscription);if(!I(t)){var r=t.observer;O(t);try{var n=g(r,"error");n?n.call(r,e):m(e)}catch(e){m(e)}R(t)}},complete:function(){var e=P(P(this).subscription);if(!I(e)){var t=e.observer;O(e);try{var r=g(t,"complete");r&&r.call(t)}catch(e){m(e)}R(e)}}}),i&&l(T.prototype,"closed",{configurable:!0,get:function(){return I(P(P(this).subscription))}});var A=function(e){h(this,A,"Observable"),w(this,{subscriber:s(e)})};d(A.prototype,{subscribe:function(e){var t=arguments.length;return new E(a(e)?{next:e,error:t>1?arguments[1]:void 0,complete:t>2?arguments[2]:void 0}:p(e)?e:{},P(this).subscriber)}}),d(A,{from:function(e){var t=c(this)?this:A,r=g(u(e),C);if(r){var n=u(r.call(e));return n.constructor===t?n:new t((function(e){return n.subscribe(e)}))}var i=f(e);return new t((function(e){y(i,(function(t,r){if(e.next(t),e.closed)return r()}),{IS_ITERATOR:!0,INTERRUPTED:!0}),e.complete()}))},of:function(){for(var e=c(this)?this:A,t=arguments.length,r=new Array(t),n=0;n<t;)r[n]=arguments[n++];return new e((function(e){for(var n=0;n<t;n++)if(e.next(r[n]),e.closed)return;e.complete()}))}}),v(A.prototype,C,(function(){return this})),n({global:!0},{Observable:A}),o("Observable")},48824:(e,t,r)=>{r(97235)("observable")},33948:(e,t,r)=>{var n=r(17854),i=r(48324),o=r(98509),s=r(66992),a=r(68880),c=r(5112),u=c("iterator"),p=c("toStringTag"),h=s.values,l=function(e,t){if(e){if(e[u]!==h)try{a(e,u,h)}catch(t){e[u]=h}if(e[p]||a(e,p,t),i[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var v in i)l(n[v]&&n[v].prototype,v);l(o,"DOMTokenList")},82107:(e,t,r)=>{var n=r(85302);e.exports=n},5135:e=>{"use strict";e.exports=function(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}},90875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(5135))&&n.__esModule?n:{default:n};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.defers=[],this.upcomingDeferred=null,this.eventListener=this.eventListener.bind(this),this.options=r,this.one=this.one.bind(this),this.upcoming=this.upcoming.bind(this),this[Symbol.iterator]=function(){return{next:function(){return{done:!1,value:t.upcoming()}}}}}var t,r;return t=e,r=[{key:"eventListener",value:function(e){var t=this.defers.shift(),r=this.options.array?[].slice.call(arguments):e;t&&t.resolve(r),this.upcomingDeferred&&(this.upcomingDeferred.resolve(r),this.upcomingDeferred=null)}},{key:"one",value:function(){var e=(0,i.default)();return this.defers.push(e),e.promise}},{key:"upcoming",value:function(){return this.upcomingDeferred||(this.upcomingDeferred=(0,i.default)()),this.upcomingDeferred.promise}}],r&&s(t.prototype,r),e}();t.default=a,e.exports=t.default,e.exports.default=t.default},56434:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(319),i=r(2911),o=r(16525),s=r(81506),a=r(2205),c=r(78585),u=r(29754),p=r(65957),h=r(59713),l=r(34575),v=r(93913),d=r(50008);function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g,y=f(n),m=f(i),S=f(o),b=f(s),C=f(a),P=f(c),w=f(u),R=f(p),I=f(h),O=f(l),E=f(v),T=f(d);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w.default(e);if(t){var i=w.default(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P.default(this,r)}}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){I.default(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){if(!e){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];throw new TypeError(M(t,n))}}function M(e,t){var r=0;return e.replace(/%[os]/g,(function(){return D(t[r++])}))}function D(e){return"object"!==T.default(e)||null===e?String(e):Object.prototype.toString.call(e)}var j,z="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==r.g?r.g:"undefined"!=typeof globalThis?globalThis:void 0,N=function(){function e(t,r){O.default(this,e),this.code=t,this.message=r}return E.default(e,[{key:"warn",value:function(){var e;try{for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];if(j)return void j(x(x({},this),{},{args:n}));var o=(null!==(e=(new Error).stack)&&void 0!==e?e:"").replace(/^(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+?\n){2}/g,"\n");(t=console).warn.apply(t,[this.message].concat(n,[o]))}catch(e){}}}]),e}(),L=new N("W01","Unable to initialize event under dispatching."),B=new N("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),F=new N("W03","Assigning any truthy value to 'returnValue' property has no effect."),U=new N("W04","Unable to preventDefault on non-cancelable events."),q=new N("W05","Unable to preventDefault inside passive event listener invocation."),V=new N("W06","An event listener wasn't added because it has been added already: %o, %o"),H=new N("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),W=new N("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o"),K=new N("W09","Event attribute handler must be a function: %o"),J=function(){function e(t,r){O.default(this,e),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});var n=null!=r?r:{};Y.set(this,{type:String(t),bubbles:Boolean(n.bubbles),cancelable:Boolean(n.cancelable),composed:Boolean(n.composed),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}return E.default(e,null,[{key:"NONE",get:function(){return G}},{key:"CAPTURING_PHASE",get:function(){return Q}},{key:"AT_TARGET",get:function(){return $}},{key:"BUBBLING_PHASE",get:function(){return X}}]),E.default(e,[{key:"composedPath",value:function(){var e=Z(this).currentTarget;return e?[e]:[]}},{key:"stopPropagation",value:function(){Z(this).stopPropagationFlag=!0}},{key:"stopImmediatePropagation",value:function(){var e=Z(this);e.stopPropagationFlag=e.stopImmediatePropagationFlag=!0}},{key:"preventDefault",value:function(){ee(Z(this))}},{key:"initEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Z(this);n.dispatchFlag?L.warn():Y.set(this,x(x({},n),{},{type:String(e),bubbles:Boolean(t),cancelable:Boolean(r),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1}))}},{key:"type",get:function(){return Z(this).type}},{key:"target",get:function(){return Z(this).target}},{key:"srcElement",get:function(){return Z(this).target}},{key:"currentTarget",get:function(){return Z(this).currentTarget}},{key:"NONE",get:function(){return G}},{key:"CAPTURING_PHASE",get:function(){return Q}},{key:"AT_TARGET",get:function(){return $}},{key:"BUBBLING_PHASE",get:function(){return X}},{key:"eventPhase",get:function(){return Z(this).dispatchFlag?2:0}},{key:"cancelBubble",get:function(){return Z(this).stopPropagationFlag},set:function(e){e?Z(this).stopPropagationFlag=!0:B.warn()}},{key:"bubbles",get:function(){return Z(this).bubbles}},{key:"cancelable",get:function(){return Z(this).cancelable}},{key:"returnValue",get:function(){return!Z(this).canceledFlag},set:function(e){e?F.warn():ee(Z(this))}},{key:"defaultPrevented",get:function(){return Z(this).canceledFlag}},{key:"composed",get:function(){return Z(this).composed}},{key:"isTrusted",get:function(){return!1}},{key:"timeStamp",get:function(){return Z(this).timeStamp}}]),e}(),G=0,Q=1,$=2,X=3,Y=new WeakMap;function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"this",r=Y.get(e);return k(null!=r,"'%s' must be an object that Event constructor created, but got another one: %o",t,e),r}function ee(e){e.inPassiveListenerFlag?q.warn():e.cancelable?e.canceledFlag=!0:U.warn()}Object.defineProperty(J,"NONE",{enumerable:!0}),Object.defineProperty(J,"CAPTURING_PHASE",{enumerable:!0}),Object.defineProperty(J,"AT_TARGET",{enumerable:!0}),Object.defineProperty(J,"BUBBLING_PHASE",{enumerable:!0});for(var te,re=Object.getOwnPropertyNames(J.prototype),ne=0;ne<re.length;++ne)"constructor"!==re[ne]&&Object.defineProperty(J.prototype,re[ne],{enumerable:!0});void 0!==z&&void 0!==z.Event&&Object.setPrototypeOf(J.prototype,z.Event.prototype);var ie={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function oe(e){for(var t=Object.keys(ie),r=function(r){var n=t[r],i=ie[n];Object.defineProperty(e,n,{get:function(){return i},configurable:!0,enumerable:!0})},n=0;n<t.length;++n)r(n)}var se=function(e){C.default(r,e);var t=A(r);function r(e){var n,i,o;O.default(this,r),o=t.call(this,e.type,{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}),e.cancelBubble&&S.default((n=b.default(o),w.default(r.prototype)),"stopPropagation",n).call(n),e.defaultPrevented&&S.default((i=b.default(o),w.default(r.prototype)),"preventDefault",i).call(i),ae.set(b.default(o),{original:e});for(var s=Object.keys(e),a=0;a<s.length;++a){var c=s[a];c in b.default(o)||Object.defineProperty(b.default(o),c,he(e,c))}return o}return E.default(r,null,[{key:"wrap",value:function(e){return new(pe(e))(e)}}]),E.default(r,[{key:"stopPropagation",value:function(){S.default(w.default(r.prototype),"stopPropagation",this).call(this);var e=ce(this).original;"stopPropagation"in e&&e.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){S.default(w.default(r.prototype),"stopImmediatePropagation",this).call(this);var e=ce(this).original;"stopImmediatePropagation"in e&&e.stopImmediatePropagation()}},{key:"preventDefault",value:function(){S.default(w.default(r.prototype),"preventDefault",this).call(this);var e=ce(this).original;"preventDefault"in e&&e.preventDefault()}},{key:"cancelBubble",get:function(){return S.default(w.default(r.prototype),"cancelBubble",this)},set:function(e){m.default(w.default(r.prototype),"cancelBubble",e,this,!0);var t=ce(this).original;"cancelBubble"in t&&(t.cancelBubble=e)}},{key:"returnValue",get:function(){return S.default(w.default(r.prototype),"returnValue",this)},set:function(e){m.default(w.default(r.prototype),"returnValue",e,this,!0);var t=ce(this).original;"returnValue"in t&&(t.returnValue=e)}},{key:"timeStamp",get:function(){var e=ce(this).original;return"timeStamp"in e?e.timeStamp:S.default(w.default(r.prototype),"timeStamp",this)}}]),r}(J),ae=new WeakMap;function ce(e){var t=ae.get(e);return k(null!=t,"'this' is expected an Event object, but got",e),t}var ue=new WeakMap;function pe(e){var t=Object.getPrototypeOf(e);if(null==t)return se;var r=ue.get(t);return null==r&&(r=function(e,t){for(var r=function(e){C.default(r,e);var t=A(r);function r(){return O.default(this,r),t.apply(this,arguments)}return r}(e),n=Object.keys(t),i=0;i<n.length;++i)Object.defineProperty(r.prototype,n[i],he(t,n[i]));return r}(pe(t),t),ue.set(t,r)),r}function he(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return{get:function(){var e=ce(this).original,r=e[t];return"function"==typeof r?r.bind(e):r},set:function(e){ce(this).original[t]=e},configurable:r.configurable,enumerable:r.enumerable}}function le(e){e.flags|=8}function ve(e){return 1==(1&e.flags)}function de(e){return 2==(2&e.flags)}function fe(e){return 4==(4&e.flags)}function ge(e){return 8==(8&e.flags)}function ye(e,t,r){var n=e.callback;try{"function"==typeof n?n.call(t,r):"function"==typeof n.handleEvent&&n.handleEvent(r)}catch(e){!function(e){try{var t=e instanceof Error?e:new Error(D(e));if(g)return void g(t);if("function"==typeof dispatchEvent&&"function"==typeof ErrorEvent)dispatchEvent(new ErrorEvent("error",{error:t,message:t.message}));else if("undefined"!=typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",t);console.error(t)}catch(e){}}(e)}}function me(e,t,r){for(var n=e.listeners,i=0;i<n.length;++i)if(n[i].callback===t&&ve(n[i])===r)return i;return-1}function Se(e,t,r,n,i,o){var s;o&&(s=be.bind(null,e,t,r),o.addEventListener("abort",s));var a=function(e,t,r,n,i,o){return{callback:e,flags:(t?1:0)|(r?2:0)|(n?4:0),signal:i,signalListener:o}}(t,r,n,i,o,s);return e.cow?(e.cow=!1,e.listeners=[].concat(y.default(e.listeners),[a])):e.listeners.push(a),a}function be(e,t,r){var n=me(e,t,r);return-1!==n&&Ce(e,n)}function Ce(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.listeners[t];return le(n),n.signal&&n.signal.removeEventListener("abort",n.signalListener),e.cow&&!r?(e.cow=!1,e.listeners=e.listeners.filter((function(e,r){return r!==t})),!1):(e.listeners.splice(t,1),!0)}function Pe(e,t){var r;return null!==(r=e[t])&&void 0!==r?r:e[t]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}ue.set(Object.prototype,se),void 0!==z&&void 0!==z.Event&&ue.set(z.Event.prototype,se);var we=function(){function e(){O.default(this,e),Re.set(this,Object.create(null))}return E.default(e,[{key:"addEventListener",value:function(e,t,r){var n=Ie(this),i=function(e,t,r){var n;return Oe(t),"object"===T.default(r)&&null!==r?{type:String(e),callback:null!=t?t:void 0,capture:Boolean(r.capture),passive:Boolean(r.passive),once:Boolean(r.once),signal:null!==(n=r.signal)&&void 0!==n?n:void 0}:{type:String(e),callback:null!=t?t:void 0,capture:Boolean(r),passive:!1,once:!1,signal:void 0}}(e,t,r),o=i.callback,s=i.capture,a=i.once,c=i.passive,u=i.signal,p=i.type;if(null!=o&&!(null==u?void 0:u.aborted)){var h=Pe(n,p),l=me(h,o,s);-1===l?Se(h,o,s,c,a,u):function(e,t,r,n){V.warn(ve(e)?"capture":"bubble",e.callback),de(e)!==t&&H.warn("passive"),fe(e)!==r&&H.warn("once"),e.signal!==n&&H.warn("signal")}(h.listeners[l],c,a,u)}}},{key:"removeEventListener",value:function(e,t,r){var n=Ie(this),i=function(e,t,r){return Oe(t),"object"===T.default(r)&&null!==r?{type:String(e),callback:null!=t?t:void 0,capture:Boolean(r.capture)}:{type:String(e),callback:null!=t?t:void 0,capture:Boolean(r)}}(e,t,r),o=i.callback,s=i.capture,a=n[i.type];null!=o&&a&&be(a,o,s)}},{key:"dispatchEvent",value:function(e){var t=Ie(this)[String(e.type)];if(null==t)return!0;var r,n=e instanceof J?e:se.wrap(e),i=Z(n,"event");if(i.dispatchFlag)throw r="This event has been in dispatching.",z.DOMException?new z.DOMException(r,"InvalidStateError"):(null==te&&(te=function(e){C.default(r,e);var t=A(r);function r(e){var n;return O.default(this,r),n=t.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(b.default(n),r),n}return E.default(r,[{key:"code",get:function(){return 11}},{key:"name",get:function(){return"InvalidStateError"}}]),r}(R.default(Error)),Object.defineProperties(te.prototype,{code:{enumerable:!0},name:{enumerable:!0}}),oe(te),oe(te.prototype)),new te(r));if(i.dispatchFlag=!0,i.target=i.currentTarget=this,!i.stopPropagationFlag){var o=t.cow,s=t.listeners;t.cow=!0;for(var a=0;a<s.length;++a){var c=s[a];if(!ge(c)&&(fe(c)&&Ce(t,a,!o)&&(a-=1),i.inPassiveListenerFlag=de(c),ye(c,this,n),i.inPassiveListenerFlag=!1,i.stopImmediatePropagationFlag))break}o||(t.cow=!1)}return i.target=null,i.currentTarget=null,i.stopImmediatePropagationFlag=!1,i.stopPropagationFlag=!1,i.dispatchFlag=!1,!i.canceledFlag}}]),e}(),Re=new WeakMap;function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"this",r=Re.get(e);return k(null!=r,"'%s' must be an object that EventTarget constructor created, but got another one: %o",t,e),r}function Oe(e){if("function"!=typeof e&&("object"!==T.default(e)||null===e||"function"!=typeof e.handleEvent)){if(null!=e&&"object"!==T.default(e))throw new TypeError(M(W.message,[e]));W.warn(e)}}for(var Ee=Object.getOwnPropertyNames(we.prototype),Te=0;Te<Ee.length;++Te)"constructor"!==Ee[Te]&&Object.defineProperty(we.prototype,Ee[Te],{enumerable:!0});function Ae(e,t){var r,n;return null!==(n=null===(r=Ie(e,"target")[t])||void 0===r?void 0:r.attrCallback)&&void 0!==n?n:null}function _e(e,t,r){null!=r&&"function"!=typeof r&&K.warn(r),"function"==typeof r||"object"===T.default(r)&&null!==r?function(e,t,r){var n=Pe(Ie(e,"target"),String(t));n.attrCallback=r,null==n.attrListener&&(n.attrListener=Se(n,function(e){return function(t){var r=e.attrCallback;"function"==typeof r&&r.call(this,t)}}(n),!1,!1,!1,void 0))}(e,t,r):function(e,t){var r=Ie(e,"target")[String(t)];r&&r.attrListener&&(be(r,r.attrListener.callback,!1),r.attrCallback=r.attrListener=void 0)}(e,t)}function xe(e,t,r){Object.defineProperty(e,"on".concat(t),{get:function(){return Ae(this,t)},set:function(e){_e(this,t,e)},configurable:!0,enumerable:!0})}void 0!==z&&void 0!==z.EventTarget&&Object.setPrototypeOf(we.prototype,z.EventTarget.prototype),t.Event=J,t.EventTarget=we,t.default=we,t.defineCustomEventTarget=function(){for(var e=function(e){C.default(r,e);var t=A(r);function r(){return O.default(this,r),t.apply(this,arguments)}return r}(we),t=0;t<arguments.length;++t)xe(e.prototype,t<0||arguments.length<=t?void 0:arguments[t]);return e},t.defineEventAttribute=xe,t.getEventAttributeValue=Ae,t.setErrorHandler=function(e){k("function"==typeof e||void 0===e,"The error handler must be a function or undefined, but got %o.",e),g=e},t.setEventAttributeValue=_e,t.setWarningHandler=function(e){k("function"==typeof e||void 0===e,"The warning handler must be a function or undefined, but got %o.",e),j=e}},78652:e=>{var t="undefined"!=typeof window?window:self;e.exports=t.crypto||t.msCrypto},15499:(e,t,r)=>{e.exports=function(e){if(!e)return Math.random;var t=Math.pow(2,32),r=new Uint32Array(1);return function(){return e.getRandomValues(r)[0]/t}}(r(78652))},55369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ActivityReceivedEventArgs:()=>zn,AudioConfig:()=>ut,AudioInputStream:()=>se,AudioOutputStream:()=>De,AudioStreamFormat:()=>K,AutoDetectSourceLanguageConfig:()=>yi,AutoDetectSourceLanguageResult:()=>mi,BaseAudioPlayer:()=>Qn,BotFrameworkConfig:()=>xn,CancellationDetails:()=>Cn,CancellationDetailsBase:()=>bn,CancellationErrorCode:()=>ne,CancellationReason:()=>re,Connection:()=>En,ConnectionEventArgs:()=>Pn,ConnectionMessage:()=>Rn,ConnectionMessageEventArgs:()=>On,Conversation:()=>uo,ConversationExpirationEventArgs:()=>Bi,ConversationParticipantsChangedEventArgs:()=>io,ConversationTranscriber:()=>Ro,ConversationTranscriptionCanceledEventArgs:()=>yo,ConversationTranscriptionEventArgs:()=>Pt,ConversationTranslationCanceledEventArgs:()=>Li,ConversationTranslationEventArgs:()=>oo,ConversationTranslationResult:()=>Fi,ConversationTranslator:()=>fo,CustomCommandsConfig:()=>kn,DialogServiceConfig:()=>An,DialogServiceConnector:()=>Jn,IntentRecognitionCanceledEventArgs:()=>Yr,IntentRecognitionEventArgs:()=>ft,IntentRecognitionResult:()=>mt,IntentRecognizer:()=>nn,KeywordRecognitionModel:()=>lt,LanguageUnderstandingModel:()=>St,NoMatchDetails:()=>Sn,NoMatchReason:()=>vn,OutputFormat:()=>it,Participant:()=>ao,ParticipantChangedReason:()=>to,PhraseListGrammar:()=>Tn,ProfanityOption:()=>ot,PronunciationAssessmentConfig:()=>ko,PronunciationAssessmentGradingSystem:()=>Eo,PronunciationAssessmentGranularity:()=>To,PronunciationAssessmentResult:()=>Mo,PropertyCollection:()=>we,PropertyId:()=>a,PullAudioInputStream:()=>ue,PullAudioInputStreamCallback:()=>Z,PullAudioOutputStream:()=>je,PushAudioInputStream:()=>ae,PushAudioOutputStream:()=>Ne,PushAudioOutputStreamCallback:()=>nt,RecognitionEventArgs:()=>dt,RecognitionResult:()=>gt,Recognizer:()=>er,ResultReason:()=>ie,ServiceEventArgs:()=>wn,ServicePropertyChannel:()=>Wn,SessionEventArgs:()=>vt,SourceLanguageConfig:()=>Si,SpeakerAudioDestination:()=>rt,SpeakerIdentificationModel:()=>li,SpeakerRecognitionCancellationDetails:()=>di,SpeakerRecognitionResult:()=>vi,SpeakerRecognitionResultType:()=>ui,SpeakerRecognizer:()=>gi,SpeakerVerificationModel:()=>fi,SpeechConfig:()=>At,SpeechConfigImpl:()=>_t,SpeechRecognitionCanceledEventArgs:()=>Rt,SpeechRecognitionEventArgs:()=>Ct,SpeechRecognitionResult:()=>yt,SpeechRecognizer:()=>Qr,SpeechSynthesisBookmarkEventArgs:()=>Ie,SpeechSynthesisEventArgs:()=>Ce,SpeechSynthesisOutputFormat:()=>ke,SpeechSynthesisResult:()=>Pe,SpeechSynthesisVisemeEventArgs:()=>Oe,SpeechSynthesisWordBoundaryEventArgs:()=>Re,SpeechSynthesizer:()=>_o,SpeechTranslationConfig:()=>xt,SpeechTranslationConfigImpl:()=>kt,TranslationRecognitionCanceledEventArgs:()=>sn,TranslationRecognitionEventArgs:()=>It,TranslationRecognitionResult:()=>Et,TranslationRecognizer:()=>mn,TranslationSynthesisEventArgs:()=>Ot,TranslationSynthesisResult:()=>Tt,Translations:()=>an,TurnStatusReceivedEventArgs:()=>Ln,User:()=>so,VoiceProfile:()=>$n,VoiceProfileAuthorizationPhraseResult:()=>ti,VoiceProfileCancellationDetails:()=>ei,VoiceProfileClient:()=>hi,VoiceProfileEnrollmentCancellationDetails:()=>Yn,VoiceProfileEnrollmentResult:()=>Xn,VoiceProfileResult:()=>Zn,VoiceProfileType:()=>tn});var n=r(61324);const i=()=>(0,n.v4)(),o=()=>i().replace(new RegExp("-","g"),"").toUpperCase();var s,a,c,u,p,h,l,v;(v=s||(s={}))[v.Debug=0]="Debug",v[v.Info=1]="Info",v[v.Warning=2]="Warning",v[v.Error=3]="Error";class d{constructor(e,t){this.privName=e,this.privEventId=o(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}class f extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}class g extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}class y extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}class m{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.onEvent=e=>{if(this.isDisposed())throw new y("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)},this.attach=e=>{const t=o();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}},this.attachListener=e=>this.attach(e.onEvent),this.isDisposed=()=>this.privIsDisposed,this.dispose=()=>{this.privEventListeners=null,this.privIsDisposed=!0},this.privMetadata=e}get metadata(){return this.privMetadata}}class S{static get instance(){return S.privInstance}}S.privInstance=new m,S.setEventSource=e=>{if(!e)throw new f("eventSource");S.privInstance=e};class b{constructor(e,t){this.encode=e=>{const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const r=2*t.length,n=new ArrayBuffer(r),i=new DataView(n);return this.floatTo16BitPCM(i,0,t),n},this.setString=(e,t,r)=>{for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},this.floatTo16BitPCM=(e,t,r)=>{for(let n=0;n<r.length;n++,t+=2){const i=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,i<0?32768*i:32767*i,!0)}},this.downSampleAudioFrame=(e,t,r)=>{if(r===t||r>t)return e;const n=t/r,i=Math.round(e.length/n),o=new Float32Array(i);let s=0,a=0;for(;a<i;){const t=Math.round((a+1)*n);let r=0,i=0;for(;s<t&&s<e.length;)r+=e[s++],i++;o[a++]=r/i}return o},this.privActualSampleRate=e,this.privDesiredSampleRate=t}}class C{constructor(){this.record=(e,t,r)=>{const n=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(r){t=2048;let n=e.sampleRate;for(;t<16384&&n>=32e3;)t<<=1,n>>=1;return e.createScriptProcessor(t,1,1)}})(),i=new b(e.sampleRate,16e3);let o=!0;n.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const e=i.encode(t);e&&(r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),o=!1)}};const s=e.createMediaStreamSource(t);this.privSpeechProcessorScript&&e.audioWorklet?e.audioWorklet.addModule(this.privSpeechProcessorScript).then((()=>{const n=new AudioWorkletNode(e,"speech-processor");n.port.onmessage=e=>{const t=e.data;if(r&&!r.isClosed){const e=i.encode(t);e&&(r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),o=!1)}},s.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:s,stream:t}})).catch((()=>{s.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:s,stream:t}})):(s.connect(n),n.connect(e.destination),this.privMediaResources={scriptProcessorNode:n,source:s,stream:t})},this.releaseMediaResources=e=>{this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privMediaResources.stream.getTracks().forEach((e=>e.stop())),this.privMediaResources.source=null))}}setWorkletUrl(e){this.privSpeechProcessorScript=e}}!function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=32]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceResponse_ProfanityOption=33]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=34]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=35]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=36]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=37]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=38]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.Conversation_ApplicationId=39]="Conversation_ApplicationId",e[e.Conversation_DialogType=40]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=41]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=42]="Conversation_From_Id",e[e.Conversation_Conversation_Id=43]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=44]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=45]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=46]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=47]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=48]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=49]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=50]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=51]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=52]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=53]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=54]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=55]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=56]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=57]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=58]="PronunciationAssessment_Params"}(a||(a={})),function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(c||(c={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(u||(u={}));class P{constructor(e,t){this.privRecognitionMode=c.Interactive,this.privSpeechServiceConfig=e||new w(new R(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10)}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===c.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=c[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==c.Interactive}get autoDetectSourceLanguages(){return this.parameters.getProperty(a.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get maxRetryCount(){return this.privMaxRetryCount}}class w{constructor(e){this.serialize=()=>JSON.stringify(this,((e,t)=>{if(t&&"object"==typeof t){const e={};for(const r in t)Object.hasOwnProperty.call(t,r)&&(e[r&&r.charAt(0).toLowerCase()+r.substring(1)]=t[r]);return e}return t})),this.context=e}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}}class R{constructor(e){this.system=new I,this.os=e}}class I{constructor(){this.name="SpeechSDK",this.version="1.17.0",this.build="JavaScript",this.lang="JavaScript"}}class O{constructor(e,t,r){this.platform=e,this.name=t,this.version=r}}!function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(p||(p={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(h||(h={})),function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(l||(l={}));class E{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise(((e,t)=>{this.privResolve=e,this.privReject=t}))}get promise(){return this.privPromise}}function T(e,t,r){e.then((e=>{try{t&&t(e)}catch(e){if(r)try{if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e)}catch(e){}}}),(e=>{if(r)try{if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e)}catch(e){}}))}class A extends d{constructor(e,t,r=s.Info){super(e,r),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}class _ extends A{constructor(e){super("AudioSourceInitializingEvent",e)}}class x extends A{constructor(e){super("AudioSourceReadyEvent",e)}}class k extends A{constructor(e){super("AudioSourceOffEvent",e)}}class M extends A{constructor(e,t){super("AudioSourceErrorEvent",e,s.Error),this.privError=t}get error(){return this.privError}}class D extends A{constructor(e,t,r){super(e,t),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}class j extends D{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}class z extends D{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}class N extends D{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}class L extends D{constructor(e,t,r){super("AudioStreamNodeErrorEvent",e,t),this.privError=r}get error(){return this.privError}}class B{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.get=e=>(this.throwIfDisposed(),this.privList[e]),this.first=()=>this.get(0),this.last=()=>this.get(this.length()-1),this.add=e=>{this.throwIfDisposed(),this.insertAt(this.privList.length,e)},this.insertAt=(e,t)=>{this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)},this.removeFirst=()=>(this.throwIfDisposed(),this.removeAt(0)),this.removeLast=()=>(this.throwIfDisposed(),this.removeAt(this.length()-1)),this.removeAt=e=>(this.throwIfDisposed(),this.remove(e,1)[0]),this.remove=(e,t)=>{this.throwIfDisposed();const r=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),r},this.clear=()=>{this.throwIfDisposed(),this.remove(0,this.length())},this.length=()=>(this.throwIfDisposed(),this.privList.length),this.onAdded=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}},this.onRemoved=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}},this.onDisposed=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}},this.join=e=>(this.throwIfDisposed(),this.privList.join(e)),this.toArray=()=>{const e=Array();return this.privList.forEach((t=>{e.push(t)})),e},this.any=e=>(this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0),this.all=e=>(this.throwIfDisposed(),this.where(e).length()===this.length()),this.forEach=e=>{this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)},this.select=e=>{this.throwIfDisposed();const t=[];for(let r=0;r<this.privList.length;r++)t.push(e(this.privList[r],r));return new B(t)},this.where=e=>{this.throwIfDisposed();const t=new B;for(let r=0;r<this.privList.length;r++)e(this.privList[r],r)&&t.add(this.privList[r]);return t},this.orderBy=e=>{this.throwIfDisposed();const t=this.toArray().sort(e);return new B(t)},this.orderByDesc=e=>(this.throwIfDisposed(),this.orderBy(((t,r)=>e(r,t)))),this.clone=()=>(this.throwIfDisposed(),new B(this.toArray())),this.concat=e=>(this.throwIfDisposed(),new B(this.privList.concat(e.toArray()))),this.concatArray=e=>(this.throwIfDisposed(),new B(this.privList.concat(e))),this.isDisposed=()=>null==this.privList,this.dispose=e=>{this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))},this.throwIfDisposed=()=>{if(this.isDisposed())throw new y("List",this.privDisposeReason)},this.triggerSubscriptions=e=>{if(e)for(const t in e)t&&e[t]()},this.privList=[],e)for(const t of e)this.privList.push(t)}}var F,U=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(F||(F={}));class q{constructor(e){this.privPromiseStore=new B,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.enqueue=e=>{this.throwIfDispose(),this.enqueueFromPromise(new Promise(((t,r)=>{t(e)})))},this.enqueueFromPromise=e=>{this.throwIfDispose(),e.then((e=>{this.privList.add(e)}),(e=>{}))},this.dequeue=()=>{this.throwIfDispose();const e=new E;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:F.Dequeue}),this.drain()),e.promise},this.peek=()=>{this.throwIfDispose();const e=new E;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:F.Peek}),this.drain()),e.promise},this.length=()=>(this.throwIfDispose(),this.privList.length()),this.isDisposed=()=>null==this.privSubscribers,this.drain=()=>{if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const r=e.removeFirst();if(r.type===F.Peek)r.deferral.resolve(t.first());else{const e=t.removeFirst();r.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}},this.throwIfDispose=()=>{if(this.isDisposed()){if(this.privDisposeReason)throw new g(this.privDisposeReason);throw new y("Queue")}if(this.privIsDisposing)throw new g("Queue disposing")},this.privList=e||new B,this.privDetachables=[],this.privSubscribers=new B,this.privDetachables.push(this.privList.onAdded(this.drain))}drainAndDispose(e,t){return U(this,void 0,void 0,(function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach((e=>{t.push(e)})),Promise.all(t).finally((()=>{this.privSubscribers=null,this.privList.forEach(((t,r)=>{e(t)})),this.privList=null})).then()}this.privSubscribers=null,this.privList=null}}))}dispose(e){return U(this,void 0,void 0,(function*(){yield this.drainAndDispose(null,e)}))}}var V;class H{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.read=()=>{if(this.privIsReadEnded)throw new g("Stream read has already finished");return this.privReaderQueue.dequeue().then((e=>{return t=this,r=void 0,i=function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e},new((n=void 0)||(n=Promise))((function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((i=i.apply(t,r||[])).next())}));var t,r,n,i}))},this.readEnded=()=>{this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new q)},this.throwIfClosed=()=>{if(this.privIsWriteEnded)throw new g("Stream closed")},this.privId=e||o(),this.privReaderQueue=new q}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}}}class W extends H{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const r=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),n=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(e.buffer.slice(t,r+t));n.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=r,t+=r,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}!function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw"}(V||(V={}));class K{static getDefaultInputFormat(){return J.getDefaultInputFormat()}static getWaveFormatPCM(e,t,r){return new J(e,t,r)}}class J extends K{constructor(e=16e3,t=16,r=1,n=V.PCM){switch(super(),this.setString=(e,t,r)=>{for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},n){case V.PCM:this.formatTag=1;break;case V.ALaw:this.formatTag=6;break;case V.MuLaw:this.formatTag=7}this.bitsPerSample=t,this.samplesPerSec=e,this.channels=r,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),this.privHeader=new ArrayBuffer(44);const i=new DataView(this.privHeader);this.setString(i,0,"RIFF"),i.setUint32(4,0,!0),this.setString(i,8,"WAVEfmt "),i.setUint32(16,16,!0),i.setUint16(20,this.formatTag,!0),i.setUint16(22,this.channels,!0),i.setUint32(24,this.samplesPerSec,!0),i.setUint32(28,this.avgBytesPerSec,!0),i.setUint16(32,this.channels*(this.bitsPerSample/8),!0),i.setUint16(34,this.bitsPerSample,!0),this.setString(i,36,"data"),i.setUint32(40,0,!0)}static getDefaultInputFormat(){return new J}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}}var G=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Q{constructor(e,t,r,n){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.turnOn=()=>{if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new E;try{this.createAudioContext()}catch(e){if(e instanceof Error){const t=e;this.privInitializeDeferral.reject(t.name+": "+t.message)}else this.privInitializeDeferral.reject(e);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,r,n)=>{e.mediaDevices.getUserMedia(t).then(r).catch(n)}),t){const e=()=>{this.onEvent(new _(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new x(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},(e=>{this.privMediaStream=e,this.onEvent(new x(this.privId)),this.privInitializeDeferral.resolve()}),(e=>{const t=`Error occurred during microphone initialization: ${e}`;this.privInitializeDeferral.reject(t),this.onEvent(new M(this.privId,t))}))};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch((e=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${e}`)})):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new M(e,""))}return this.privInitializeDeferral.promise},this.id=()=>this.privId,this.attach=e=>(this.onEvent(new j(this.privId,e)),this.listen(e).then((t=>(this.onEvent(new z(this.privId,e)),{detach:()=>G(this,void 0,void 0,(function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new N(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()})))),this.detach=e=>{e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new N(this.privId,e)))},this.listen=e=>G(this,void 0,void 0,(function*(){yield this.turnOn();const t=new W(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new L(this.privId,e,t)),t}return t})),this.onEvent=e=>{this.privEvents.onEvent(e),S.instance.onEvent(e)},this.createAudioContext=()=>{this.privContext||(this.privContext=J.getAudioContext(Q.AUDIOFORMAT.samplesPerSec))},this.privOutputChunkSize=Q.AUDIOFORMAT.avgBytesPerSec/10,this.privId=r||o(),this.privEvents=new m,this.privMediaStream=n||null}get format(){return Promise.resolve(Q.AUDIOFORMAT)}get blob(){return Promise.reject("Not implemented for Mic input")}turnOff(){return G(this,void 0,void 0,(function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new k(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()}))}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then((e=>({bitspersample:Q.AUDIOFORMAT.bitsPerSample,channelcount:Q.AUDIOFORMAT.channels,connectivity:p.Unknown,manufacturer:"Speech SDK",model:e,samplerate:Q.AUDIOFORMAT.samplesPerSec,type:h.Microphones})))}setProperty(e,t){if("MICROPHONE-WorkletSourceUrl"!==e)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(t)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const r=new E;return navigator.mediaDevices.enumerateDevices().then((e=>{for(const r of e)if(r.deviceId===t){this.privMicrophoneLabel=r.label;break}r.resolve(this.privMicrophoneLabel)}),(()=>r.resolve(this.privMicrophoneLabel))),r.promise}destroyAudioContext(){return G(this,void 0,void 0,(function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?(yield this.privContext.close(),this.privContext=null):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())}))}}Q.AUDIOFORMAT=K.getDefaultInputFormat();var $=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class X{constructor(e,t,r){this.privStreams={},this.privHeaderEnd=44,this.turnOn=()=>{if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new M(e,"")),Promise.reject(e)}this.onEvent(new _(this.privId)),this.onEvent(new x(this.privId))},this.id=()=>this.privId,this.attach=e=>$(this,void 0,void 0,(function*(){this.onEvent(new j(this.privId,e));const t=yield this.upload(e);return this.onEvent(new z(this.privId,e)),Promise.resolve({detach:()=>$(this,void 0,void 0,(function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new N(this.privId,e)),yield this.turnOff()})),id:()=>e,read:()=>t.read()})})),this.detach=e=>{e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new N(this.privId,e)))},this.turnOff=()=>{for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new k(this.privId)),Promise.resolve()},this.onEvent=e=>{this.privEvents.onEvent(e),S.instance.onEvent(e)},this.privId=r||o(),this.privEvents=new m,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}get blob(){return Promise.resolve(this.privSource)}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then((e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:p.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:h.File})))}readHeader(){const e=this.privSource.slice(0,512),t=new E,r=e=>{const r=new DataView(e),n=e=>String.fromCharCode(r.getUint8(e),r.getUint8(e+1),r.getUint8(e+2),r.getUint8(e+3));if("RIFF"!==n(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==n(8)||"fmt "!==n(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const i=r.getInt32(16,!0),o=r.getUint16(22,!0),s=r.getUint32(24,!0),a=r.getUint16(34,!0);let c=36+Math.max(i-16,0);for(;"data"!==n(c);c+=2)if(c>504)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,t.resolve(K.getWaveFormatPCM(s,a,o))};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;r(t)},t.readAsArrayBuffer(e)}else{const t=e;r(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return t.promise}upload(e){return $(this,void 0,void 0,(function*(){const t=t=>{const r=`Error occurred while processing '${this.privFilename}'. ${t}`;throw this.onEvent(new L(this.privId,e,r)),new Error(r)};try{yield this.turnOn();const r=yield this.privAudioFormatPromise,n=new W(r.avgBytesPerSec/10,e);this.privStreams[e]=n;const i=this.privSource.slice(this.privHeaderEnd),o=e=>{n.isClosed||(n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),n.close())};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&i instanceof Blob){const e=new FileReader;e.onerror=e=>{t(e.toString())},e.onload=e=>{const t=e.target.result;o(t)},e.readAsArrayBuffer(i)}else{const e=i;o(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return n}catch(e){t(e)}}))}}class Y{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(Y.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(Y.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const r of e)Y.throwIfNullOrWhitespace(r,t)}static throwIfFileDoesNotExist(e,t){Y.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}class Z{}var ee,te,re,ne,ie,oe=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class se{constructor(){}static createPushStream(e){return ae.create(e)}static createPullStream(e,t){return ue.create(e,t)}}class ae extends se{static create(e){return new ce(e)}}class ce extends ae{constructor(e){super(),this.onEvent=e=>{this.privEvents.onEvent(e),S.instance.onEvent(e)},this.privFormat=void 0===e?J.getDefaultInputFormat():e,this.privEvents=new m,this.privId=o(),this.privStream=new W(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}get blob(){return this.attach("id").then((e=>{const t=[];let r=Buffer.from("");const n=()=>e.read().then((e=>!e||e.isEnd?"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof Blob?Promise.resolve(new Blob(t)):Promise.resolve(Buffer.from(r)):("undefined"!=typeof Blob?t.push(e.buffer):r=Buffer.concat([r,this.toBuffer(e.buffer)]),n())));return n()}))}turnOn(){this.onEvent(new _(this.privId)),this.onEvent(new x(this.privId))}attach(e){return oe(this,void 0,void 0,(function*(){this.onEvent(new j(this.privId,e)),yield this.turnOn();const t=this.privStream;return this.onEvent(new z(this.privId,e)),{detach:()=>oe(this,void 0,void 0,(function*(){return t.readEnded(),this.onEvent(new N(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}}))}detach(e){this.onEvent(new N(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:p.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:h.Stream})}toBuffer(e){const t=Buffer.alloc(e.byteLength),r=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=r[e];return t}}class ue extends se{constructor(){super()}static create(e,t){return new pe(e,t)}}class pe extends ue{constructor(e,t){super(),this.onEvent=e=>{this.privEvents.onEvent(e),S.instance.onEvent(e)},this.privFormat=void 0===t?K.getDefaultInputFormat():t,this.privEvents=new m,this.privId=o(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}get blob(){return Promise.reject("Not implemented")}turnOn(){this.onEvent(new _(this.privId)),this.onEvent(new x(this.privId))}attach(e){return oe(this,void 0,void 0,(function*(){return this.onEvent(new j(this.privId,e)),yield this.turnOn(),this.onEvent(new z(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new N(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const r=new ArrayBuffer(this.privBufferSize-t),n=this.privCallback.read(r);if(void 0===e?e=r:new Int8Array(e).set(new Int8Array(r),t),0===n)break;t+=n}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}))}detach(e){this.onEvent(new N(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:p.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:h.Stream})}}!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(ee||(ee={}));class he{constructor(e,t,r,n){if(this.privBody=null,e===ee.Text&&t&&"string"!=typeof t)throw new g("Payload must be a string");if(e===ee.Binary&&t&&!(t instanceof ArrayBuffer))throw new g("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=r||{},this.privId=n||o(),this.messageType){case ee.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case ee.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===ee.Binary)throw new g("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===ee.Text)throw new g("Not supported for text message");return this.privBody}get id(){return this.privId}}class le extends d{constructor(e,t,r=s.Info){super(e,r),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}class ve extends d{constructor(e,t,r=s.Info){super(e,r),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}class de extends ve{constructor(e,t,r){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}}class fe extends ve{constructor(e,t){super("ConnectionEstablishedEvent",e)}}class ge extends ve{constructor(e,t,r){super("ConnectionClosedEvent",e,s.Debug),this.privReason=r,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class ye extends ve{constructor(e,t,r){super("ConnectionErrorEvent",e,s.Debug),this.privMessage=t,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}}class me extends ve{constructor(e,t,r){super("ConnectionEstablishErrorEvent",e,s.Error),this.privStatusCode=t,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class Se extends ve{constructor(e,t,r){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}class be extends ve{constructor(e,t,r){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}!function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(te||(te={})),function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(re||(re={})),function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError"}(ne||(ne={}));class Ce{constructor(e){this.privResult=e}get result(){return this.privResult}}class Pe{constructor(e,t,r,n,i){this.privResultId=e,this.privReason=t,this.privAudioData=r,this.privErrorDetails=n,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get audioData(){return this.privAudioData}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}!function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile"}(ie||(ie={}));class we{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let r;r="string"==typeof e?e:a[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===r)return this.privValues[e];return t}setProperty(e,t){let r;r="string"==typeof e?e:a[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===r)return void(this.privValues[e]=t);this.privKeys.push(r),this.privValues.push(t)}clone(){const e=new we;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach((t=>{if(void 0===e.getProperty(t,void 0)){const r=this.getProperty(t);e.setProperty(t,r)}}))}}class Re{constructor(e,t,r,n){this.privAudioOffset=e,this.privText=t,this.privWordLength=r,this.privTextOffset=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}}class Ie{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}class Oe{constructor(e,t,r){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}const Ee="OutputFormat",Te="CancellationErrorCode",Ae="ServiceProperties",_e="ForceDictation",xe="OpenRange";var ke;!function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw"}(ke||(ke={}));class Me extends J{constructor(e,t,r,n,i,o,s,a,c){super(r,o,t,e),this.formatTag=e,this.avgBytesPerSec=n,this.blockAlign=i,this.priAudioFormatString=s,this.priRequestAudioFormatString=a,this.priHasHeader=c}static fromSpeechSynthesisOutputFormat(e){return void 0===e?Me.getDefaultOutputFormat():Me.fromSpeechSynthesisOutputFormatString(Me.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new Me(V.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new Me(V.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new Me(V.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new Me(V.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new Me(V.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new Me(V.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new Me(V.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new Me(V.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new Me(V.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new Me(V.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new Me(V.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new Me(V.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new Me(V.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new Me(V.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new Me(V.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new Me(V.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new Me(V.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new Me(V.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new Me(V.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new Me(V.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new Me(V.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new Me(V.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new Me(V.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new Me(V.WEBM_OPUS,1,16e3,8e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new Me(V.WEBM_OPUS,1,24e3,8e3,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new Me(V.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new Me(V.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new Me(V.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);default:return new Me(V.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return Me.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){this.priHasHeader&&new DataView(this.privHeader).setUint32(40,e,!0)}get requestAudioFormatString(){return this.priRequestAudioFormatString}}Me.SpeechSynthesisOutputFormatToString={[ke.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[ke.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[ke.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[ke.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[ke.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[ke.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[ke.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[ke.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[ke.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[ke.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[ke.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[ke.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[ke.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[ke.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[ke.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[ke.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[ke.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[ke.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[ke.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[ke.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[ke.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[ke.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[ke.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[ke.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[ke.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[ke.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[ke.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[ke.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[ke.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw"};class De{constructor(){}static createPullStream(){return je.create()}}class je extends De{static create(){return new ze}}class ze extends je{constructor(){super(),this.privId=o(),this.privStream=new H}set format(e){null==e&&(this.privFormat=Me.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return t=this,r=void 0,i=function*(){const t=new Int8Array(e);let r=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<e.byteLength&&!this.privStream.isReadEnded;){const n=yield this.privStream.read();if(void 0===n||n.isEnd)yield this.privStream.readEnded();else{let i;n.buffer.byteLength>e.byteLength-r?(i=n.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(n.buffer.slice(e.byteLength-r))):i=n.buffer,t.set(new Int8Array(i),r),r+=i.byteLength}}return r},new((n=void 0)||(n=Promise))((function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((i=i.apply(t,r||[])).next())}));var t,r,n,i}write(e){Y.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}class Ne extends De{constructor(){super()}static create(e){return new Le(e)}}class Le extends Ne{constructor(e){super(),this.privId=o(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}class Be extends d{constructor(e,t,r=s.Info){super(e,r),this.privRequestId=t}get requestId(){return this.privRequestId}}class Fe extends Be{constructor(e,t,r){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}class Ue extends Be{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}class qe extends Be{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}var Ve,He=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class We{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.onPreConnectionStart=(e,t)=>{this.privAuthFetchEventId=e,this.onEvent(new Ue(this.privRequestId,this.privAuthFetchEventId))},this.onAuthCompleted=(e,t)=>{e&&this.onComplete()},this.onConnectionEstablishCompleted=(e,t)=>{if(200===e)return this.onEvent(new qe(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()},this.onServiceResponseMessage=e=>{const t=JSON.parse(e);this.streamId=t.audio.streamId},this.onServiceTurnEndResponse=()=>{this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()},this.onServiceTurnStartResponse=()=>{this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new E},this.dispose=e=>{this.privIsDisposed||(this.privIsDisposed=!0)},this.onEvent=e=>{S.instance.onEvent(e)},this.onComplete=()=>{this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))},this.privRequestId=o(),this.privTurnDeferral=new E,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get bytesReceived(){return this.privBytesReceived}getAllReceivedAudio(){return He(this,void 0,void 0,(function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}))}getAllReceivedAudioWithHeader(){return He(this,void 0,void 0,(function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=Ye.addHeader(e,this.audioOutputFormat),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}))}startNewSynthesis(e,t,r,n){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=r,this.privAudioOutputStream=new ze,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privPartialVisemeAnimation="",void 0!==n&&(this.privTurnAudioDestination=n,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new Fe(this.requestId,void 0,void 0===n?void 0:n.id()))}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onWordBoundaryEvent(e){this.updateTextOffset(e)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}updateTextOffset(e){this.privTextOffset>=0&&(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length),this.privIsSSML&&this.privRawText.indexOf("<",this.privTextOffset+1)>this.privRawText.indexOf(">",this.privTextOffset+1)&&this.updateTextOffset(e))}readAllAudioFromStream(){return He(this,void 0,void 0,(function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}))}}class Ke{constructor(e){this.privContext={},this.privSpeechSynthesizer=e}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){const e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)}buildSynthesisContext(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,sentenceBoundaryEnabled:!1,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:!!this.privSpeechSynthesizer.wordBoundary},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}}}class Je{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}!function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme"}(Ve||(Ve={}));class Ge{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new Ge(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}class Qe{}Qe.AuthKey="Ocp-Apim-Subscription-Key",Qe.ConnectionId="X-ConnectionId",Qe.ContentType="Content-Type",Qe.CustomCommandsAppId="X-CommandsAppId",Qe.Path="Path",Qe.RequestId="X-RequestId",Qe.RequestStreamId="X-StreamId",Qe.RequestTimestamp="X-Timestamp";class $e extends he{constructor(e,t,r,n,i,o,s,a){if(!t)throw new f("path");if(!r)throw new f("requestId");const c={};if(c[Qe.Path]=t,c[Qe.RequestId]=r,c[Qe.RequestTimestamp]=(new Date).toISOString(),n&&(c[Qe.ContentType]=n),o&&(c[Qe.RequestStreamId]=o),s)for(const e in s)e&&(c[e]=s[e]);a?super(e,i,c,a):super(e,i,c),this.privPath=t,this.privRequestId=r,this.privContentType=n,this.privStreamId=o,this.privAdditionalHeaders=s}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}}$e.fromConnectionMessage=e=>{let t=null,r=null,n=null,i=null,o=null;const s={};if(e.headers)for(const a in e.headers)a&&(a.toLowerCase()===Qe.Path.toLowerCase()?t=e.headers[a]:a.toLowerCase()===Qe.RequestId.toLowerCase()?r=e.headers[a]:a.toLowerCase()===Qe.RequestTimestamp.toLowerCase()?i=e.headers[a]:a.toLowerCase()===Qe.ContentType.toLowerCase()?n=e.headers[a]:a.toLowerCase()===Qe.RequestStreamId.toLowerCase()?o=e.headers[a]:s[a]=e.headers[a]);return new $e(e.messageType,t,r,n,e.body,o,s,e.id)};var Xe=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Ye{constructor(e,t,r,n,i){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSynthesisContext=e=>{const t=this.synthesisContext.toJSON();if(t)return e.send(new $e(ee.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))},this.sendSpeechServiceConfig=(e,t)=>{if(t)return e.send(new $e(ee.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))},this.sendSsmlMessage=(e,t,r)=>e.send(new $e(ee.Text,"ssml",r,"application/ssml+xml",t)),!e)throw new f("authentication");if(!t)throw new f("connectionFactory");if(!r)throw new f("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=r,this.privIsDisposed=!1,this.privSpeechSynthesizer=n,this.privSessionAudioDestination=i,this.privSynthesisTurn=new We,this.privConnectionEvents=new m,this.privServiceEvents=new m,this.privSynthesisContext=new Ke(this.privSpeechSynthesizer),this.privAgentConfig=new Je,this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(re.Error,1007===t.statusCode?ne.BadRequestParameters:ne.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)}}))}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}static addHeader(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);const r=new Uint8Array(e.byteLength+t.header.byteLength);return r.set(new Uint8Array(t.header),0),r.set(new Uint8Array(e),t.header.byteLength),r.buffer}isDisposed(){return this.privIsDisposed}dispose(e){return Xe(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}}))}connect(){return Xe(this,void 0,void 0,(function*(){yield this.connectImpl()}))}sendNetworkMessage(e,t){return Xe(this,void 0,void 0,(function*(){const r="string"==typeof t?ee.Text:ee.Binary,n="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new $e(r,e,this.privSynthesisTurn.requestId,n,t))}))}Speak(e,t,r,n,i,o){return Xe(this,void 0,void 0,(function*(){let s;if(s=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(s,r,n,i);this.privSuccessCallback=n,this.privErrorCallback=i,this.privSynthesisTurn.startNewSynthesis(r,e,t,o);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,s,r);const t=new Ce(new Pe(r,ie.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t),this.receiveMessage()}catch(e){return this.cancelSynthesisLocal(re.Error,ne.ConnectionFailure,e),Promise.reject(e)}}))}cancelSynthesis(e,t,r,n){const i=new we;i.setProperty(Te,ne[r]);const o=new Pe(e,ie.Canceled,void 0,n,i);if(this.privSpeechSynthesizer.SynthesisCanceled){const e=new Ce(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,e)}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(o)}catch(e){}}cancelSynthesisLocal(e,t,r){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,r))}processTypeSpecificMessages(e,t,r){return!0}receiveMessage(){return Xe(this,void 0,void 0,(function*(){try{const e=yield this.fetchConnection(),t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!t)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const r=$e.fromConnectionMessage(t);if(r.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse();break;case"response":this.privSynthesisTurn.onServiceResponseMessage(r.textBody);break;case"audio":if(this.privSynthesisTurn.streamId.toLowerCase()===r.streamId.toLowerCase()&&r.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(r.binaryBody),this.privSpeechSynthesizer.synthesizing)try{const e=Ye.addHeader(r.binaryBody,this.privSynthesisTurn.audioOutputFormat),t=new Ce(new Pe(this.privSynthesisTurn.requestId,ie.SynthesizingAudio,e));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,t)}catch(e){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(r.binaryBody)}break;case"audio.metadata":const e=Ge.fromJSON(r.textBody).Metadata;for(const t of e)switch(t.Type){case Ve.WordBoundary:this.privSynthesisTurn.onWordBoundaryEvent(t.Data.text.Text);const e=new Re(t.Data.Offset,t.Data.text.Text,t.Data.text.Length,this.privSynthesisTurn.currentTextOffset);if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(e){}break;case Ve.Bookmark:const r=new Ie(t.Data.Offset,t.Data.Bookmark);if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,r)}catch(e){}break;case Ve.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(t),t.Data.IsLastAnimation){const e=new Oe(t.Data.Offset,t.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(e){}}}break;case"turn.end":let t;this.privSynthesisTurn.onServiceTurnEndResponse();try{const e=yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();t=new Pe(this.privSynthesisTurn.requestId,ie.SynthesizingAudioCompleted,e),this.privSuccessCallback&&this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new Ce(t))}catch(e){}break;default:this.processTypeSpecificMessages(r)||this.privServiceEvents&&this.serviceEvents.onEvent(new le(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch(e){}}))}connectImpl(e=!1){if(this.privConnectionPromise)return this.privConnectionPromise.then((e=>e.state()===te.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(e=>(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl())));this.privAuthFetchEventId=o(),this.privConnectionId=o(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then((t=>Xe(this,void 0,void 0,(function*(){yield this.privSynthesisTurn.onAuthCompleted(!1);const r=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);r.events.attach((e=>{this.connectionEvents.onEvent(e)}));const n=yield r.open();return 200===n.statusCode?(yield this.privSynthesisTurn.onConnectionEstablishCompleted(n.statusCode),Promise.resolve(r)):403!==n.statusCode||e?(yield this.privSynthesisTurn.onConnectionEstablishCompleted(n.statusCode,n.reason),Promise.reject(`Unable to contact server. StatusCode: ${n.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(a.SpeechServiceConnection_Endpoint)} Reason: ${n.reason}`)):this.connectImpl(!0)}))),(e=>Xe(this,void 0,void 0,(function*(){throw yield this.privSynthesisTurn.onAuthCompleted(!0,e),new Error(e)})))),this.privConnectionPromise.catch((()=>{})),this.privConnectionPromise}fetchConnection(){return Xe(this,void 0,void 0,(function*(){return this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===te.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(e=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}configureConnection(){return Xe(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}))}}Ye.telemetryDataEnabled=!0;class Ze extends d{constructor(e){super("BackgroundEvent",s.Error),this.privError=e}get error(){return this.privError}}var et=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const tt={[V.PCM]:"audio/wav",[V.MuLaw]:"audio/x-wav",[V.MP3]:"audio/mpeg",[V.OGG_OPUS]:"audio/ogg",[V.WEBM_OPUS]:"audio/webm; codecs=opus",[V.ALaw]:"audio/x-wav"};class rt{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||o(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,r){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((()=>{t&&t()}),(e=>{r&&r(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((()=>{e&&e()}),(e=>{t&&t(e)}));else if(void 0!==this.privAudioOutputStream)if(this.privFormat.formatTag!==V.PCM&&this.privFormat.formatTag!==V.MuLaw&&this.privFormat.formatTag!==V.ALaw||!1!==this.privFormat.hasHeader){let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then((n=>{r=Ye.addHeader(r,this.privFormat);const i=new Blob([r],{type:tt[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then((()=>{e&&e()}),(e=>{t&&t(e)}))}),(e=>{t&&t(e)}))}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!=typeof AudioContext||void 0!==window.webkitAudioContext){this.privFormat=e;const t=tt[this.privFormat.formatTag];void 0===t?console.warn(`Unknown mimeType for format ${V[this.privFormat.formatTag]}; playback is not supported.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=e=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=e=>{this.updateSourceBuffer().catch((e=>{S.instance.onEvent(new Ze(e))}))},this.privSourceBuffer.onupdateend=e=>{this.handleSourceBufferUpdateEnd().catch((e=>{S.instance.onEvent(new Ze(e))}))},this.privSourceBuffer.onupdatestart=e=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((e=>{S.instance.onEvent(new Ze(e))}))):(console.warn(`Format ${V[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new ze,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return et(this,void 0,void 0,(function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return this.privAudioBuffer.unshift(e),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())}))}handleSourceBufferUpdateEnd(){return et(this,void 0,void 0,(function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())}))}notifyPlayback(){return et(this,void 0,void 0,(function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))}))}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}class nt{}var it,ot,st,at=r(10592);class ct{constructor(e){this.id=()=>this.privId,Y.throwIfNullOrUndefined(at.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=at.openSync(e,"w")}set format(e){Y.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=at.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){Y.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",(()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),at.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),at.closeSync(this.privFd),this.privFd=void 0})),this.privWriteStream.end())}}class ut{static fromDefaultMicrophoneInput(){const e=new C;return new pt(new Q(e))}static fromMicrophoneInput(e){const t=new C;return new pt(new Q(t,e))}static fromWavFileInput(e,t="unnamedBuffer.wav"){return new pt(new X(e,t))}static fromStreamInput(e){if(e instanceof Z)return new pt(new pe(e));if(e instanceof se)return new pt(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){const t=new C;return new pt(new Q(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new ht(new rt)}static fromSpeakerOutput(e){if(void 0===e)return ut.fromDefaultSpeakerOutput();if(e instanceof rt)return new ht(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new ht(new ct(e))}static fromStreamOutput(e){if(e instanceof nt)return new ht(new Le(e));if(e instanceof Ne)return new ht(e);if(e instanceof je)return new ht(e);throw new Error("Not Supported Type")}}class pt extends ut{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then((()=>{e&&e()}),(e=>{t&&t(e)}))}id(){return this.privSource.id()}get blob(){return this.privSource.blob}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(Y.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}class ht extends ut{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(e,t){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(e,t){throw new Error("This AudioConfig instance does not support getting properties.")}}class lt{constructor(){this.privDisposed=!1}static fromFile(e){throw Y.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw Y.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}class vt{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}class dt extends vt{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}!function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(it||(it={}));class ft extends dt{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}class gt{constructor(e,t,r,n,i,o,s,a,c,u){this.privResultId=e,this.privReason=t,this.privText=r,this.privDuration=n,this.privOffset=i,this.privLanguage=o,this.privLanguageDetectionConfidence=s,this.privErrorDetails=a,this.privJson=c,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}class yt extends gt{constructor(e,t,r,n,i,o,s,a,c,u,p){super(e,t,r,n,i,o,s,c,u,p),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}class mt extends yt{constructor(e,t,r,n,i,o,s,a,c,u,p){super(t,r,n,i,o,s,a,void 0,c,u,p),this.privIntentId=e}get intentId(){return this.privIntentId}}class St{constructor(){}static fromEndpoint(e){Y.throwIfNull(e,"uri"),Y.throwIfNullOrWhitespace(e.hostname,"uri");const t=new bt,r=e.host.indexOf(".");if(-1===r)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,r);const n=e.pathname.lastIndexOf("/")+1;if(-1===n)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(n),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){Y.throwIfNullOrWhitespace(e,"appId");const t=new bt;return t.appId=e,t}static fromSubscription(e,t,r){Y.throwIfNullOrWhitespace(e,"subscriptionKey"),Y.throwIfNullOrWhitespace(t,"appId"),Y.throwIfNullOrWhitespace(r,"region");const n=new bt;return n.appId=t,n.region=r,n.subscriptionKey=e,n}}class bt extends St{}class Ct extends dt{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}class Pt extends Ct{}class wt extends dt{constructor(e,t,r,n,i){super(n,i),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}class Rt extends wt{}class It extends dt{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}class Ot extends vt{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}}class Et extends yt{constructor(e,t,r,n,i,o,s,a,c){super(t,r,n,i,o,void 0,void 0,void 0,s,a,c),this.privTranslations=e}get translations(){return this.privTranslations}}class Tt{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}!function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(ot||(ot={}));class At{constructor(){}static fromSubscription(e,t){Y.throwIfNullOrWhitespace(e,"subscriptionKey"),Y.throwIfNullOrWhitespace(t,"region");const r=new _t;return r.setProperty(a.SpeechServiceConnection_Region,t),r.setProperty(a.SpeechServiceConnection_IntentRegion,t),r.setProperty(a.SpeechServiceConnection_Key,e),r}static fromEndpoint(e,t){Y.throwIfNull(e,"endpoint");const r=new _t;return r.setProperty(a.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&r.setProperty(a.SpeechServiceConnection_Key,t),r}static fromHost(e,t){Y.throwIfNull(e,"hostName");const r=new _t;return r.setProperty(a.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(a.SpeechServiceConnection_Key,t),r}static fromAuthorizationToken(e,t){Y.throwIfNull(e,"authorizationToken"),Y.throwIfNullOrWhitespace(t,"region");const r=new _t;return r.setProperty(a.SpeechServiceConnection_Region,t),r.setProperty(a.SpeechServiceConnection_IntentRegion,t),r.authorizationToken=e,r}close(){}}class _t extends At{constructor(){super(),this.privProperties=new we,this.speechRecognitionLanguage="en-US",this.outputFormat=it.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(a.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(a.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(a.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(a.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(a.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(a.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(a.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(a.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return it[this.privProperties.getProperty(Ee,void 0)]}set outputFormat(e){this.privProperties.setProperty(Ee,it[e])}get endpointId(){return this.privProperties.getProperty(a.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(a.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){Y.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,r,n){this.setProperty(a[a.SpeechServiceConnection_ProxyHostName],e),this.setProperty(a[a.SpeechServiceConnection_ProxyPort],t),this.setProperty(a[a.SpeechServiceConnection_ProxyUserName],r),this.setProperty(a[a.SpeechServiceConnection_ProxyPassword],n)}setServiceProperty(e,t,r){const n=JSON.parse(this.privProperties.getProperty(Ae,"{}"));n[e]=t,this.privProperties.setProperty(Ae,JSON.stringify(n))}setProfanity(e){this.privProperties.setProperty(a.SpeechServiceResponse_ProfanityOption,ot[e])}enableAudioLogging(){this.privProperties.setProperty(a.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(a.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(_e,"true")}clone(){const e=new _t;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(a.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(a.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(a.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(a.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return ke[this.privProperties.getProperty(a.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(a.SpeechServiceConnection_SynthOutputFormat,ke[e])}}class xt extends At{constructor(){super()}static fromSubscription(e,t){Y.throwIfNullOrWhitespace(e,"subscriptionKey"),Y.throwIfNullOrWhitespace(t,"region");const r=new kt;return r.properties.setProperty(a.SpeechServiceConnection_Key,e),r.properties.setProperty(a.SpeechServiceConnection_Region,t),r}static fromAuthorizationToken(e,t){Y.throwIfNullOrWhitespace(e,"authorizationToken"),Y.throwIfNullOrWhitespace(t,"region");const r=new kt;return r.properties.setProperty(a.SpeechServiceAuthorization_Token,e),r.properties.setProperty(a.SpeechServiceConnection_Region,t),r}static fromHost(e,t){Y.throwIfNull(e,"hostName");const r=new kt;return r.setProperty(a.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(a.SpeechServiceConnection_Key,t),r}static fromEndpoint(e,t){Y.throwIfNull(e,"endpoint"),Y.throwIfNull(t,"subscriptionKey");const r=new kt;return r.properties.setProperty(a.SpeechServiceConnection_Endpoint,e.href),r.properties.setProperty(a.SpeechServiceConnection_Key,t),r}}class kt extends xt{constructor(){super(),this.privSpeechProperties=new we,this.outputFormat=it.Simple}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){Y.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(a[a.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(a[a.SpeechServiceConnection_Key])}get outputFormat(){return it[this.privSpeechProperties.getProperty(Ee,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(Ee,it[e])}get endpointId(){return this.privSpeechProperties.getProperty(a.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(a.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){Y.throwIfNullOrWhitespace(e,"value");const t=this.targetLanguages;t.push(e),this.privSpeechProperties.setProperty(a.SpeechServiceConnection_TranslationToLanguages,t.join(","))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(a.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(a.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(a[a.SpeechServiceConnection_TranslationVoice])}set voiceName(e){Y.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(a.SpeechServiceConnection_Region)}setProxy(e,t,r,n){this.setProperty(a[a.SpeechServiceConnection_ProxyHostName],e),this.setProperty(a[a.SpeechServiceConnection_ProxyPort],t),this.setProperty(a[a.SpeechServiceConnection_ProxyUserName],r),this.setProperty(a[a.SpeechServiceConnection_ProxyPassword],n)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t,r){const n=JSON.parse(this.privSpeechProperties.getProperty(Ae,"{}"));n[e]=t,this.privSpeechProperties.setProperty(Ae,JSON.stringify(n))}setProfanity(e){this.privSpeechProperties.setProperty(a.SpeechServiceResponse_ProfanityOption,ot[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(a.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(a.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(_e,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(a.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(a.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(a.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(a.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return ke[this.privSpeechProperties.getProperty(a.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(a.SpeechServiceConnection_SynthOutputFormat,ke[e])}}class Mt{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.id=()=>this.privAudioNode.id(),this.privAudioNode=e,this.privBytesPerSecond=t}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!=t%2&&t++;let r=0;for(;r<this.privBuffers.length&&t>=this.privBuffers[r].chunk.buffer.byteLength;)t-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const e=this.privBuffers[r].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then((e=>(e&&e.buffer&&(this.privBuffers.push(new Dt(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e)))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let r=Math.round(t*this.privBytesPerSecond*1e-7),n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(n)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const r=t.byteOffset/this.privBytesPerSecond*1e7,n=r+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=r&&e<=n)return t.chunk.timeReceived}return 0}}class Dt{constructor(e,t,r){this.chunk=e,this.serial=t,this.byteOffset=r}}class jt{}jt.workerTimers=null,jt.clearTimeout=e=>jt.timers().clearTimeout(e),jt.setTimeout=(e,t)=>jt.timers().setTimeout(e,t),jt.load=e=>{const t=new Map([[0,()=>{}]]),r=new Map,n=new Worker(e);return n.addEventListener("message",(({data:e})=>{if(jt.isCallNotification(e)){const{params:{timerId:n}}=e,i=t.get(n);if("number"==typeof i){const e=r.get(i);if(void 0===e||e!==n)throw new Error("The timer is in an undefined state.")}else{if(void 0===i)throw new Error("The timer is in an undefined state.");i(),t.delete(n)}}else{if(!jt.isClearResponse(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:n}=e,i=r.get(n);if(void 0===i)throw new Error("The timer is in an undefined state.");r.delete(n),t.delete(i)}}})),{clearTimeout:e=>{const i=Math.random();r.set(i,e),t.set(e,i),n.postMessage({id:i,method:"clear",params:{timerId:e}})},setTimeout:(e,r)=>{const i=Math.random();return t.set(i,e),n.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:i}}),i}}},jt.loadWorkerTimers=()=>()=>{if(null!==jt.workerTimers)return jt.workerTimers;const e=new Blob(['!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);return jt.workerTimers=jt.load(t),jt.workerTimers.setTimeout((()=>URL.revokeObjectURL(t)),0),jt.workerTimers},jt.timers=jt.loadWorkerTimers(),jt.isCallNotification=e=>void 0!==e.method&&"call"===e.method,jt.isClearResponse=e=>null===e.error&&"number"==typeof e.id;class zt extends d{constructor(e,t,r,n=s.Info){super(e,n),this.privRequestId=t,this.privSessionId=r}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}class Nt extends zt{constructor(e,t,r,n){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=r,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class Lt extends zt{constructor(e,t,r,n){super("ListeningStartedEvent",e,t),this.privAudioSourceId=r,this.privAudioNodeId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class Bt extends zt{constructor(e,t,r){super("ConnectingToServiceEvent",e,r),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}}class Ft extends zt{constructor(e,t,r,n,i){super("RecognitionStartedEvent",e,i),this.privAudioSourceId=t,this.privAudioNodeId=r,this.privAuthFetchEventId=n}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}!function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(st||(st={}));class Ut{constructor(e,t,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.onEvent=e=>{this.privIsDisposed||(e instanceof Nt&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof j&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof z&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof M&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof L&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof N&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof Bt&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof de&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof fe&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof me&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Se&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))},this.getTelemetry=()=>{const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r},this.dispose=()=>{this.privIsDisposed=!0},this.getConnectionError=e=>{switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}}var qt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Vt{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.onPreConnectionStart=(e,t)=>{this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new Bt(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))},this.onServiceTurnStartResponse=()=>{this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new E},this.getTelemetry=()=>this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null,this.onEvent=e=>{this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),S.instance.onEvent(e)},this.privAudioSourceId=e,this.privRequestId=o(),this.privAudioNodeId=o(),this.privTurnDeferral=new E,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRequestId=o(),this.privRecogNumber++,this.privServiceTelemetryListener=new Ut(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new Nt(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t,r){return qt(this,void 0,void 0,(function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new Lt(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}))}onAuthCompleted(e,t){return qt(this,void 0,void 0,(function*(){e&&(yield this.onComplete())}))}onConnectionEstablishCompleted(e,t){return qt(this,void 0,void 0,(function*(){if(200===e)return this.onEvent(new Ft(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())}))}onServiceTurnEndResponse(e){return qt(this,void 0,void 0,(function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privRequestId=o(),this.privAudioNode.replay())}))}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(e){return qt(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}))}onStopRecognizing(){return qt(this,void 0,void 0,(function*(){yield this.onComplete()}))}onSpeechEnded(){this.privIsSpeechEnded=!0}onComplete(){return qt(this,void 0,void 0,(function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())}))}detachAudioNode(){return qt(this,void 0,void 0,(function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))}))}}class Ht{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach(((e,r,n)=>{t.push({Text:e})})),e.Groups=[{Type:"Generic",Items:t}]}return e}}class Wt{constructor(e){this.privContext={},this.privDynamicGrammar=e}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}class Kt{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new Kt(e)}get Offset(){return this.privSpeechStartDetected.Offset}}var Jt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Gt{constructor(e,t,r,n,i){if(this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendSpeechContext=e=>{const t=this.speechContext.toJSON();if(t)return e.send(new $e(ee.Text,"speech.context",this.privRequestSession.requestId,"application/json",t))},this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSpeechServiceConfig=(e,t,r)=>{if(!0!==Gt.telemetryDataEnabled){const e={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("TranscriptionService_SingleChannel","false").toLowerCase()){const e=JSON.parse(r);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",r=JSON.stringify(e)}if(r)return e.send(new $e(ee.Text,"speech.config",t.requestId,"application/json",r))},!e)throw new f("authentication");if(!t)throw new f("connectionFactory");if(!r)throw new f("audioSource");if(!n)throw new f("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=r,this.privRecognizerConfig=n,this.privIsDisposed=!1,this.privRecognizer=i,this.privRequestSession=new Vt(this.privAudioSource.id()),this.privConnectionEvents=new m,this.privServiceEvents=new m,this.privDynamicGrammar=new Ht,this.privSpeechContext=new Wt(this.privDynamicGrammar),this.privAgentConfig=new Je,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=jt.setTimeout),this.connectionEvents.attach((e=>Jt(this,void 0,void 0,(function*(){if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&(yield this.cancelRecognitionLocal(re.Error,1007===t.statusCode?ne.BadRequestParameters:ne.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode))}}))))}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(a.ConversationTranslator_Token,e)}set authentication(e){this.privAuthentication=this.authentication}isDisposed(){return this.privIsDisposed}dispose(e){return Jt(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise)try{const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}catch(e){return}}))}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,r){return Jt(this,void 0,void 0,(function*(){if(void 0!==this.recognizeOverride)return this.recognizeOverride(e,t,r);this.privConnectionConfigurationPromise=null,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const n=this.connectImpl();let i;try{const e=yield this.audioSource.attach(this.privRequestSession.audioNodeId),t=yield this.audioSource.format,r=yield this.audioSource.deviceInfo;this.privIsLiveAudio=r.type&&r.type===h.Microphones,i=new Mt(e,t.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(i,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:r}}catch(e){throw yield this.privRequestSession.onStopRecognizing(),e}try{yield n}catch(e){return void(yield this.cancelRecognitionLocal(re.Error,ne.ConnectionFailure,e))}const o=new vt(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,o),this.receiveMessage(),this.sendAudio(i).catch((e=>Jt(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(re.Error,ne.RuntimeError,e)}))))}))}stopRecognizing(){return Jt(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}}))}connect(){return Jt(this,void 0,void 0,(function*(){return yield this.connectImpl(),Promise.resolve()}))}connectAsync(e,t){this.connectImpl().then((r=>{try{e&&e()}catch(e){t&&t(e)}}),(e=>{try{t&&t(e)}catch(e){}}))}disconnect(){return Jt(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(re.Error,ne.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride());try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=null}))}sendMessage(e){}sendNetworkMessage(e,t){return Jt(this,void 0,void 0,(function*(){const r="string"==typeof t?ee.Text:ee.Binary,n="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new $e(r,e,this.privRequestSession.requestId,n,t))}))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}sendTelemetryData(){return Jt(this,void 0,void 0,(function*(){const e=this.privRequestSession.getTelemetry();if(!0!==Gt.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(Gt.telemetryData)try{Gt.telemetryData(e)}catch(e){}const t=yield this.fetchConnection();yield t.send(new $e(ee.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}))}cancelRecognitionLocal(e,t,r){return Jt(this,void 0,void 0,(function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,r))}))}receiveMessage(){return Jt(this,void 0,void 0,(function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.privRequestSession.isRecognizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const r=$e.fromConnectionMessage(t);if(r.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(r.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=Kt.fromJSON(r.textBody),n=new dt(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,n);break;case"speech.enddetected":let i;i=r.textBody.length>0?r.textBody:"{ Offset: 0 }";const o=Kt.fromJSON(i);this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(o.Offset+this.privRequestSession.currentTurnAudioOffset);const s=new dt(o.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,s);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(re.EndOfStream,ne.NoError,void 0));const a=new vt(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,a));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(r))||this.privServiceEvents&&this.serviceEvents.onEvent(new le(r.path.toLowerCase(),r.textBody))}return this.receiveMessage()}catch(e){return null}}))}sendPrePayloadJSON(e){return Jt(this,void 0,void 0,(function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e),yield this.sendWaveHeader(e)}))}sendWaveHeader(e){return Jt(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;return e.send(new $e(ee.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))}))}connectImpl(){return this.privConnectionPromise?this.privConnectionPromise.then((e=>e.state()===te.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(e=>(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()))):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch((()=>{})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}fetchConnection(){return Jt(this,void 0,void 0,(function*(){return this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===te.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(e=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}sendAudio(e){return Jt(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;let r=Date.now();const n=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),i=t.avgBytesPerSec/1e3*parseInt(n,10),o=this.privRequestSession.recogNumber,s=()=>Jt(this,void 0,void 0,(function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){const n=yield this.fetchConnection(),a=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let c,u;if(!a||a.isEnd?(c=null,u=0):(c=a.buffer,this.privRequestSession.onAudioSent(c.byteLength),u=i>=this.privRequestSession.bytesSent?0:Math.max(0,r-Date.now())),0!==u&&(yield this.delay(u)),null!==c&&(r=Date.now()+1e3*c.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){if(n.send(new $e(ee.Binary,"audio",this.privRequestSession.requestId,null,c)).catch((()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch((()=>{}))})),!(null==a?void 0:a.isEnd))return s();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}}));return s()}))}retryableConnect(){return Jt(this,void 0,void 0,(function*(){let e=!1;this.privAuthFetchEventId=o();const t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:o(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let r=0,n="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),i=yield t;yield this.privRequestSession.onAuthCompleted(!1);const o=this.privConnectionFactory.create(this.privRecognizerConfig,i,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(o.events),o.events.attach((e=>{this.connectionEvents.onEvent(e)}));const s=yield o.open();if(200===s.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(s.statusCode),Promise.resolve(o);1006===s.statusCode&&(e=!0),r=s.statusCode,n=s.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(r,n),Promise.reject(`Unable to contact server. StatusCode: ${r}, ${this.privRecognizerConfig.parameters.getProperty(a.SpeechServiceConnection_Endpoint)} Reason: ${n}`)}))}delay(e){return new Promise(((t,r)=>{this.privSetTimeout(t,e)}))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const r=new Uint8Array(e);t+=e.byteLength+"\r\n";for(let n=0;n<e.byteLength;n++)t+=r[n].toString(16).padStart(2,"0")+" "}console.info(t)}sendFinalAudio(){return Jt(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();yield e.send(new $e(ee.Binary,"audio",this.privRequestSession.requestId,null,null))}))}configureConnection(){return Jt(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e),e)}))}}Gt.telemetryDataEnabled=!0;class Qt{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}class $t{constructor(e){if(this.fetch=e=>Promise.resolve(this.privAuthInfo),this.fetchOnExpiry=e=>Promise.resolve(this.privAuthInfo),!e)throw new f("subscriptionKey");this.privAuthInfo=new Qt(Qe.AuthKey,e)}}const Xt="Authorization";class Yt{constructor(e,t){if(this.fetch=e=>this.privFetchCallback(e).then((e=>new Qt(Xt,e))),this.fetchOnExpiry=e=>this.privFetchOnExpiryCallback(e).then((e=>new Qt(Xt,e))),!e)throw new f("fetchCallback");if(!t)throw new f("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}}var Zt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class er{constructor(e,t,r){this.audioConfig=void 0!==e?e:ut.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=r,this.implCommonRecognizerSetup()}close(e,t){Y.throwIfDisposed(this.privDisposed),T(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return Zt(this,void 0,void 0,(function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))}))}static get telemetryEnabled(){return Gt.telemetryDataEnabled}static enableTelemetry(e){Gt.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const n=this.createRecognizerConfig(new w(new R(new O(e,t,r))));this.privReco=this.createServiceRecognizer(er.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,n)}recognizeOnceAsyncImpl(e){return Zt(this,void 0,void 0,(function*(){Y.throwIfDisposed(this.privDisposed);const t=new E;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);const r=yield t.promise;return yield this.implRecognizerStop(),r}))}startContinuousRecognitionAsyncImpl(e){return Zt(this,void 0,void 0,(function*(){Y.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)}))}stopContinuousRecognitionAsyncImpl(){return Zt(this,void 0,void 0,(function*(){Y.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()}))}implRecognizerStop(){return Zt(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}static getAuthFromProperties(e){const t=e.getProperty(a.SpeechServiceConnection_Key,void 0);return t&&""!==t?new $t(t):new Yt((t=>{const r=e.getProperty(a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(r)}),(t=>{const r=e.getProperty(a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(r)}))}}class tr{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}class rr{constructor(e,t,r){if(this.privPayload=null,!t)throw new f("payload");if(e===ee.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new g("Payload must be ArrayBuffer");if(e===ee.Text&&"string"!=typeof t)throw new g("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=r||o()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===ee.Binary)throw new g("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===ee.Text)throw new g("Not supported for text message");return this.privPayload}get id(){return this.privId}}var nr=r(41137),ir=r.n(nr),or=r(30173),sr=r(84564),ar=r.n(sr),cr=r(3339);class ur extends d{constructor(e,t,r){super(e,t),this.privSignature=r}}class pr extends ur{constructor(e){super("OCSPMemoryCacheHitEvent",s.Debug,e)}}class hr extends ur{constructor(e){super("OCSPCacheMissEvent",s.Debug,e)}}class lr extends ur{constructor(e){super("OCSPDiskCacheHitEvent",s.Debug,e)}}class vr extends ur{constructor(e){super("OCSPCacheUpdateNeededEvent",s.Debug,e)}}class dr extends ur{constructor(e){super("OCSPMemoryCacheStoreEvent",s.Debug,e)}}class fr extends ur{constructor(e){super("OCSPDiskCacheStoreEvent",s.Debug,e)}}class gr extends ur{constructor(e){super("OCSPCacheUpdatehCompleteEvent",s.Debug,e)}}class yr extends ur{constructor(){super("OCSPStapleReceivedEvent",s.Debug,"")}}class mr extends ur{constructor(e,t){super("OCSPCacheEntryExpiredEvent",s.Debug,e),this.privExpireTime=t}}class Sr extends ur{constructor(e,t,r){super("OCSPCacheEntryNeedsRefreshEvent",s.Debug,e),this.privExpireTime=r,this.privStartTime=t}}class br extends ur{constructor(e,t,r){super("OCSPCacheHitEvent",s.Debug,e),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}class Cr extends ur{constructor(e,t){super("OCSPVerificationFailedEvent",s.Debug,e),this.privError=t}}class Pr extends ur{constructor(e,t){super("OCSPCacheFetchErrorEvent",s.Debug,e),this.privError=t}}class wr extends ur{constructor(e){super("OCSPResponseRetrievedEvent",s.Debug,e)}}class Rr extends ur{constructor(e,t){super("OCSPCacheUpdateErrorEvent",s.Debug,e),this.privError=t}}var Ir=r(43108),Or=r.n(Ir),Er=r(88275),Tr=r.n(Er),Ar=r(92505),_r=r.n(Ar),xr=r(10146),kr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Mr{constructor(e){e&&(this.privProxyInfo=e),Mr.privDiskCache||(Mr.privDiskCache=new(Tr())("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:"undefined"!=typeof process&&process.env.SPEECH_OCSP_CACHE_ROOT?process.env.SPEECH_OCSP_CACHE_ROOT:void 0}))}static forceReinitDiskCache(){Mr.privDiskCache=void 0,Mr.privMemCache={}}GetAgent(e){const t=new(Or().Agent)(this.CreateConnection);return void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0&&(t.privProxyInfo=this.privProxyInfo),t}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer(e.UserName+":"+(void 0===e.Password)?"":e.Password).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new(_r())(t)}static OCSPCheck(e,t){return kr(this,void 0,void 0,(function*(){let r,n,i=!1;const o=yield e;o.cork();const s=o;return new Promise(((e,a)=>{o.on("OCSPResponse",(e=>{e&&(this.onEvent(new yr),n=e)})),o.on("error",(e=>{i||(i=!0,o.destroy(),a(e))})),s.on("secure",(()=>kr(this,void 0,void 0,(function*(){const c=s.getPeerCertificate(!0);try{const s=yield this.GetIssuer(c);r=cr.request.generate(c.raw,s.raw);const a=r.id.toString("hex");if(!n){const e=yield Mr.GetResponseFromCache(a,r,t);n=e}yield this.VerifyOCSPResponse(n,r,t),o.uncork(),i=!0,e(o)}catch(e){o.destroy(),i=!0,a(e)}}))))}))}))}static GetIssuer(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise(((t,r)=>{new cr.Agent({}).fetchIssuer(e,null,((e,n)=>{e?r(e):t(n)}))}))}static GetResponseFromCache(e,t,r){return kr(this,void 0,void 0,(function*(){let n=Mr.privMemCache[e];if(n&&this.onEvent(new pr(e)),!n)try{const t=yield Mr.privDiskCache.get(e);t.isCached&&(Mr.onEvent(new lr(e)),Mr.StoreMemoryCacheEntry(e,t.value),n=t.value)}catch(e){n=null}if(!n)return n;try{const i=cr.utils.parseResponse(n).value.tbsResponseData;if(i.responses.length<1)return void this.onEvent(new Pr(e,"Not enough data in cached response"));const o=i.responses[0].thisUpdate,s=i.responses[0].nextUpdate;if(s<Date.now()+this.testTimeOffset-6e4)this.onEvent(new mr(e,s)),n=null;else{const n=Math.min(864e5,(s-o)/2);s-(Date.now()+this.testTimeOffset)<n?(this.onEvent(new Sr(e,o,s)),this.UpdateCache(t,r).catch((t=>{this.onEvent(new Rr(e,t.toString()))}))):this.onEvent(new br(e,o,s))}}catch(t){this.onEvent(new Pr(e,t)),n=null}return n||this.onEvent(new hr(e)),n}))}static VerifyOCSPResponse(e,t,r){return kr(this,void 0,void 0,(function*(){let n=e;return t.certID.toString("hex"),n||(n=yield Mr.GetOCSPResponse(t,r)),new Promise(((i,o)=>{cr.verify({request:t,response:n},((s,a)=>{s?(Mr.onEvent(new Cr(t.id.toString("hex"),s)),e?this.VerifyOCSPResponse(null,t,r).then((()=>{i()}),(e=>{o(e)})):o(s)):(e||Mr.StoreCacheEntry(t.id.toString("hex"),n),i())}))}))}))}static UpdateCache(e,t){return kr(this,void 0,void 0,(function*(){const r=e.id.toString("hex");this.onEvent(new vr(r));const n=yield this.GetOCSPResponse(e,t);this.StoreCacheEntry(r,n),this.onEvent(new gr(e.id.toString("hex")))}))}static StoreCacheEntry(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)}static StoreMemoryCacheEntry(e,t){this.privMemCache[e]=t,this.onEvent(new dr(e))}static StoreDiskCacheEntry(e,t){this.privDiskCache.set(e,t).then((()=>{this.onEvent(new fr(e))}))}static GetOCSPResponse(e,t){let r={};if(t){const e=Mr.GetProxyAgent(t);r.agent=e}return new Promise(((t,n)=>{cr.utils.getAuthorityInfo(e.cert,"1.3.6.1.5.5.7.48.1",((i,o)=>{if(i)return void n(i);const s=ar()(o);s.path=s.pathname,r=Object.assign(Object.assign({},r),s),cr.utils.getResponse(r,e.data,((r,i)=>{r?n(r):(this.onEvent(new wr(e.certID.toString("hex"))),t(i))}))}))}))}CreateConnection(e,t){const r="undefined"!=typeof process&&"0"!==process.env.NODE_TLS_REJECT_UNAUTHORIZED&&"0"!==process.env.SPEECH_CONDUCT_OCSP_CHECK&&t.secureEndpoint;let n;if(t=Object.assign(Object.assign({},t),{requestOCSP:!Mr.forceDisableOCSPStapling,servername:t.host}),this.privProxyInfo){const r=Mr.GetProxyAgent(this.privProxyInfo);n=new Promise(((n,i)=>{r.callback(e,t,((e,t)=>{e?i(e):n(t)}))}))}else n=t.secureEndpoint?Promise.resolve(or.connect(t)):Promise.resolve(xr.connect(t));return r?Mr.OCSPCheck(n,this.privProxyInfo):n}}Mr.testTimeOffset=0,Mr.forceDisableOCSPStapling=!1,Mr.privMemCache={},Mr.onEvent=e=>{S.instance.onEvent(e)};var Dr=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class jr{constructor(e,t,r,n,i,o){if(this.open=()=>{if(this.privConnectionState===te.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new E,this.privCertificateValidatedDeferral=new E,this.privConnectionState=te.Connecting;try{if("undefined"==typeof WebSocket||jr.forceNpmWebSocket){const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve();const t=new Mr(this.proxyInfo);e.agent=t.GetAgent(),this.privWebsocketClient=new(ir())(this.privUri,e)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new q,this.privDisconnectDeferral=new E,this.privSendMessageQueue=new q,this.processSendQueue().catch((e=>{S.instance.onEvent(new Ze(e))}))}catch(e){return this.privConnectionEstablishDeferral.resolve(new tr(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new de(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=e=>{this.privCertificateValidatedDeferral.promise.then((()=>{this.privConnectionState=te.Connected,this.onEvent(new fe(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new tr(200,""))}),(e=>{this.privConnectionEstablishDeferral.reject(e)}))},this.privWebsocketClient.onerror=e=>{this.onEvent(new ye(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===te.Connecting?(this.privConnectionState=te.Disconnected,this.privConnectionEstablishDeferral.resolve(new tr(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=te.Disconnected,this.privWebsocketClient=null,this.onEvent(new ge(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch((e=>{S.instance.onEvent(new Ze(e))}))},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===te.Connected){const r=new E;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){const n=new rr(ee.Binary,e.data);this.privMessageFormatter.toConnectionMessage(n).then((e=>{this.onEvent(new Se(this.privConnectionId,t,e)),r.resolve(e)}),(e=>{r.reject(`Invalid binary message format. Error: ${e}`)}))}else{const n=new rr(ee.Text,e.data);this.privMessageFormatter.toConnectionMessage(n).then((e=>{this.onEvent(new Se(this.privConnectionId,t,e)),r.resolve(e)}),(e=>{r.reject(`Invalid text message format. Error: ${e}`)}))}}},this.privConnectionEstablishDeferral.promise},this.send=e=>{if(this.privConnectionState!==te.Connected)return Promise.reject(`Cannot send on connection that is in ${te[this.privConnectionState]} state`);const t=new E,r=new E;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(e).then((n=>{r.resolve({Message:e,RawWebsocketMessage:n,sendStatusDeferral:t})}),(e=>{r.reject(`Error formatting the message. ${e}`)})),t.promise},this.read=()=>this.privConnectionState!==te.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue(),this.close=e=>this.privWebsocketClient?(this.privConnectionState!==te.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve(),this.sendRawMessage=e=>{try{return e?(this.onEvent(new be(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject(`websocket send error: ${e}`)}},this.onEvent=e=>{this.privConnectionEvents.onEvent(e),S.instance.onEvent(e)},!e)throw new f("uri");if(!r)throw new f("messageFormatter");this.proxyInfo=n,this.privConnectionEvents=new m,this.privConnectionId=t,this.privMessageFormatter=r,this.privConnectionState=te.None,this.privUri=e,this.privHeaders=i,this.privEnableCompression=o,this.privHeaders[Qe.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}get events(){return this.privConnectionEvents}onClose(e,t){return Dr(this,void 0,void 0,(function*(){const r=`Connection closed. ${e}: ${t}`;this.privConnectionState=te.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose((e=>{}),r),yield this.privSendMessageQueue.drainAndDispose((e=>{e.sendStatusDeferral.reject(r)}),r)}))}processSendQueue(){return Dr(this,void 0,void 0,(function*(){for(;;){const e=this.privSendMessageQueue.dequeue(),t=yield e;if(!t)return;try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(e){t.sendStatusDeferral.reject(e)}}}))}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}jr.forceNpmWebSocket=!1;var zr,Nr;class Lr{constructor(e,t,r,n,i,s=!1,a){if(this.privIsDisposed=!1,this.isDisposed=()=>this.privIsDisposed,this.state=()=>this.privConnectionMessageAdapter.state,this.open=()=>this.privConnectionMessageAdapter.open(),this.send=e=>this.privConnectionMessageAdapter.send(e),this.read=()=>this.privConnectionMessageAdapter.read(),!e)throw new f("uri");if(!n)throw new f("messageFormatter");this.privMessageFormatter=n;let c="",u=0;if(t)for(const r in t)r&&(c+=0===u&&-1===e.indexOf("?")?"?":"&",c+=`${r}=${encodeURIComponent(t[r])}`,u++);if(r)for(const t in r)t&&(c+=0===u&&-1===e.indexOf("?")?"?":"&",c+=`${t}=${encodeURIComponent(r[t])}`,u++);this.privUri=e+c,this.privId=a||o(),this.privConnectionMessageAdapter=new jr(this.privUri,this.id,this.privMessageFormatter,i,r,s)}dispose(){return e=this,t=void 0,n=function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())},new((r=void 0)||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}));var e,t,r,n}get id(){return this.privId}get events(){return this.privConnectionMessageAdapter.events}}class Br{constructor(e,t,r,n){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=r,this.privProxyPassword=n}static fromParameters(e){return new Br(e.getProperty(a.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(a.SpeechServiceConnection_ProxyPort),10),e.getProperty(a.SpeechServiceConnection_ProxyUserName),e.getProperty(a.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}class Fr{}Fr.BotId="botid",Fr.CustomSpeechDeploymentId="cid",Fr.CustomVoiceDeploymentId="deploymentId",Fr.EnableAudioLogging="storeAudio",Fr.EnableLanguageId="lidEnabled",Fr.EnableWordLevelTimestamps="wordLevelTimestamps",Fr.EndSilenceTimeoutMs="endSilenceTimeoutMs",Fr.Format="format",Fr.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",Fr.Language="language",Fr.Profanity="profanity",Fr.RequestBotStatusMessages="enableBotMessageStatus",Fr.StableIntermediateThreshold="stableIntermediateThreshold",Fr.StableTranslation="stableTranslation",Fr.TestHooks="testhooks";class Ur{setCommonUrlParams(e,t,r){this.setUrlParameter(a.SpeechServiceConnection_EnableAudioLogging,Fr.EnableAudioLogging,e,t,r),this.setUrlParameter(a.SpeechServiceResponse_RequestWordLevelTimestamps,Fr.EnableWordLevelTimestamps,e,t,r),this.setUrlParameter(a.SpeechServiceResponse_ProfanityOption,Fr.Profanity,e,t,r),this.setUrlParameter(a.SpeechServiceConnection_InitialSilenceTimeoutMs,Fr.InitialSilenceTimeoutMs,e,t,r),this.setUrlParameter(a.SpeechServiceConnection_EndSilenceTimeoutMs,Fr.EndSilenceTimeoutMs,e,t,r),this.setUrlParameter(a.SpeechServiceResponse_StablePartialResultThreshold,Fr.StableIntermediateThreshold,e,t,r);const n=JSON.parse(e.parameters.getProperty(Ae,"{}"));Object.keys(n).forEach(((e,r,i)=>{t[e]=n[e]}))}setUrlParameter(e,t,r,n,i){const o=r.parameters.getProperty(e,void 0);!o||i&&-1!==i.search(t)||(n[t]=o.toLocaleLowerCase())}}class qr{constructor(){this.toConnectionMessage=e=>{const t=new E;try{if(e.messageType===ee.Text){const r=e.textContent;let n={},i=null;if(r){const e=r.split("\r\n\r\n");e&&e.length>0&&(n=this.parseHeaders(e[0]),e.length>1&&(i=e[1]))}t.resolve(new he(e.messageType,i,n,e.id))}else if(e.messageType===ee.Binary){const r=e.binaryContent;let n={},i=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const o=new DataView(r),s=o.getInt16(0);if(r.byteLength<s+2)throw new Error("Invalid binary message format. Header content missing.");let a="";for(let e=0;e<s;e++)a+=String.fromCharCode(o.getInt8(e+2));n=this.parseHeaders(a),r.byteLength>s+2&&(i=r.slice(2+s)),t.resolve(new he(e.messageType,i,n,e.id))}}catch(e){t.reject(`Error formatting the message. Error: ${e}`)}return t.promise},this.fromConnectionMessage=e=>{const t=new E;try{if(e.messageType===ee.Text){const r=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new rr(ee.Text,r,e.id))}else if(e.messageType===ee.Binary){const r=this.makeHeaders(e),n=e.binaryBody,i=this.stringToArrayBuffer(r),o=new Int8Array(i),s=o.byteLength,a=new Int8Array(2+s+(n?n.byteLength:0));if(a[0]=s>>8&255,a[1]=255&s,a.set(o,2),n){const e=new Int8Array(n);a.set(e,2+s)}const c=a.buffer;t.resolve(new rr(ee.Binary,c,e.id))}}catch(e){t.reject(`Error formatting the message. ${e}`)}return t.promise},this.makeHeaders=e=>{let t="";if(e.headers)for(const r in e.headers)r&&(t+=`${r}: ${e.headers[r]}\r\n`);return t},this.parseHeaders=e=>{const t={};if(e){const r=e.match(/[^\r\n]+/g);if(t)for(const e of r)if(e){const r=e.indexOf(":"),n=r>0?e.substr(0,r).trim().toLowerCase():e,i=r>0&&e.length>r+1?e.substr(r+1).trim():"";t[n]=i}}return t},this.stringToArrayBuffer=e=>{const t=new ArrayBuffer(e.length),r=new DataView(t);for(let t=0;t<e.length;t++)r.setUint8(t,e.charCodeAt(t));return t}}}class Vr extends Ur{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.create=(e,t,r)=>{let n=e.parameters.getProperty(a.SpeechServiceConnection_Endpoint,void 0);const i=e.parameters.getProperty(a.SpeechServiceConnection_Region,void 0),o=i&&i.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",s=e.parameters.getProperty(a.SpeechServiceConnection_Host,"wss://"+i+".stt.speech"+o),u={},p=e.parameters.getProperty(a.SpeechServiceConnection_EndpointId,void 0),h=e.parameters.getProperty(a.SpeechServiceConnection_RecoLanguage,void 0);if(p?n&&-1!==n.search(Fr.CustomSpeechDeploymentId)||(u[Fr.CustomSpeechDeploymentId]=p):h&&(n&&-1!==n.search(Fr.Language)||(u[Fr.Language]=h)),n&&-1!==n.search(Fr.Format)||(u[Fr.Format]=e.parameters.getProperty(Ee,it[it.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(u[Fr.EnableLanguageId]="true"),this.setCommonUrlParams(e,u,n),!n)switch(e.recognitionMode){case c.Conversation:n="true"===e.parameters.getProperty(_e,"false")?s+this.dictationRelativeUri:s+this.conversationRelativeUri;break;case c.Dictation:n=s+this.dictationRelativeUri;break;default:n=s+this.interactiveRelativeUri}const l={};void 0!==t.token&&""!==t.token&&(l[t.headerName]=t.token),l[Qe.ConnectionId]=r,e.parameters.setProperty(a.SpeechServiceConnection_Url,n);const v="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Lr(n,u,l,new qr,Br.fromRecognizerConfig(e),v,r)}}}class Hr{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new Hr(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}!function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(zr||(zr={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests"}(Nr||(Nr={}));class Wr{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=Nr[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new Wr(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}class Kr{static implTranslateRecognitionResult(e){let t=ie.Canceled;switch(e){case Nr.Success:t=ie.RecognizedSpeech;break;case Nr.NoMatch:case Nr.InitialSilenceTimeout:case Nr.BabbleTimeout:case Nr.EndOfDictation:t=ie.NoMatch;break;case Nr.Error:default:t=ie.Canceled}return t}static implTranslateCancelResult(e){let t=re.EndOfStream;switch(e){case Nr.Success:case Nr.EndOfDictation:case Nr.NoMatch:t=re.EndOfStream;break;case Nr.InitialSilenceTimeout:case Nr.BabbleTimeout:case Nr.Error:default:t=re.Error}return t}static implTranslateCancelErrorCode(e){let t=ne.NoError;switch(e){case Nr.Error:t=ne.ServiceError;break;case Nr.TooManyRequests:t=ne.TooManyRequests;break;default:t=ne.NoError}return t}}class Jr{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=Nr[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new Jr(e)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}}class Gr extends Gt{constructor(e,t,r,n,i){if(super(e,t,r,n,i),this.privSpeechRecognizer=i,void 0!==n.autoDetectSourceLanguages){const e=n.autoDetectSourceLanguages.split(",");this.privSpeechContext.setSection("languageId",{languages:e,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}})}}processTypeSpecificMessages(e){return t=this,r=void 0,i=function*(){let t;const r=new we;r.setProperty(a.SpeechServiceResponse_JsonResult,e.textBody);let n=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const i=Hr.fromJSON(e.textBody),o=i.Offset+this.privRequestSession.currentTurnAudioOffset;t=new yt(this.privRequestSession.requestId,ie.RecognizingSpeech,i.Text,i.Duration,o,i.Language,i.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(o);const s=new Ct(t,i.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,s)}catch(e){}n=!0;break;case"speech.phrase":const a=Wr.fromJSON(e.textBody),c=Kr.implTranslateRecognitionResult(a.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+a.Offset+a.Duration),ie.Canceled===c){const e=Kr.implTranslateCancelResult(a.RecognitionStatus);yield this.cancelRecognitionLocal(e,Kr.implTranslateCancelErrorCode(a.RecognitionStatus),void 0)}else{if(!this.privRequestSession.isSpeechEnded||c!==ie.NoMatch||a.RecognitionStatus===Nr.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(Ee)===it[it.Simple])t=new yt(this.privRequestSession.requestId,c,a.DisplayText,a.Duration,a.Offset+this.privRequestSession.currentTurnAudioOffset,a.Language,a.LanguageDetectionConfidence,void 0,void 0,e.textBody,r);else{const n=Jr.fromJSON(e.textBody);t=new yt(this.privRequestSession.requestId,c,n.RecognitionStatus===Nr.Success?n.NBest[0].Display:void 0,n.Duration,n.Offset+this.privRequestSession.currentTurnAudioOffset,n.Language,n.LanguageDetectionConfidence,void 0,void 0,e.textBody,r)}const n=new Ct(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,n)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0}return n},new((n=void 0)||(n=Promise))((function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((i=i.apply(t,r||[])).next())}));var t,r,n,i}cancelRecognition(e,t,r,n,i){const o=new we;if(o.setProperty(Te,ne[n]),this.privSpeechRecognizer.canceled){const t=new Rt(r,i,n,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new yt(t,ie.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}}class Qr extends er{constructor(e,t){const r=e;Y.throwIfNull(r,"speechConfig"),Y.throwIfNullOrWhitespace(r.properties.getProperty(a.SpeechServiceConnection_RecoLanguage),a[a.SpeechServiceConnection_RecoLanguage]),super(t,r.properties,new Vr),this.privDisposedRecognizer=!1}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new Qr(e,r)}get endpointId(){return Y.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return Y.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return Y.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(Ee,it[it.Simple])===it[it.Simple]?it.Simple:it.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){T(this.recognizeOnceAsyncImpl(c.Interactive),e,t)}startContinuousRecognitionAsync(e,t){T(this.startContinuousRecognitionAsyncImpl(c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){T(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,r){Y.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){e&&e()}close(e,t){Y.throwIfDisposed(this.privDisposedRecognizer),T(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return r=this,n=void 0,o=function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(r,n||[])).next())}));var r,n,i,o}createRecognizerConfig(e){return new P(e,this.properties)}createServiceRecognizer(e,t,r,n){return new Gr(e,t,r,n,this)}}class $r extends Ur{constructor(){super(...arguments),this.create=(e,t,r)=>{let n=e.parameters.getProperty(a.SpeechServiceConnection_Endpoint);if(!n){const t=e.parameters.getProperty(a.SpeechServiceConnection_IntentRegion),r=t&&t.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";n=e.parameters.getProperty(a.SpeechServiceConnection_Host,"wss://"+t+".sr.speech"+r)+"/speech/recognition/interactive/cognitiveservices/v1"}const i={format:"simple",language:e.parameters.getProperty(a.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,i,n);const o={};void 0!==t.token&&""!==t.token&&(o[t.headerName]=t.token),o[Qe.ConnectionId]=r,e.parameters.setProperty(a.SpeechServiceConnection_Url,n);const s="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Lr(n,i,o,new qr,Br.fromRecognizerConfig(e),s,r)}}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}}class Xr{constructor(e,t){this.modelImpl=e,this.intentName=t}}class Yr extends ft{constructor(e,t,r,n,i,o){super(n,i,o),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}class Zr{constructor(e){this.privIntentResponse=JSON.parse(e)}static fromJSON(e){return new Zr(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}class en extends Gt{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privIntentRecognizer=i,this.privIntentDataSent=!1}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(e){return t=this,r=void 0,i=function*(){let t,r,n=!1;const i=new we;switch(e.messageType===ee.Text&&i.setProperty(a.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":const o=Hr.fromJSON(e.textBody);if(t=new mt(void 0,this.privRequestSession.requestId,ie.RecognizingIntent,o.Text,o.Duration,o.Offset+this.privRequestSession.currentTurnAudioOffset,o.Language,o.LanguageDetectionConfidence,void 0,e.textBody,i),this.privRequestSession.onHypothesis(t.offset),r=new ft(t,o.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,r)}catch(e){}n=!0;break;case"speech.phrase":const s=Wr.fromJSON(e.textBody);t=new mt(void 0,this.privRequestSession.requestId,Kr.implTranslateRecognitionResult(s.RecognitionStatus),s.DisplayText,s.Duration,s.Offset+this.privRequestSession.currentTurnAudioOffset,s.Language,s.LanguageDetectionConfidence,void 0,e.textBody,i),r=new ft(t,t.offset,this.privRequestSession.sessionId);const c=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||ie.NoMatch===r.result.reason?(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),c()):this.privPendingIntentArgs=r,n=!0;break;case"response":if(r=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===r){if(""===e.textBody)return;r=new ft(new mt,0,this.privRequestSession.sessionId)}const u=Zr.fromJSON(e.textBody);let p=this.privAddedLmIntents[u.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(p=this.privUmbrellaIntent),null!==u&&void 0!==p){const t=void 0===p.intentName?u.topScoringIntent.intent:p.intentName;let n=r.result.reason;void 0!==t&&(n=ie.RecognizedIntent);const i=void 0!==r.result.properties?r.result.properties:new we;i.setProperty(a.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),r=new ft(new mt(t,r.result.resultId,n,r.result.text,r.result.duration,r.result.offset,void 0,void 0,r.result.errorDetails,r.result.json,i),r.offset,r.sessionId)}if(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(r.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}n=!0}return n},new((n=void 0)||(n=Promise))((function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((i=i.apply(t,r||[])).next())}));var t,r,n,i}cancelRecognition(e,t,r,n,i){const o=new we;if(o.setProperty(Te,ne[n]),this.privIntentRecognizer.canceled){const t=new Yr(r,i,n,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new mt(void 0,t,ie.Canceled,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}}var tn,rn;class nn extends er{constructor(e,t){Y.throwIfNullOrUndefined(e,"speechConfig");const r=e;Y.throwIfNullOrUndefined(r,"speechConfig"),super(t,r.properties,new $r),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=r.properties,Y.throwIfNullOrWhitespace(this.properties.getProperty(a.SpeechServiceConnection_RecoLanguage),a[a.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return Y.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(a.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){if(Y.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}T(this.recognizeOnceAsyncImpl(c.Interactive),e,t)}startContinuousRecognitionAsync(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}T(this.startContinuousRecognitionAsyncImpl(c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){T(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,r){Y.throwIfNull(e,"model"),r&&r("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){e&&e()}addIntent(e,t){Y.throwIfDisposed(this.privDisposedIntentRecognizer),Y.throwIfNullOrWhitespace(t,"intentId"),Y.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(e,t,r){Y.throwIfDisposed(this.privDisposedIntentRecognizer),Y.throwIfNullOrWhitespace(e,"intentId"),Y.throwIfNull(t,"model");const n=t;Y.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privAddedLmIntents[e]=new Xr(n,r)}addAllIntents(e,t){Y.throwIfNull(e,"model");const r=e;Y.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privUmbrellaIntent=new Xr(r,t)}close(e,t){Y.throwIfDisposed(this.privDisposedIntentRecognizer),T(this.dispose(!0),e,t)}createRecognizerConfig(e){return new P(e,this.properties)}createServiceRecognizer(e,t,r,n){return new en(e,t,r,n,this)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return r=this,n=void 0,o=function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield t.dispose.call(this,e))},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(s,a)}c((o=o.apply(r,n||[])).next())}));var r,n,i,o}buildSpeechContext(){let e,t,r;const n=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const i of Object.keys(this.privAddedLmIntents)){const o=this.privAddedLmIntents[i];if(void 0===e)e=o.modelImpl.appId;else if(e!==o.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=o.modelImpl.region;else if(t!==o.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===r)r=o.modelImpl.subscriptionKey;else if(r!==o.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const s="luis/"+e+"-PRODUCTION#"+i;n.push(s)}return{Intent:{id:e,key:void 0===r?this.privProperties.getProperty(a[a.SpeechServiceConnection_Key]):r,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?n:["luis/"+e+"-PRODUCTION"]}}}!function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(tn||(tn={}));class on extends Ur{constructor(){super(...arguments),this.create=(e,t,r)=>{let n=e.parameters.getProperty(a.SpeechServiceConnection_Endpoint,void 0);if(!n){const t=e.parameters.getProperty(a.SpeechServiceConnection_Region,void 0),r=t&&t.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";n=e.parameters.getProperty(a.SpeechServiceConnection_Host,"wss://"+t+".s2s.speech"+r)+"/speech/translation/cognitiveservices/v1"}const i={from:e.parameters.getProperty(a.SpeechServiceConnection_RecoLanguage),to:e.parameters.getProperty(a.SpeechServiceConnection_TranslationToLanguages)};this.setCommonUrlParams(e,i,n),this.setUrlParameter(a.SpeechServiceResponse_TranslationRequestStablePartialResult,Fr.StableTranslation,e,i,n),void 0!==e.parameters.getProperty(a.SpeechServiceConnection_TranslationVoice,void 0)&&(i.voice=e.parameters.getProperty(a.SpeechServiceConnection_TranslationVoice),i.features="texttospeech");const o={};void 0!==t.token&&""!==t.token&&(o[t.headerName]=t.token),o[Qe.ConnectionId]=r,e.parameters.setProperty(a.SpeechServiceConnection_Url,n);const s="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Lr(n,i,o,new qr,Br.fromRecognizerConfig(e),s,r)}}}!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(rn||(rn={}));class sn{constructor(e,t,r,n,i){this.privCancelReason=t,this.privErrorDetails=r,this.privResult=i,this.privSessionId=e,this.privErrorCode=n}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}class an{constructor(){this.privMap=new we}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}}class cn{constructor(e){this.privTranslationHypothesis=JSON.parse(e),this.privTranslationHypothesis.Translation.TranslationStatus=rn[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new cn(e)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}}class un{constructor(e){this.privTranslationPhrase=JSON.parse(e),this.privTranslationPhrase.RecognitionStatus=Nr[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=rn[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new un(e)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Translation(){return this.privTranslationPhrase.Translation}}class pn{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus=zr[this.privSynthesisEnd.SynthesisStatus]}static fromJSON(e){return new pn(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}var hn=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class ln extends Gt{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privTranslationRecognizer=i,this.connectionEvents.attach((e=>hn(this,void 0,void 0,(function*(){"ConnectionEstablishedEvent"===e.name?this.privTranslationRecognizer.onConnection():"ConnectionClosedEvent"===e.name&&(yield this.privTranslationRecognizer.onDisconnection())}))))}processTypeSpecificMessages(e){return hn(this,void 0,void 0,(function*(){const t=new we;let r=!1;switch(e.messageType===ee.Text&&t.setProperty(a.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":const n=this.fireEventForResult(cn.fromJSON(e.textBody),t);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+n.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,n)}catch(e){}r=!0;break;case"translation.phrase":const i=un.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),i.RecognitionStatus===Nr.Success){const e=this.fireEventForResult(i,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(e.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}break}{const r=Kr.implTranslateRecognitionResult(i.RecognitionStatus),n=new Et(void 0,this.privRequestSession.requestId,r,i.Text,i.Duration,this.privRequestSession.currentTurnAudioOffset+i.Offset,void 0,e.textBody,t);if(r===ie.Canceled){const e=Kr.implTranslateCancelResult(i.RecognitionStatus);yield this.cancelRecognitionLocal(e,Kr.implTranslateCancelErrorCode(i.RecognitionStatus),void 0)}else{if(!this.privRequestSession.isSpeechEnded||r!==ie.NoMatch||i.RecognitionStatus===Nr.InitialSilenceTimeout){const e=new It(n,n.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(n)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}r=!0;break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),r=!0;break;case"translation.synthesis.end":const o=pn.fromJSON(e.textBody);switch(o.SynthesisStatus){case zr.Error:if(this.privTranslationRecognizer.synthesizing){const e=new Tt(ie.Canceled,void 0),t=new Ot(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,t)}catch(e){}}if(this.privTranslationRecognizer.canceled){const e=new sn(this.privRequestSession.sessionId,re.Error,o.FailureReason,ne.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(e){}}break;case zr.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}r=!0}return r}))}cancelRecognition(e,t,r,n,i){const o=new we;if(o.setProperty(Te,ne[n]),this.privTranslationRecognizer.canceled){const t=new sn(e,r,i,n,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new Et(void 0,t,ie.Canceled,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}fireEventForResult(e,t){let r,n;if(void 0!==e.Translation.Translations){r=new an;for(const t of e.Translation.Translations)r.set(t.Language,t.Text)}n=e instanceof un?e.Translation.TranslationStatus===rn.Success?ie.TranslatedSpeech:ie.RecognizedSpeech:ie.TranslatingSpeech;const i=e.Offset+this.privRequestSession.currentTurnAudioOffset,o=new Et(r,this.privRequestSession.requestId,n,e.Text,e.Duration,i,e.Translation.FailureReason,JSON.stringify(e),t);return new It(o,i,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){const r=void 0===e?ie.SynthesizingAudioCompleted:ie.SynthesizingAudio,n=new Tt(r,e),i=new Ot(n,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,i)}catch(e){}}}var vn,dn,fn,gn,yn=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class mn extends er{constructor(e,t){const r=e;Y.throwIfNull(r,"speechConfig"),super(t,r.properties,new on),this.privDisposedTranslationRecognizer=!1,this.privProperties=r.properties.clone(),void 0!==this.properties.getProperty(a.SpeechServiceConnection_TranslationVoice,void 0)&&Y.throwIfNullOrWhitespace(this.properties.getProperty(a.SpeechServiceConnection_TranslationVoice),a[a.SpeechServiceConnection_TranslationVoice]),Y.throwIfNullOrWhitespace(this.properties.getProperty(a.SpeechServiceConnection_TranslationToLanguages),a[a.SpeechServiceConnection_TranslationToLanguages]),Y.throwIfNullOrWhitespace(this.properties.getProperty(a.SpeechServiceConnection_RecoLanguage),a[a.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return Y.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return Y.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return Y.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.SpeechServiceConnection_TranslationVoice,void 0)}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){Y.throwIfDisposed(this.privDisposedTranslationRecognizer),T(this.recognizeOnceAsyncImpl(c.Conversation),e,t)}startContinuousRecognitionAsync(e,t){T(this.startContinuousRecognitionAsyncImpl(c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){T(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){Y.throwIfDisposed(this.privDisposedTranslationRecognizer),T(this.dispose(!0),e,t)}onConnection(){}onDisconnection(){return yn(this,void 0,void 0,(function*(){}))}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return yn(this,void 0,void 0,(function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield t.dispose.call(this,e)))}))}createRecognizerConfig(e){return new P(e,this.properties)}createServiceRecognizer(e,t,r,n){return new ln(e,t,r,n,this)}}!function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(vn||(vn={}));class Sn{constructor(e){this.privReason=e}static fromResult(e){const t=Wr.fromJSON(e.json);let r=vn.NotRecognized;switch(t.RecognitionStatus){case Nr.BabbleTimeout:r=vn.InitialBabbleTimeout;break;case Nr.InitialSilenceTimeout:r=vn.InitialSilenceTimeout;break;default:r=vn.NotRecognized}return new Sn(r)}get reason(){return this.privReason}}class bn{constructor(e,t,r){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}class Cn extends bn{constructor(e,t,r){super(e,t,r)}static fromResult(e){let t=re.Error,r=ne.NoError;if(e instanceof gt&&e.json){const r=Wr.fromJSON(e.json);t=Kr.implTranslateCancelResult(r.RecognitionStatus)}return e.properties&&(r=ne[e.properties.getProperty(Te,ne[ne.NoError])]),new Cn(t,e.errorDetails,r)}}class Pn extends vt{}class wn extends vt{constructor(e,t,r){super(r),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}class Rn{}class In{constructor(e){this.privConnectionMessage=e,this.privProperties=new we,this.privConnectionMessage.headers[Qe.ConnectionId]&&this.privProperties.setProperty(a.Speech_SessionId,this.privConnectionMessage.headers[Qe.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(((e,t,r)=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])}))}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((e=>e.toLowerCase()==="path".toLowerCase()))]}get isTextMessage(){return this.privConnectionMessage.messageType===ee.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===ee.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}class On{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}class En{static fromRecognizer(e){const t=e.internalData,r=new En;return r.privInternalData=t,r.setupEvents(),r}static fromSynthesizer(e){const t=e.internalData,r=new En;return r.privInternalData=t,r.setupEvents(),r}openConnection(e,t){T(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof Ye)throw new Error("Disconnecting a synthesizer's connection is currently not supported");T(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,r){if(Y.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof Gt){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,r)}else if(this.privInternalData instanceof Ye){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,r)}}sendMessageAsync(e,t,r,n){T(this.privInternalData.sendNetworkMessage(e,t),r,n)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach((e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new Pn(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new Pn(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new On(new In(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new On(new In(e.message)))})),this.privServiceEventListener=this.privInternalData.serviceEvents.attach((e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new wn(e.jsonString,e.name))}))}}class Tn{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new Tn(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}class An{constructor(){}set applicationId(e){}}An.DialogTypes=((dn=class{}).BotFramework="bot_framework",dn.CustomCommands="custom_commands",dn);class _n extends An{constructor(){super(),this.privSpeechConfig=new _t}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){Y.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,t,r,n){this.setProperty(a.SpeechServiceConnection_ProxyHostName,e),this.setProperty(a.SpeechServiceConnection_ProxyPort,`${t}`),r&&this.setProperty(a.SpeechServiceConnection_ProxyUserName,r),n&&this.setProperty(a.SpeechServiceConnection_ProxyPassword,n)}setServiceProperty(e,t,r){this.privSpeechConfig.setServiceProperty(e,t,r)}close(){}}class xn extends _n{constructor(){super()}static fromSubscription(e,t,r){Y.throwIfNullOrWhitespace(e,"subscription"),Y.throwIfNullOrWhitespace(t,"region");const n=new _n;return n.setProperty(a.Conversation_DialogType,An.DialogTypes.BotFramework),n.setProperty(a.SpeechServiceConnection_Key,e),n.setProperty(a.SpeechServiceConnection_Region,t),r&&n.setProperty(a.Conversation_ApplicationId,r),n}static fromAuthorizationToken(e,t,r){Y.throwIfNullOrWhitespace(e,"authorizationToken"),Y.throwIfNullOrWhitespace(t,"region");const n=new _n;return n.setProperty(a.Conversation_DialogType,An.DialogTypes.BotFramework),n.setProperty(a.SpeechServiceAuthorization_Token,e),n.setProperty(a.SpeechServiceConnection_Region,t),r&&n.setProperty(a.Conversation_ApplicationId,r),n}static fromHost(e,t,r){Y.throwIfNullOrUndefined(e,"host");const n=e instanceof URL?e:new URL(`wss://${e}.convai.speech.azure.us`);Y.throwIfNullOrUndefined(n,"resolvedHost");const i=new _n;return i.setProperty(a.Conversation_DialogType,An.DialogTypes.BotFramework),i.setProperty(a.SpeechServiceConnection_Host,n.toString()),void 0!==t&&i.setProperty(a.SpeechServiceConnection_Key,t),i}static fromEndpoint(e,t){Y.throwIfNull(e,"endpoint");const r=new _n;return r.setProperty(a.Conversation_DialogType,An.DialogTypes.BotFramework),r.setProperty(a.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&r.setProperty(a.SpeechServiceConnection_Key,t),r}}class kn extends _n{constructor(){super()}static fromSubscription(e,t,r){Y.throwIfNullOrWhitespace(e,"applicationId"),Y.throwIfNullOrWhitespace(t,"subscription"),Y.throwIfNullOrWhitespace(r,"region");const n=new _n;return n.setProperty(a.Conversation_DialogType,An.DialogTypes.CustomCommands),n.setProperty(a.Conversation_ApplicationId,e),n.setProperty(a.SpeechServiceConnection_Key,t),n.setProperty(a.SpeechServiceConnection_Region,r),n}static fromAuthorizationToken(e,t,r){Y.throwIfNullOrWhitespace(e,"applicationId"),Y.throwIfNullOrWhitespace(t,"authorizationToken"),Y.throwIfNullOrWhitespace(r,"region");const n=new _n;return n.setProperty(a.Conversation_DialogType,An.DialogTypes.CustomCommands),n.setProperty(a.Conversation_ApplicationId,e),n.setProperty(a.SpeechServiceAuthorization_Token,t),n.setProperty(a.SpeechServiceConnection_Region,r),n}set applicationId(e){Y.throwIfNullOrWhitespace(e,"value"),this.setProperty(a.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(a.Conversation_ApplicationId)}}class Mn extends Ur{constructor(){super(...arguments),this.create=(e,t,r)=>{const n=e.parameters.getProperty(a.Conversation_ApplicationId,""),i=e.parameters.getProperty(a.Conversation_DialogType),o=e.parameters.getProperty(a.SpeechServiceConnection_Region),s=e.parameters.getProperty(a.SpeechServiceConnection_RecoLanguage,"en-US"),c=e.parameters.getProperty(a.Conversation_Request_Bot_Status_Messages,"true"),u={};u[Qe.ConnectionId]=r,u[Fr.Format]=e.parameters.getProperty(Ee,it[it.Simple]).toLowerCase(),u[Fr.Language]=s,u[Fr.RequestBotStatusMessages]=c,n&&(u[Fr.BotId]=n,i===An.DialogTypes.CustomCommands&&(u[Qe.CustomCommandsAppId]=n));const p=i===An.DialogTypes.CustomCommands?"commands/":"",h=i===An.DialogTypes.CustomCommands?"v1":i===An.DialogTypes.BotFramework?"v3":"v0",l={};null!=t.token&&""!==t.token&&(l[t.headerName]=t.token);let v=e.parameters.getProperty(a.SpeechServiceConnection_Endpoint,"");if(!v){const t=o&&o.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",r=e.parameters.getProperty(a.SpeechServiceConnection_Host,`wss://${o}.${Mn.Constants.BaseUrl}${t}`);v=`${r.endsWith("/")?r:r+"/"}${p}${Mn.Constants.ApiKey}/${h}`}this.setCommonUrlParams(e,u,v);const d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Lr(v,u,l,new qr,Br.fromRecognizerConfig(e),d,r)}}}Mn.Constants=((fn=class{}).ApiKey="api",fn.BaseUrl="convai.speech",fn);class Dn extends d{constructor(e,t=s.Info){super(e,t)}}class jn extends Dn{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}class zn{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}class Nn{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new Nn(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}class Ln{constructor(e){this.privTurnStatus=Nn.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}class Bn{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new Bn(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}!function(e){e[e.None=0]="None",e[e.TextToSpeechAudio=1]="TextToSpeechAudio"}(gn||(gn={}));class Fn{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===gn.TextToSpeechAudio&&(this.privAudioStream=De.createPullStream(),this.privAudioStream.format=void 0!==t?t:Me.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout((()=>{this.privTurnManager.CompleteTurn(this.privRequestId)}),2e3)}}class Un{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new g("Service error: There is already a turn with id:"+e);const t=new Fn(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new g("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}}class qn{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new qn(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}var Vn=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Hn extends Gt{constructor(e,t,r,n,o){super(e,t,r,n,o),this.sendAgentConfig=e=>{if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(a.Conversation_DialogType)===An.DialogTypes.CustomCommands){const e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(a.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new jn(this.agentConfig));const t=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new $e(ee.Text,"agent.config",this.privRequestSession.requestId,"application/json",t))}},this.sendAgentContext=e=>{const t=i(),r=this.privDialogServiceConnector.properties.getProperty(a.Conversation_Speech_Activity_Template),n={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof r?void 0:r,version:.5},o=JSON.stringify(n);return e.send(new $e(ee.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",o))},this.handleResponseMessage=e=>{const t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":const r=e.requestId.toUpperCase(),n=Bn.fromJSON(e.textBody),i=this.privTurnStateManager.GetTurn(r);if(n.conversationId){const e=this.agentConfig.get();e.botInfo.conversationId=n.conversationId,this.agentConfig.set(e)}const o=i.processActivityPayload(n,Me.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(a.SpeechServiceConnection_SynthOutputFormat,void 0))),s=new zn(n.messagePayload,o);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,s)}catch(e){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new Ln(e.textBody))}catch(e){}break;default:S.instance.onEvent(new Ze(`Unexpected response of type ${t.messageType}. Ignoring.`))}},this.privEvents=new m,this.privDialogServiceConnector=o,this.receiveMessageOverride=this.receiveDialogMessageOverride,this.privTurnStateManager=new Un,this.recognizeOverride=this.listenOnce,this.postConnectImplOverride=this.dialogConnectImpl,this.configConnectionOverride=this.configConnection,this.disconnectOverride=this.privDisconnect,this.privDialogAudioSource=r,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach((e=>Vn(this,void 0,void 0,(function*(){"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)}))))}sendMessage(e){return Vn(this,void 0,void 0,(function*(){const t=i(),r=o(),n={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},s=JSON.stringify(n),a=yield this.fetchConnection();yield a.send(new $e(ee.Text,"agent",r,"application/json",s))}))}privDisconnect(){return Vn(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,re.Error,ne.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}))}processTypeSpecificMessages(e){return Vn(this,void 0,void 0,(function*(){const t=new we;let r,n;switch(e.messageType===ee.Text&&t.setProperty(a.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":const i=Wr.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),i.RecognitionStatus!==Nr.TooManyRequests&&i.RecognitionStatus!==Nr.Error){const e=this.fireEventForResult(i,t);if(this.privLastResult=e.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,e)}catch(e){}}n=!0;break;case"speech.hypothesis":const o=Hr.fromJSON(e.textBody),s=o.Offset+this.privRequestSession.currentTurnAudioOffset;r=new yt(this.privRequestSession.requestId,ie.RecognizingSpeech,o.Text,o.Duration,s,o.Language,o.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(s);const a=new Ct(r,o.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,a)}catch(e){}n=!0;break;case"speech.keyword":const c=qn.fromJSON(e.textBody);r=new yt(this.privRequestSession.requestId,"Accepted"===c.Status?ie.RecognizedKeyword:ie.NoMatch,c.Text,c.Duration,c.Offset,void 0,void 0,void 0,void 0,e.textBody,t),"Accepted"!==c.Status&&(this.privLastResult=r);const u=new Ct(r,r.duration,r.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,u)}catch(e){}n=!0;break;case"audio":{const t=e.requestId.toUpperCase(),r=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?r.audioStream.write(e.binaryBody):r.endAudioStream()}catch(e){}}n=!0;break;case"response":this.handleResponseMessage(e),n=!0}return n}))}cancelRecognition(e,t,r,n,i){return Vn(this,void 0,void 0,(function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const t=new we;t.setProperty(Te,ne[n]);const o=new Rt(r,i,n,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,o)}catch(e){}if(this.privSuccessCallback){const e=new yt(void 0,ie.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,t);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}}))}listenOnce(e,t,r){return Vn(this,void 0,void 0,(function*(){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(a.Speech_SessionId,this.privRequestSession.sessionId);const n=this.connectImpl(),i=this.sendPreAudioMessages(),o=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),s=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,u=new Mt(o,s.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield n,yield i}catch(e){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,re.Error,ne.ConnectionFailure,e),Promise.resolve()}const p=new vt(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,p),this.sendAudio(u).then((()=>{}),(e=>Vn(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,re.Error,ne.RuntimeError,e)}))))}))}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){const e=new E,t=()=>Vn(this,void 0,void 0,(function*(){try{const r=this.isDisposed(),n=!this.isDisposed()&&this.terminateMessageLoop;if(r||n)return void e.resolve(void 0);const i=yield this.fetchConnection(),o=yield i.read();if(!o)return t();const s=$e.fromConnectionMessage(o);switch(s.path.toLowerCase()){case"turn.start":{const e=s.requestId.toUpperCase();e!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const e=Kt.fromJSON(s.textBody),t=new dt(e.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,t);break;case"speech.enddetected":let r;r=s.textBody.length>0?s.textBody:"{ Offset: 0 }";const n=Kt.fromJSON(r);this.privRequestSession.onServiceRecognized(n.Offset+this.privRequestSession.currentTurnAudioOffset);const i=new dt(n.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,i);break;case"turn.end":{const e=s.requestId.toUpperCase();if(e!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(e);else{const e=new vt(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:this.processTypeSpecificMessages(s)||this.serviceEvents&&this.serviceEvents.onEvent(new le(s.path.toLowerCase(),s.textBody))}return t()}catch(t){this.terminateMessageLoop=!0,e.resolve()}}));return t().catch((e=>{S.instance.onEvent(new Ze(e))})),e.promise}startMessageLoop(){return Vn(this,void 0,void 0,(function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,re.Error,ne.RuntimeError,e)}return Promise.resolve()}))}configConnection(e){return Vn(this,void 0,void 0,(function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)}))}sendPreAudioMessages(){return Vn(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)}))}fireEventForResult(e,t){const r=Kr.implTranslateRecognitionResult(e.RecognitionStatus),n=e.Offset+this.privRequestSession.currentTurnAudioOffset,i=new yt(this.privRequestSession.requestId,r,e.DisplayText,e.Duration,n,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new Ct(i,n,this.privRequestSession.sessionId)}onEvent(e){this.privEvents.onEvent(e),S.instance.onEvent(e)}addKeywordContextData(){const e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;const t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),n=e.split(";"),i=void 0===t?[]:t.split(";"),o=void 0===r?[]:r.split(";"),s=[];for(let e=0;e<n.length;e++){const t={};t.text=n[e],e<i.length&&(t.offset=Number(i[e])),e<o.length&&(t.duration=Number(o[e])),s.push(t)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:s,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}}var Wn,Kn=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Jn extends er{constructor(e,t){const r=e;Y.throwIfNull(e,"dialogConfig"),super(t,r.properties,new Mn),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=r.properties.clone();const n=this.buildAgentConfig();this.privReco.agentConfig.set(n)}connect(e,t){T(this.privReco.connect(),e,t)}disconnect(e,t){T(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(a.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(a.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){Y.throwIfDisposed(this.privIsDisposed);const r=(()=>Kn(this,void 0,void 0,(function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const e=new E;yield this.privReco.recognize(c.Conversation,e.resolve,e.reject);const t=yield e.promise;return yield this.implRecognizerStop(),t})))();r.catch((()=>{this.dispose(!0).catch((()=>{}))})),T(r.finally((()=>{this.isTurnComplete=!0})),e,t)}}sendActivityAsync(e,t,r){T(this.privReco.sendMessage(e),t,r)}close(e,t){Y.throwIfDisposed(this.privIsDisposed),T(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return Kn(this,void 0,void 0,(function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new P(e,this.privProperties)}createServiceRecognizer(e,t,r,n){return new Hn(e,t,r,n,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(a.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(a.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(a.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(a.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}!function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(Wn||(Wn={}));var Gn=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Qn{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=K.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,r){T((()=>Gn(this,void 0,void 0,(function*(){this.ensureInitializedContext();const t=this.formatAudioData(e),r=new Float32Array(this.samples.length+t.length);r.set(this.samples,0),r.set(t,this.samples.length),this.samples=r})))(),t,r)}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const e=200;this.autoUpdateBufferTimer=setInterval((()=>{this.updateAudioBuffer()}),e)}}createAudioContext(){this.audioContext=J.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new g("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){const r=new Float32Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]/t;return r}updateAudioBuffer(){if(0===this.samples.length)return;const e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),r=this.samples.length/e,n=this.audioContext.createBuffer(e,r,this.audioFormat.samplesPerSec);for(let t=0;t<e;t++){let r=t;const i=n.getChannelData(t);for(let t=0;t<this.samples.length;t++,r+=e)i[t]=this.samples[r]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=n,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=n.duration,this.samples=new Float32Array}playAudio(e){return Gn(this,void 0,void 0,(function*(){null===this.audioContext&&this.createAudioContext();const t=this.audioContext.createBufferSource(),r=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,(e=>{t.buffer=e,t.connect(r),t.start(0)}))}))}}class $n{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}}class Xn{constructor(e,t,r){this.privReason=e,this.privProperties=new we,this.privReason!==ie.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=ie.EnrollingVoiceProfile)):(this.privErrorDetails=r,this.privProperties.setProperty(Te,ne[ne.ServiceError]))}static FromIdentificationProfileList(e){const t=[];for(const r of e.profiles){const e="enrolling"===r.enrollmentStatus.toLowerCase()?ie.EnrollingVoiceProfile:"enrolled"===r.enrollmentStatus.toLowerCase()?ie.EnrolledVoiceProfile:ie.Canceled,n=new Xn(e,null,null);n.privDetails=this.getIdentificationDetails(r),t.push(n)}return t}static FromVerificationProfileList(e){const t=[];for(const r of e.profiles){const e="enrolling"===r.enrollmentStatus.toLowerCase()?ie.EnrollingVoiceProfile:"enrolled"===r.enrollmentStatus.toLowerCase()?ie.EnrolledVoiceProfile:ie.Canceled,n=new Xn(e,null,null);n.privDetails=this.getVerificationDetails(r),t.push(n)}return t}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static getIdentificationDetails(e){return{audioSpeechLength:e.speechTime?parseFloat(e.speechTime):0,enrollmentStatus:e.enrollmentStatus,enrollmentsLength:e.enrollmentSpeechTime?parseFloat(e.enrollmentSpeechTime):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentSpeechLength:e.remainingEnrollmentSpeechTime?parseFloat(e.remainingEnrollmentSpeechTime):0}}static getVerificationDetails(e){return{enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentSpeechLength:e.remainingEnrollmentSpeechLength?parseFloat(e.remainingEnrollmentSpeechLength):0,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount}}}class Yn extends bn{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=re.Error;let r=ne.NoError;return e.properties&&(r=ne[e.properties.getProperty(Te,ne[ne.NoError])]),new Yn(t,e.errorDetails,r)}}class Zn{constructor(e,t){this.privReason=e,this.privProperties=new we,e===ie.Canceled&&(Y.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(Te,ne[ne.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}}class ei extends bn{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=re.Error;let r=ne.NoError;return e.properties&&(r=ne[e.properties.getProperty(Te,ne[ne.NoError])]),new ei(t,e.errorDetails,r)}}class ti extends Zn{constructor(e,t,r){super(e,t),this.privPhrases=[],Y.throwIfNullOrUndefined(r,"phrases array");for(const e of r)this.privPhrases.push(e.passPhrase)}get phrases(){return this.privPhrases}}class ri{constructor(e,t){this.privContext=e||new R(null),this.privParameters=t}get parameters(){return this.privParameters}get Context(){return this.privContext}}class ni{static get requestOptions(){return ni.privDefaultRequestOptions}static get configParams(){return ni.privDefaultParams}static get restErrors(){return ni.privRestErrors}}ni.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},ni.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},ni.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var ii,oi=r(13829);!function(e){e.Get="get",e.Post="post",e.Delete="delete",e.File="file"}(ii||(ii={}));class si{constructor(e,t){if(!e)throw new f("configParams");this.privHeaders=e.headers,this.privTimeout=e.timeout,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t,r={},n=null,i=null){const o=new E;let s;s="undefined"==typeof XMLHttpRequest?new oi.XMLHttpRequest:new XMLHttpRequest;const a=e===ii.File?"post":e;return s.open(a,this.withQuery(t,r),!0),this.privHeaders&&Object.keys(this.privHeaders).forEach((e=>s.setRequestHeader(e,this.privHeaders[e]))),this.privIgnoreCache&&s.setRequestHeader("Cache-Control","no-cache"),s.timeout=this.privTimeout,s.onload=()=>{o.resolve(this.parseXHRResult(s))},s.onerror=()=>{o.resolve(this.errorResponse(s,"Failed to make request."))},s.ontimeout=()=>{o.resolve(this.errorResponse(s,"Request took longer than expected."))},e===ii.File&&i?(s.setRequestHeader("Content-Type","multipart/form-data"),s.send(i)):e===ii.Post&&n?(s.setRequestHeader("Content-Type","application/json"),s.send(JSON.stringify(n))):s.send(),o.promise}parseXHRResult(e){return{data:e.responseText,headers:e.getAllResponseHeaders(),json:()=>JSON.parse(e.responseText),ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText}}errorResponse(e,t=null){return{data:t||e.statusText,headers:e.getAllResponseHeaders(),json:()=>JSON.parse(t||'"'+e.statusText+'"'),ok:!1,status:e.status,statusText:e.statusText}}withQuery(e,t={}){const r=this.queryParams(t);return r?e+(-1===e.indexOf("?")?"?":"&")+r:e}queryParams(e={}){return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}}var ai=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class ci{constructor(e){let t=e.parameters.getProperty(a.SpeechServiceConnection_Endpoint,void 0);if(!t){const r=e.parameters.getProperty(a.SpeechServiceConnection_Region,"westus"),n=r&&r.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";t=e.parameters.getProperty(a.SpeechServiceConnection_Host,"https://"+r+".api.cognitive"+n+"/speaker/{mode}/v2.0/{dependency}")+"/profiles"}this.privUri=t;const r=ni.requestOptions;r.headers[ni.configParams.subscriptionKey]=e.parameters.getProperty(a.SpeechServiceConnection_Key,void 0),this.privRestAdapter=new si(r)}createProfile(e,t){const r=this.getOperationUri(e);return this.privRestAdapter.setHeaders(ni.configParams.contentTypeKey,"application/json"),this.privRestAdapter.request(ii.Post,r,{},{locale:t})}createEnrollment(e,t){this.privRestAdapter.setHeaders(ni.configParams.contentTypeKey,"multipart/form-data");const r=this.getOperationUri(e.profileType)+"/"+e.profileId+"/enrollments";return t.blob.then((e=>this.privRestAdapter.request(ii.File,r,{ignoreMinLength:"true"},null,e)))}verifySpeaker(e,t){return ai(this,void 0,void 0,(function*(){this.privRestAdapter.setHeaders(ni.configParams.contentTypeKey,"multipart/form-data");const r=this.getOperationUri(e.voiceProfile.profileType)+"/"+e.voiceProfile.profileId+"/verify";try{const e=yield t.blob;return this.privRestAdapter.request(ii.File,r,{ignoreMinLength:"true"},null,e)}catch(e){return Promise.resolve({data:e})}}))}identifySpeaker(e,t){return ai(this,void 0,void 0,(function*(){this.privRestAdapter.setHeaders(ni.configParams.contentTypeKey,"multipart/form-data");const r=this.getOperationUri(tn.TextIndependentIdentification)+"/identifySingleSpeaker";try{const n=yield t.blob;return this.privRestAdapter.request(ii.File,r,{profileIds:e.voiceProfileIds,ignoreMinLength:"true"},null,n)}catch(e){return Promise.resolve({data:e})}}))}getProfileStatus(e){const t=`${this.getOperationUri(e.profileType)}/${e.profileId}`;return this.privRestAdapter.request(ii.Get,t,{})}getProfiles(e){const t=this.getOperationUri(e);return this.privRestAdapter.request(ii.Get,t,{})}getAuthorizationPhrases(e){const t=`${this.getOperationUri(tn.TextDependentVerification)}`.replace("profiles","phrases")+"/"+e;return this.privRestAdapter.request(ii.Get,t,{})}deleteProfile(e){const t=this.getOperationUri(e.profileType)+"/"+e.profileId;return this.privRestAdapter.request(ii.Delete,t,{})}resetProfile(e){const t=this.getOperationUri(e.profileType)+"/"+e.profileId+"/reset";return this.privRestAdapter.request(ii.Post,t,{})}getOperationUri(e){const t=e===tn.TextIndependentIdentification?"identification":"verification",r=e===tn.TextDependentVerification?"text-dependent":"text-independent";return this.privUri.replace("{mode}",t).replace("{dependency}",r)}}var ui,pi=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class hi{constructor(e){const t=e;Y.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.implClientSetup()}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}createProfileAsync(e,t,r,n){T((()=>pi(this,void 0,void 0,(function*(){const r=(yield this.privAdapter.createProfile(e,t)).json();return new $n(r.profileId,e)})))(),r,n)}retrieveEnrollmentResultAsync(e,t,r){T((()=>pi(this,void 0,void 0,(function*(){const t=yield this.privAdapter.getProfileStatus(e);return new Xn(t.ok?ie.EnrolledVoiceProfile:ie.Canceled,t.data,t.statusText)})))(),t,r)}getAllProfilesAsync(e,t,r){T((()=>pi(this,void 0,void 0,(function*(){const t=yield this.privAdapter.getProfiles(e);return e===tn.TextIndependentIdentification?Xn.FromIdentificationProfileList(t.json()):Xn.FromVerificationProfileList(t.json())})))(),t,r)}getAuthorizationPhrasesAsync(e,t,r){T((()=>pi(this,void 0,void 0,(function*(){const t=yield this.privAdapter.getAuthorizationPhrases(e);return new ti(t.ok?ie.EnrollingVoiceProfile:ie.Canceled,t.statusText,t.json())})))(),t,r)}enrollProfileAsync(e,t,r,n){const i=t;Y.throwIfNullOrUndefined(i,"audioConfig"),T((()=>pi(this,void 0,void 0,(function*(){const t=yield this.privAdapter.createEnrollment(e,i);return new Xn(t.ok?ie.EnrolledVoiceProfile:ie.Canceled,t.data,t.statusText)})))(),r,n)}deleteProfileAsync(e,t,r){T((()=>pi(this,void 0,void 0,(function*(){const t=yield this.privAdapter.deleteProfile(e);return this.getResult(t,ie.DeletedVoiceProfile)})))(),t,r)}resetProfileAsync(e,t,r){T((()=>pi(this,void 0,void 0,(function*(){const t=yield this.privAdapter.resetProfile(e);return this.getResult(t,ie.ResetVoiceProfile)})))(),t,r)}close(){}implClientSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const n=new ri(new R(new O(e,t,r)),this.privProperties);this.privAdapter=new ci(n)}getResult(e,t,r){return new Zn(e.ok?t:ie.Canceled,e.statusText)}}class li{constructor(e){if(this.privVoiceProfiles=[],Y.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw new Error("Empty Voice Profiles array");e.forEach((e=>{if(e.profileType!==tn.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+e.profileId);this.privVoiceProfiles.push(e)}))}static fromProfiles(e){return new li(e)}get voiceProfileIds(){return this.privVoiceProfiles.map((e=>e.profileId)).join(",")}}!function(e){e[e.Verify=0]="Verify",e[e.Identify=1]="Identify"}(ui||(ui={}));class vi{constructor(e,t,r,n=ie.RecognizedSpeaker){if(this.privProperties=new we,this.privReason=n,this.privReason!==ie.Canceled)if(e===ui.Identify){const e=JSON.parse(t);Y.throwIfNullOrUndefined(e,"JSON"),this.privProfileId=e.identifiedProfile.profileId,this.privScore=e.identifiedProfile.score}else{const e=JSON.parse(t);Y.throwIfNullOrUndefined(e,"JSON"),this.privScore=e.score,"accept"!==e.recognitionResult.toLowerCase()&&(this.privReason=ie.NoMatch),void 0!==r&&""!==r&&(this.privProfileId=r)}else{const e=JSON.parse(t);Y.throwIfNullOrUndefined(e,"JSON"),this.privErrorDetails=e.statusText,this.privProperties.setProperty(Te,ne[ne.ServiceError])}this.privProperties.setProperty(a.SpeechServiceResponse_JsonResult,t)}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}class di extends bn{constructor(e,t,r){super(e,t,r)}static fromResult(e){const t=re.Error;let r=ne.NoError;return e.properties&&(r=ne[e.properties.getProperty(Te,ne[ne.NoError])]),new di(t,e.errorDetails,r)}}class fi{constructor(e){if(Y.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===tn.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new fi(e)}get voiceProfile(){return this.privVoiceProfile}}class gi{constructor(e,t){const r=e;Y.throwIfNull(r,"speechConfig"),this.privAudioConfigImpl=t,Y.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privProperties=r.properties.clone(),this.implSRSetup()}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t,r){if(e instanceof li){const n=this.privAdapter.identifySpeaker(e,this.privAudioConfigImpl);T(this.getResult(n,ui.Identify,void 0),t,r)}else{if(!(e instanceof fi))throw new Error("SpeakerRecognizer.recognizeOnce: Unexpected model type");{const n=this.privAdapter.verifySpeaker(e,this.privAudioConfigImpl);T(this.getResult(n,ui.Verify,e.voiceProfile.profileId),t,r)}}}close(){}implSRSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const n=new ri(new R(new O(e,t,r)),this.privProperties);this.privAdapter=new ci(n)}getResult(e,t,r){return n=this,i=void 0,s=function*(){const n=yield e;return new vi(t,n.data,r,n.ok?ie.RecognizedSpeaker:ie.Canceled)},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((s=s.apply(n,i||[])).next())}));var n,i,o,s}}class yi{constructor(){this.privProperties=new we}static fromOpenRange(){const e=new yi;return e.properties.setProperty(a.SpeechServiceConnection_AutoDetectSourceLanguages,xe),e}static fromLanguages(e){Y.throwIfArrayEmptyOrWhitespace(e,"languages");const t=new yi;return t.properties.setProperty(a.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new yi,r=[];return e.forEach((e=>{if(r.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const r=e.language+a.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(r,e.endpointId)}})),t.properties.setProperty(a.SpeechServiceConnection_AutoDetectSourceLanguages,r.join()),t}get properties(){return this.privProperties}}class mi{constructor(e,t){Y.throwIfNullOrUndefined(e,"language"),Y.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new mi(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}class Si{constructor(e,t){Y.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new Si(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}class bi extends ni{static get host(){return bi.privHost}static get apiVersion(){return bi.privApiVersion}static get clientAppId(){return bi.privClientAppId}static get defaultLanguageCode(){return bi.privDefaultLanguageCode}static get restPath(){return bi.privRestPath}static get webSocketPath(){return bi.privWebSocketPath}static get speechHost(){return bi.privSpeechHost}static get speechPath(){return bi.privSpeechPath}static get transcriptionEventKeys(){return bi.privTranscriptionEventKeys}}bi.privHost="dev.microsofttranslator.com",bi.privRestPath="/capito/room",bi.privApiVersion="2.0",bi.privDefaultLanguageCode="en-US",bi.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",bi.privWebSocketPath="/capito/translate",bi.privSpeechHost="{region}.s2s.speech.microsoft.com",bi.privSpeechPath="/speech/translation/cognitiveservices/v1",bi.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferenciateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];class Ci{constructor(e=[],t){this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(void 0===e)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex((t=>t.id===e))}getParticipant(e){return this.participants.find((t=>t.id===e))}deleteParticipant(e){this.participants=this.participants.filter((t=>t.id!==e))}get host(){return this.participants.find((e=>!0===e.isHost))}get me(){return this.getParticipant(this.meId)}}const Pi="final",wi="instant_message",Ri="partial",Ii="participant_command",Oi="ChangeNickname",Ei="SetMute",Ti="SetProfanityFiltering",Ai="SetTranslateToLanguages",_i="SetUseTTS";var xi=r(40739);function ki(e,t=null){return{data:t||e.statusText,headers:e.getAllResponseHeaders(),json:()=>JSON.parse(t||'"'+e.statusText+'"'),ok:!1,status:e.status,statusText:e.statusText}}function Mi(e,t,r={},n=null,i={},o){const s=ni.requestOptions,a=i.ignoreCache||s.ignoreCache,c=i.headers||s.headers,u=i.timeout||s.timeout;let p;p="undefined"==typeof window?new xi.XMLHttpRequest:new XMLHttpRequest,p.open(e,function(e,t={}){const r=function(e={}){return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}(t);return r?e+(-1===e.indexOf("?")?"?":"&")+r:e}(t,r),!0),c&&Object.keys(c).forEach((e=>p.setRequestHeader(e,c[e]))),a&&p.setRequestHeader("Cache-Control","no-cache"),p.timeout=u,p.onload=e=>{o(function(e){return{data:e.responseText,headers:e.getAllResponseHeaders(),json:()=>JSON.parse(e.responseText),ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText}}(p))},p.onerror=e=>{o(ki(p,"Failed to make request."))},p.ontimeout=e=>{o(ki(p,"Request took longer than expected."))},"post"===e&&n?(p.setRequestHeader("Content-Type","application/json"),p.send(JSON.stringify(n))):p.send()}class Di{constructor(){this.privRequestParams=bi.configParams,this.privErrors=bi.restErrors,this.privHost=bi.host,this.privApiVersion=bi.apiVersion,this.privRestPath=bi.restPath}createOrJoin(e,t,r,n){try{Y.throwIfNullOrUndefined(e,"args");const i=e.getProperty(a.SpeechServiceConnection_RecoLanguage,bi.defaultLanguageCode),o=e.getProperty(a.ConversationTranslator_Name),s=e.getProperty(a.ConversationTranslator_Host,this.privHost),c=e.getProperty(a.ConversationTranslator_CorrelationId),u=e.getProperty(a.SpeechServiceConnection_Key),p=e.getProperty(a.SpeechServiceConnection_Region),h=e.getProperty(a.SpeechServiceAuthorization_Token);Y.throwIfNullOrWhitespace(i,"languageCode"),Y.throwIfNullOrWhitespace(o,"nickname"),Y.throwIfNullOrWhitespace(s,"endpointHost");const l={};l[this.privRequestParams.apiVersion]=this.privApiVersion,l[this.privRequestParams.languageCode]=i,l[this.privRequestParams.nickname]=o;const v={};c&&(v[this.privRequestParams.correlationId]=c),v[this.privRequestParams.clientAppId]=bi.clientAppId,void 0!==t?l[this.privRequestParams.roomId]=t:(Y.throwIfNullOrUndefined(p,this.privErrors.authInvalidSubscriptionRegion),v[this.privRequestParams.subscriptionRegion]=p,u?v[this.privRequestParams.subscriptionKey]=u:h?v[this.privRequestParams.authorization]=`Bearer ${h}`:Y.throwIfNullOrUndefined(u,this.privErrors.authInvalidSubscriptionKey));const d={};d.headers=v,Mi("post",`https://${s}${this.privRestPath}`,l,null,d,(e=>{const t=function(e,t){let r="";try{const n=t.trim().split(/[\r\n]+/),i={};n.forEach((e=>{const t=e.split(": "),r=t.shift().toLowerCase(),n=t.join(": ");i[r]=n})),r=i[e.toLowerCase()]}catch(e){}return r}(this.privRequestParams.requestId,e.headers);if(!e.ok){if(n){let r,i=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString());try{r=JSON.parse(e.data),i+=` [${r.error.code}: ${r.error.message}]`}catch(t){i+=` [${e.data}]`}t&&(i+=` ${t}`),n(i)}return}const i=JSON.parse(e.data);if(i&&(i.requestId=t),r){try{r(i)}catch(e){n&&n(e)}r=void 0}}))}catch(e){if(n)if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}}leave(e,t){return new Promise(((r,n)=>{try{Y.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),Y.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","token"));const n=e.getProperty(a.ConversationTranslator_Host,this.privHost),i=e.getProperty(a.ConversationTranslator_CorrelationId),o={};o[this.privRequestParams.apiVersion]=this.privApiVersion,o[this.privRequestParams.sessionToken]=t;const s={};i&&(s[this.privRequestParams.correlationId]=i);const c={};c.headers=s,Mi("delete",`https://${n}${this.privRestPath}`,o,null,c,(e=>{e.ok,r()}))}catch(e){if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}}))}}class ji extends he{constructor(e,t,r,n){super(e,t,r,n);const i=JSON.parse(this.textBody);void 0!==i.type&&(this.privConversationMessageType=i.type)}get conversationMessageType(){return this.privConversationMessageType}}class zi{constructor(){this.toConnectionMessage=e=>{const t=new E;try{if(e.messageType===ee.Text){const r=new ji(e.messageType,e.textContent,{},e.id);t.resolve(r)}else e.messageType===ee.Binary&&t.resolve(new ji(e.messageType,e.binaryContent,void 0,e.id))}catch(e){t.reject(`Error formatting the message. Error: ${e}`)}return t.promise},this.fromConnectionMessage=e=>{const t=new E;try{if(e.messageType===ee.Text){const r=`${e.textBody?e.textBody:""}`;t.resolve(new rr(ee.Text,r,e.id))}}catch(e){t.reject(`Error formatting the message. ${e}`)}return t.promise}}}class Ni extends Ur{create(e,t,r){const n=e.parameters.getProperty(a.ConversationTranslator_Host,bi.host),o=e.parameters.getProperty(a.ConversationTranslator_CorrelationId,i()),s=`wss://${n}${bi.webSocketPath}`,c=e.parameters.getProperty(a.ConversationTranslator_Token,void 0);Y.throwIfNullOrUndefined(c,"token");const u={};u[bi.configParams.apiVersion]=bi.apiVersion,u[bi.configParams.token]=c,u[bi.configParams.correlationId]=o;const p="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Lr(s,u,{},new zi,Br.fromRecognizerConfig(e),p,r)}}class Li extends wt{}class Bi extends vt{constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}}class Fi extends Et{constructor(e,t,r,n,i,o,s,a,c,u,p){super(t,n,i,o,s,a,c,u,p),this.privId=e,this.privOrigLang=r}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}class Ui{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.onPreConnectionStart=(e,t)=>{this.privSessionId=t},this.onAuthCompleted=(e,t)=>{e&&this.onComplete()},this.onConnectionEstablishCompleted=(e,t)=>{200!==e&&403===e&&this.onComplete()},this.onServiceTurnEndResponse=e=>{e?this.privRequestId=o():this.onComplete()},this.onComplete=()=>{},this.privSessionId=e,this.privRequestId=o(),this.privRequestCompletionDeferral=new E}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}dispose(e){return t=this,r=void 0,i=function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach()}},new((n=void 0)||(n=Promise))((function(e,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(s,a)}c((i=i.apply(t,r||[])).next())}));var t,r,n,i}}class qi extends vt{constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}}class Vi extends vt{constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}}class Hi extends vt{constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}}class Wi extends vt{constructor(e,t,r,n){super(n),this.privKey=t,this.privValue=r,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}class Ki extends vt{constructor(e,t,r,n,i,o,s,a,c){super(c),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=r,this.privProfanityFilter=n,this.privRoomProfanityFilter=i,this.privIsRoomLocked=o,this.privIsRoomLocked=s,this.privParticipants=a}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}class Ji{constructor(e,t,r){this.privPayload=t,this.privCommand=e,this.privSessionId=r}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}class Gi{constructor(e){this.privCommandResponse=JSON.parse(e)}static fromJSON(e){return new Gi(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}}class Qi{constructor(e){this.privParticipantsPayloadResponse=JSON.parse(e)}static fromJSON(e){return new Qi(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}}class $i{constructor(e){this.privParticipantPayloadResponse=JSON.parse(e)}static fromJSON(e){return new $i(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}}class Xi{constructor(e){this.privSpeechResponse=JSON.parse(e)}static fromJSON(e){return new Xi(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}}class Yi{constructor(e){this.privTextResponse=JSON.parse(e)}static fromJSON(e){return new Yi(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}}var Zi=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class eo extends Gt{constructor(e,t,r,n,i){super(e,t,r,n,i),this.privLastPartialUtteranceId="",this.noOp=()=>{},this.privConversationServiceConnector=i,this.privConversationAuthentication=e,this.receiveMessageOverride=this.receiveConversationMessageOverride,this.recognizeOverride=this.noOp,this.postConnectImplOverride=this.conversationConnectImpl,this.configConnectionOverride=this.configConnection,this.disconnectOverride=this.privDisconnect,this.privConversationRequestSession=new Ui(o()),this.privConversationConnectionFactory=t,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return Zi(this,void 0,void 0,(function*(){if(this.privConversationIsDisposed=!0,this.privConnectionConfigPromise){const t=yield this.privConnectionConfigPromise;yield t.dispose(e)}yield t.dispose.call(this,e)}))}sendMessage(e){return Zi(this,void 0,void 0,(function*(){return(yield this.fetchConnection()).send(new ji(ee.Text,e))}))}sendMessageAsync(e){return Zi(this,void 0,void 0,(function*(){new E;const t=yield this.fetchConnection();yield t.send(new ji(ee.Text,e))}))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,re.Error,ne.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(e,t,r){return Zi(this,void 0,void 0,(function*(){return!0}))}cancelRecognition(e,t,r,n,i){this.terminateMessageLoop=!0;const o=new Li(r,i,n,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch(e){}}conversationConnectImpl(e){return Zi(this,void 0,void 0,(function*(){return this.privConnectionLoop=this.startMessageLoop(),e}))}receiveConversationMessageOverride(){return Zi(this,void 0,void 0,(function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const e=new E;try{const t=yield this.fetchConnection(),r=yield t.read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!r)return this.receiveConversationMessageOverride();const n=this.privConversationRequestSession.sessionId;let i=!1;try{switch(r.conversationMessageType.toLowerCase()){case"info":case"participant_command":case"command":const e=Gi.fromJSON(r.textBody);switch(e.command.toLowerCase()){case"participantlist":const t=Qi.fromJSON(r.textBody),i=t.participants.map((e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale})));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new Ki(t.roomid,t.token,t.translateTo,t.profanityFilter,t.roomProfanityFilter,t.roomLocked,t.muteAll,i,n));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Wi(e.participantId,Ai,e.value,n));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Wi(e.participantId,Ti,e.value,n));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Wi(e.participantId,Ei,e.value,n));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new qi(e.value,n));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new Bi(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Wi(e.participantId,_i,e.value,n));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new Vi(e.value,n));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new Wi(e.participantId,Oi,e.nickname,n));break;case"joinsession":const o=$i.fromJSON(r.textBody),s={avatar:o.avatar,displayName:o.nickname,id:o.participantId,isHost:o.ishost,isMuted:o.ismuted,isUsingTts:o.usetts,preferredLanguage:o.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new Hi(s,n));break;case"leavesession":const a={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new Hi(a,n));break;case"disconnectsession":e.participantId}break;case"partial":case"final":const t=Xi.fromJSON(r.textBody),o=new Fi(t.participantId,this.getTranslations(t.translations),t.language,void 0,void 0,t.recognition,void 0,void 0,r.textBody,void 0);t.isFinal?((void 0!==o.text&&o.text.length>0||t.id===this.privLastPartialUtteranceId)&&(i=!0),i&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Ji(Pi,o,n))):void 0!==o.text&&(this.privLastPartialUtteranceId=t.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Ji(Ri,o,n)));break;case"translated_message":const s=Yi.fromJSON(r.textBody),a=new Fi(s.participantId,this.getTranslations(s.translations),s.language,void 0,void 0,s.originalText,void 0,void 0,void 0,r.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new Ji(wi,a,n))}}catch(e){}return this.receiveConversationMessageOverride()}catch(e){this.terminateMessageLoop=!0}return e.promise}))}startMessageLoop(){return Zi(this,void 0,void 0,(function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const e=this.receiveConversationMessageOverride();try{return yield e}catch(e){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",re.Error,ne.RuntimeError,e),null}}))}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise?this.privConnectionConfigPromise.then((e=>e.state()===te.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=null,this.configConnection()):this.privConnectionConfigPromise),(e=>(this.privConnectionId=null,this.privConnectionConfigPromise=null,this.configConnection()))):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then((e=>e)),this.privConnectionConfigPromise)}getTranslations(e){let t;if(void 0!==e){t=new an;for(const r of e)t.set(r.lang,r.translation)}return t}}var to,ro=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class no extends er{constructor(e,t){const r=e;Y.throwIfNull(r,"speechConfig"),super(t,r.properties,new Ni),this.privIsDisposed=!1,this.privProperties=r.properties.clone(),this.privConnection=En.fromRecognizer(this)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,r){try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.privReco.connectAsync(t,r)}catch(e){if(r)if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e)}}disconnect(e,t){try{Y.throwIfDisposed(this.privIsDisposed),this.privReco.disconnect().then((()=>{e&&e()}),(e=>{t&&t(e)}))}catch(e){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e);this.dispose(!0).catch((e=>{S.instance.onEvent(new Ze(e))}))}}sendRequest(e,t,r){try{Y.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,r)}catch(e){if(r)if(e instanceof Error){const t=e;r(t.name+": "+t.message)}else r(e);this.dispose(!0).catch((e=>{S.instance.onEvent(new Ze(e))}))}}close(){var e,t;return ro(this,void 0,void 0,(function*(){Y.throwIfDisposed(this.privIsDisposed),null===(e=this.privConnection)||void 0===e||e.closeConnection(),null===(t=this.privConnection)||void 0===t||t.close(),this.privConnection=void 0,yield this.dispose(!0)}))}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return ro(this,void 0,void 0,(function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new P(e,this.privProperties)}createServiceRecognizer(e,t,r,n){return new eo(e,t,r,n,this)}sendMessage(e,t,r){!function(e,t,r){e?e.then((e=>{try{t&&t()}catch(e){r&&r(`'Unhandled error on promise callback: ${e}'`)}}),(e=>{try{r&&r(e)}catch(e){}})):r&&r("Null promise")}(this.privReco.sendMessageAsync(e),t,r)}}class io extends vt{constructor(e,t,r){super(r),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}}!function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(to||(to={}));class oo extends dt{constructor(e,t,r){super(t,r),this.privResult=e}get result(){return this.privResult}}class so{constructor(e){this.privUserId=e}get userId(){return this.privUserId}}class ao{constructor(e,t,r,n,i,o,s,a){this.privId=e,this.privAvatar=t,this.privDisplayName=r,this.privIsHost=n,this.privIsMuted=i,this.privIsUsingTts=o,this.privPreferredLanguage=s,this.privVoice=a,this.privProperties=new we}static From(e,t,r){return new ao(e,"",e,!1,!1,!1,t,r)}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}}var co=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class uo{constructor(){}static createConversationAsync(e,t,r,n){if(Y.throwIfNullOrUndefined(e,bi.restErrors.invalidArgs.replace("{arg}","config")),Y.throwIfNullOrUndefined(e.region,bi.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(a[a.SpeechServiceAuthorization_Token])||Y.throwIfNullOrUndefined(e.subscriptionKey,bi.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof t){const i=new po(e,t);return T((()=>co(this,void 0,void 0,(function*(){})))(),r,n),i}{const n=new po(e),i=t,o=r;return n.createConversationAsync((()=>{i&&i()}),(e=>{o&&o(e)})),n}}}class po extends uo{constructor(e,t){if(super(),this.privIsDisposed=!1,this.privIsConnected=!1,this.privErrors=bi.restErrors,this.privConversationId="",this.onConnected=e=>{this.privIsConnected=!0;try{this.privConversationTranslator.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>co(this,void 0,void 0,(function*(){yield this.close(!1);try{this.privConversationTranslator.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}})),this.onCanceled=(e,t)=>co(this,void 0,void 0,(function*(){yield this.close(!1);try{this.privConversationTranslator.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(e){}})),this.onParticipantUpdateCommandReceived=(e,t)=>{var r,n;try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case Oi:e.displayName=t.value;break;case _i:e.useTts=t.value;break;case Ti:e.profanity=t.value;break;case Ei:e.isMuted=t.value;break;case Ai:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),(null===(r=this.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(n=this.privConversationTranslator)||void 0===n||n.participantsChanged(this.privConversationTranslator,new io(to.Updated,[this.toParticipant(e)],t.sessionId)))}}catch(t){}},this.onLockRoomCommandReceived=(e,t)=>{},this.onMuteAllCommandReceived=(e,t)=>{var r,n;try{this.privParticipants.participants.forEach((e=>e.isMuted=!e.isHost&&t.isMuted)),(null===(r=this.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(n=this.privConversationTranslator)||void 0===n||n.participantsChanged(this.privConversationTranslator,new io(to.Updated,this.toParticipants(!1),t.sessionId)))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{var r,n;try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&(null===(r=this.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(n=this.privConversationTranslator)||void 0===n||n.participantsChanged(this.privConversationTranslator,new io(to.JoinedConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{var r,n;try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),(null===(r=this.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(n=this.privConversationTranslator)||void 0===n||n.participantsChanged(this.privConversationTranslator,new io(to.LeftConversation,[this.toParticipant(e)],t.sessionId))))}catch(t){}},this.onTranslationReceived=(e,t)=>{var r,n,i,o,s,a;try{switch(t.command){case Pi:(null===(r=this.privConversationTranslator)||void 0===r?void 0:r.transcribed)&&(null===(n=this.privConversationTranslator)||void 0===n||n.transcribed(this.privConversationTranslator,new oo(t.payload,void 0,t.sessionId)));break;case Ri:(null===(i=this.privConversationTranslator)||void 0===i?void 0:i.transcribing)&&(null===(o=this.privConversationTranslator)||void 0===o||o.transcribing(this.privConversationTranslator,new oo(t.payload,void 0,t.sessionId)));break;case wi:(null===(s=this.privConversationTranslator)||void 0===s?void 0:s.textMessageReceived)&&(null===(a=this.privConversationTranslator)||void 0===a||a.textMessageReceived(this.privConversationTranslator,new oo(t.payload,void 0,t.sessionId)))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{var r,n,i;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),(null===(r=this.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(n=this.privConversationTranslator)||void 0===n||n.participantsChanged(this.privConversationTranslator,new io(to.JoinedConversation,this.toParticipants(!0),t.sessionId))),this.me.isHost){const e=null===(i=this.privConversationTranslator)||void 0===i?void 0:i.properties.getProperty(a.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{var r,n;try{(null===(r=this.privConversationTranslator)||void 0===r?void 0:r.conversationExpiration)&&(null===(n=this.privConversationTranslator)||void 0===n||n.conversationExpiration(this.privConversationTranslator,t))}catch(t){}},this.privProperties=new we,this.privManager=new Di,e.getProperty(a[a.SpeechServiceConnection_RecoLanguage])||e.setProperty(a[a.SpeechServiceConnection_RecoLanguage],bi.defaultLanguageCode),this.privLanguage=e.getProperty(a[a.SpeechServiceConnection_RecoLanguage]),t)this.privConversationId=t;else{0===e.targetLanguages.length&&e.addTargetLanguage(this.privLanguage),e.getProperty(a[a.SpeechServiceResponse_ProfanityOption])||e.setProfanity(ot.Masked);let t=e.getProperty(a[a.ConversationTranslator_Name]);(null==t||t.length<=1||t.length>50)&&(t="Host"),e.setProperty(a[a.ConversationTranslator_Name],t)}this.privConfig=e;const r=e;Y.throwIfNull(r,"speechConfig"),this.privProperties=r.properties.clone(),this.privIsConnected=!1,this.privParticipants=new Ci,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}set conversationTranslator(e){this.privConversationTranslator=e}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get authorizationToken(){return this.privToken}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(r=>{r||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=r,this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}startConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=class{static fromConfig(e,t){return new no(e,t)}}.fromConfig(this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}addParticipantAsync(e,t,r){Y.throwIfNullOrUndefined(e,"Participant"),T(this.addParticipantImplAsync(e),t,r)}joinConversationAsync(e,t,r,n,i){try{Y.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),Y.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),Y.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(e=>{Y.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,n&&n(e.cognitiveSpeechAuthToken)}),(e=>{this.handleError(e,i)}))}catch(e){this.handleError(e,i)}}deleteConversationAsync(e,t){T(this.deleteConversationImplAsync(),e,t)}deleteConversationImplAsync(){return co(this,void 0,void 0,(function*(){Y.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),Y.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}))}endConversationAsync(e,t){T(this.endConversationImplAsync(),e,t)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){var r;try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}muteAllParticipantsAsync(e,t){var r;try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}muteParticipantAsync(e,t,r){var n;try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getMuteCommand(e,!0),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(e){this.handleError(e,r)}}removeParticipantAsync(e,t,r){var n;try{if(Y.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))T(this.removeParticipantImplAsync(e),t,r);else{Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);let i="";"string"==typeof e?i=e:e.hasOwnProperty("id")?i=e.id:e.hasOwnProperty("userId")&&(i=e.userId),Y.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex((e=>e.id===i))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getEjectCommand(i),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}}catch(e){this.handleError(e,r)}}unlockConversationAsync(e,t){var r;try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}unmuteAllParticipantsAsync(e,t){var r;try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(e){this.handleError(e,t)}}unmuteParticipantAsync(e,t,r){var n;try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getMuteCommand(e,!1),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(e){this.handleError(e,r)}}sendTextMessageAsync(e,t,r){var n;try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getMessageCommand(e),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(e){this.handleError(e,r)}}changeNicknameAsync(e,t,r){var n;try{Y.throwIfDisposed(this.privIsDisposed),Y.throwIfDisposed(this.privConversationRecognizer.isDisposed()),Y.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),Y.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getChangeNicknameCommand(e),(()=>{this.handleCallback(t,r)}),(e=>{this.handleError(e,r)}))}catch(e){this.handleError(e,r)}}isDisposed(){return this.privIsDisposed}dispose(e){var t;this.isDisposed||(this.privIsDisposed=!0,null===(t=this.config)||void 0===t||t.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privConversationRecognizer=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}get transcriberRecognizer(){return this.privTranscriberRecognizer}connectTranscriberRecognizer(e){return co(this,void 0,void 0,(function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this}))}get conversationInfo(){const e=this.conversationId,t=this.participants.map((e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}))),r={};for(const e of bi.transcriptionEventKeys){const t=this.properties.getProperty(e,"");""!==t&&(r[e]=t)}return{id:e,participants:t,conversationProperties:r}}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}close(e){var t,r;return co(this,void 0,void 0,(function*(){try{this.privIsConnected=!1,yield this.privConversationRecognizer.close(),yield null===(t=this.privTranscriberRecognizer)||void 0===t?void 0:t.close(),this.privConversationRecognizer=void 0,null===(r=this.privConversationTranslator)||void 0===r||r.dispose()}catch(e){}e&&this.dispose()}))}get canSend(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map((e=>this.toParticipant(e)));return e?t:t.filter((e=>!1===e.isHost))}toParticipant(e){return new ao(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return Y.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Y.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:"SetMuteAll",participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ii,value:e})}getMuteCommand(e,t){return Y.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Y.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:Ei,participantId:e,roomid:this.privRoom.roomId,type:Ii,value:t})}getLockCommand(e){return Y.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Y.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:"SetLockState",participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ii,value:e})}getEjectCommand(e){return Y.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Y.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:"EjectParticipant",participantId:e,roomid:this.privRoom.roomId,type:Ii})}getChangeNicknameCommand(e){return Y.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Y.throwIfNullOrWhitespace(e,"nickname"),Y.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:Oi,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:Ii,value:e})}getMessageCommand(e){return Y.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),Y.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),Y.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:wi})}}var ho,lo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e[e.Inactive=0]="Inactive",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(ho||(ho={}));class vo extends mn{constructor(e,t,r){super(e,t),this.privSpeechState=ho.Inactive,r&&(this.privTranslator=r,this.sessionStarted=()=>{this.privSpeechState=ho.Connected},this.sessionStopped=()=>{this.privSpeechState=ho.Inactive},this.recognized=(e,t)=>lo(this,void 0,void 0,(function*(){var e;(null===(e=t.result)||void 0===e?void 0:e.errorDetails)&&(yield this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails))})),this.canceled=(e,t)=>lo(this,void 0,void 0,(function*(){if(this.privSpeechState!==ho.Inactive)try{yield this.cancelSpeech()}catch(e){this.privSpeechState=ho.Inactive}})))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}onConnection(){this.privSpeechState=ho.Connected}onDisconnection(){return lo(this,void 0,void 0,(function*(){this.privSpeechState=ho.Inactive,yield this.cancelSpeech()}))}fireCancelEvent(e){var t,r,n;try{if(this.privTranslator.canceled){const i=new Li(null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:re.Error,null!==(r=null==e?void 0:e.errorDetails)&&void 0!==r?r:e,null!==(n=null==e?void 0:e.errorCode)&&void 0!==n?n:ne.RuntimeError,void 0,null==e?void 0:e.sessionId);this.privTranslator.canceled(this.privTranslator,i)}}catch(e){}}cancelSpeech(){var e;return lo(this,void 0,void 0,(function*(){try{this.stopContinuousRecognitionAsync(),yield null===(e=this.privReco)||void 0===e?void 0:e.disconnect(),this.privSpeechState=ho.Inactive}catch(e){}}))}}class fo extends class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const r=e;t(r.name+": "+r.message)}else t(e)}}{constructor(e){super(e),this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privErrors=bi.restErrors,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new we}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants}joinConversationAsync(e,t,r,n,i){try{if("string"==typeof e){Y.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Y.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),i);let o=r;null!=o&&""!==o||(o=bi.defaultLanguageCode),this.privSpeechTranslationConfig=xt.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(ot.Masked),this.privSpeechTranslationConfig.addTargetLanguage(o),this.privSpeechTranslationConfig.setProperty(a[a.SpeechServiceConnection_RecoLanguage],o),this.privSpeechTranslationConfig.setProperty(a[a.ConversationTranslator_Name],t);const s=this.privProperties.getProperty(a.ConversationTranslator_Host);s&&this.privSpeechTranslationConfig.setProperty(a[a.ConversationTranslator_Host],s);const c=this.privProperties.getProperty(a.SpeechServiceConnection_Host);c&&this.privSpeechTranslationConfig.setProperty(a[a.SpeechServiceConnection_Host],c),this.privConversation=new po(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,o,(e=>{e||this.handleError(new Error(this.privErrors.permissionDeniedConnect),i),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.startConversationAsync((()=>{this.handleCallback(n,i)}),(e=>{this.handleError(e,i)}))}),(e=>{this.handleError(e,i)}))}else"object"==typeof e?(Y.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),Y.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(a.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,Y.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),Y.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(r,n)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),n)}catch(e){this.handleError(e,"string"==typeof r?i:n)}}leaveConversationAsync(e,t){T((()=>lo(this,void 0,void 0,(function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()})))(),e,t)}sendTextMessageAsync(e,t,r){var n;try{Y.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Y.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),null===(n=this.privConversation)||void 0===n||n.sendTextMessageAsync(e,t,r)}catch(e){this.handleError(e,r)}}startTranscribingAsync(e,t){T((()=>lo(this,void 0,void 0,(function*(){try{Y.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),Y.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),Y.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),e}})))(),e,t)}stopTranscribingAsync(e,t){T((()=>lo(this,void 0,void 0,(function*(){try{if(!this.privIsSpeaking)return void(yield this.cancelSpeech());this.privIsSpeaking=!1,yield new Promise(((e,t)=>{var r;null===(r=this.privCTRecognizer)||void 0===r||r.stopContinuousRecognitionAsync(e,t)}))}catch(e){yield this.cancelSpeech()}})))(),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,r){T((()=>lo(this,void 0,void 0,(function*(){var e,t;this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,null===(e=this.privSpeechTranslationConfig)||void 0===e||e.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,null===(t=this.privConversation)||void 0===t||t.dispose(),this.privConversation=void 0)})))(),t,r)}cancelSpeech(){var e;return lo(this,void 0,void 0,(function*(){try{this.privIsSpeaking=!1,yield null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onDisconnection(),this.privCTRecognizer=void 0}catch(e){}}))}connectTranslatorRecognizer(){return lo(this,void 0,void 0,(function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=ut.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(a[a.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(a[a.SpeechServiceConnection_Key],"");const e=encodeURIComponent(this.privConversation.room.token);let t=this.privSpeechTranslationConfig.getProperty(a[a.SpeechServiceConnection_Host],bi.speechHost);t=t.replace("{region}",this.privConversation.room.cognitiveSpeechRegion);const r=`wss://${t}${bi.speechPath}?${bi.configParams.token}=${e}`;this.privSpeechTranslationConfig.setProperty(a[a.SpeechServiceConnection_Endpoint],r),this.privCTRecognizer=new vo(this.privSpeechTranslationConfig,this.privAudioConfig,this)}catch(e){throw yield this.cancelSpeech(),e}}))}startContinuousRecognition(){return new Promise(((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)}))}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===ho.Connected||this.privCTRecognizer.state===ho.Connecting||this.privConversation.isMutedByHost)}}class go extends Ur{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio",this.create=(e,t,r)=>{let n=e.parameters.getProperty(a.SpeechServiceConnection_Endpoint,void 0);const i=e.parameters.getProperty(a.SpeechServiceConnection_Region,"centralus"),o=i&&i.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",s="wss://transcribe."+i+".cts.speech"+o+this.multiaudioRelativeUri,c=e.parameters.getProperty(a.SpeechServiceConnection_Host,s),u={},p=e.parameters.getProperty(a.SpeechServiceConnection_EndpointId,void 0),h=e.parameters.getProperty(a.SpeechServiceConnection_RecoLanguage,void 0);p?n&&-1!==n.search(Fr.CustomSpeechDeploymentId)||(u[Fr.CustomSpeechDeploymentId]=p):h&&(n&&-1!==n.search(Fr.Language)||(u[Fr.Language]=h)),this.setCommonUrlParams(e,u,n),n||(n=c);const l={};void 0!==t.token&&""!==t.token&&(l[t.headerName]=t.token),l[Qe.ConnectionId]=r,e.parameters.setProperty(a.SpeechServiceConnection_Url,n);const v="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Lr(n,u,l,new qr,Br.fromRecognizerConfig(e),v,r)}}}class yo extends wt{}var mo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class So extends Gt{constructor(e,t,r,n,i){super(e,t,r,n,i),this.sendSpeechEvent=(e,t)=>{const r=JSON.stringify(t);if(r)return e.send(new $e(ee.Text,"speech.event",this.privRequestSession.requestId,"application/json",r))},this.privTranscriberRecognizer=i,this.sendPrePayloadJSONOverride=this.sendTranscriptionStartJSON}sendSpeechEventAsync(e,t){return mo(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing){const r=yield this.fetchConnection();yield this.sendSpeechEvent(r,this.createSpeechEventPayload(e,t))}}))}processTypeSpecificMessages(e){return mo(this,void 0,void 0,(function*(){let t;const r=new we;r.setProperty(a.SpeechServiceResponse_JsonResult,e.textBody);let n=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const i=Hr.fromJSON(e.textBody),o=i.Offset+this.privRequestSession.currentTurnAudioOffset;t=new yt(this.privRequestSession.requestId,ie.RecognizingSpeech,i.Text,i.Duration,o,i.Language,i.LanguageDetectionConfidence,i.SpeakerId,void 0,e.textBody,r),this.privRequestSession.onHypothesis(o);const s=new Ct(t,i.Duration,this.privRequestSession.sessionId);if(this.privTranscriberRecognizer.recognizing)try{this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,s)}catch(e){}n=!0;break;case"speech.phrase":const a=Wr.fromJSON(e.textBody),c=Kr.implTranslateRecognitionResult(a.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+a.Offset+a.Duration),ie.Canceled===c){const e=Kr.implTranslateCancelResult(a.RecognitionStatus);yield this.cancelRecognitionLocal(e,Kr.implTranslateCancelErrorCode(a.RecognitionStatus),void 0)}else{if(!this.privRequestSession.isSpeechEnded||c!==ie.NoMatch||a.RecognitionStatus===Nr.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(Ee)===it[it.Simple])t=new yt(this.privRequestSession.requestId,c,a.DisplayText,a.Duration,a.Offset+this.privRequestSession.currentTurnAudioOffset,a.Language,a.LanguageDetectionConfidence,a.SpeakerId,void 0,e.textBody,r);else{const n=Jr.fromJSON(e.textBody);t=new yt(this.privRequestSession.requestId,c,n.RecognitionStatus===Nr.Success?n.NBest[0].Display:void 0,n.Duration,n.Offset+this.privRequestSession.currentTurnAudioOffset,n.Language,n.LanguageDetectionConfidence,void 0,void 0,e.textBody,r)}const n=new Ct(t,t.offset,this.privRequestSession.sessionId);if(this.privTranscriberRecognizer.recognized)try{this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,n)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0}return n}))}cancelRecognition(e,t,r,n,i){const o=new we;if(o.setProperty(Te,ne[n]),this.privTranscriberRecognizer.canceled){const t=new yo(r,i,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new yt(t,ie.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}sendTranscriptionStartJSON(e){return mo(this,void 0,void 0,(function*(){yield this.sendSpeechContext(e);const t=this.privTranscriberRecognizer.getConversationInfo(),r=this.createSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,r),yield this.sendWaveHeader(e)}))}createSpeechEventPayload(e,t){const r={id:"meeting",name:t,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r.meeting.record="on"===e.conversationProperties.audiorecording?"true":"false",r}}var bo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Co extends er{constructor(e,t){const r=e;Y.throwIfNull(r,"speechTranslationConfig"),Y.throwIfNullOrWhitespace(r.speechRecognitionLanguage,a[a.SpeechServiceConnection_RecoLanguage]),super(t,r.properties,new go),this.privDisposedRecognizer=!1}getConversationInfo(){return Y.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}set conversation(e){Y.throwIfNullOrUndefined(e,"Conversation"),this.privConversation=e}get speechRecognitionLanguage(){return Y.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}startContinuousRecognitionAsync(e,t){T(this.startContinuousRecognitionAsyncImpl(c.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){T(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(){return bo(this,void 0,void 0,(function*(){Y.throwIfDisposed(this.privDisposedRecognizer),yield this.dispose(!0)}))}pushConversationEvent(e,t){return bo(this,void 0,void 0,(function*(){const r=this.privReco;Y.throwIfNullOrUndefined(r,"serviceRecognizer"),yield r.sendSpeechEventAsync(e,t)}))}connectCallbacks(e){this.canceled=(t,r)=>{e.canceled&&e.canceled(e,r)},this.recognizing=(t,r)=>{e.transcribing&&e.transcribing(e,r)},this.recognized=(t,r)=>{e.transcribed&&e.transcribed(e,r)},this.sessionStarted=(t,r)=>{e.sessionStarted&&e.sessionStarted(e,r)},this.sessionStopped=(t,r)=>{e.sessionStopped&&e.sessionStopped(e,r)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return bo(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new P(e,this.properties)}createServiceRecognizer(e,t,r,n){return new So(e,t,r,n,this)}}var Po,wo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class Ro{constructor(e){this.privAudioConfig=e,this.privProperties=new we,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}joinConversationAsync(e,t,r){const n=e;Y.throwIfNullOrUndefined(n,"Conversation"),this.privRecognizer=new Co(e.config,this.privAudioConfig),Y.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectCallbacks(this),T(n.connectTranscriberRecognizer(this.privRecognizer),t,r)}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return Y.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveConversationAsync(e,t){this.privRecognizer.disconnectCallbacks(),T((()=>wo(this,void 0,void 0,(function*(){})))(),e,t)}close(e,t){Y.throwIfDisposed(this.privDisposedRecognizer),T(this.dispose(!0),e,t)}dispose(e){return wo(this,void 0,void 0,(function*(){this.privDisposedRecognizer||e&&(this.privDisposedRecognizer=!0)}))}}class Io{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1",this.create=(e,t,r)=>{let n=e.parameters.getProperty(a.SpeechServiceConnection_Endpoint,void 0);const i=e.parameters.getProperty(a.SpeechServiceConnection_Region,void 0),o=i&&i.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",s=e.parameters.getProperty(a.SpeechServiceConnection_EndpointId,void 0),c=void 0===s?"tts":"voice",u=e.parameters.getProperty(a.SpeechServiceConnection_Host,"wss://"+i+"."+c+".speech"+o);n||(n=u+this.synthesisUri);const p={};void 0!==t.token&&""!==t.token&&(p[t.headerName]=t.token),p[Qe.ConnectionId]=r,void 0!==s&&(p[Fr.CustomVoiceDeploymentId]=s),e.parameters.setProperty(a.SpeechServiceConnection_Url,n);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new Lr(n,{},p,new qr,Br.fromParameters(e.parameters),h,r)}}}!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(Po||(Po={}));class Oo{constructor(e,t){this.privSynthesisServiceType=Po.Standard,this.privSpeechServiceConfig=e||new w(new R(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}var Eo,To,Ao=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class _o{constructor(e,t){const r=e;Y.throwIfNull(r,"speechConfig"),null!==t&&(this.audioConfig=void 0===t?"undefined"==typeof window?void 0:ut.fromDefaultSpeakerOutput():t),this.privProperties=r.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new Io,this.synthesisRequestQueue=new q,this.implCommonSynthesizeSetup()}get authorizationToken(){return this.properties.getProperty(a.SpeechServiceAuthorization_Token)}set authorizationToken(e){Y.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(a.SpeechServiceConnection_AutoDetectSourceLanguages)===xe}static FromConfig(e,t,r){const n=e;return t.properties.mergeTo(n.properties),new _o(e,r)}buildSsml(e){let t=this.properties.getProperty(a.SpeechServiceConnection_SynthLanguage,"en-US"),r=this.properties.getProperty(a.SpeechServiceConnection_SynthVoice,""),n=_o.XMLEncode(e);return this.autoDetectSourceLanguage?t="en-US":r=r||{"ar-EG":"Microsoft Server Speech Text to Speech Voice (ar-EG, Hoda)","ar-SA":"Microsoft Server Speech Text to Speech Voice (ar-SA, Naayf)","bg-BG":"Microsoft Server Speech Text to Speech Voice (bg-BG, Ivan)","ca-ES":"Microsoft Server Speech Text to Speech Voice (ca-ES, HerenaRUS)","cs-CZ":"Microsoft Server Speech Text to Speech Voice (cs-CZ, Jakub)","da-DK":"Microsoft Server Speech Text to Speech Voice (da-DK, HelleRUS)","de-AT":"Microsoft Server Speech Text to Speech Voice (de-AT, Michael)","de-CH":"Microsoft Server Speech Text to Speech Voice (de-CH, Karsten)","de-DE":"Microsoft Server Speech Text to Speech Voice (de-DE, HeddaRUS)","el-GR":"Microsoft Server Speech Text to Speech Voice (el-GR, Stefanos)","en-AU":"Microsoft Server Speech Text to Speech Voice (en-AU, HayleyRUS)","en-CA":"Microsoft Server Speech Text to Speech Voice (en-CA, HeatherRUS)","en-GB":"Microsoft Server Speech Text to Speech Voice (en-GB, HazelRUS)","en-IE":"Microsoft Server Speech Text to Speech Voice (en-IE, Sean)","en-IN":"Microsoft Server Speech Text to Speech Voice (en-IN, PriyaRUS)","en-US":"Microsoft Server Speech Text to Speech Voice (en-US, AriaRUS)","es-ES":"Microsoft Server Speech Text to Speech Voice (es-ES, HelenaRUS)","es-MX":"Microsoft Server Speech Text to Speech Voice (es-MX, HildaRUS)","fi-FI":"Microsoft Server Speech Text to Speech Voice (fi-FI, HeidiRUS)","fr-CA":"Microsoft Server Speech Text to Speech Voice (fr-CA, HarmonieRUS)","fr-CH":"Microsoft Server Speech Text to Speech Voice (fr-CH, Guillaume)","fr-FR":"Microsoft Server Speech Text to Speech Voice (fr-FR, HortenseRUS)","he-IL":"Microsoft Server Speech Text to Speech Voice (he-IL, Asaf)","hi-IN":"Microsoft Server Speech Text to Speech Voice (hi-IN, Kalpana)","hr-HR":"Microsoft Server Speech Text to Speech Voice (hr-HR, Matej)","hu-HU":"Microsoft Server Speech Text to Speech Voice (hu-HU, Szabolcs)","id-ID":"Microsoft Server Speech Text to Speech Voice (id-ID, Andika)","it-IT":"Microsoft Server Speech Text to Speech Voice (it-IT, LuciaRUS)","ja-JP":"Microsoft Server Speech Text to Speech Voice (ja-JP, HarukaRUS)","ko-KR":"Microsoft Server Speech Text to Speech Voice (ko-KR, HeamiRUS)","ms-MY":"Microsoft Server Speech Text to Speech Voice (ms-MY, Rizwan)","nb-NO":"Microsoft Server Speech Text to Speech Voice (nb-NO, HuldaRUS)","nl-NL":"Microsoft Server Speech Text to Speech Voice (nl-NL, HannaRUS)","pl-PL":"Microsoft Server Speech Text to Speech Voice (pl-PL, PaulinaRUS)","pt-BR":"Microsoft Server Speech Text to Speech Voice (pt-BR, HeloisaRUS)","pt-PT":"Microsoft Server Speech Text to Speech Voice (pt-PT, HeliaRUS)","ro-RO":"Microsoft Server Speech Text to Speech Voice (ro-RO, Andrei)","ru-RU":"Microsoft Server Speech Text to Speech Voice (ru-RU, EkaterinaRUS)","sk-SK":"Microsoft Server Speech Text to Speech Voice (sk-SK, Filip)","sl-SI":"Microsoft Server Speech Text to Speech Voice (sl-SI, Lado)","sv-SE":"Microsoft Server Speech Text to Speech Voice (sv-SE, HedvigRUS)","ta-IN":"Microsoft Server Speech Text to Speech Voice (ta-IN, Valluvar)","te-IN":"Microsoft Server Speech Text to Speech Voice (te-IN, Chitra)","th-TH":"Microsoft Server Speech Text to Speech Voice (th-TH, Pattara)","tr-TR":"Microsoft Server Speech Text to Speech Voice (tr-TR, SedaRUS)","vi-VN":"Microsoft Server Speech Text to Speech Voice (vi-VN, An)","zh-CN":"Microsoft Server Speech Text to Speech Voice (zh-CN, HuihuiRUS)","zh-HK":"Microsoft Server Speech Text to Speech Voice (zh-HK, TracyRUS)","zh-TW":"Microsoft Server Speech Text to Speech Voice (zh-TW, HanHanRUS)"}[t],r&&(n=`<voice name='${r}'>${n}</voice>`),n=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${t}'>${n}</speak>`,n}speakTextAsync(e,t,r,n){this.speakImpl(e,!1,t,r,n)}speakSsmlAsync(e,t,r,n){this.speakImpl(e,!0,t,r,n)}close(e,t){Y.throwIfDisposed(this.privDisposed),T(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}dispose(e){return Ao(this,void 0,void 0,(function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)}))}createSynthesizerConfig(e){return new Oo(e,this.privProperties)}createSynthesisAdapter(e,t,r,n){return new Ye(e,t,n,this,this.audioConfig)}implCommonSynthesizeSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);const n=this.createSynthesizerConfig(new w(new R(new O(e,t,r)))),i=this.privProperties.getProperty(a.SpeechServiceConnection_Key,void 0),o=i&&""!==i?new $t(i):new Yt((e=>{const t=this.privProperties.getProperty(a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}),(e=>{const t=this.privProperties.getProperty(a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}));this.privAdapter=this.createSynthesisAdapter(o,this.privConnectionFactory,this.audioConfig,n),this.privAdapter.audioOutputFormat=Me.fromSpeechSynthesisOutputFormat(ke[this.properties.getProperty(a.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,t,r,n,i){try{Y.throwIfDisposed(this.privDisposed);const s=o();let a;a=i instanceof nt?new Le(i):i instanceof je?i:void 0!==i?new ct(i):void 0,this.synthesisRequestQueue.enqueue(new xo(s,e,t,(e=>{if(this.privSynthesizing=!1,r)try{r(e)}catch(e){n&&n(e)}r=void 0,this.adapterSpeak().catch((()=>{}))}),(e=>{n&&n(e)}),a)),this.adapterSpeak().catch((()=>{}))}catch(e){if(n)if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e);this.dispose(!0).catch((()=>{}))}}adapterSpeak(){return Ao(this,void 0,void 0,(function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}))}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}class xo{constructor(e,t,r,n,i,o){this.requestId=e,this.text=t,this.isSSML=r,this.cb=n,this.err=i,this.dataStream=o}}!function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(Eo||(Eo={})),function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(To||(To={}));class ko{constructor(e,t=Eo.FivePoint,r=To.Phoneme,n=!1){Y.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new we,this.privProperties.setProperty(a.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(a.PronunciationAssessment_GradingSystem,Eo[t]),this.privProperties.setProperty(a.PronunciationAssessment_Granularity,To[r]),this.privProperties.setProperty(a.PronunciationAssessment_EnableMiscue,String(n))}static fromJSON(e){Y.throwIfNullOrUndefined(e,"json");const t=new ko("");return t.privProperties=new we,t.properties.setProperty(a.PronunciationAssessment_Json,e),t}toJSON(){return this.updateJson(),this.privProperties.getProperty(a.PronunciationAssessment_Params)}applyTo(e){this.updateJson(),e.internalData.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(a.PronunciationAssessment_Params))}get referenceText(){return this.properties.getProperty(a.PronunciationAssessment_ReferenceText)}set referenceText(e){Y.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(a.PronunciationAssessment_ReferenceText,e)}get properties(){return this.privProperties}updateJson(){const e=this.privProperties.getProperty(a.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),r=this.privProperties.getProperty(a.PronunciationAssessment_ReferenceText);r&&(t.referenceText=r);const n=this.privProperties.getProperty(a.PronunciationAssessment_GradingSystem);n&&(t.gradingSystem=n);const i=this.privProperties.getProperty(a.PronunciationAssessment_Granularity);i&&(t.granularity=i),t.dimension="Comprehensive";const o=this.privProperties.getProperty(a.PronunciationAssessment_EnableMiscue);"true"===o?t.enableMiscue=!0:"false"===o&&(t.enableMiscue=!1),this.privProperties.setProperty(a.PronunciationAssessment_Params,JSON.stringify(t))}}class Mo{constructor(e){const t=JSON.parse(e);Y.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}static fromResult(e){Y.throwIfNullOrUndefined(e,"result");const t=e.properties.getProperty(a.SpeechServiceResponse_JsonResult);return Y.throwIfNullOrUndefined(t,"json"),new Mo(t)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment.FluencyScore}}S.instance.attachListener(new class{constructor(e=s.Warning){this.onEvent=e=>{if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);switch(e.eventType){case s.Debug:console.debug(t);break;case s.Info:console.info(t);break;case s.Warning:console.warn(t);break;case s.Error:console.error(t);break;default:console.log(t)}}},this.toString=e=>{const t=[`${e.EventTime}`,`${e.Name}`];for(const r in e)if(r&&e.hasOwnProperty(r)&&"eventTime"!==r&&"eventType"!==r&&"eventId"!==r&&"name"!==r&&"constructor"!==r){const n=e[r];let i="<NULL>";null!=n&&(i="number"==typeof n||"string"==typeof n?n.toString():JSON.stringify(n)),t.push(`${r}: ${i}`)}return t.join(" | ")},this.privLogLevelFilter=e}})},14616:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(73442);r(51564).Events.instance.attachListener(new o.ConsoleLoggingListener),i(r(36514),t)},54784:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&i(t,e,r);return o(t,e),t},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CertCheckAgent=void 0;var p=s(r(84270)),h=s(r(84564)),l=s(r(47400)),v=r(51564),d=u(r(76916)),f=u(r(43740)),g=u(r(42104)),y=s(r(14151)),m=r(45770),S=function(){function e(t){t&&(this.privProxyInfo=t),e.privDiskCache||(e.privDiskCache=new f.default("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:"undefined"!=typeof process&&process.env.SPEECH_OCSP_CACHE_ROOT?process.env.SPEECH_OCSP_CACHE_ROOT:void 0}))}return e.forceReinitDiskCache=function(){e.privDiskCache=void 0,e.privMemCache={}},e.prototype.GetAgent=function(e){var t=new d.default.Agent(this.CreateConnection);return void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0&&(t.privProxyInfo=this.privProxyInfo),t},e.GetProxyAgent=function(e){var t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer(e.UserName+":"+(void 0===e.Password)?"":e.Password).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new g.default(t)},e.OCSPCheck=function(t,r){return a(this,void 0,void 0,(function(){var n,i,o,s,u,p=this;return c(this,(function(h){switch(h.label){case 0:return o=!1,[4,t];case 1:return(s=h.sent()).cork(),u=s,[2,new Promise((function(t,h){s.on("OCSPResponse",(function(e){e&&(p.onEvent(new v.OCSPStapleReceivedEvent),i=e)})),s.on("error",(function(e){o||(o=!0,s.destroy(),h(e))})),u.on("secure",(function(){return a(p,void 0,void 0,(function(){var a,p,v,d,f;return c(this,(function(c){switch(c.label){case 0:a=u.getPeerCertificate(!0),c.label=1;case 1:return c.trys.push([1,6,,7]),[4,this.GetIssuer(a)];case 2:return p=c.sent(),n=l.request.generate(a.raw,p.raw),v=n.id.toString("hex"),i?[3,4]:[4,e.GetResponseFromCache(v,n,r)];case 3:d=c.sent(),i=d,c.label=4;case 4:return[4,this.VerifyOCSPResponse(i,n,r)];case 5:return c.sent(),s.uncork(),o=!0,t(s),[3,7];case 6:return f=c.sent(),s.destroy(),o=!0,h(f),[3,7];case 7:return[2]}}))}))}))}))]}}))}))},e.GetIssuer=function(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise((function(t,r){new l.Agent({}).fetchIssuer(e,null,(function(e,n){e?r(e):t(n)}))}))},e.GetResponseFromCache=function(t,r,n){return a(this,void 0,void 0,(function(){var i,o,s,a,u,p,h,d=this;return c(this,(function(c){switch(c.label){case 0:if((i=e.privMemCache[t])&&this.onEvent(new v.OCSPMemoryCacheHitEvent(t)),i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,e.privDiskCache.get(t)];case 2:return(o=c.sent()).isCached&&(e.onEvent(new v.OCSPDiskCacheHitEvent(t)),e.StoreMemoryCacheEntry(t,o.value),i=o.value),[3,4];case 3:return c.sent(),i=null,[3,4];case 4:if(!i)return[2,i];try{if(s=l.utils.parseResponse(i),(a=s.value.tbsResponseData).responses.length<1)return this.onEvent(new v.OCSPCacheFetchErrorEvent(t,"Not enough data in cached response")),[2];u=a.responses[0].thisUpdate,(p=a.responses[0].nextUpdate)<Date.now()+this.testTimeOffset-6e4?(this.onEvent(new v.OCSPCacheEntryExpiredEvent(t,p)),i=null):(h=Math.min(864e5,(p-u)/2),p-(Date.now()+this.testTimeOffset)<h?(this.onEvent(new v.OCSPCacheEntryNeedsRefreshEvent(t,u,p)),this.UpdateCache(r,n).catch((function(e){d.onEvent(new m.OCSPCacheUpdateErrorEvent(t,e.toString()))}))):this.onEvent(new v.OCSPCacheHitEvent(t,u,p)))}catch(e){this.onEvent(new v.OCSPCacheFetchErrorEvent(t,e)),i=null}return i||this.onEvent(new v.OCSPCacheMissEvent(t)),[2,i]}}))}))},e.VerifyOCSPResponse=function(t,r,n){return a(this,void 0,void 0,(function(){var i,o=this;return c(this,(function(s){switch(s.label){case 0:return i=t,r.certID.toString("hex"),i?[3,2]:[4,e.GetOCSPResponse(r,n)];case 1:i=s.sent(),s.label=2;case 2:return[2,new Promise((function(s,a){l.verify({request:r,response:i},(function(c,u){c?(e.onEvent(new v.OCSPVerificationFailedEvent(r.id.toString("hex"),c)),t?o.VerifyOCSPResponse(null,r,n).then((function(){s()}),(function(e){a(e)})):a(c)):(t||e.StoreCacheEntry(r.id.toString("hex"),i),s())}))}))]}}))}))},e.UpdateCache=function(e,t){return a(this,void 0,void 0,(function(){var r,n;return c(this,(function(i){switch(i.label){case 0:return r=e.id.toString("hex"),this.onEvent(new v.OCSPCacheUpdateNeededEvent(r)),[4,this.GetOCSPResponse(e,t)];case 1:return n=i.sent(),this.StoreCacheEntry(r,n),this.onEvent(new v.OCSPCacheUpdatehCompleteEvent(e.id.toString("hex"))),[2]}}))}))},e.StoreCacheEntry=function(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)},e.StoreMemoryCacheEntry=function(e,t){this.privMemCache[e]=t,this.onEvent(new v.OCSPMemoryCacheStoreEvent(e))},e.StoreDiskCacheEntry=function(e,t){var r=this;this.privDiskCache.set(e,t).then((function(){r.onEvent(new v.OCSPDiskCacheStoreEvent(e))}))},e.GetOCSPResponse=function(t,r){var i=this,o={};if(r){var s=e.GetProxyAgent(r);o.agent=s}return new Promise((function(e,r){l.utils.getAuthorityInfo(t.cert,"1.3.6.1.5.5.7.48.1",(function(s,a){if(s)r(s);else{var c=h.default(a);c.path=c.pathname,o=n(n({},o),c),l.utils.getResponse(o,t.data,(function(n,o){n?r(n):(i.onEvent(new v.OCSPResponseRetrievedEvent(t.certID.toString("hex"))),e(o))}))}}))}))},e.prototype.CreateConnection=function(t,r){var i,o="undefined"!=typeof process&&"0"!==process.env.NODE_TLS_REJECT_UNAUTHORIZED&&"0"!==process.env.SPEECH_CONDUCT_OCSP_CHECK&&r.secureEndpoint;if(r=n(n({},r),{requestOCSP:!e.forceDisableOCSPStapling,servername:r.host}),this.privProxyInfo){var s=e.GetProxyAgent(this.privProxyInfo);i=new Promise((function(e,n){s.callback(t,r,(function(t,r){t?n(t):e(r)}))}))}else i=r.secureEndpoint?Promise.resolve(p.connect(r)):Promise.resolve(y.connect(r));return o?e.OCSPCheck(i,this.privProxyInfo):i},e.testTimeOffset=0,e.forceDisableOCSPStapling=!1,e.privMemCache={},e.onEvent=function(e){v.Events.instance.onEvent(e)},e}();t.CertCheckAgent=S},99826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLoggingListener=void 0;var n=r(51564);t.ConsoleLoggingListener=function(e){var t=this;void 0===e&&(e=n.EventType.Warning),this.onEvent=function(e){if(e.eventType>=t.privLogLevelFilter){var r=t.toString(e);switch(e.eventType){case n.EventType.Debug:console.debug(r);break;case n.EventType.Info:console.info(r);break;case n.EventType.Warning:console.warn(r);break;case n.EventType.Error:console.error(r);break;default:console.log(r)}}},this.toString=function(e){var t=[""+e.EventTime,""+e.Name];for(var r in e)if(r&&e.hasOwnProperty(r)&&"eventTime"!==r&&"eventType"!==r&&"eventId"!==r&&"name"!==r&&"constructor"!==r){var n=e[r],i="<NULL>";null!=n&&(i="number"==typeof n||"string"==typeof n?n.toString():JSON.stringify(n)),t.push(r+": "+i)}return t.join(" | ")},this.privLogLevelFilter=e}},73442:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(99826),t),i(r(44043),t),i(r(19192),t),i(r(44801),t),i(r(49615),t),i(r(71974),t),i(r(36935),t),i(r(68369),t),i(r(71681),t),i(r(58580),t),i(r(82445),t)},44801:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileAudioSource=void 0;var o=r(80194),s=r(51564),a=r(38022),c=function(){function e(e,t,r){var o=this;this.privStreams={},this.privHeaderEnd=44,this.turnOn=function(){if(o.privFilename.lastIndexOf(".wav")!==o.privFilename.length-4){var e=o.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return o.onEvent(new s.AudioSourceErrorEvent(e,"")),Promise.reject(e)}o.onEvent(new s.AudioSourceInitializingEvent(o.privId)),o.onEvent(new s.AudioSourceReadyEvent(o.privId))},this.id=function(){return o.privId},this.attach=function(e){return n(o,void 0,void 0,(function(){var t,r=this;return i(this,(function(o){switch(o.label){case 0:return this.onEvent(new s.AudioStreamNodeAttachingEvent(this.privId,e)),[4,this.upload(e)];case 1:return t=o.sent(),this.onEvent(new s.AudioStreamNodeAttachedEvent(this.privId,e)),[2,Promise.resolve({detach:function(){return n(r,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return t.readEnded(),delete this.privStreams[e],this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,e)),[4,this.turnOff()];case 1:return r.sent(),[2]}}))}))},id:function(){return e},read:function(){return t.read()}})]}}))}))},this.detach=function(e){e&&o.privStreams[e]&&(o.privStreams[e].close(),delete o.privStreams[e],o.onEvent(new s.AudioStreamNodeDetachedEvent(o.privId,e)))},this.turnOff=function(){for(var e in o.privStreams)if(e){var t=o.privStreams[e];t&&!t.isClosed&&t.close()}return o.onEvent(new s.AudioSourceOffEvent(o.privId)),Promise.resolve()},this.onEvent=function(e){o.privEvents.onEvent(e),s.Events.instance.onEvent(e)},this.privId=r||s.createNoDashGuid(),this.privEvents=new s.EventSource,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}return Object.defineProperty(e.prototype,"format",{get:function(){return this.privAudioFormatPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blob",{get:function(){return Promise.resolve(this.privSource)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceInfo",{get:function(){return this.privAudioFormatPromise.then((function(e){return Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:o.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:o.type.File})}))},enumerable:!1,configurable:!0}),e.prototype.readHeader=function(){var e=this,t=this.privSource.slice(0,512),r=new s.Deferred,n=function(t){var n=new DataView(t),i=function(e){return String.fromCharCode(n.getUint8(e),n.getUint8(e+1),n.getUint8(e+2),n.getUint8(e+3))};if("RIFF"===i(0))if("WAVE"===i(8)&&"fmt "===i(12)){for(var o=n.getInt32(16,!0),s=n.getUint16(22,!0),c=n.getUint32(24,!0),u=n.getUint16(34,!0),p=36+Math.max(o-16,0);"data"!==i(p);p+=2)if(p>504)return void r.reject("Invalid WAV header in file, data block was not found");e.privHeaderEnd=p+8,r.resolve(a.AudioStreamFormat.getWaveFormatPCM(c,u,s))}else r.reject("Invalid WAV header in file, WAVEfmt was not found");else r.reject("Invalid WAV header in file, RIFF was not found")};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&t instanceof Blob){var i=new FileReader;i.onload=function(e){var t=e.target.result;n(t)},i.readAsArrayBuffer(t)}else{var o=t;n(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength))}return r.promise},e.prototype.upload=function(e){return n(this,void 0,void 0,(function(){var t,r,n,o,a,c,u,p,h=this;return i(this,(function(i){switch(i.label){case 0:t=function(t){var r="Error occurred while processing '"+h.privFilename+"'. "+t;throw h.onEvent(new s.AudioStreamNodeErrorEvent(h.privId,e,r)),new Error(r)},i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this.turnOn()];case 2:return i.sent(),[4,this.privAudioFormatPromise];case 3:return r=i.sent(),n=new s.ChunkedArrayBufferStream(r.avgBytesPerSec/10,e),this.privStreams[e]=n,o=this.privSource.slice(this.privHeaderEnd),a=function(e){n.isClosed||(n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),n.close())},"undefined"!=typeof window&&"undefined"!=typeof Blob&&o instanceof Blob?((c=new FileReader).onerror=function(e){t(e.toString())},c.onload=function(e){var t=e.target.result;a(t)},c.readAsArrayBuffer(o)):a((u=o).buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)),[2,n];case 4:return p=i.sent(),t(p),[3,5];case 5:return[2]}}))}))},e}();t.FileAudioSource=c},44043:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},19192:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;var o=r(80194),s=r(51564),a=r(38022);t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";var c=function(){function e(t,r,o,c){var u=this;this.privRecorder=t,this.deviceId=r,this.privStreams={},this.turnOn=function(){if(u.privInitializeDeferral)return u.privInitializeDeferral.promise;u.privInitializeDeferral=new s.Deferred;try{u.createAudioContext()}catch(t){if(t instanceof Error){var e=t;u.privInitializeDeferral.reject(e.name+": "+e.message)}else u.privInitializeDeferral.reject(t);return u.privInitializeDeferral.promise}var t=window.navigator,r=t.getUserMedia||t.webkitGetUserMedia||t.mozGetUserMedia||t.msGetUserMedia;if(t.mediaDevices&&(r=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r).catch(n)}),r){var n=function(){u.onEvent(new s.AudioSourceInitializingEvent(u.privId)),u.privMediaStream&&u.privMediaStream.active?(u.onEvent(new s.AudioSourceReadyEvent(u.privId)),u.privInitializeDeferral.resolve()):r({audio:!u.deviceId||{deviceId:u.deviceId},video:!1},(function(e){u.privMediaStream=e,u.onEvent(new s.AudioSourceReadyEvent(u.privId)),u.privInitializeDeferral.resolve()}),(function(e){var t="Error occurred during microphone initialization: "+e;u.privInitializeDeferral.reject(t),u.onEvent(new s.AudioSourceErrorEvent(u.privId,t))}))};"suspended"===u.privContext.state?u.privContext.resume().then(n).catch((function(e){u.privInitializeDeferral.reject("Failed to initialize audio context: "+e)})):n()}else{var i="Browser does not support getUserMedia.";u.privInitializeDeferral.reject(i),u.onEvent(new s.AudioSourceErrorEvent(i,""))}return u.privInitializeDeferral.promise},this.id=function(){return u.privId},this.attach=function(e){return u.onEvent(new s.AudioStreamNodeAttachingEvent(u.privId,e)),u.listen(e).then((function(t){return u.onEvent(new s.AudioStreamNodeAttachedEvent(u.privId,e)),{detach:function(){return n(u,void 0,void 0,(function(){return i(this,(function(r){return t.readEnded(),delete this.privStreams[e],this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,e)),[2,this.turnOff()]}))}))},id:function(){return e},read:function(){return t.read()}}}))},this.detach=function(e){e&&u.privStreams[e]&&(u.privStreams[e].close(),delete u.privStreams[e],u.onEvent(new s.AudioStreamNodeDetachedEvent(u.privId,e)))},this.listen=function(e){return n(u,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.turnOn()];case 1:r.sent(),t=new s.ChunkedArrayBufferStream(this.privOutputChunkSize,e),this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new s.AudioStreamNodeErrorEvent(this.privId,e,t)),t}return[2,t]}}))}))},this.onEvent=function(e){u.privEvents.onEvent(e),s.Events.instance.onEvent(e)},this.createAudioContext=function(){u.privContext||(u.privContext=a.AudioStreamFormatImpl.getAudioContext(e.AUDIOFORMAT.samplesPerSec))},this.privOutputChunkSize=e.AUDIOFORMAT.avgBytesPerSec/10,this.privId=o||s.createNoDashGuid(),this.privEvents=new s.EventSource,this.privMediaStream=c||null}return Object.defineProperty(e.prototype,"format",{get:function(){return Promise.resolve(e.AUDIOFORMAT)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blob",{get:function(){return Promise.reject("Not implemented for Mic input")},enumerable:!1,configurable:!0}),e.prototype.turnOff=function(){return n(this,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:for(e in this.privStreams)e&&(t=this.privStreams[e])&&t.close();return this.onEvent(new s.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral?[4,this.privInitializeDeferral]:[3,2];case 1:r.sent(),this.privInitializeDeferral=null,r.label=2;case 2:return[4,this.destroyAudioContext()];case 3:return r.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceInfo",{get:function(){return this.getMicrophoneLabel().then((function(t){return{bitspersample:e.AUDIOFORMAT.bitsPerSample,channelcount:e.AUDIOFORMAT.channels,connectivity:o.connectivity.Unknown,manufacturer:"Speech SDK",model:t,samplerate:e.AUDIOFORMAT.samplesPerSec,type:o.type.Microphones}}))},enumerable:!1,configurable:!0}),e.prototype.setProperty=function(e,r){if(e!==t.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(r)},e.prototype.getMicrophoneLabel=function(){var e=this,t="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(t);this.privMicrophoneLabel=t;var r=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===r)return Promise.resolve(this.privMicrophoneLabel);var n=new s.Deferred;return navigator.mediaDevices.enumerateDevices().then((function(t){for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.deviceId===r){e.privMicrophoneLabel=s.label;break}}n.resolve(e.privMicrophoneLabel)}),(function(){return n.resolve(e.privMicrophoneLabel)})),n.promise},e.prototype.destroyAudioContext=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return this.privContext?(this.privRecorder.releaseMediaResources(this.privContext),e=!1,"close"in this.privContext&&(e=!0),e?[4,this.privContext.close()]:[3,2]):[2];case 1:return t.sent(),this.privContext=null,[3,4];case 2:return null===this.privContext||"running"!==this.privContext.state?[3,4]:[4,this.privContext.suspend()];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},e.AUDIOFORMAT=a.AudioStreamFormat.getDefaultInputFormat(),e}();t.MicAudioSource=c},49615:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PcmRecorder=void 0;var n=r(51564),i=function(){function e(){var e=this;this.record=function(t,r,i){var o=function(){var e=0;try{return t.createScriptProcessor(e,1,1)}catch(n){e=2048;for(var r=t.sampleRate;e<16384&&r>=32e3;)e<<=1,r>>=1;return t.createScriptProcessor(e,1,1)}}(),s=new n.RiffPcmEncoder(t.sampleRate,16e3);o.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);if(i&&!i.isClosed){var r=s.encode(t);r&&i.writeStreamChunk({buffer:r,isEnd:!1,timeReceived:Date.now()})}};var a=t.createMediaStreamSource(r);e.privSpeechProcessorScript&&t.audioWorklet?t.audioWorklet.addModule(e.privSpeechProcessorScript).then((function(){var n=new AudioWorkletNode(t,"speech-processor");n.port.onmessage=function(e){var t=e.data;if(i&&!i.isClosed){var r=s.encode(t);r&&i.writeStreamChunk({buffer:r,isEnd:!1,timeReceived:Date.now()})}},a.connect(n),n.connect(t.destination),e.privMediaResources={scriptProcessorNode:n,source:a,stream:r}})).catch((function(){a.connect(o),o.connect(t.destination),e.privMediaResources={scriptProcessorNode:o,source:a,stream:r}})):(a.connect(o),o.connect(t.destination),e.privMediaResources={scriptProcessorNode:o,source:a,stream:r})},this.releaseMediaResources=function(t){e.privMediaResources&&(e.privMediaResources.scriptProcessorNode&&(e.privMediaResources.scriptProcessorNode.disconnect(t.destination),e.privMediaResources.scriptProcessorNode=null),e.privMediaResources.source&&(e.privMediaResources.source.disconnect(),e.privMediaResources.stream.getTracks().forEach((function(e){return e.stop()})),e.privMediaResources.source=null))}}return e.prototype.setWorkletUrl=function(e){this.privSpeechProcessorScript=e},e}();t.PcmRecorder=i},71681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyInfo=void 0;var n=r(36514),i=function(){function e(e,t,r,n){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=r,this.privProxyPassword=n}return e.fromParameters=function(t){return new e(t.getProperty(n.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(t.getProperty(n.PropertyId.SpeechServiceConnection_ProxyPort),10),t.getProperty(n.PropertyId.SpeechServiceConnection_ProxyUserName),t.getProperty(n.PropertyId.SpeechServiceConnection_ProxyPassword))},e.fromRecognizerConfig=function(e){return this.fromParameters(e.parameters)},Object.defineProperty(e.prototype,"HostName",{get:function(){return this.privProxyHostName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Port",{get:function(){return this.privProxyPort},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UserName",{get:function(){return this.privProxyUserName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Password",{get:function(){return this.privProxyPassword},enumerable:!1,configurable:!0}),e}();t.ProxyInfo=i},68369:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayableAudioNode=void 0;var r=function(){function e(e,t){var r=this;this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.id=function(){return r.privAudioNode.id()},this.privAudioNode=e,this.privBytesPerSecond=t}return e.prototype.read=function(){var e=this;if(this.privReplay&&0!==this.privBuffers.length){var t=this.privReplayOffset-this.privBufferStartOffset,r=Math.round(t*this.privBytesPerSecond*1e-7);0!=r%2&&r++;for(var i=0;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;if(i<this.privBuffers.length){var o=this.privBuffers[i].chunk.buffer.slice(r);return this.privReplayOffset+=o.byteLength/this.privBytesPerSecond*1e7,i===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:o,isEnd:!1,timeReceived:this.privBuffers[i].chunk.timeReceived})}}return this.privAudioNode.read().then((function(t){return t&&t.buffer&&(e.privBuffers.push(new n(t,e.privBufferSerial++,e.privBufferedBytes)),e.privBufferedBytes+=t.buffer.byteLength),t}))},e.prototype.detach=function(){return this.privBuffers=void 0,this.privAudioNode.detach()},e.prototype.replay=function(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)},e.prototype.shrinkBuffers=function(e){if(void 0!==this.privBuffers&&0!==this.privBuffers.length){this.privLastShrinkOffset=e;for(var t=e-this.privBufferStartOffset,r=Math.round(t*this.privBytesPerSecond*1e-7),n=0;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(n)}},e.prototype.findTimeAtOffset=function(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(var t=0,r=this.privBuffers;t<r.length;t++){var n=r[t],i=n.byteOffset/this.privBytesPerSecond*1e7,o=i+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=i&&e<=o)return n.chunk.timeReceived}return 0},e}();t.ReplayableAudioNode=r;var n=function(e,t,r){this.chunk=e,this.serial=t,this.byteOffset=r}},82445:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestConfigBase=void 0;var r=function(){function e(){}return Object.defineProperty(e,"requestOptions",{get:function(){return e.privDefaultRequestOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"configParams",{get:function(){return e.privDefaultParams},enumerable:!1,configurable:!0}),Object.defineProperty(e,"restErrors",{get:function(){return e.privRestErrors},enumerable:!1,configurable:!0}),e.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},e.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},e.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},e}();t.RestConfigBase=r},58580:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;var s,a=r(51564),c=o(r(78549));!function(e){e.Get="get",e.Post="post",e.Delete="delete",e.File="file"}(s=t.RestRequestType||(t.RestRequestType={}));var u=function(){function e(e,t){if(!e)throw new a.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privTimeout=e.timeout,this.privIgnoreCache=e.ignoreCache}return e.prototype.setHeaders=function(e,t){this.privHeaders[e]=t},e.prototype.request=function(e,t,r,n,i){var o=this;void 0===r&&(r={}),void 0===n&&(n=null),void 0===i&&(i=null);var u,p=new a.Deferred;u="undefined"==typeof XMLHttpRequest?new c.XMLHttpRequest:new XMLHttpRequest;var h=e===s.File?"post":e;return u.open(h,this.withQuery(t,r),!0),this.privHeaders&&Object.keys(this.privHeaders).forEach((function(e){return u.setRequestHeader(e,o.privHeaders[e])})),this.privIgnoreCache&&u.setRequestHeader("Cache-Control","no-cache"),u.timeout=this.privTimeout,u.onload=function(){p.resolve(o.parseXHRResult(u))},u.onerror=function(){p.resolve(o.errorResponse(u,"Failed to make request."))},u.ontimeout=function(){p.resolve(o.errorResponse(u,"Request took longer than expected."))},e===s.File&&i?(u.setRequestHeader("Content-Type","multipart/form-data"),u.send(i)):e===s.Post&&n?(u.setRequestHeader("Content-Type","application/json"),u.send(JSON.stringify(n))):u.send(),p.promise},e.prototype.parseXHRResult=function(e){return{data:e.responseText,headers:e.getAllResponseHeaders(),json:function(){return JSON.parse(e.responseText)},ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText}},e.prototype.errorResponse=function(e,t){return void 0===t&&(t=null),{data:t||e.statusText,headers:e.getAllResponseHeaders(),json:function(){return JSON.parse(t||'"'+e.statusText+'"')},ok:!1,status:e.status,statusText:e.statusText}},e.prototype.withQuery=function(e,t){void 0===t&&(t={});var r=this.queryParams(t);return r?e+(-1===e.indexOf("?")?"?":"&")+r:e},e.prototype.queryParams=function(e){return void 0===e&&(e={}),Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},e}();t.RestMessageAdapter=u},71974:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketConnection=void 0;var o=r(51564),s=r(36935),a=function(){function e(e,t,r,n,i,a,c){var u=this;if(void 0===a&&(a=!1),this.privIsDisposed=!1,this.isDisposed=function(){return u.privIsDisposed},this.state=function(){return u.privConnectionMessageAdapter.state},this.open=function(){return u.privConnectionMessageAdapter.open()},this.send=function(e){return u.privConnectionMessageAdapter.send(e)},this.read=function(){return u.privConnectionMessageAdapter.read()},!e)throw new o.ArgumentNullError("uri");if(!n)throw new o.ArgumentNullError("messageFormatter");this.privMessageFormatter=n;var p="",h=0;if(t)for(var l in t)l&&(p+=0===h&&-1===e.indexOf("?")?"?":"&",p+=l+"="+encodeURIComponent(t[l]),h++);if(r)for(var v in r)v&&(p+=0===h&&-1===e.indexOf("?")?"?":"&",p+=v+"="+encodeURIComponent(r[v]),h++);this.privUri=e+p,this.privId=c||o.createNoDashGuid(),this.privConnectionMessageAdapter=new s.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,i,r,a)}return e.prototype.dispose=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.privIsDisposed=!0,this.privConnectionMessageAdapter?[4,this.privConnectionMessageAdapter.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this.privConnectionMessageAdapter.events},enumerable:!1,configurable:!0}),e}();t.WebsocketConnection=a},36935:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageAdapter=void 0;var s=r(97923),a=r(51564),c=o(r(22914)),u=r(54784),p=function(){function e(t,r,n,i,o,p){var h=this;if(this.open=function(){if(h.privConnectionState===a.ConnectionState.Disconnected)return Promise.reject("Cannot open a connection that is in "+h.privConnectionState+" state");if(h.privConnectionEstablishDeferral)return h.privConnectionEstablishDeferral.promise;h.privConnectionEstablishDeferral=new a.Deferred,h.privCertificateValidatedDeferral=new a.Deferred,h.privConnectionState=a.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||e.forceNpmWebSocket){var t={headers:h.privHeaders,perMessageDeflate:h.privEnableCompression};h.privCertificateValidatedDeferral.resolve();var r=new u.CertCheckAgent(h.proxyInfo);t.agent=r.GetAgent(),h.privWebsocketClient=new c.default(h.privUri,t)}else h.privCertificateValidatedDeferral.resolve(),h.privWebsocketClient=new WebSocket(h.privUri);h.privWebsocketClient.binaryType="arraybuffer",h.privReceivingMessageQueue=new a.Queue,h.privDisconnectDeferral=new a.Deferred,h.privSendMessageQueue=new a.Queue,h.processSendQueue().catch((function(e){a.Events.instance.onEvent(new a.BackgroundEvent(e))}))}catch(e){return h.privConnectionEstablishDeferral.resolve(new a.ConnectionOpenResponse(500,e)),h.privConnectionEstablishDeferral.promise}return h.onEvent(new a.ConnectionStartEvent(h.privConnectionId,h.privUri)),h.privWebsocketClient.onopen=function(e){h.privCertificateValidatedDeferral.promise.then((function(){h.privConnectionState=a.ConnectionState.Connected,h.onEvent(new a.ConnectionEstablishedEvent(h.privConnectionId)),h.privConnectionEstablishDeferral.resolve(new a.ConnectionOpenResponse(200,""))}),(function(e){h.privConnectionEstablishDeferral.reject(e)}))},h.privWebsocketClient.onerror=function(e){h.onEvent(new a.ConnectionErrorEvent(h.privConnectionId,e.message,e.type)),h.privLastErrorReceived=e.message},h.privWebsocketClient.onclose=function(e){h.privConnectionState===a.ConnectionState.Connecting?(h.privConnectionState=a.ConnectionState.Disconnected,h.privConnectionEstablishDeferral.resolve(new a.ConnectionOpenResponse(e.code,e.reason+" "+h.privLastErrorReceived))):(h.privConnectionState=a.ConnectionState.Disconnected,h.privWebsocketClient=null,h.onEvent(new a.ConnectionClosedEvent(h.privConnectionId,e.code,e.reason))),h.onClose(e.code,e.reason).catch((function(e){a.Events.instance.onEvent(new a.BackgroundEvent(e))}))},h.privWebsocketClient.onmessage=function(e){var t=(new Date).toISOString();if(h.privConnectionState===a.ConnectionState.Connected){var r=new a.Deferred;if(h.privReceivingMessageQueue.enqueueFromPromise(r.promise),e.data instanceof ArrayBuffer){var n=new a.RawWebsocketMessage(a.MessageType.Binary,e.data);h.privMessageFormatter.toConnectionMessage(n).then((function(e){h.onEvent(new a.ConnectionMessageReceivedEvent(h.privConnectionId,t,e)),r.resolve(e)}),(function(e){r.reject("Invalid binary message format. Error: "+e)}))}else n=new a.RawWebsocketMessage(a.MessageType.Text,e.data),h.privMessageFormatter.toConnectionMessage(n).then((function(e){h.onEvent(new a.ConnectionMessageReceivedEvent(h.privConnectionId,t,e)),r.resolve(e)}),(function(e){r.reject("Invalid text message format. Error: "+e)}))}},h.privConnectionEstablishDeferral.promise},this.send=function(e){if(h.privConnectionState!==a.ConnectionState.Connected)return Promise.reject("Cannot send on connection that is in "+a.ConnectionState[h.privConnectionState]+" state");var t=new a.Deferred,r=new a.Deferred;return h.privSendMessageQueue.enqueueFromPromise(r.promise),h.privMessageFormatter.fromConnectionMessage(e).then((function(n){r.resolve({Message:e,RawWebsocketMessage:n,sendStatusDeferral:t})}),(function(e){r.reject("Error formatting the message. "+e)})),t.promise},this.read=function(){return h.privConnectionState!==a.ConnectionState.Connected?Promise.reject("Cannot read on connection that is in "+h.privConnectionState+" state"):h.privReceivingMessageQueue.dequeue()},this.close=function(e){return h.privWebsocketClient?(h.privConnectionState!==a.ConnectionState.Disconnected&&h.privWebsocketClient.close(1e3,e||"Normal closure by client"),h.privDisconnectDeferral.promise):Promise.resolve()},this.sendRawMessage=function(e){try{return e?(h.onEvent(new a.ConnectionMessageSentEvent(h.privConnectionId,(new Date).toISOString(),e.Message)),h.isWebsocketOpen?(h.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+h.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject("websocket send error: "+e)}},this.onEvent=function(e){h.privConnectionEvents.onEvent(e),a.Events.instance.onEvent(e)},!t)throw new a.ArgumentNullError("uri");if(!n)throw new a.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new a.EventSource,this.privConnectionId=r,this.privMessageFormatter=n,this.privConnectionState=a.ConnectionState.None,this.privUri=t,this.privHeaders=o,this.privEnableCompression=p,this.privHeaders[s.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}return Object.defineProperty(e.prototype,"state",{get:function(){return this.privConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),e.prototype.onClose=function(e,t){return n(this,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return r="Connection closed. "+e+": "+t,this.privConnectionState=a.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),[4,this.privReceivingMessageQueue.drainAndDispose((function(e){}),r)];case 1:return n.sent(),[4,this.privSendMessageQueue.drainAndDispose((function(e){e.sendStatusDeferral.reject(r)}),r)];case 2:return n.sent(),[2]}}))}))},e.prototype.processSendQueue=function(){return n(this,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:return[4,this.privSendMessageQueue.dequeue()];case 1:if(!(e=r.sent()))return[2];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.sendRawMessage(e)];case 3:return r.sent(),e.sendStatusDeferral.resolve(),[3,5];case 4:return t=r.sent(),e.sendStatusDeferral.reject(t),[3,5];case 5:return[3,0];case 6:return[2]}}))}))},Object.defineProperty(e.prototype,"isWebsocketOpen",{get:function(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN},enumerable:!1,configurable:!0}),e.forceNpmWebSocket=!1,e}();t.WebsocketMessageAdapter=p},58328:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddedLmIntent=void 0;t.AddedLmIntent=function(e,t){this.modelImpl=e,this.intentName=t}},55023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AgentConfig=void 0;var r=function(){function e(){}return e.prototype.toJsonString=function(){return JSON.stringify(this.iPrivConfig)},e.prototype.get=function(){return this.iPrivConfig},e.prototype.set=function(e){this.iPrivConfig=e},e}();t.AgentConfig=r},49097:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveSubscriptionKeyAuthentication=void 0;var n=r(51564),i=r(97923),o=r(47923);t.CognitiveSubscriptionKeyAuthentication=function(e){var t=this;if(this.fetch=function(e){return Promise.resolve(t.privAuthInfo)},this.fetchOnExpiry=function(e){return Promise.resolve(t.privAuthInfo)},!e)throw new n.ArgumentNullError("subscriptionKey");this.privAuthInfo=new o.AuthInfo(i.HeaderNames.AuthKey,e)}},11639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveTokenAuthentication=void 0;var n=r(51564),i=r(47923),o="Authorization";t.CognitiveTokenAuthentication=function(e,t){var r=this;if(this.fetch=function(e){return r.privFetchCallback(e).then((function(e){return new i.AuthInfo(o,e)}))},this.fetchOnExpiry=function(e){return r.privFetchOnExpiryCallback(e).then((function(e){return new i.AuthInfo(o,e)}))},!e)throw new n.ArgumentNullError("fetchCallback");if(!t)throw new n.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}},82753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFactoryBase=void 0;var n=r(80194),i=r(36514),o=r(51652),s=function(){function e(){}return e.prototype.setCommonUrlParams=function(e,t,r){this.setUrlParameter(i.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging,e,t,r),this.setUrlParameter(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,o.QueryParameterNames.EnableWordLevelTimestamps,e,t,r),this.setUrlParameter(i.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity,e,t,r),this.setUrlParameter(i.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs,e,t,r),this.setUrlParameter(i.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs,e,t,r),this.setUrlParameter(i.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold,e,t,r);var s=JSON.parse(e.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach((function(e,r,n){t[e]=s[e]}))},e.prototype.setUrlParameter=function(e,t,r,n,i){var o=r.parameters.getProperty(e,void 0);!o||i&&-1!==i.search(t)||(n[t]=o.toLocaleLowerCase())},e}();t.ConnectionFactoryBase=s},72174:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DialogConnectionFactory=void 0;var o=r(73442),s=r(80194),a=r(36514),c=r(82753),u=r(80194),p=r(97923),h=r(51652),l=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.create=function(e,n,i){var c=e.parameters.getProperty(a.PropertyId.Conversation_ApplicationId,""),l=e.parameters.getProperty(a.PropertyId.Conversation_DialogType),v=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Region),d=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),f=e.parameters.getProperty(a.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),g={};g[p.HeaderNames.ConnectionId]=i,g[h.QueryParameterNames.Format]=e.parameters.getProperty(s.OutputFormatPropertyName,a.OutputFormat[a.OutputFormat.Simple]).toLowerCase(),g[h.QueryParameterNames.Language]=d,g[h.QueryParameterNames.RequestBotStatusMessages]=f,c&&(g[h.QueryParameterNames.BotId]=c,l===a.DialogServiceConfig.DialogTypes.CustomCommands&&(g[p.HeaderNames.CustomCommandsAppId]=c));var y=l===a.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",m=l===a.DialogServiceConfig.DialogTypes.CustomCommands?"v1":l===a.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",S={};null!=n.token&&""!==n.token&&(S[n.headerName]=n.token);var b=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint,"");if(!b){var C=v&&v.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",P=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Host,"wss://"+v+"."+t.Constants.BaseUrl+C);b=""+(P.endsWith("/")?P:P+"/")+y+t.Constants.ApiKey+"/"+m}r.setCommonUrlParams(e,g,b);var w="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(b,g,S,new u.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),w,i)},r}var r;return i(t,e),t.Constants=((r=function(){}).ApiKey="api",r.BaseUrl="convai.speech",r),t}(c.ConnectionFactoryBase);t.DialogConnectionFactory=l},72946:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceAdapter=void 0;var a=r(73442),c=r(82100),u=r(51564),p=r(92400),h=r(36514),l=r(62980),v=r(80194),d=r(87781),f=r(14703),g=function(e){function t(t,r,n,i,a){var v=e.call(this,t,r,n,i,a)||this;return v.sendAgentConfig=function(e){if(v.agentConfig&&!v.agentConfigSent){if(v.privRecognizerConfig.parameters.getProperty(h.PropertyId.Conversation_DialogType)===h.DialogServiceConfig.DialogTypes.CustomCommands){var t=v.agentConfig.get();t.botInfo.commandsCulture=v.privRecognizerConfig.parameters.getProperty(h.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),v.agentConfig.set(t)}v.onEvent(new c.SendingAgentContextMessageEvent(v.agentConfig));var r=v.agentConfig.toJsonString();return v.agentConfigSent=!0,e.send(new f.SpeechConnectionMessage(u.MessageType.Text,"agent.config",v.privRequestSession.requestId,"application/json",r))}},v.sendAgentContext=function(e){var t=u.createGuid(),r=v.privDialogServiceConnector.properties.getProperty(h.PropertyId.Conversation_Speech_Activity_Template),n={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof r?void 0:r,version:.5},i=JSON.stringify(n);return e.send(new f.SpeechConnectionMessage(u.MessageType.Text,"speech.agent.context",v.privRequestSession.requestId,"application/json",i))},v.handleResponseMessage=function(e){var t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":var r=e.requestId.toUpperCase(),n=d.ActivityPayloadResponse.fromJSON(e.textBody),i=v.privTurnStateManager.GetTurn(r);if(n.conversationId){var o=v.agentConfig.get();o.botInfo.conversationId=n.conversationId,v.agentConfig.set(o)}var s=i.processActivityPayload(n,p.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(v.privDialogServiceConnector.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),a=new h.ActivityReceivedEventArgs(n.messagePayload,s);if(v.privDialogServiceConnector.activityReceived)try{v.privDialogServiceConnector.activityReceived(v.privDialogServiceConnector,a)}catch(e){}break;case"messagestatus":if(v.privDialogServiceConnector.turnStatusReceived)try{v.privDialogServiceConnector.turnStatusReceived(v.privDialogServiceConnector,new h.TurnStatusReceivedEventArgs(e.textBody))}catch(e){}break;default:u.Events.instance.onEvent(new u.BackgroundEvent("Unexpected response of type "+t.messageType+". Ignoring."))}},v.privEvents=new u.EventSource,v.privDialogServiceConnector=a,v.receiveMessageOverride=v.receiveDialogMessageOverride,v.privTurnStateManager=new l.DialogServiceTurnStateManager,v.recognizeOverride=v.listenOnce,v.postConnectImplOverride=v.dialogConnectImpl,v.configConnectionOverride=v.configConnection,v.disconnectOverride=v.privDisconnect,v.privDialogAudioSource=n,v.agentConfigSent=!1,v.privLastResult=null,v.connectionEvents.attach((function(e){return o(v,void 0,void 0,(function(){return s(this,(function(t){return"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0),[2]}))}))})),v}return i(t,e),t.prototype.sendMessage=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i;return s(this,(function(o){switch(o.label){case 0:return t=u.createGuid(),r=u.createNoDashGuid(),n={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},i=JSON.stringify(n),[4,this.fetchConnection()];case 1:return[4,o.sent().send(new f.SpeechConnectionMessage(u.MessageType.Text,"agent",r,"application/json",i))];case 2:return o.sent(),[2]}}))}))},t.prototype.privDisconnect=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h.CancellationReason.Error,h.CancellationErrorCode.NoError,"Disconnecting")];case 1:return e.sent(),this.terminateMessageLoop=!0,this.agentConfigSent=!1,[2]}}))}))},t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,a,c,p,l,d,f,g;return s(this,(function(s){switch(t=new h.PropertyCollection,e.messageType===u.MessageType.Text&&t.setProperty(h.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":if(i=v.SimpleSpeechPhrase.fromJSON(e.textBody),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),i.RecognitionStatus!==v.RecognitionStatus.TooManyRequests&&i.RecognitionStatus!==v.RecognitionStatus.Error&&(o=this.fireEventForResult(i,t),this.privLastResult=o.result,this.privDialogServiceConnector.recognized))try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,o)}catch(e){}n=!0;break;case"speech.hypothesis":if(a=v.SpeechHypothesis.fromJSON(e.textBody),c=a.Offset+this.privRequestSession.currentTurnAudioOffset,r=new h.SpeechRecognitionResult(this.privRequestSession.requestId,h.ResultReason.RecognizingSpeech,a.Text,a.Duration,c,a.Language,a.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(c),p=new h.SpeechRecognitionEventArgs(r,a.Duration,this.privRequestSession.sessionId),this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,p)}catch(e){}n=!0;break;case"speech.keyword":if(l=v.SpeechKeyword.fromJSON(e.textBody),r=new h.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===l.Status?h.ResultReason.RecognizedKeyword:h.ResultReason.NoMatch,l.Text,l.Duration,l.Offset,void 0,void 0,void 0,void 0,e.textBody,t),"Accepted"!==l.Status&&(this.privLastResult=r),d=new h.SpeechRecognitionEventArgs(r,r.duration,r.resultId),this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,d)}catch(e){}n=!0;break;case"audio":f=e.requestId.toUpperCase(),g=this.privTurnStateManager.GetTurn(f);try{e.binaryBody?g.audioStream.write(e.binaryBody):g.endAudioStream()}catch(e){}n=!0;break;case"response":this.handleResponseMessage(e),n=!0}return[2,n]}))}))},t.prototype.cancelRecognition=function(e,t,r,n,i){return o(this,void 0,void 0,(function(){var t,o,a;return s(this,(function(s){switch(s.label){case 0:return this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing?[4,this.privRequestSession.onStopRecognizing()]:[3,2];case 1:s.sent(),s.label=2;case 2:if(this.privDialogServiceConnector.canceled){(t=new h.PropertyCollection).setProperty(v.CancellationErrorCodePropertyName,h.CancellationErrorCode[n]),o=new h.SpeechRecognitionCanceledEventArgs(r,i,n,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,o)}catch(e){}if(this.privSuccessCallback){a=new h.SpeechRecognitionResult(void 0,h.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,t);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch(e){}}}return[2]}}))}))},t.prototype.listenOnce=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,c,u,p,l,v,d,f=this;return s(this,(function(g){switch(g.label){case 0:return this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(h.PropertyId.Speech_SessionId,this.privRequestSession.sessionId),n=this.connectImpl(),i=this.sendPreAudioMessages(),[4,this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId)];case 1:return c=g.sent(),[4,this.privDialogAudioSource.format];case 2:return u=g.sent(),[4,this.privDialogAudioSource.deviceInfo];case 3:return p=g.sent(),l=new a.ReplayableAudioNode(c,u.avgBytesPerSec),[4,this.privRequestSession.onAudioSourceAttachCompleted(l,!1)];case 4:g.sent(),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:p},g.label=5;case 5:return g.trys.push([5,8,,10]),[4,n];case 6:return g.sent(),[4,i];case 7:return g.sent(),[3,10];case 8:return v=g.sent(),[4,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h.CancellationReason.Error,h.CancellationErrorCode.ConnectionFailure,v)];case 9:return g.sent(),[2,Promise.resolve()];case 10:return d=new h.SessionEventArgs(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.sendAudio(l).then((function(){}),(function(e){return o(f,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h.CancellationReason.Error,h.CancellationErrorCode.RuntimeError,e)];case 1:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.dialogConnectImpl=function(e){return this.privConnectionLoop=this.startMessageLoop(),e},t.prototype.receiveDialogMessageOverride=function(){var e=this,t=new u.Deferred,r=function(){return o(e,void 0,void 0,(function(){var e,n,i,o,a,c,p,l,d,g,y,m,S;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,12,,13]),e=this.isDisposed(),n=!this.isDisposed()&&this.terminateMessageLoop,e||n?(t.resolve(void 0),[2]):[4,this.fetchConnection()];case 1:return[4,s.sent().read()];case 2:if(!(i=s.sent()))return[2,r()];switch((o=f.SpeechConnectionMessage.fromConnectionMessage(i)).path.toLowerCase()){case"turn.start":return[3,3];case"speech.startdetected":return[3,4];case"speech.enddetected":return[3,5];case"turn.end":return[3,6]}return[3,10];case 3:return a=o.requestId.toUpperCase(),m=this.privRequestSession.requestId.toUpperCase(),a!==m?this.privTurnStateManager.StartTurn(a):this.privRequestSession.onServiceTurnStartResponse(),[3,11];case 4:return c=v.SpeechDetected.fromJSON(o.textBody),p=new h.RecognitionEventArgs(c.Offset,this.privRequestSession.sessionId),this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p),[3,11];case 5:return void 0,l=o.textBody.length>0?o.textBody:"{ Offset: 0 }",d=v.SpeechDetected.fromJSON(l),this.privRequestSession.onServiceRecognized(d.Offset+this.privRequestSession.currentTurnAudioOffset),g=new h.RecognitionEventArgs(d.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,g),[3,11];case 6:return y=o.requestId.toUpperCase(),m=this.privRequestSession.requestId.toUpperCase(),y===m?[3,7]:(this.privTurnStateManager.CompleteTurn(y),[3,9]);case 7:return S=new h.SessionEventArgs(this.privRequestSession.sessionId),[4,this.privRequestSession.onServiceTurnEndResponse(!1)];case 8:if(s.sent(),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,S),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}s.label=9;case 9:return[3,11];case 10:this.processTypeSpecificMessages(o)||this.serviceEvents&&this.serviceEvents.onEvent(new u.ServiceEvent(o.path.toLowerCase(),o.textBody)),s.label=11;case 11:return[2,r()];case 12:return s.sent(),this.terminateMessageLoop=!0,t.resolve(),[3,13];case 13:return[2]}}))}))};return r().catch((function(e){u.Events.instance.onEvent(new u.BackgroundEvent(e))})),t.promise},t.prototype.startMessageLoop=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:this.terminateMessageLoop=!1,t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.receiveDialogMessageOverride()];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),[4,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,h.CancellationReason.Error,h.CancellationErrorCode.RuntimeError,e)];case 4:return t.sent(),[3,5];case 5:return[2,Promise.resolve()]}}))}))},t.prototype.configConnection=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.terminateMessageLoop?(this.terminateMessageLoop=!1,[2,Promise.reject("Connection to service terminated.")]):[4,this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize())];case 1:return t.sent(),[4,this.sendAgentConfig(e)];case 2:return t.sent(),[2,e]}}))}))},t.prototype.sendPreAudioMessages=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,this.fetchConnection()];case 1:return e=t.sent(),this.addKeywordContextData(),[4,this.sendSpeechContext(e)];case 2:return t.sent(),[4,this.sendAgentContext(e)];case 3:return t.sent(),[4,this.sendWaveHeader(e)];case 4:return t.sent(),[2]}}))}))},t.prototype.fireEventForResult=function(e,t){var r=v.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),n=e.Offset+this.privRequestSession.currentTurnAudioOffset,i=new h.SpeechRecognitionResult(this.privRequestSession.requestId,r,e.DisplayText,e.Duration,n,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new h.SpeechRecognitionEventArgs(i,n,this.privRequestSession.sessionId)},t.prototype.onEvent=function(e){this.privEvents.onEvent(e),u.Events.instance.onEvent(e)},t.prototype.addKeywordContextData=function(){var e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0!==e){for(var t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),r=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),n=e.split(";"),i=void 0===t?[]:t.split(";"),o=void 0===r?[]:r.split(";"),s=[],a=0;a<n.length;a++){var c={};c.text=n[a],a<i.length&&(c.offset=Number(i[a])),a<o.length&&(c.duration=Number(o[a])),s.push(c)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:s,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}},t}(v.ServiceRecognizerBase);t.DialogServiceAdapter=g},94387:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnState=void 0;var n=r(92400),i=r(7904),o=r(87781),s=function(){function e(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}return Object.defineProperty(e.prototype,"audioStream",{get:function(){return this.resetTurnEndTimeout(),this.privAudioStream},enumerable:!1,configurable:!0}),e.prototype.processActivityPayload=function(e,t){return e.messageDataStreamType===o.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=i.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:n.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream},e.prototype.endAudioStream=function(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()},e.prototype.complete=function(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()},e.prototype.resetTurnEndTimeout=function(){var e=this;void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout((function(){e.privTurnManager.CompleteTurn(e.privRequestId)}),2e3)},e}();t.DialogServiceTurnState=s},62980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnStateManager=void 0;var n=r(32420),i=r(94387),o=function(){function e(){this.privTurnMap=new Map}return e.prototype.StartTurn=function(e){if(this.privTurnMap.has(e))throw new n.InvalidOperationError("Service error: There is already a turn with id:"+e);var t=new i.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)},e.prototype.GetTurn=function(e){return this.privTurnMap.get(e)},e.prototype.CompleteTurn=function(e){if(!this.privTurnMap.has(e))throw new n.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);var t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t},e}();t.DialogServiceTurnStateManager=o},51166:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicGrammarBuilder=void 0;var r=function(){function e(){}return e.prototype.addPhrase=function(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)},e.prototype.clearPhrases=function(){this.privPhrases=void 0},e.prototype.addReferenceGrammar=function(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)},e.prototype.clearGrammars=function(){this.privGrammars=void 0},e.prototype.generateGrammarObject=function(){if(void 0!==this.privGrammars||void 0!==this.privPhrases){var e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){var t=[];this.privPhrases.forEach((function(e,r,n){t.push({Text:e})})),e.Groups=[{Type:"Generic",Items:t}]}return e}},e}();t.DynamicGrammarBuilder=r},42901:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumTranslation=void 0;var n=r(36514),i=r(80194),o=function(){function e(){}return e.implTranslateRecognitionResult=function(e){var t=n.ResultReason.Canceled;switch(e){case i.RecognitionStatus.Success:t=n.ResultReason.RecognizedSpeech;break;case i.RecognitionStatus.NoMatch:case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:case i.RecognitionStatus.EndOfDictation:t=n.ResultReason.NoMatch;break;case i.RecognitionStatus.Error:default:t=n.ResultReason.Canceled}return t},e.implTranslateCancelResult=function(e){var t=n.CancellationReason.EndOfStream;switch(e){case i.RecognitionStatus.Success:case i.RecognitionStatus.EndOfDictation:case i.RecognitionStatus.NoMatch:t=n.CancellationReason.EndOfStream;break;case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:case i.RecognitionStatus.Error:default:t=n.CancellationReason.Error}return t},e.implTranslateCancelErrorCode=function(e){var t=n.CancellationErrorCode.NoError;switch(e){case i.RecognitionStatus.Error:t=n.CancellationErrorCode.ServiceError;break;case i.RecognitionStatus.TooManyRequests:t=n.CancellationErrorCode.TooManyRequests;break;default:t=n.CancellationErrorCode.NoError}return t},e}();t.EnumTranslation=o},80194:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,i(r(49097),t),i(r(11639),t),i(r(47923),t),i(r(30720),t),i(r(81916),t),i(r(55897),t),i(r(13301),t),i(r(27145),t),i(r(78616),t),i(r(96834),t),i(r(89181),t),i(r(96357),t),i(r(86503),t),i(r(30787),t),i(r(35469),t),i(r(901),t),i(r(60846),t),i(r(10721),t),i(r(60641),t),i(r(67282),t),i(r(91126),t),i(r(74705),t),i(r(20831),t),i(r(83104),t),i(r(1341),t),i(r(79093),t),i(r(20009),t),i(r(27975),t),i(r(58328),t),i(r(51593),t),i(r(61082),t),i(r(67677),t),i(r(15026),t),i(r(51166),t),i(r(42901),t),i(r(72946),t),i(r(55023),t),i(r(6245),t),i(r(72945),t),i(r(11194),t),i(r(95668),t),i(r(88043),t),i(r(81661),t),i(r(35190),t),i(r(36271),t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"},97923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNames=void 0;var r=function(){function e(){}return e.AuthKey="Ocp-Apim-Subscription-Key",e.ConnectionId="X-ConnectionId",e.ContentType="Content-Type",e.CustomCommandsAppId="X-CommandsAppId",e.Path="Path",e.RequestId="X-RequestId",e.RequestStreamId="X-StreamId",e.RequestTimestamp="X-Timestamp",e}();t.HeaderNames=r},47923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthInfo=void 0;var r=function(){function e(e,t){this.privHeaderName=e,this.privToken=t}return Object.defineProperty(e.prototype,"headerName",{get:function(){return this.privHeaderName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privToken},enumerable:!1,configurable:!0}),e}();t.AuthInfo=r},30720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},81916:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},55897:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntentConnectionFactory=void 0;var o=r(73442),s=r(36514),a=r(82753),c=r(80194),u=r(97923),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.create=function(e,r,n){var i=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint);if(!i){var a=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_IntentRegion),p=a&&a.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";i=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+a+".sr.speech"+p)+"/speech/recognition/interactive/cognitiveservices/v1"}var h={format:"simple",language:e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)};t.setCommonUrlParams(e,h,i);var l={};void 0!==r.token&&""!==r.token&&(l[r.headerName]=r.token),l[u.HeaderNames.ConnectionId]=n,e.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,i);var v="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(i,h,l,new c.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),v,n)},t}return i(t,e),t.prototype.getSpeechRegionFromIntentRegion=function(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}},t}(a.ConnectionFactoryBase);t.IntentConnectionFactory=p},51593:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.IntentServiceRecognizer=void 0;var a=r(51564),c=r(36514),u=r(80194),p=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.privIntentRecognizer=o,s.privIntentDataSent=!1,s}return i(t,e),t.prototype.setIntents=function(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0},t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,p,h,l,v,d,f,g,y=this;return s(this,(function(s){switch(n=!1,i=new c.PropertyCollection,e.messageType===a.MessageType.Text&&i.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":if(o=u.SpeechHypothesis.fromJSON(e.textBody),t=new c.IntentRecognitionResult(void 0,this.privRequestSession.requestId,c.ResultReason.RecognizingIntent,o.Text,o.Duration,o.Offset+this.privRequestSession.currentTurnAudioOffset,o.Language,o.LanguageDetectionConfidence,void 0,e.textBody,i),this.privRequestSession.onHypothesis(t.offset),r=new c.IntentRecognitionEventArgs(t,o.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,r)}catch(e){}n=!0;break;case"speech.phrase":p=u.SimpleSpeechPhrase.fromJSON(e.textBody),t=new c.IntentRecognitionResult(void 0,this.privRequestSession.requestId,u.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,e.textBody,i),r=new c.IntentRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),h=function(){if(y.privIntentRecognizer.recognized)try{y.privIntentRecognizer.recognized(y.privIntentRecognizer,r)}catch(e){}if(y.privSuccessCallback){try{y.privSuccessCallback(t)}catch(e){y.privErrorCallback&&y.privErrorCallback(e)}y.privSuccessCallback=void 0,y.privErrorCallback=void 0}},!1===this.privIntentDataSent||c.ResultReason.NoMatch===r.result.reason?(this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),h()):this.privPendingIntentArgs=r,n=!0;break;case"response":if(r=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===r){if(""===e.textBody)return[2];r=new c.IntentRecognitionEventArgs(new c.IntentRecognitionResult,0,this.privRequestSession.sessionId)}if(l=u.IntentResponse.fromJSON(e.textBody),v=this.privAddedLmIntents[l.topScoringIntent.intent],void 0!==this.privUmbrellaIntent&&(v=this.privUmbrellaIntent),null!==l&&void 0!==v&&(d=void 0===v.intentName?l.topScoringIntent.intent:v.intentName,f=r.result.reason,void 0!==d&&(f=c.ResultReason.RecognizedIntent),(g=void 0!==r.result.properties?r.result.properties:new c.PropertyCollection).setProperty(c.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),r=new c.IntentRecognitionEventArgs(new c.IntentRecognitionResult(d,r.result.resultId,f,r.result.text,r.result.duration,r.result.offset,void 0,void 0,r.result.errorDetails,r.result.json,g),r.offset,r.sessionId)),this.privRequestSession.onPhraseRecognized(r.offset+r.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,r)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(r.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}n=!0}return[2,n]}))}))},t.prototype.cancelRecognition=function(e,t,r,n,i){var o=new c.PropertyCollection;if(o.setProperty(u.CancellationErrorCodePropertyName,c.CancellationErrorCode[n]),this.privIntentRecognizer.canceled){var s=new c.IntentRecognitionCanceledEventArgs(r,i,n,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,s)}catch(e){}}if(this.privSuccessCallback){var a=new c.IntentRecognitionResult(void 0,t,c.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch(e){}}},t}(u.ServiceRecognizerBase);t.IntentServiceRecognizer=p},51652:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParameterNames=void 0;var r=function(){function e(){}return e.BotId="botid",e.CustomSpeechDeploymentId="cid",e.CustomVoiceDeploymentId="deploymentId",e.EnableAudioLogging="storeAudio",e.EnableLanguageId="lidEnabled",e.EnableWordLevelTimestamps="wordLevelTimestamps",e.EndSilenceTimeoutMs="endSilenceTimeoutMs",e.Format="format",e.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",e.Language="language",e.Profanity="profanity",e.RequestBotStatusMessages="enableBotMessageStatus",e.StableIntermediateThreshold="stableIntermediateThreshold",e.StableTranslation="stableTranslation",e.TestHooks="testhooks",e}();t.QueryParameterNames=r},13301:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;var o=r(51564),s=function(e){function t(t,r,n,i){void 0===i&&(i=o.EventType.Info);var s=e.call(this,t,i)||this;return s.privRequestId=r,s.privSessionId=n,s}return i(t,e),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.SpeechRecognitionEvent=s;var a=function(e){function t(t,r,n,i){var o=e.call(this,"RecognitionTriggeredEvent",t,r)||this;return o.privAudioSourceId=n,o.privAudioNodeId=i,o}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(s);t.RecognitionTriggeredEvent=a;var c=function(e){function t(t,r,n,i){var o=e.call(this,"ListeningStartedEvent",t,r)||this;return o.privAudioSourceId=n,o.privAudioNodeId=i,o}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(s);t.ListeningStartedEvent=c;var u=function(e){function t(t,r,n){var i=e.call(this,"ConnectingToServiceEvent",t,n)||this;return i.privAuthFetchEventid=r,i}return i(t,e),Object.defineProperty(t.prototype,"authFetchEventid",{get:function(){return this.privAuthFetchEventid},enumerable:!1,configurable:!0}),t}(s);t.ConnectingToServiceEvent=u;var p,h=function(e){function t(t,r,n,i,o){var s=e.call(this,"RecognitionStartedEvent",t,o)||this;return s.privAudioSourceId=r,s.privAudioNodeId=n,s.privAuthFetchEventId=i,s}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(s);t.RecognitionStartedEvent=h,function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(p=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));var l=function(e){function t(t,r,n,i,s,a,c,u){var h=e.call(this,"RecognitionEndedEvent",t,s,c===p.Success?o.EventType.Info:o.EventType.Error)||this;return h.privAudioSourceId=r,h.privAudioNodeId=n,h.privAuthFetchEventId=i,h.privStatus=c,h.privError=u,h.privServiceTag=a,h}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceTag",{get:function(){return this.privServiceTag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.privStatus},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(s);t.RecognitionEndedEvent=l},78616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;var n,i,o=r(36514);!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(n=t.RecognitionMode||(t.RecognitionMode={})),(i=t.SpeechResultFormat||(t.SpeechResultFormat={}))[i.Simple=0]="Simple",i[i.Detailed=1]="Detailed";var s=function(){function e(e,t){this.privRecognitionMode=n.Interactive,this.privSpeechServiceConfig=e||new a(new c(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10)}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionMode",{get:function(){return this.privRecognitionMode},set:function(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===n.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n[e]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeechServiceConfig",{get:function(){return this.privSpeechServiceConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionActivityTimeout",{get:function(){return this.privRecognitionActivityTimeout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isContinuousRecognition",{get:function(){return this.privRecognitionMode!==n.Interactive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDetectSourceLanguages",{get:function(){return this.parameters.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxRetryCount",{get:function(){return this.privMaxRetryCount},enumerable:!1,configurable:!0}),e}();t.RecognizerConfig=s;var a=function(){function e(e){var t=this;this.serialize=function(){return JSON.stringify(t,(function(e,t){if(t&&"object"==typeof t){var r={};for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return r}return t}))},this.context=e}return Object.defineProperty(e.prototype,"Context",{get:function(){return this.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Recognition",{get:function(){return this.recognition},set:function(e){this.recognition=e.toLowerCase()},enumerable:!1,configurable:!0}),e}();t.SpeechServiceConfig=a;var c=function(e){this.system=new u,this.os=e};t.Context=c;var u=function(){this.name="SpeechSDK",this.version="1.17.0",this.build="JavaScript",this.lang="JavaScript"};t.System=u;t.OS=function(e,t,r){this.platform=e,this.name=t,this.version=r};var p,h;t.Device=function(e,t,r){this.manufacturer=e,this.model=t,this.version=r},(h=t.connectivity||(t.connectivity={})).Bluetooth="Bluetooth",h.Wired="Wired",h.WiFi="WiFi",h.Cellular="Cellular",h.InBuilt="InBuilt",h.Unknown="Unknown",(p=t.type||(t.type={})).Phone="Phone",p.Speaker="Speaker",p.Car="Car",p.Headset="Headset",p.Thermostat="Thermostat",p.Microphones="Microphones",p.Deskphone="Deskphone",p.RemoteControl="RemoteControl",p.Unknown="Unknown",p.File="File",p.Stream="Stream"},67677:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RequestSession=void 0;var o=r(51564),s=r(13301),a=r(32083),c=function(){function e(e){var t=this;this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.onPreConnectionStart=function(e,r){t.privAuthFetchEventId=e,t.privSessionId=r,t.onEvent(new s.ConnectingToServiceEvent(t.privRequestId,t.privAuthFetchEventId,t.privSessionId))},this.onServiceTurnStartResponse=function(){t.privTurnDeferral&&t.privInTurn&&(t.privTurnDeferral.reject("Another turn started before current completed."),t.privTurnDeferral.promise.then().catch((function(){}))),t.privInTurn=!0,t.privTurnDeferral=new o.Deferred},this.getTelemetry=function(){return t.privServiceTelemetryListener.hasTelemetry?t.privServiceTelemetryListener.getTelemetry():null},this.onEvent=function(e){t.privServiceTelemetryListener&&t.privServiceTelemetryListener.onEvent(e),o.Events.instance.onEvent(e)},this.privAudioSourceId=e,this.privRequestId=o.createNoDashGuid(),this.privAudioNodeId=o.createNoDashGuid(),this.privTurnDeferral=new o.Deferred,this.privTurnDeferral.resolve()}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"turnCompletionPromise",{get:function(){return this.privTurnDeferral.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpeechEnded",{get:function(){return this.privIsSpeechEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRecognizing",{get:function(){return this.privIsRecognizing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTurnAudioOffset",{get:function(){return this.privTurnStartAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recogNumber",{get:function(){return this.privRecogNumber},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numConnectionAttempts",{get:function(){return this.privConnectionAttempts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesSent",{get:function(){return this.privBytesSent},enumerable:!1,configurable:!0}),e.prototype.listenForServiceTelemetry=function(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))},e.prototype.startNewRecognition=function(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRequestId=o.createNoDashGuid(),this.privRecogNumber++,this.privServiceTelemetryListener=new a.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new s.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))},e.prototype.onAudioSourceAttachCompleted=function(e,t,r){return n(this,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?[4,this.onComplete()]:[3,2];case 1:return r.sent(),[3,3];case 2:this.onEvent(new s.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId)),r.label=3;case 3:return[2]}}))}))},e.prototype.onAuthCompleted=function(e,t){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return e?[4,this.onComplete()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.onConnectionEstablishCompleted=function(e,t){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return 200!==e?[3,1]:(this.onEvent(new s.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0,[2]);case 1:return 403!==e?[3,3]:[4,this.onComplete()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.onServiceTurnEndResponse=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.privTurnDeferral.resolve(),e&&!this.isSpeechEnded?[3,2]:[4,this.onComplete()];case 1:return t.sent(),this.privInTurn=!1,[3,3];case 2:this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privRequestId=o.createNoDashGuid(),this.privAudioNode.replay(),t.label=3;case 3:return[2]}}))}))},e.prototype.onHypothesis=function(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))},e.prototype.onPhraseRecognized=function(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)},e.prototype.onServiceRecognized=function(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0},e.prototype.onAudioSent=function(e){this.privBytesSent+=e},e.prototype.onRetryConnection=function(){this.privConnectionAttempts++},e.prototype.dispose=function(e){return n(this,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:if(this.privIsDisposed)return[3,5];this.privIsDisposed=!0,e=0,t=this.privDetachables,r.label=1;case 1:return e<t.length?[4,t[e].detach()]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1,r.label=5;case 5:return[2]}}))}))},e.prototype.onStopRecognizing=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.onComplete()];case 1:return e.sent(),[2]}}))}))},e.prototype.onSpeechEnded=function(){this.privIsSpeechEnded=!0},e.prototype.onComplete=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.privIsRecognizing?(this.privIsRecognizing=!1,[4,this.detachAudioNode()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.detachAudioNode=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.privIsAudioNodeDetached?[3,2]:(this.privIsAudioNodeDetached=!0,this.privAudioNode?[4,this.privAudioNode.detach()]:[3,2]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e}();t.RequestSession=c},87781:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;var r,n=function(){function e(e){this.privActivityResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"conversationId",{get:function(){return this.privActivityResponse.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messageDataStreamType",{get:function(){return this.privActivityResponse.messageDataStreamType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messagePayload",{get:function(){return this.privActivityResponse.messagePayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this.privActivityResponse.version},enumerable:!1,configurable:!0}),e}();t.ActivityPayloadResponse=n,(r=t.MessageDataStreamType||(t.MessageDataStreamType={}))[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"},20009:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DetailedSpeechPhrase=void 0;var n=r(80194),i=function(){function e(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=n.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privDetailedSpeechPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NBest",{get:function(){return this.privDetailedSpeechPhrase.NBest},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privDetailedSpeechPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privDetailedSpeechPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),e}();t.DetailedSpeechPhrase=i},60846:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,(n=t.SynthesisStatus||(t.SynthesisStatus={}))[n.Success=0]="Success",n[n.SynthesisEnd=1]="SynthesisEnd",n[n.Error=2]="Error",(r=t.RecognitionStatus||(t.RecognitionStatus={}))[r.Success=0]="Success",r[r.NoMatch=1]="NoMatch",r[r.InitialSilenceTimeout=2]="InitialSilenceTimeout",r[r.BabbleTimeout=3]="BabbleTimeout",r[r.Error=4]="Error",r[r.EndOfDictation=5]="EndOfDictation",r[r.TooManyRequests=6]="TooManyRequests"},61082:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentResponse=void 0;var r=function(){function e(e){this.privIntentResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"query",{get:function(){return this.privIntentResponse.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topScoringIntent",{get:function(){return this.privIntentResponse.topScoringIntent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.privIntentResponse.entities},enumerable:!1,configurable:!0}),e}();t.IntentResponse=r},27975:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpeechPhrase=void 0;var n=r(80194),i=function(){function e(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=n.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privSimpleSpeechPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DisplayText",{get:function(){return this.privSimpleSpeechPhrase.DisplayText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSimpleSpeechPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSimpleSpeechPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeakerId",{get:function(){return this.privSimpleSpeechPhrase.SpeakerId},enumerable:!1,configurable:!0}),e}();t.SimpleSpeechPhrase=i},74705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechDetected=void 0;var r=function(){function e(e){this.privSpeechStartDetected=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechStartDetected.Offset},enumerable:!1,configurable:!0}),e}();t.SpeechDetected=r},20831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechHypothesis=void 0;var r=function(){function e(e){this.privSpeechHypothesis=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Text",{get:function(){return this.privSpeechHypothesis.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechHypothesis.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSpeechHypothesis.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeakerId",{get:function(){return this.privSpeechHypothesis.SpeakerId},enumerable:!1,configurable:!0}),e}();t.SpeechHypothesis=r},83104:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechKeyword=void 0;var r=function(){function e(e){this.privSpeechKeyword=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Status",{get:function(){return this.privSpeechKeyword.Status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privSpeechKeyword.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechKeyword.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSpeechKeyword.Duration},enumerable:!1,configurable:!0}),e}();t.SpeechKeyword=r},72945:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,(r=t.MetadataType||(t.MetadataType={})).WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme";var n=function(){function e(e){this.privSynthesisAudioMetadata=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Metadata",{get:function(){return this.privSynthesisAudioMetadata.Metadata},enumerable:!1,configurable:!0}),e}();t.SynthesisAudioMetadata=n},60641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationHypothesis=void 0;var n=r(330),i=function(){function e(e){this.privTranslationHypothesis=JSON.parse(e),this.privTranslationHypothesis.Translation.TranslationStatus=n.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privTranslationHypothesis.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privTranslationHypothesis.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privTranslationHypothesis.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Translation",{get:function(){return this.privTranslationHypothesis.Translation},enumerable:!1,configurable:!0}),e}();t.TranslationHypothesis=i},67282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationPhrase=void 0;var n=r(80194),i=r(330),o=function(){function e(e){this.privTranslationPhrase=JSON.parse(e),this.privTranslationPhrase.RecognitionStatus=n.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=i.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privTranslationPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privTranslationPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privTranslationPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privTranslationPhrase.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Translation",{get:function(){return this.privTranslationPhrase.Translation},enumerable:!1,configurable:!0}),e}();t.TranslationPhrase=o},10721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEnd=void 0;var n=r(80194),i=function(){function e(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus=n.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"SynthesisStatus",{get:function(){return this.privSynthesisEnd.SynthesisStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FailureReason",{get:function(){return this.privSynthesisEnd.FailureReason},enumerable:!1,configurable:!0}),e}();t.TranslationSynthesisEnd=i},87135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusResponsePayload=void 0;var r=function(){function e(e){this.privMessageStatusResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"interactionId",{get:function(){return this.privMessageStatusResponse.interactionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationId",{get:function(){return this.privMessageStatusResponse.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}},enumerable:!1,configurable:!0}),e}();t.TurnStatusResponsePayload=r},27145:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRecognizerBase=void 0;var o=r(73442),s=r(51564),a=r(36514),c=r(80194),u=r(14703),p=function(){function e(t,r,o,p,h){var l=this;if(this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendSpeechContext=function(e){var t=l.speechContext.toJSON();if(t)return e.send(new u.SpeechConnectionMessage(s.MessageType.Text,"speech.context",l.privRequestSession.requestId,"application/json",t))},this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSpeechServiceConfig=function(t,r,n){if(!0!==e.telemetryDataEnabled){var i={context:{system:JSON.parse(n).context.system}};n=JSON.stringify(i)}if("true"===l.privRecognizerConfig.parameters.getProperty("TranscriptionService_SingleChannel","false").toLowerCase()){var o=JSON.parse(n);o.context.DisableReferenceChannel="True",o.context.MicSpec="1_0_0",n=JSON.stringify(o)}if(n)return t.send(new u.SpeechConnectionMessage(s.MessageType.Text,"speech.config",r.requestId,"application/json",n))},!t)throw new s.ArgumentNullError("authentication");if(!r)throw new s.ArgumentNullError("connectionFactory");if(!o)throw new s.ArgumentNullError("audioSource");if(!p)throw new s.ArgumentNullError("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=t,this.privConnectionFactory=r,this.privAudioSource=o,this.privRecognizerConfig=p,this.privIsDisposed=!1,this.privRecognizer=h,this.privRequestSession=new c.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new s.EventSource,this.privServiceEvents=new s.EventSource,this.privDynamicGrammar=new c.DynamicGrammarBuilder,this.privSpeechContext=new c.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new c.AgentConfig,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=s.Timeout.setTimeout),this.connectionEvents.attach((function(e){return n(l,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return"ConnectionClosedEvent"!==e.name?[3,2]:1003===(t=e).statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount?[4,this.cancelRecognitionLocal(a.CancellationReason.Error,1007===t.statusCode?a.CancellationErrorCode.BadRequestParameters:a.CancellationErrorCode.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))}))}return Object.defineProperty(e.prototype,"audioSource",{get:function(){return this.privAudioSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speechContext",{get:function(){return this.privSpeechContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamicGrammar",{get:function(){return this.privDynamicGrammar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationTranslatorToken",{set:function(e){this.privRecognizerConfig.parameters.setProperty(a.PropertyId.ConversationTranslator_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authentication",{set:function(e){this.privAuthentication=this.authentication},enumerable:!1,configurable:!0}),e.prototype.isDisposed=function(){return this.privIsDisposed},e.prototype.dispose=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:if(this.privIsDisposed=!0,!this.privConnectionConfigurationPromise)return[3,5];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,this.privConnectionConfigurationPromise];case 2:return[4,t.sent().dispose(e)];case 3:return t.sent(),[3,5];case 4:return t.sent(),[2];case 5:return[2]}}))}))},Object.defineProperty(e.prototype,"connectionEvents",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serviceEvents",{get:function(){return this.privServiceEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionMode",{get:function(){return this.privRecognizerConfig.recognitionMode},enumerable:!1,configurable:!0}),e.prototype.recognize=function(e,t,r){return n(this,void 0,void 0,(function(){var s,u,p,h,l,v,d,f,g=this;return i(this,(function(y){switch(y.label){case 0:if(void 0!==this.recognizeOverride)return[2,this.recognizeOverride(e,t,r)];this.privConnectionConfigurationPromise=null,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=r,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events),s=this.connectImpl(),y.label=1;case 1:return y.trys.push([1,6,,8]),[4,this.audioSource.attach(this.privRequestSession.audioNodeId)];case 2:return p=y.sent(),[4,this.audioSource.format];case 3:return h=y.sent(),[4,this.audioSource.deviceInfo];case 4:return l=y.sent(),this.privIsLiveAudio=l.type&&l.type===c.type.Microphones,u=new o.ReplayableAudioNode(p,h.avgBytesPerSec),[4,this.privRequestSession.onAudioSourceAttachCompleted(u,!1)];case 5:return y.sent(),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l},[3,8];case 6:return v=y.sent(),[4,this.privRequestSession.onStopRecognizing()];case 7:throw y.sent(),v;case 8:return y.trys.push([8,10,,12]),[4,s];case 9:return y.sent(),[3,12];case 10:return d=y.sent(),[4,this.cancelRecognitionLocal(a.CancellationReason.Error,a.CancellationErrorCode.ConnectionFailure,d)];case 11:return y.sent(),[2];case 12:return f=new a.SessionEventArgs(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,f),this.receiveMessage(),this.sendAudio(u).catch((function(e){return n(g,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.cancelRecognitionLocal(a.CancellationReason.Error,a.CancellationErrorCode.RuntimeError,e)];case 1:return t.sent(),[2]}}))}))})),[2]}}))}))},e.prototype.stopRecognizing=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:if(!this.privRequestSession.isRecognizing)return[3,8];e.label=1;case 1:return e.trys.push([1,,6,8]),[4,this.audioSource.turnOff()];case 2:return e.sent(),[4,this.sendFinalAudio()];case 3:return e.sent(),[4,this.privRequestSession.onStopRecognizing()];case 4:return e.sent(),[4,this.privRequestSession.turnCompletionPromise];case 5:return e.sent(),[3,8];case 6:return[4,this.privRequestSession.dispose()];case 7:return e.sent(),[7];case 8:return[2]}}))}))},e.prototype.connect=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.connectImpl()];case 1:return e.sent(),[2,Promise.resolve()]}}))}))},e.prototype.connectAsync=function(e,t){this.connectImpl().then((function(r){try{e&&e()}catch(e){t&&t(e)}}),(function(e){try{t&&t(e)}catch(e){}}))},e.prototype.disconnect=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.cancelRecognitionLocal(a.CancellationReason.Error,a.CancellationErrorCode.NoError,"Disconnecting")];case 1:return e.sent(),void 0===this.disconnectOverride?[3,3]:[4,this.disconnectOverride()];case 2:e.sent(),e.label=3;case 3:return e.trys.push([3,6,,7]),[4,this.privConnectionPromise];case 4:return[4,e.sent().dispose()];case 5:case 6:return e.sent(),[3,7];case 7:return this.privConnectionPromise=null,[2]}}))}))},e.prototype.sendMessage=function(e){},e.prototype.sendNetworkMessage=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return r="string"==typeof t?s.MessageType.Text:s.MessageType.Binary,n="string"==typeof t?"application/json":"",[4,this.fetchConnection()];case 1:return[2,i.sent().send(new u.SpeechConnectionMessage(r,e,this.privRequestSession.requestId,n,t))]}}))}))},Object.defineProperty(e.prototype,"activityTemplate",{get:function(){return this.privActivityTemplate},set:function(e){this.privActivityTemplate=e},enumerable:!1,configurable:!0}),e.prototype.sendTelemetryData=function(){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:if(t=this.privRequestSession.getTelemetry(),!0!==e.telemetryDataEnabled||this.privIsDisposed||null===t)return[2];if(e.telemetryData)try{e.telemetryData(t)}catch(e){}return[4,this.fetchConnection()];case 1:return[4,r.sent().send(new u.SpeechConnectionMessage(s.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",t))];case 2:return r.sent(),[2]}}))}))},e.prototype.cancelRecognitionLocal=function(e,t,r){return n(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return this.privRequestSession.isRecognizing?[4,this.privRequestSession.onStopRecognizing()]:[3,2];case 1:n.sent(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,r),n.label=2;case 2:return[2]}}))}))},e.prototype.receiveMessage=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,o,p,h,l,v;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,18,,19]),this.privIsDisposed?[2]:[4,this.fetchConnection()];case 1:return[4,(e=i.sent()).read()];case 2:if(t=i.sent(),void 0!==this.receiveMessageOverride)return[2,this.receiveMessageOverride()];if(!t)return this.privRequestSession.isRecognizing?[2,this.receiveMessage()]:[2];if(this.privServiceHasSentMessage=!0,(r=u.SpeechConnectionMessage.fromConnectionMessage(t)).requestId.toLowerCase()!==this.privRequestSession.requestId.toLowerCase())return[3,17];switch(r.path.toLowerCase()){case"turn.start":return[3,3];case"speech.startdetected":return[3,4];case"speech.enddetected":return[3,5];case"turn.end":return[3,6]}return[3,15];case 3:return this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse(),[3,17];case 4:return n=c.SpeechDetected.fromJSON(r.textBody),o=new a.RecognitionEventArgs(n.Offset,this.privRequestSession.sessionId),this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,o),[3,17];case 5:return void 0,p=r.textBody.length>0?r.textBody:"{ Offset: 0 }",h=c.SpeechDetected.fromJSON(p),this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(h.Offset+this.privRequestSession.currentTurnAudioOffset),l=new a.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,l),[3,17];case 6:return[4,this.sendTelemetryData()];case 7:return i.sent(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream?(this.privMustReportEndOfStream=!1,[4,this.cancelRecognitionLocal(a.CancellationReason.EndOfStream,a.CancellationErrorCode.NoError,void 0)]):[3,9];case 8:i.sent(),i.label=9;case 9:return v=new a.SessionEventArgs(this.privRequestSession.sessionId),[4,this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition)];case 10:return i.sent(),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing?[3,11]:(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,v),[2]);case 11:return[4,this.fetchConnection()];case 12:return e=i.sent(),[4,this.sendPrePayloadJSON(e)];case 13:i.sent(),i.label=14;case 14:return[3,17];case 15:return[4,this.processTypeSpecificMessages(r)];case 16:i.sent()||this.privServiceEvents&&this.serviceEvents.onEvent(new s.ServiceEvent(r.path.toLowerCase(),r.textBody)),i.label=17;case 17:return[2,this.receiveMessage()];case 18:return i.sent(),[2,null];case 19:return[2]}}))}))},e.prototype.sendPrePayloadJSON=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return void 0!==this.sendPrePayloadJSONOverride?[2,this.sendPrePayloadJSONOverride(e)]:[4,this.sendSpeechContext(e)];case 1:return t.sent(),[4,this.sendWaveHeader(e)];case 2:return t.sent(),[2]}}))}))},e.prototype.sendWaveHeader=function(e){return n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.audioSource.format];case 1:return t=r.sent(),[2,e.send(new u.SpeechConnectionMessage(s.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))]}}))}))},e.prototype.connectImpl=function(){var e=this;return this.privConnectionPromise?this.privConnectionPromise.then((function(t){return t.state()===s.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionPromise=null,e.privServiceHasSentMessage=!1,e.connectImpl()):e.privConnectionPromise}),(function(t){return e.privConnectionId=null,e.privConnectionPromise=null,e.privServiceHasSentMessage=!1,e.connectImpl()})):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch((function(){})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)},e.prototype.fetchConnection=function(){return n(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){switch(t.label){case 0:return this.privConnectionConfigurationPromise?[2,this.privConnectionConfigurationPromise.then((function(t){return t.state()===s.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigurationPromise=null,e.privServiceHasSentMessage=!1,e.fetchConnection()):e.privConnectionConfigurationPromise}),(function(t){return e.privConnectionId=null,e.privConnectionConfigurationPromise=null,e.privServiceHasSentMessage=!1,e.fetchConnection()}))]:(this.privConnectionConfigurationPromise=this.configureConnection(),[4,this.privConnectionConfigurationPromise]);case 1:return[2,t.sent()]}}))}))},e.prototype.sendAudio=function(e){return n(this,void 0,void 0,(function(){var t,r,o,a,c,p,h=this;return i(this,(function(l){switch(l.label){case 0:return[4,this.audioSource.format];case 1:return t=l.sent(),r=Date.now(),o=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),a=t.avgBytesPerSec/1e3*parseInt(o,10),c=this.privRequestSession.recogNumber,p=function(){return n(h,void 0,void 0,(function(){var n,o,h,l,v=this;return i(this,(function(i){switch(i.label){case 0:return this.privIsDisposed||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing||this.privRequestSession.recogNumber!==c?[3,5]:[4,this.fetchConnection()];case 1:return n=i.sent(),[4,e.read()];case 2:return o=i.sent(),this.privRequestSession.isSpeechEnded?[2]:(h=void 0,l=void 0,!o||o.isEnd?(h=null,l=0):(h=o.buffer,this.privRequestSession.onAudioSent(h.byteLength),l=a>=this.privRequestSession.bytesSent?0:Math.max(0,r-Date.now())),0===l?[3,4]:[4,this.delay(l)]);case 3:i.sent(),i.label=4;case 4:if(null!==h&&(r=Date.now()+1e3*h.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===c){if(n.send(new u.SpeechConnectionMessage(s.MessageType.Binary,"audio",this.privRequestSession.requestId,null,h)).catch((function(){v.privRequestSession.onServiceTurnEndResponse(v.privRecognizerConfig.isContinuousRecognition).catch((function(){}))})),!(null==o?void 0:o.isEnd))return[2,p()];this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}i.label=5;case 5:return[2]}}))}))},[2,p()]}}))}))},e.prototype.retryableConnect=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,o,c,u,p=this;return i(this,(function(i){switch(i.label){case 0:e=!1,this.privAuthFetchEventId=s.createNoDashGuid(),t=this.privRequestSession.sessionId,this.privConnectionId=void 0!==t?t:s.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId),r=0,n="",i.label=1;case 1:return this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount?[4,e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId)]:[3,8];case 2:return o=i.sent(),[4,this.privRequestSession.onAuthCompleted(!1)];case 3:return i.sent(),c=this.privConnectionFactory.create(this.privRecognizerConfig,o,this.privConnectionId),this.privRequestSession.listenForServiceTelemetry(c.events),c.events.attach((function(e){p.connectionEvents.onEvent(e)})),[4,c.open()];case 4:return 200!==(u=i.sent()).statusCode?[3,6]:[4,this.privRequestSession.onConnectionEstablishCompleted(u.statusCode)];case 5:return i.sent(),[2,Promise.resolve(c)];case 6:1006===u.statusCode&&(e=!0),i.label=7;case 7:return r=u.statusCode,n=u.reason,this.privRequestSession.onRetryConnection(),[3,1];case 8:return[4,this.privRequestSession.onConnectionEstablishCompleted(r,n)];case 9:return i.sent(),[2,Promise.reject("Unable to contact server. StatusCode: "+r+", "+this.privRecognizerConfig.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint)+" Reason: "+n)]}}))}))},e.prototype.delay=function(e){var t=this;return new Promise((function(r,n){t.privSetTimeout(r,e)}))},e.prototype.writeBufferToConsole=function(e){var t="Buffer Size: ";if(null===e)t+="null";else{var r=new Uint8Array(e);t+=e.byteLength+"\r\n";for(var n=0;n<e.byteLength;n++)t+=r[n].toString(16).padStart(2,"0")+" "}console.info(t)},e.prototype.sendFinalAudio=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.fetchConnection()];case 1:return[4,e.sent().send(new u.SpeechConnectionMessage(s.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))];case 2:return e.sent(),[2]}}))}))},e.prototype.configureConnection=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.connectImpl()];case 1:return e=t.sent(),void 0!==this.configConnectionOverride?[2,this.configConnectionOverride(e)]:[4,this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize())];case 2:return t.sent(),[4,this.sendPrePayloadJSON(e)];case 3:return t.sent(),[2,e]}}))}))},e.telemetryDataEnabled=!0,e}();t.ServiceRecognizerBase=p},32083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceTelemetryListener=void 0;var n=r(51564),i=r(13301),o=function(){function e(e,t,r){var o=this;this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.onEvent=function(e){o.privIsDisposed||(e instanceof i.RecognitionTriggeredEvent&&e.requestId===o.privRequestId&&(o.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof n.AudioStreamNodeAttachingEvent&&e.audioSourceId===o.privAudioSourceId&&e.audioNodeId===o.privAudioNodeId&&(o.privMicStartTime=e.eventTime),e instanceof n.AudioStreamNodeAttachedEvent&&e.audioSourceId===o.privAudioSourceId&&e.audioNodeId===o.privAudioNodeId&&(o.privMicStartTime=e.eventTime),e instanceof n.AudioSourceErrorEvent&&e.audioSourceId===o.privAudioSourceId&&(o.privMicMetric||(o.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:o.privMicStartTime})),e instanceof n.AudioStreamNodeErrorEvent&&e.audioSourceId===o.privAudioSourceId&&e.audioNodeId===o.privAudioNodeId&&(o.privMicMetric||(o.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:o.privMicStartTime})),e instanceof n.AudioStreamNodeDetachedEvent&&e.audioSourceId===o.privAudioSourceId&&e.audioNodeId===o.privAudioNodeId&&(o.privMicMetric||(o.privMicMetric={End:e.eventTime,Name:"Microphone",Start:o.privMicStartTime})),e instanceof i.ConnectingToServiceEvent&&e.requestId===o.privRequestId&&(o.privConnectionId=e.sessionId),e instanceof n.ConnectionStartEvent&&e.connectionId===o.privConnectionId&&(o.privConnectionStartTime=e.eventTime),e instanceof n.ConnectionEstablishedEvent&&e.connectionId===o.privConnectionId&&(o.privConnectionEstablishMetric||(o.privConnectionEstablishMetric={End:e.eventTime,Id:o.privConnectionId,Name:"Connection",Start:o.privConnectionStartTime})),e instanceof n.ConnectionEstablishErrorEvent&&e.connectionId===o.privConnectionId&&(o.privConnectionEstablishMetric||(o.privConnectionEstablishMetric={End:e.eventTime,Error:o.getConnectionError(e.statusCode),Id:o.privConnectionId,Name:"Connection",Start:o.privConnectionStartTime})),e instanceof n.ConnectionMessageReceivedEvent&&e.connectionId===o.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(o.privReceivedMessages[e.message.headers.path]||(o.privReceivedMessages[e.message.headers.path]=new Array),o.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))},this.getTelemetry=function(){var e=new Array;o.privListeningTriggerMetric&&e.push(o.privListeningTriggerMetric),o.privMicMetric&&e.push(o.privMicMetric),o.privConnectionEstablishMetric&&e.push(o.privConnectionEstablishMetric),o.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:o.privPhraseLatencies}),o.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:o.privHypothesisLatencies});var t={Metrics:e,ReceivedMessages:o.privReceivedMessages},r=JSON.stringify(t);return o.privReceivedMessages={},o.privListeningTriggerMetric=null,o.privMicMetric=null,o.privConnectionEstablishMetric=null,o.privPhraseLatencies=[],o.privHypothesisLatencies=[],r},this.dispose=function(){o.privIsDisposed=!0},this.getConnectionError=function(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}return e.prototype.phraseReceived=function(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)},e.prototype.hypothesisReceived=function(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)},Object.defineProperty(e.prototype,"hasTelemetry",{get:function(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length},enumerable:!1,configurable:!0}),e}();t.ServiceTelemetryListener=o},36271:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerIdMessageAdapter=void 0;var o=r(73442),s=r(36514),a=function(){function e(e){var t=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!t){var r=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,"westus"),n=r&&r.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";t=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"https://"+r+".api.cognitive"+n+"/speaker/{mode}/v2.0/{dependency}")+"/profiles"}this.privUri=t;var i=o.RestConfigBase.requestOptions;i.headers[o.RestConfigBase.configParams.subscriptionKey]=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Key,void 0),this.privRestAdapter=new o.RestMessageAdapter(i)}return e.prototype.createProfile=function(e,t){var r=this.getOperationUri(e);return this.privRestAdapter.setHeaders(o.RestConfigBase.configParams.contentTypeKey,"application/json"),this.privRestAdapter.request(o.RestRequestType.Post,r,{},{locale:t})},e.prototype.createEnrollment=function(e,t){var r=this;this.privRestAdapter.setHeaders(o.RestConfigBase.configParams.contentTypeKey,"multipart/form-data");var n=this.getOperationUri(e.profileType)+"/"+e.profileId+"/enrollments";return t.blob.then((function(e){return r.privRestAdapter.request(o.RestRequestType.File,n,{ignoreMinLength:"true"},null,e)}))},e.prototype.verifySpeaker=function(e,t){return n(this,void 0,void 0,(function(){var r,n,s;return i(this,(function(i){switch(i.label){case 0:this.privRestAdapter.setHeaders(o.RestConfigBase.configParams.contentTypeKey,"multipart/form-data"),r=this.getOperationUri(e.voiceProfile.profileType)+"/"+e.voiceProfile.profileId+"/verify",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.blob];case 2:return n=i.sent(),[2,this.privRestAdapter.request(o.RestRequestType.File,r,{ignoreMinLength:"true"},null,n)];case 3:return s=i.sent(),[2,Promise.resolve({data:s})];case 4:return[2]}}))}))},e.prototype.identifySpeaker=function(e,t){return n(this,void 0,void 0,(function(){var r,n,a;return i(this,(function(i){switch(i.label){case 0:this.privRestAdapter.setHeaders(o.RestConfigBase.configParams.contentTypeKey,"multipart/form-data"),r=this.getOperationUri(s.VoiceProfileType.TextIndependentIdentification)+"/identifySingleSpeaker",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.blob];case 2:return n=i.sent(),[2,this.privRestAdapter.request(o.RestRequestType.File,r,{profileIds:e.voiceProfileIds,ignoreMinLength:"true"},null,n)];case 3:return a=i.sent(),[2,Promise.resolve({data:a})];case 4:return[2]}}))}))},e.prototype.getProfileStatus=function(e){var t=this.getOperationUri(e.profileType)+"/"+e.profileId;return this.privRestAdapter.request(o.RestRequestType.Get,t,{})},e.prototype.getProfiles=function(e){var t=this.getOperationUri(e);return this.privRestAdapter.request(o.RestRequestType.Get,t,{})},e.prototype.getAuthorizationPhrases=function(e){var t=(""+this.getOperationUri(s.VoiceProfileType.TextDependentVerification)).replace("profiles","phrases")+"/"+e;return this.privRestAdapter.request(o.RestRequestType.Get,t,{})},e.prototype.deleteProfile=function(e){var t=this.getOperationUri(e.profileType)+"/"+e.profileId;return this.privRestAdapter.request(o.RestRequestType.Delete,t,{})},e.prototype.resetProfile=function(e){var t=this.getOperationUri(e.profileType)+"/"+e.profileId+"/reset";return this.privRestAdapter.request(o.RestRequestType.Post,t,{})},e.prototype.getOperationUri=function(e){var t=e===s.VoiceProfileType.TextIndependentIdentification?"identification":"verification",r=e===s.VoiceProfileType.TextDependentVerification?"text-dependent":"text-independent";return this.privUri.replace("{mode}",t).replace("{dependency}",r)},e}();t.SpeakerIdMessageAdapter=a},35190:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionConfig=void 0;var n=r(80194),i=function(){function e(e,t){this.privContext=e||new n.Context(null),this.privParameters=t}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Context",{get:function(){return this.privContext},enumerable:!1,configurable:!0}),e}();t.SpeakerRecognitionConfig=i},96357:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionFactory=void 0;var o=r(73442),s=r(80194),a=r(36514),c=r(82753),u=r(80194),p=r(97923),h=r(51652),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",t.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",t.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",t.create=function(e,r,n){var i=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint,void 0),c=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Region,void 0),l=c&&c.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",v=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Host,"wss://"+c+".stt.speech"+l),d={},f=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?i&&-1!==i.search(h.QueryParameterNames.CustomSpeechDeploymentId)||(d[h.QueryParameterNames.CustomSpeechDeploymentId]=f):g&&(i&&-1!==i.search(h.QueryParameterNames.Language)||(d[h.QueryParameterNames.Language]=g)),i&&-1!==i.search(h.QueryParameterNames.Format)||(d[h.QueryParameterNames.Format]=e.parameters.getProperty(s.OutputFormatPropertyName,a.OutputFormat[a.OutputFormat.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(d[h.QueryParameterNames.EnableLanguageId]="true"),t.setCommonUrlParams(e,d,i),!i)switch(e.recognitionMode){case u.RecognitionMode.Conversation:i="true"===e.parameters.getProperty(s.ForceDictationPropertyName,"false")?v+t.dictationRelativeUri:v+t.conversationRelativeUri;break;case u.RecognitionMode.Dictation:i=v+t.dictationRelativeUri;break;default:i=v+t.interactiveRelativeUri}var y={};void 0!==r.token&&""!==r.token&&(y[r.headerName]=r.token),y[p.HeaderNames.ConnectionId]=n,e.parameters.setProperty(a.PropertyId.SpeechServiceConnection_Url,i);var m="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(i,d,y,new u.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),m,n)},t}return i(t,e),t}(c.ConnectionFactoryBase);t.SpeechConnectionFactory=l},14703:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionMessage=void 0;var o=r(51564),s=r(97923),a=function(e){function t(t,r,n,i,a,c,u,p){var h=this;if(!r)throw new o.ArgumentNullError("path");if(!n)throw new o.ArgumentNullError("requestId");var l={};if(l[s.HeaderNames.Path]=r,l[s.HeaderNames.RequestId]=n,l[s.HeaderNames.RequestTimestamp]=(new Date).toISOString(),i&&(l[s.HeaderNames.ContentType]=i),c&&(l[s.HeaderNames.RequestStreamId]=c),u)for(var v in u)v&&(l[v]=u[v]);return(h=p?e.call(this,t,a,l,p)||this:e.call(this,t,a,l)||this).privPath=r,h.privRequestId=n,h.privContentType=i,h.privStreamId=c,h.privAdditionalHeaders=u,h}return i(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return this.privPath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentType",{get:function(){return this.privContentType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"streamId",{get:function(){return this.privStreamId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"additionalHeaders",{get:function(){return this.privAdditionalHeaders},enumerable:!1,configurable:!0}),t.fromConnectionMessage=function(e){var r=null,n=null,i=null,o=null,a={};if(e.headers)for(var c in e.headers)c&&(c.toLowerCase()===s.HeaderNames.Path.toLowerCase()?r=e.headers[c]:c.toLowerCase()===s.HeaderNames.RequestId.toLowerCase()?n=e.headers[c]:c.toLowerCase()===s.HeaderNames.RequestTimestamp.toLowerCase()?e.headers[c]:c.toLowerCase()===s.HeaderNames.ContentType.toLowerCase()?i=e.headers[c]:c.toLowerCase()===s.HeaderNames.RequestStreamId.toLowerCase()?o=e.headers[c]:a[c]=e.headers[c]);return new t(e.messageType,r,n,i,e.body,o,a,e.id)},t}(o.ConnectionMessage);t.SpeechConnectionMessage=a},15026:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechContext=void 0;var r=function(){function e(e){this.privContext={},this.privDynamicGrammar=e}return e.prototype.setSection=function(e,t){this.privContext[e]=t},e.prototype.setPronunciationAssessmentParams=function(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")},e.prototype.toJSON=function(){var e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)},e}();t.SpeechContext=r},96834:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1341:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechServiceRecognizer=void 0;var a=r(36514),c=r(80194),u=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;if(s.privSpeechRecognizer=o,void 0!==i.autoDetectSourceLanguages){var a=i.autoDetectSourceLanguages.split(",");s.privSpeechContext.setSection("languageId",{languages:a,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),s.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}})}return s}return i(t,e),t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,u,p,h,l,v,d;return s(this,(function(s){switch(s.label){case 0:switch((r=new a.PropertyCollection).setProperty(a.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),n=!1,e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":return[3,1];case"speech.phrase":return[3,2]}return[3,6];case 1:if(i=c.SpeechHypothesis.fromJSON(e.textBody),o=i.Offset+this.privRequestSession.currentTurnAudioOffset,t=new a.SpeechRecognitionResult(this.privRequestSession.requestId,a.ResultReason.RecognizingSpeech,i.Text,i.Duration,o,i.Language,i.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(o),u=new a.SpeechRecognitionEventArgs(t,i.Duration,this.privRequestSession.sessionId),this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,u)}catch(e){}return n=!0,[3,7];case 2:return p=c.SimpleSpeechPhrase.fromJSON(e.textBody),h=c.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),a.ResultReason.Canceled!==h?[3,4]:(l=c.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),[4,this.cancelRecognitionLocal(l,c.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus),void 0)]);case 3:return s.sent(),[3,5];case 4:if((!this.privRequestSession.isSpeechEnded||h!==a.ResultReason.NoMatch||p.RecognitionStatus===c.RecognitionStatus.InitialSilenceTimeout)&&(this.privRecognizerConfig.parameters.getProperty(c.OutputFormatPropertyName)===a.OutputFormat[a.OutputFormat.Simple]?t=new a.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,e.textBody,r):(v=c.DetailedSpeechPhrase.fromJSON(e.textBody),t=new a.SpeechRecognitionResult(this.privRequestSession.requestId,h,v.RecognitionStatus===c.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,v.Offset+this.privRequestSession.currentTurnAudioOffset,v.Language,v.LanguageDetectionConfidence,void 0,void 0,e.textBody,r)),d=new a.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),this.privSpeechRecognizer.recognized))try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,d)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}s.label=5;case 5:return n=!0,[3,7];case 6:return[3,7];case 7:return[2,n]}}))}))},t.prototype.cancelRecognition=function(e,t,r,n,i){var o=new a.PropertyCollection;if(o.setProperty(c.CancellationErrorCodePropertyName,a.CancellationErrorCode[n]),this.privSpeechRecognizer.canceled){var s=new a.SpeechRecognitionCanceledEventArgs(r,i,n,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,s)}catch(e){}}if(this.privSuccessCallback){var u=new a.SpeechRecognitionResult(t,a.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(u),this.privSuccessCallback=void 0}catch(e){}}},t}(c.ServiceRecognizerBase);t.SpeechServiceRecognizer=u},35469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisConnectionFactory=void 0;var n=r(73442),i=r(36514),o=r(80194),s=r(97923),a=r(51652);t.SpeechSynthesisConnectionFactory=function(){var e=this;this.synthesisUri="/cognitiveservices/websocket/v1",this.create=function(t,r,c){var u=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0),p=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),h=p&&p.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",l=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=void 0===l?"tts":"voice",d=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+p+"."+v+".speech"+h);u||(u=d+e.synthesisUri);var f={};void 0!==r.token&&""!==r.token&&(f[r.headerName]=r.token),f[s.HeaderNames.ConnectionId]=c,void 0!==l&&(f[a.QueryParameterNames.CustomVoiceDeploymentId]=l),t.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,u);var g="true"===t.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new n.WebsocketConnection(u,{},f,new o.WebsocketMessageFormatter,n.ProxyInfo.fromParameters(t.parameters),g,c)}}},95668:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAdapterBase=void 0;var o=r(51564),s=r(36514),a=r(80194),c=r(14703),u=function(){function e(e,t,r,n,i){var u=this;if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSynthesisContext=function(e){var t=u.synthesisContext.toJSON();if(t)return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"synthesis.context",u.privSynthesisTurn.requestId,"application/json",t))},this.sendSpeechServiceConfig=function(e,t){if(t)return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"speech.config",u.privSynthesisTurn.requestId,"application/json",t))},this.sendSsmlMessage=function(e,t,r){return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"ssml",r,"application/ssml+xml",t))},!e)throw new o.ArgumentNullError("authentication");if(!t)throw new o.ArgumentNullError("connectionFactory");if(!r)throw new o.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=r,this.privIsDisposed=!1,this.privSpeechSynthesizer=n,this.privSessionAudioDestination=i,this.privSynthesisTurn=new a.SynthesisTurn,this.privConnectionEvents=new o.EventSource,this.privServiceEvents=new o.EventSource,this.privSynthesisContext=new a.SynthesisContext(this.privSpeechSynthesizer),this.privAgentConfig=new a.AgentConfig,this.connectionEvents.attach((function(e){if("ConnectionClosedEvent"===e.name){var t=e;1e3!==t.statusCode&&u.cancelSynthesisLocal(s.CancellationReason.Error,1007===t.statusCode?s.CancellationErrorCode.BadRequestParameters:s.CancellationErrorCode.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)}}))}return Object.defineProperty(e.prototype,"synthesisContext",{get:function(){return this.privSynthesisContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionEvents",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serviceEvents",{get:function(){return this.privServiceEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activityTemplate",{get:function(){return this.privActivityTemplate},set:function(e){this.privActivityTemplate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioOutputFormat",{set:function(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)},enumerable:!1,configurable:!0}),e.addHeader=function(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);var r=new Uint8Array(e.byteLength+t.header.byteLength);return r.set(new Uint8Array(t.header),0),r.set(new Uint8Array(e),t.header.byteLength),r.buffer},e.prototype.isDisposed=function(){return this.privIsDisposed},e.prototype.dispose=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise?[4,this.privConnectionConfigurationPromise]:[3,3];case 1:return[4,t.sent().dispose(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.connect=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.connectImpl()];case 1:return e.sent(),[2]}}))}))},e.prototype.sendNetworkMessage=function(e,t){return n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return r="string"==typeof t?o.MessageType.Text:o.MessageType.Binary,n="string"==typeof t?"application/json":"",[4,this.fetchConnection()];case 1:return[2,i.sent().send(new c.SpeechConnectionMessage(r,e,this.privSynthesisTurn.requestId,n,t))]}}))}))},e.prototype.Speak=function(e,t,r,o,a,c){return n(this,void 0,void 0,(function(){var n,u,p,h;return i(this,(function(i){switch(i.label){case 0:if(n=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return[2,this.speakOverride(n,r,o,a)];this.privSuccessCallback=o,this.privErrorCallback=a,this.privSynthesisTurn.startNewSynthesis(r,e,t,c),i.label=1;case 1:return i.trys.push([1,6,,7]),[4,this.connectImpl()];case 2:return i.sent(),[4,this.fetchConnection()];case 3:return u=i.sent(),[4,this.sendSynthesisContext(u)];case 4:return i.sent(),[4,this.sendSsmlMessage(u,n,r)];case 5:return i.sent(),p=new s.SpeechSynthesisEventArgs(new s.SpeechSynthesisResult(r,s.ResultReason.SynthesizingAudioStarted)),this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,p),this.receiveMessage(),[3,7];case 6:return h=i.sent(),this.cancelSynthesisLocal(s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,h),[2,Promise.reject(h)];case 7:return[2]}}))}))},e.prototype.cancelSynthesis=function(e,t,r,n){var i=new s.PropertyCollection;i.setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[r]);var o=new s.SpeechSynthesisResult(e,s.ResultReason.Canceled,void 0,n,i);if(this.privSpeechSynthesizer.SynthesisCanceled){var c=new s.SpeechSynthesisEventArgs(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,c)}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(o)}catch(e){}},e.prototype.cancelSynthesisLocal=function(e,t,r){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,r))},e.prototype.processTypeSpecificMessages=function(e,t,r){return!0},e.prototype.receiveMessage=function(){return n(this,void 0,void 0,(function(){var t,r,n,u,p,h,l,v,d,f,g,y,m,S;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,14,,15]),[4,this.fetchConnection()];case 1:return[4,i.sent().read()];case 2:if(t=i.sent(),void 0!==this.receiveMessageOverride)return[2,this.receiveMessageOverride()];if(this.privIsDisposed)return[2];if(!t)return this.privSynthesisTurn.isSynthesizing?[2,this.receiveMessage()]:[2];if(this.privServiceHasSentMessage=!0,(r=c.SpeechConnectionMessage.fromConnectionMessage(t)).requestId.toLowerCase()!==this.privSynthesisTurn.requestId.toLowerCase())return[3,13];switch(r.path.toLowerCase()){case"turn.start":return[3,3];case"response":return[3,4];case"audio":return[3,5];case"audio.metadata":return[3,6];case"turn.end":return[3,7]}return[3,12];case 3:return this.privSynthesisTurn.onServiceTurnStartResponse(),[3,13];case 4:return this.privSynthesisTurn.onServiceResponseMessage(r.textBody),[3,13];case 5:if(this.privSynthesisTurn.streamId.toLowerCase()===r.streamId.toLowerCase()&&r.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(r.binaryBody),this.privSpeechSynthesizer.synthesizing)try{n=e.addHeader(r.binaryBody,this.privSynthesisTurn.audioOutputFormat),u=new s.SpeechSynthesisEventArgs(new s.SpeechSynthesisResult(this.privSynthesisTurn.requestId,s.ResultReason.SynthesizingAudio,n)),this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,u)}catch(e){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(r.binaryBody)}return[3,13];case 6:for(p=a.SynthesisAudioMetadata.fromJSON(r.textBody).Metadata,h=0,l=p;h<l.length;h++)switch((v=l[h]).Type){case a.MetadataType.WordBoundary:if(this.privSynthesisTurn.onWordBoundaryEvent(v.Data.text.Text),d=new s.SpeechSynthesisWordBoundaryEventArgs(v.Data.Offset,v.Data.text.Text,v.Data.text.Length,this.privSynthesisTurn.currentTextOffset),this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,d)}catch(e){}break;case a.MetadataType.Bookmark:if(f=new s.SpeechSynthesisBookmarkEventArgs(v.Data.Offset,v.Data.Bookmark),this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,f)}catch(e){}break;case a.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(v),v.Data.IsLastAnimation&&(g=new s.SpeechSynthesisVisemeEventArgs(v.Data.Offset,v.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation()),this.privSpeechSynthesizer.visemeReceived))try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,g)}catch(e){}}return[3,13];case 7:this.privSynthesisTurn.onServiceTurnEndResponse(),y=void 0,i.label=8;case 8:return i.trys.push([8,10,,11]),[4,this.privSynthesisTurn.getAllReceivedAudioWithHeader()];case 9:return m=i.sent(),y=new s.SpeechSynthesisResult(this.privSynthesisTurn.requestId,s.ResultReason.SynthesizingAudioCompleted,m),this.privSuccessCallback&&this.privSuccessCallback(y),[3,11];case 10:return S=i.sent(),this.privErrorCallback&&this.privErrorCallback(S),[3,11];case 11:if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new s.SpeechSynthesisEventArgs(y))}catch(e){}return[3,13];case 12:this.processTypeSpecificMessages(r)||this.privServiceEvents&&this.serviceEvents.onEvent(new o.ServiceEvent(r.path.toLowerCase(),r.textBody)),i.label=13;case 13:return[2,this.receiveMessage()];case 14:return i.sent(),[3,15];case 15:return[2]}}))}))},e.prototype.connectImpl=function(e){var t=this;if(void 0===e&&(e=!1),this.privConnectionPromise)return this.privConnectionPromise.then((function(e){return e.state()===o.ConnectionState.Disconnected?(t.privConnectionId=null,t.privConnectionPromise=null,t.privServiceHasSentMessage=!1,t.connectImpl()):t.privConnectionPromise}),(function(e){return t.privConnectionId=null,t.privConnectionPromise=null,t.privServiceHasSentMessage=!1,t.connectImpl()}));this.privAuthFetchEventId=o.createNoDashGuid(),this.privConnectionId=o.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);var r=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=r.then((function(r){return n(t,void 0,void 0,(function(){var t,n,o=this;return i(this,(function(i){switch(i.label){case 0:return[4,this.privSynthesisTurn.onAuthCompleted(!1)];case 1:return i.sent(),(t=this.privConnectionFactory.create(this.privSynthesizerConfig,r,this.privConnectionId)).events.attach((function(e){o.connectionEvents.onEvent(e)})),[4,t.open()];case 2:return 200!==(n=i.sent()).statusCode?[3,4]:[4,this.privSynthesisTurn.onConnectionEstablishCompleted(n.statusCode)];case 3:return i.sent(),[2,Promise.resolve(t)];case 4:return 403!==n.statusCode||e?[3,5]:[2,this.connectImpl(!0)];case 5:return[4,this.privSynthesisTurn.onConnectionEstablishCompleted(n.statusCode,n.reason)];case 6:return i.sent(),[2,Promise.reject("Unable to contact server. StatusCode: "+n.statusCode+", "+this.privSynthesizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint)+" Reason: "+n.reason)]}}))}))}),(function(e){return n(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.privSynthesisTurn.onAuthCompleted(!0,e)];case 1:throw t.sent(),new Error(e)}}))}))})),this.privConnectionPromise.catch((function(){})),this.privConnectionPromise},e.prototype.fetchConnection=function(){return n(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){switch(t.label){case 0:return this.privConnectionConfigurationPromise?[2,this.privConnectionConfigurationPromise.then((function(t){return t.state()===o.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigurationPromise=null,e.privServiceHasSentMessage=!1,e.fetchConnection()):e.privConnectionConfigurationPromise}),(function(t){return e.privConnectionId=null,e.privConnectionConfigurationPromise=null,e.privServiceHasSentMessage=!1,e.fetchConnection()}))]:(this.privConnectionConfigurationPromise=this.configureConnection(),[4,this.privConnectionConfigurationPromise]);case 1:return[2,t.sent()]}}))}))},e.prototype.configureConnection=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.connectImpl()];case 1:return e=t.sent(),void 0!==this.configConnectionOverride?[2,this.configConnectionOverride(e)]:[4,this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize())];case 2:return t.sent(),[2,e]}}))}))},e.telemetryDataEnabled=!0,e}();t.SynthesisAdapterBase=u},81661:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisContext=void 0;var r=function(){function e(e){this.privContext={},this.privSpeechSynthesizer=e}return e.prototype.setSection=function(e,t){this.privContext[e]=t},Object.defineProperty(e.prototype,"audioOutputFormat",{set:function(e){this.privAudioOutputFormat=e},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)},e.prototype.buildSynthesisContext=function(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,sentenceBoundaryEnabled:!1,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:!!this.privSpeechSynthesizer.wordBoundary},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}},e}();t.SynthesisContext=r},97497:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisStartedEvent=t.ConnectingToSynthesisServiceEvent=t.SynthesisTriggeredEvent=t.SpeechSynthesisEvent=void 0;var o=r(51564),s=function(e){function t(t,r,n){void 0===n&&(n=o.EventType.Info);var i=e.call(this,t,n)||this;return i.privRequestId=r,i}return i(t,e),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.SpeechSynthesisEvent=s;var a=function(e){function t(t,r,n){var i=e.call(this,"SynthesisTriggeredEvent",t)||this;return i.privSessionAudioDestinationId=r,i.privTurnAudioDestinationId=n,i}return i(t,e),Object.defineProperty(t.prototype,"audioSessionDestinationId",{get:function(){return this.privSessionAudioDestinationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioTurnDestinationId",{get:function(){return this.privTurnAudioDestinationId},enumerable:!1,configurable:!0}),t}(s);t.SynthesisTriggeredEvent=a;var c=function(e){function t(t,r){var n=e.call(this,"ConnectingToSynthesisServiceEvent",t)||this;return n.privAuthFetchEventId=r,n}return i(t,e),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(s);t.ConnectingToSynthesisServiceEvent=c;var u=function(e){function t(t,r){var n=e.call(this,"SynthesisStartedEvent",t)||this;return n.privAuthFetchEventId=r,n}return i(t,e),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(s);t.SynthesisStartedEvent=u},11194:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisTurn=void 0;var o=r(51564),s=r(7904),a=r(95668),c=r(97497),u=function(){function e(){var e=this;this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.onPreConnectionStart=function(t,r){e.privAuthFetchEventId=t,e.onEvent(new c.ConnectingToSynthesisServiceEvent(e.privRequestId,e.privAuthFetchEventId))},this.onAuthCompleted=function(t,r){t&&e.onComplete()},this.onConnectionEstablishCompleted=function(t,r){if(200===t)return e.onEvent(new c.SynthesisStartedEvent(e.requestId,e.privAuthFetchEventId)),void(e.privBytesReceived=0);403===t&&e.onComplete()},this.onServiceResponseMessage=function(t){var r=JSON.parse(t);e.streamId=r.audio.streamId},this.onServiceTurnEndResponse=function(){e.privInTurn=!1,e.privTurnDeferral.resolve(),e.onComplete()},this.onServiceTurnStartResponse=function(){e.privTurnDeferral&&e.privInTurn&&(e.privTurnDeferral.reject("Another turn started before current completed."),e.privTurnDeferral.promise.then().catch((function(){}))),e.privInTurn=!0,e.privTurnDeferral=new o.Deferred},this.dispose=function(t){e.privIsDisposed||(e.privIsDisposed=!0)},this.onEvent=function(e){o.Events.instance.onEvent(e)},this.onComplete=function(){e.privIsSynthesizing&&(e.privIsSynthesizing=!1,e.privIsSynthesisEnded=!0,e.privAudioOutputStream.close(),e.privInTurn=!1,void 0!==e.privTurnAudioDestination&&(e.privTurnAudioDestination.close(),e.privTurnAudioDestination=void 0))},this.privRequestId=o.createNoDashGuid(),this.privTurnDeferral=new o.Deferred,this.privTurnDeferral.resolve()}return Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamId",{get:function(){return this.privStreamId},set:function(e){this.privStreamId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioOutputFormat",{get:function(){return this.privAudioOutputFormat},set:function(e){this.privAudioOutputFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"turnCompletionPromise",{get:function(){return this.privTurnDeferral.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSynthesisEnded",{get:function(){return this.privIsSynthesisEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSynthesizing",{get:function(){return this.privIsSynthesizing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTextOffset",{get:function(){return this.privTextOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesReceived",{get:function(){return this.privBytesReceived},enumerable:!1,configurable:!0}),e.prototype.getAllReceivedAudio=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.privReceivedAudio?[2,Promise.resolve(this.privReceivedAudio)]:this.privIsSynthesisEnded?[4,this.readAllAudioFromStream()]:[2,null];case 1:return e.sent(),[2,Promise.resolve(this.privReceivedAudio)]}}))}))},e.prototype.getAllReceivedAudioWithHeader=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return this.privReceivedAudioWithHeader?[2,this.privReceivedAudioWithHeader]:this.privIsSynthesisEnded?this.audioOutputFormat.hasHeader?[4,this.getAllReceivedAudio()]:[3,2]:[2,null];case 1:return e=t.sent(),this.privReceivedAudioWithHeader=a.SynthesisAdapterBase.addHeader(e,this.audioOutputFormat),[2,this.privReceivedAudioWithHeader];case 2:return[2,this.getAllReceivedAudio()]}}))}))},e.prototype.startNewSynthesis=function(e,t,r,n){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=r,this.privAudioOutputStream=new s.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privPartialVisemeAnimation="",void 0!==n&&(this.privTurnAudioDestination=n,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new c.SynthesisTriggeredEvent(this.requestId,void 0,void 0===n?void 0:n.id()))},e.prototype.onAudioChunkReceived=function(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))},e.prototype.onWordBoundaryEvent=function(e){this.updateTextOffset(e)},e.prototype.onVisemeMetadataReceived=function(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)},e.prototype.onStopSynthesizing=function(){this.onComplete()},e.prototype.getAndClearVisemeAnimation=function(){var e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e},e.prototype.updateTextOffset=function(e){this.privTextOffset>=0&&(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length),this.privIsSSML&&this.privRawText.indexOf("<",this.privTextOffset+1)>this.privRawText.indexOf(">",this.privTextOffset+1)&&this.updateTextOffset(e))},e.prototype.readAllAudioFromStream=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:if(!this.privIsSynthesisEnded)return[3,4];this.privReceivedAudio=new ArrayBuffer(this.bytesReceived),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.privAudioOutputStream.read(this.privReceivedAudio)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.privReceivedAudio=new ArrayBuffer(0),[3,4];case 4:return[2]}}))}))},e}();t.SynthesisTurn=u},88043:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;var n,i=r(80194);!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(n=t.SynthesisServiceType||(t.SynthesisServiceType={}));var o=function(){function e(e,t){this.privSynthesisServiceType=n.Standard,this.privSpeechServiceConfig=e||new i.SpeechServiceConfig(new i.Context(null)),this.privParameters=t}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"synthesisServiceType",{get:function(){return this.privSynthesisServiceType},set:function(e){this.privSynthesisServiceType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeechServiceConfig",{get:function(){return this.privSpeechServiceConfig},enumerable:!1,configurable:!0}),e}();t.SynthesizerConfig=o},86503:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberConnectionFactory=void 0;var o=r(73442),s=r(36514),a=r(82753),c=r(80194),u=r(97923),p=r(51652),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.multiaudioRelativeUri="/speech/recognition/multiaudio",t.create=function(e,r,n){var i=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0),a=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,"centralus"),h=a&&a.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",l="wss://transcribe."+a+".cts.speech"+h+t.multiaudioRelativeUri,v=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,l),d={},f=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f?i&&-1!==i.search(p.QueryParameterNames.CustomSpeechDeploymentId)||(d[p.QueryParameterNames.CustomSpeechDeploymentId]=f):g&&(i&&-1!==i.search(p.QueryParameterNames.Language)||(d[p.QueryParameterNames.Language]=g)),t.setCommonUrlParams(e,d,i),i||(i=v);var y={};void 0!==r.token&&""!==r.token&&(y[r.headerName]=r.token),y[u.HeaderNames.ConnectionId]=n,e.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,i);var m="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(i,d,y,new c.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),m,n)},t}return i(t,e),t}(a.ConnectionFactoryBase);t.TranscriberConnectionFactory=h},13068:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionConfig=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"host",{get:function(){return t.privHost},enumerable:!1,configurable:!0}),Object.defineProperty(t,"apiVersion",{get:function(){return t.privApiVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t,"clientAppId",{get:function(){return t.privClientAppId},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultLanguageCode",{get:function(){return t.privDefaultLanguageCode},enumerable:!1,configurable:!0}),Object.defineProperty(t,"restPath",{get:function(){return t.privRestPath},enumerable:!1,configurable:!0}),Object.defineProperty(t,"webSocketPath",{get:function(){return t.privWebSocketPath},enumerable:!1,configurable:!0}),Object.defineProperty(t,"speechHost",{get:function(){return t.privSpeechHost},enumerable:!1,configurable:!0}),Object.defineProperty(t,"speechPath",{get:function(){return t.privSpeechPath},enumerable:!1,configurable:!0}),Object.defineProperty(t,"transcriptionEventKeys",{get:function(){return t.privTranscriptionEventKeys},enumerable:!1,configurable:!0}),t.privHost="dev.microsofttranslator.com",t.privRestPath="/capito/room",t.privApiVersion="2.0",t.privDefaultLanguageCode="en-US",t.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",t.privWebSocketPath="/capito/translate",t.privSpeechHost="{region}.s2s.speech.microsoft.com",t.privSpeechPath="/speech/translation/cognitiveservices/v1",t.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferenciateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],t}(r(82445).RestConfigBase);t.ConversationConnectionConfig=o},91804:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionFactory=void 0;var o=r(73442),s=r(51564),a=r(61316),c=r(36514),u=r(82753),p=r(13068),h=r(77820),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.create=function(e,t,r){var n=e.parameters.getProperty(c.PropertyId.ConversationTranslator_Host,p.ConversationConnectionConfig.host),i=e.parameters.getProperty(c.PropertyId.ConversationTranslator_CorrelationId,s.createGuid()),u="wss://"+n+p.ConversationConnectionConfig.webSocketPath,l=e.parameters.getProperty(c.PropertyId.ConversationTranslator_Token,void 0);a.Contracts.throwIfNullOrUndefined(l,"token");var v={};v[p.ConversationConnectionConfig.configParams.apiVersion]=p.ConversationConnectionConfig.apiVersion,v[p.ConversationConnectionConfig.configParams.token]=l,v[p.ConversationConnectionConfig.configParams.correlationId]=i;var d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(u,v,{},new h.ConversationWebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),d,r)},t}(u.ConnectionFactoryBase);t.ConversationConnectionFactory=l},2779:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionMessage=void 0;var o=function(e){function t(t,r,n,i){var o=e.call(this,t,r,n,i)||this,s=JSON.parse(o.textBody);return void 0!==s.type&&(o.privConversationMessageType=s.type),o}return i(t,e),Object.defineProperty(t.prototype,"conversationMessageType",{get:function(){return this.privConversationMessageType},enumerable:!1,configurable:!0}),t}(r(51564).ConnectionMessage);t.ConversationConnectionMessage=o},28990:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationManager=void 0;var n=r(61316),i=r(36514),o=r(13068),s=r(39594),a=function(){function e(){this.privRequestParams=o.ConversationConnectionConfig.configParams,this.privErrors=o.ConversationConnectionConfig.restErrors,this.privHost=o.ConversationConnectionConfig.host,this.privApiVersion=o.ConversationConnectionConfig.apiVersion,this.privRestPath=o.ConversationConnectionConfig.restPath}return e.prototype.createOrJoin=function(e,t,r,a){var c=this;try{n.Contracts.throwIfNullOrUndefined(e,"args");var u=e.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,o.ConversationConnectionConfig.defaultLanguageCode),p=e.getProperty(i.PropertyId.ConversationTranslator_Name),h=e.getProperty(i.PropertyId.ConversationTranslator_Host,this.privHost),l=e.getProperty(i.PropertyId.ConversationTranslator_CorrelationId),v=e.getProperty(i.PropertyId.SpeechServiceConnection_Key),d=e.getProperty(i.PropertyId.SpeechServiceConnection_Region),f=e.getProperty(i.PropertyId.SpeechServiceAuthorization_Token);n.Contracts.throwIfNullOrWhitespace(u,"languageCode"),n.Contracts.throwIfNullOrWhitespace(p,"nickname"),n.Contracts.throwIfNullOrWhitespace(h,"endpointHost");var g={};g[this.privRequestParams.apiVersion]=this.privApiVersion,g[this.privRequestParams.languageCode]=u,g[this.privRequestParams.nickname]=p;var y={};l&&(y[this.privRequestParams.correlationId]=l),y[this.privRequestParams.clientAppId]=o.ConversationConnectionConfig.clientAppId,void 0!==t?g[this.privRequestParams.roomId]=t:(n.Contracts.throwIfNullOrUndefined(d,this.privErrors.authInvalidSubscriptionRegion),y[this.privRequestParams.subscriptionRegion]=d,v?y[this.privRequestParams.subscriptionKey]=v:f?y[this.privRequestParams.authorization]="Bearer "+f:n.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionKey));var m={};m.headers=y;var S="https://"+h+this.privRestPath;s.request("post",S,g,null,m,(function(e){var t=s.extractHeaderValue(c.privRequestParams.requestId,e.headers);if(e.ok){var n=JSON.parse(e.data);if(n&&(n.requestId=t),r){try{r(n)}catch(e){a&&a(e)}r=void 0}}else if(a){var i=c.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString()),o=void 0;try{i+=" ["+(o=JSON.parse(e.data)).error.code+": "+o.error.message+"]"}catch(t){i+=" ["+e.data+"]"}t&&(i+=" "+t),a(i)}}))}catch(e){if(a)if(e instanceof Error){var b=e;a(b.name+": "+b.message)}else a(e)}},e.prototype.leave=function(e,t){var r=this;return new Promise((function(o,a){try{n.Contracts.throwIfNullOrUndefined(e,r.privErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrWhitespace(t,r.privErrors.invalidArgs.replace("{arg}","token"));var c=e.getProperty(i.PropertyId.ConversationTranslator_Host,r.privHost),u=e.getProperty(i.PropertyId.ConversationTranslator_CorrelationId),p={};p[r.privRequestParams.apiVersion]=r.privApiVersion,p[r.privRequestParams.sessionToken]=t;var h={};u&&(h[r.privRequestParams.correlationId]=u);var l={};l.headers=h;var v="https://"+c+r.privRestPath;s.request("delete",v,p,null,l,(function(e){e.ok,o()}))}catch(e){if(e instanceof Error){var d=e;a(d.name+": "+d.message)}else a(e)}}))},e}();t.ConversationManager=a},53521:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationRequestSession=void 0;var o=r(51564),s=function(){function e(e){var t=this;this.privIsDisposed=!1,this.privDetachables=new Array,this.onPreConnectionStart=function(e,r){t.privSessionId=r},this.onAuthCompleted=function(e,r){e&&t.onComplete()},this.onConnectionEstablishCompleted=function(e,r){200!==e&&403===e&&t.onComplete()},this.onServiceTurnEndResponse=function(e){e?t.privRequestId=o.createNoDashGuid():t.onComplete()},this.onComplete=function(){},this.privSessionId=e,this.privRequestId=o.createNoDashGuid(),this.privRequestCompletionDeferral=new o.Deferred}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.privRequestCompletionDeferral.promise},enumerable:!1,configurable:!0}),e.prototype.dispose=function(e){return n(this,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:if(this.privIsDisposed)return[3,4];this.privIsDisposed=!0,e=0,t=this.privDetachables,r.label=1;case 1:return e<t.length?[4,t[e].detach()]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},e}();t.ConversationRequestSession=s},24378:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceAdapter=void 0;var a=r(51564),c=r(36514),u=r(80194),p=r(2779),h=r(53521),l=r(87182),v=r(39947),d=r(52900),f=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.privLastPartialUtteranceId="",s.noOp=function(){},s.privConversationServiceConnector=o,s.privConversationAuthentication=t,s.receiveMessageOverride=s.receiveConversationMessageOverride,s.recognizeOverride=s.noOp,s.postConnectImplOverride=s.conversationConnectImpl,s.configConnectionOverride=s.configConnection,s.disconnectOverride=s.privDisconnect,s.privConversationRequestSession=new h.ConversationRequestSession(a.createNoDashGuid()),s.privConversationConnectionFactory=r,s.privConversationIsDisposed=!1,s}return i(t,e),t.prototype.isDisposed=function(){return e.prototype.isDisposed.call(this)||this.privConversationIsDisposed},t.prototype.dispose=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return this.privConversationIsDisposed=!0,this.privConnectionConfigPromise?[4,this.privConnectionConfigPromise]:[3,3];case 1:return[4,r.sent().dispose(t)];case 2:r.sent(),r.label=3;case 3:return[4,e.prototype.dispose.call(this,t)];case 4:return r.sent(),[2]}}))}))},t.prototype.sendMessage=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.fetchConnection()];case 1:return[2,t.sent().send(new p.ConversationConnectionMessage(a.MessageType.Text,e))]}}))}))},t.prototype.sendMessageAsync=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return new a.Deferred,[4,this.fetchConnection()];case 1:return[4,t.sent().send(new p.ConversationConnectionMessage(a.MessageType.Text,e))];case 2:return t.sent(),[2]}}))}))},t.prototype.privDisconnect=function(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()},t.prototype.processTypeSpecificMessages=function(e,t,r){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,!0]}))}))},t.prototype.cancelRecognition=function(e,t,r,n,i){this.terminateMessageLoop=!0;var o=new c.ConversationTranslationCanceledEventArgs(r,i,n,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch(e){}},t.prototype.conversationConnectImpl=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){return this.privConnectionLoop=this.startMessageLoop(),[2,e]}))}))},t.prototype.receiveConversationMessageOverride=function(){return o(this,void 0,void 0,(function(){var e,t,r,n,i,o,u,p,h,f,g,y,m,S;return s(this,(function(s){switch(s.label){case 0:if(this.isDisposed()||this.terminateMessageLoop)return[2,Promise.resolve()];e=new a.Deferred,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,this.fetchConnection()];case 2:return[4,s.sent().read()];case 3:if(t=s.sent(),this.isDisposed()||this.terminateMessageLoop)return e.resolve(),[2,Promise.resolve()];if(!t)return[2,this.receiveConversationMessageOverride()];r=this.privConversationRequestSession.sessionId,n=!1;try{switch(t.conversationMessageType.toLowerCase()){case"info":case"participant_command":case"command":switch((i=d.CommandResponsePayload.fromJSON(t.textBody)).command.toLowerCase()){case"participantlist":o=d.ParticipantsListPayloadResponse.fromJSON(t.textBody),u=o.participants.map((function(e){return{avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale}})),this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new l.ParticipantsListEventArgs(o.roomid,o.token,o.translateTo,o.profanityFilter,o.roomProfanityFilter,o.roomLocked,o.muteAll,u,r));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(i.participantId,v.ConversationTranslatorCommandTypes.setTranslateToLanguages,i.value,r));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(i.participantId,v.ConversationTranslatorCommandTypes.setProfanityFiltering,i.value,r));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(i.participantId,v.ConversationTranslatorCommandTypes.setMute,i.value,r));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new l.MuteAllEventArgs(i.value,r));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new c.ConversationExpirationEventArgs(i.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(i.participantId,v.ConversationTranslatorCommandTypes.setUseTTS,i.value,r));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new l.LockRoomEventArgs(i.value,r));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new l.ParticipantAttributeEventArgs(i.participantId,v.ConversationTranslatorCommandTypes.changeNickname,i.nickname,r));break;case"joinsession":p=d.ParticipantPayloadResponse.fromJSON(t.textBody),h={avatar:p.avatar,displayName:p.nickname,id:p.participantId,isHost:p.ishost,isMuted:p.ismuted,isUsingTts:p.usetts,preferredLanguage:p.locale},this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new l.ParticipantEventArgs(h,r));break;case"leavesession":f={id:i.participantId},this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new l.ParticipantEventArgs(f,r));break;case"disconnectsession":i.participantId}break;case"partial":case"final":g=d.SpeechResponsePayload.fromJSON(t.textBody),y=new c.ConversationTranslationResult(g.participantId,this.getTranslations(g.translations),g.language,void 0,void 0,g.recognition,void 0,void 0,t.textBody,void 0),g.isFinal?((void 0!==y.text&&y.text.length>0||g.id===this.privLastPartialUtteranceId)&&(n=!0),n&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(v.ConversationTranslatorMessageTypes.final,y,r))):void 0!==y.text&&(this.privLastPartialUtteranceId=g.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(v.ConversationTranslatorMessageTypes.partial,y,r)));break;case"translated_message":m=d.TextResponsePayload.fromJSON(t.textBody),S=new c.ConversationTranslationResult(m.participantId,this.getTranslations(m.translations),m.language,void 0,void 0,m.originalText,void 0,void 0,void 0,t.textBody,void 0),this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new l.ConversationReceivedTranslationEventArgs(v.ConversationTranslatorMessageTypes.instantMessage,S,r))}}catch(e){}return[2,this.receiveConversationMessageOverride()];case 4:return s.sent(),this.terminateMessageLoop=!0,[3,5];case 5:return[2,e.promise]}}))}))},t.prototype.startMessageLoop=function(){return o(this,void 0,void 0,(function(){var e,t;return s(this,(function(r){switch(r.label){case 0:if(this.isDisposed())return[2,Promise.resolve()];this.terminateMessageLoop=!1,e=this.receiveConversationMessageOverride(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e];case 2:return[2,r.sent()];case 3:return t=r.sent(),this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",c.CancellationReason.Error,c.CancellationErrorCode.RuntimeError,t),[2,null];case 4:return[2]}}))}))},t.prototype.configConnection=function(){var e=this;return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise?this.privConnectionConfigPromise.then((function(t){return t.state()===a.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigPromise=null,e.configConnection()):e.privConnectionConfigPromise}),(function(t){return e.privConnectionId=null,e.privConnectionConfigPromise=null,e.configConnection()})):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then((function(e){return e})),this.privConnectionConfigPromise)},t.prototype.getTranslations=function(e){var t;if(void 0!==e){t=new c.Translations;for(var r=0,n=e;r<n.length;r++){var i=n[r];t.set(i.lang,i.translation)}}return t},t}(u.ServiceRecognizerBase);t.ConversationServiceAdapter=f},87182:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationReceivedTranslationEventArgs=t.ParticipantsListEventArgs=t.ParticipantAttributeEventArgs=t.ParticipantEventArgs=t.LockRoomEventArgs=t.MuteAllEventArgs=void 0;var o=r(36514),s=function(e){function t(t,r){var n=e.call(this,r)||this;return n.privIsMuted=t,n}return i(t,e),Object.defineProperty(t.prototype,"isMuted",{get:function(){return this.privIsMuted},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.MuteAllEventArgs=s;var a=function(e){function t(t,r){var n=e.call(this,r)||this;return n.privIsLocked=t,n}return i(t,e),Object.defineProperty(t.prototype,"isMuted",{get:function(){return this.privIsLocked},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.LockRoomEventArgs=a;var c=function(e){function t(t,r){var n=e.call(this,r)||this;return n.privParticipant=t,n}return i(t,e),Object.defineProperty(t.prototype,"participant",{get:function(){return this.privParticipant},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.ParticipantEventArgs=c;var u=function(e){function t(t,r,n,i){var o=e.call(this,i)||this;return o.privKey=r,o.privValue=n,o.privParticipantId=t,o}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.privValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.privKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.privParticipantId},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.ParticipantAttributeEventArgs=u;var p=function(e){function t(t,r,n,i,o,s,a,c,u){var p=e.call(this,u)||this;return p.privRoomId=t,p.privSessionToken=r,p.privTranslateTo=n,p.privProfanityFilter=i,p.privRoomProfanityFilter=o,p.privIsRoomLocked=s,p.privIsRoomLocked=a,p.privParticipants=c,p}return i(t,e),Object.defineProperty(t.prototype,"sessionToken",{get:function(){return this.privSessionToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversationId",{get:function(){return this.privRoomId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"translateTo",{get:function(){return this.privTranslateTo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"profanityFilter",{get:function(){return this.privProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roomProfanityFilter",{get:function(){return this.privRoomProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoomLocked",{get:function(){return this.privIsRoomLocked},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMuteAll",{get:function(){return this.privIsMuteAll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.privParticipants},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.ParticipantsListEventArgs=p;var h=function(){function e(e,t,r){this.privPayload=t,this.privCommand=e,this.privSessionId=r}return Object.defineProperty(e.prototype,"payload",{get:function(){return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privCommand},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),e}();t.ConversationReceivedTranslationEventArgs=h},39947:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorCommandTypes=t.ConversationTranslatorMessageTypes=t.InternalParticipants=void 0;var r=function(){function e(e,t){void 0===e&&(e=[]),this.participants=e,this.meId=t}return e.prototype.addOrUpdateParticipant=function(e){if(void 0!==e){var t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}},e.prototype.getParticipantIndex=function(e){return this.participants.findIndex((function(t){return t.id===e}))},e.prototype.getParticipant=function(e){return this.participants.find((function(t){return t.id===e}))},e.prototype.deleteParticipant=function(e){this.participants=this.participants.filter((function(t){return t.id!==e}))},Object.defineProperty(e.prototype,"host",{get:function(){return this.participants.find((function(e){return!0===e.isHost}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"me",{get:function(){return this.getParticipant(this.meId)},enumerable:!1,configurable:!0}),e}();t.InternalParticipants=r,t.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},t.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},26343:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorRecognizer=t.ConversationRecognizerFactory=void 0;var a=r(80194),c=r(51564),u=r(61316),p=r(36514),h=r(91804),l=r(24378),v=r(39594),d=function(){function e(){}return e.fromConfig=function(e,t){return new f(e,t)},e}();t.ConversationRecognizerFactory=d;var f=function(e){function t(t,r){var n=this,i=t;return u.Contracts.throwIfNull(i,"speechConfig"),(n=e.call(this,r,i.properties,new h.ConversationConnectionFactory)||this).privIsDisposed=!1,n.privProperties=i.properties.clone(),n.privConnection=p.Connection.fromRecognizer(n),n}return i(t,e),Object.defineProperty(t.prototype,"connected",{set:function(e){this.privConnection.connected=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{set:function(e){this.privConnection.disconnected=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechRecognitionLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.connect=function(e,t,r){try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.privReco.connectAsync(t,r)}catch(e){if(r)if(e instanceof Error){var n=e;r(n.name+": "+n.message)}else r(e)}},t.prototype.disconnect=function(e,t){try{u.Contracts.throwIfDisposed(this.privIsDisposed),this.privReco.disconnect().then((function(){e&&e()}),(function(e){t&&t(e)}))}catch(e){if(t)if(e instanceof Error){var r=e;t(r.name+": "+r.message)}else t(e);this.dispose(!0).catch((function(e){c.Events.instance.onEvent(new c.BackgroundEvent(e))}))}},t.prototype.sendRequest=function(e,t,r){try{u.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,r)}catch(e){if(r)if(e instanceof Error){var n=e;r(n.name+": "+n.message)}else r(e);this.dispose(!0).catch((function(e){c.Events.instance.onEvent(new c.BackgroundEvent(e))}))}},t.prototype.close=function(){var e,t;return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return u.Contracts.throwIfDisposed(this.privIsDisposed),null===(e=this.privConnection)||void 0===e||e.closeConnection(),null===(t=this.privConnection)||void 0===t||t.close(),this.privConnection=void 0,[4,this.dispose(!0)];case 1:return r.sent(),[2]}}))}))},t.prototype.dispose=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return this.privIsDisposed?[2]:t?(this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),[4,e.prototype.dispose.call(this,t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createRecognizerConfig=function(e){return new a.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,r,n){var i=r;return new l.ConversationServiceAdapter(e,t,i,n,this)},t.prototype.sendMessage=function(e,t,r){var n=this.privReco;v.PromiseToEmptyCallback(n.sendMessageAsync(e),t,r)},t}(p.Recognizer);t.ConversationTranslatorRecognizer=f},39594:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseToEmptyCallback=t.request=t.extractHeaderValue=void 0;var s=r(82445),a=o(r(47721));function c(e,t){return void 0===t&&(t=null),{data:t||e.statusText,headers:e.getAllResponseHeaders(),json:function(){return JSON.parse(t||'"'+e.statusText+'"')},ok:!1,status:e.status,statusText:e.statusText}}t.extractHeaderValue=function(e,t){var r="";try{var n=t.trim().split(/[\r\n]+/),i={};n.forEach((function(e){var t=e.split(": "),r=t.shift().toLowerCase(),n=t.join(": ");i[r]=n})),r=i[e.toLowerCase()]}catch(e){}return r},t.request=function(e,t,r,n,i,o){void 0===r&&(r={}),void 0===n&&(n=null),void 0===i&&(i={});var u,p=s.RestConfigBase.requestOptions,h=i.ignoreCache||p.ignoreCache,l=i.headers||p.headers,v=i.timeout||p.timeout;(u="undefined"==typeof window?new a.XMLHttpRequest:new XMLHttpRequest).open(e,function(e,t){void 0===t&&(t={});var r=function(e){return void 0===e&&(e={}),Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}(t);return r?e+(-1===e.indexOf("?")?"?":"&")+r:e}(t,r),!0),l&&Object.keys(l).forEach((function(e){return u.setRequestHeader(e,l[e])})),h&&u.setRequestHeader("Cache-Control","no-cache"),u.timeout=v,u.onload=function(e){o(function(e){return{data:e.responseText,headers:e.getAllResponseHeaders(),json:function(){return JSON.parse(e.responseText)},ok:e.status>=200&&e.status<300,status:e.status,statusText:e.statusText}}(u))},u.onerror=function(e){o(c(u,"Failed to make request."))},u.ontimeout=function(e){o(c(u,"Request took longer than expected."))},"post"===e&&n?(u.setRequestHeader("Content-Type","application/json"),u.send(JSON.stringify(n))):u.send()},t.PromiseToEmptyCallback=function(e,t,r){e?e.then((function(e){try{t&&t()}catch(e){r&&r("'Unhandled error on promise callback: "+e+"'")}}),(function(e){try{r&&r(e)}catch(e){}})):r&&r("Null promise")}},77820:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationWebsocketMessageFormatter=void 0;var n=r(51564),i=r(2779);t.ConversationWebsocketMessageFormatter=function(){this.toConnectionMessage=function(e){var t=new n.Deferred;try{if(e.messageType===n.MessageType.Text){var r=new i.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(r)}else e.messageType===n.MessageType.Binary&&t.resolve(new i.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise},this.fromConnectionMessage=function(e){var t=new n.Deferred;try{if(e.messageType===n.MessageType.Text){var r=""+(e.textBody?e.textBody:"");t.resolve(new n.RawWebsocketMessage(n.MessageType.Text,r,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise}}},6245:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28990);Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return n.ConversationManager}});var i=r(13068);Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return i.ConversationConnectionConfig}});var o=r(26343);Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return o.ConversationRecognizerFactory}});var s=r(58918);Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return s.TranscriberRecognizer}});var a=r(87182);Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return a.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return a.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return a.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return a.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return a.ParticipantsListEventArgs}});var c=r(39947);Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return c.InternalParticipants}})},18101:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandResponsePayload=void 0;var r=function(){function e(e){this.privCommandResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"type",{get:function(){return this.privCommandResponse.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privCommandResponse.command},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privCommandResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privCommandResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privCommandResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privCommandResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.privCommandResponse.value},enumerable:!1,configurable:!0}),e}();t.CommandResponsePayload=r},52900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18101);Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return n.CommandResponsePayload}});var i=r(7974);Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return i.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return i.ParticipantPayloadResponse}});var o=r(23479);Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return o.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return o.TextResponsePayload}})},7974:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantPayloadResponse=t.ParticipantsListPayloadResponse=void 0;var r=function(){function e(e){this.privParticipantsPayloadResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privParticipantsPayloadResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privParticipantsPayloadResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privParticipantsPayloadResponse.command},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participants",{get:function(){return this.privParticipantsPayloadResponse.participants},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privParticipantsPayloadResponse.token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translateTo",{get:function(){return this.privParticipantsPayloadResponse.translateTo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profanityFilter",{get:function(){return this.privParticipantsPayloadResponse.profanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomProfanityFilter",{get:function(){return this.privParticipantsPayloadResponse.roomProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomLocked",{get:function(){return this.privParticipantsPayloadResponse.roomLocked},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muteAll",{get:function(){return this.privParticipantsPayloadResponse.muteAll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privParticipantsPayloadResponse.type},enumerable:!1,configurable:!0}),e}();t.ParticipantsListPayloadResponse=r;var n=function(){function e(e){this.privParticipantPayloadResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privParticipantPayloadResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.privParticipantPayloadResponse.locale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usetts",{get:function(){return this.privParticipantPayloadResponse.usetts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ismuted",{get:function(){return this.privParticipantPayloadResponse.ismuted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ishost",{get:function(){return this.privParticipantPayloadResponse.ishost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privParticipantPayloadResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.privParticipantPayloadResponse.avatar},enumerable:!1,configurable:!0}),e}();t.ParticipantPayloadResponse=n},23479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextResponsePayload=t.SpeechResponsePayload=void 0;var r=function(){function e(e){this.privSpeechResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"recognition",{get:function(){return this.privSpeechResponse.recognition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.privSpeechResponse.translations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privSpeechResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.privSpeechResponse.language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privSpeechResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privSpeechResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privSpeechResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.privSpeechResponse.timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privSpeechResponse.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFinal",{get:function(){return"final"===this.privSpeechResponse.type},enumerable:!1,configurable:!0}),e}();t.SpeechResponsePayload=r;var n=function(){function e(e){this.privTextResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"originalText",{get:function(){return this.privTextResponse.originalText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.privTextResponse.translations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privTextResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.privTextResponse.language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privTextResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privTextResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privTextResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.privTextResponse.timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privTextResponse.type},enumerable:!1,configurable:!0}),e}();t.TextResponsePayload=n},58918:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberRecognizer=void 0;var a=r(51564),c=r(61316),u=r(36514),p=r(80194),h=function(e){function t(t,r){var n=this,i=t;return c.Contracts.throwIfNull(i,"speechTranslationConfig"),c.Contracts.throwIfNullOrWhitespace(i.speechRecognitionLanguage,u.PropertyId[u.PropertyId.SpeechServiceConnection_RecoLanguage]),(n=e.call(this,r,i.properties,new p.TranscriberConnectionFactory)||this).privDisposedRecognizer=!1,n}return i(t,e),t.prototype.getConversationInfo=function(){return c.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo},Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){c.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversation",{set:function(e){c.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.privConversation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return c.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.startContinuousRecognitionAsync=function(e,t){a.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(p.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){a.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.close=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return c.Contracts.throwIfDisposed(this.privDisposedRecognizer),[4,this.dispose(!0)];case 1:return e.sent(),[2]}}))}))},t.prototype.pushConversationEvent=function(e,t){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return r=this.privReco,c.Contracts.throwIfNullOrUndefined(r,"serviceRecognizer"),[4,r.sendSpeechEventAsync(e,t)];case 1:return n.sent(),[2]}}))}))},t.prototype.connectCallbacks=function(e){this.canceled=function(t,r){e.canceled&&e.canceled(e,r)},this.recognizing=function(t,r){e.transcribing&&e.transcribing(e,r)},this.recognized=function(t,r){e.transcribed&&e.transcribed(e,r)},this.sessionStarted=function(t,r){e.sessionStarted&&e.sessionStarted(e,r)},this.sessionStopped=function(t,r){e.sessionStopped&&e.sessionStopped(e,r)}},t.prototype.disconnectCallbacks=function(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0},t.prototype.dispose=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return this.privDisposedRecognizer?[2]:t?(this.privDisposedRecognizer=!0,[4,this.implRecognizerStop()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[4,e.prototype.dispose.call(this,t)];case 3:return r.sent(),[2]}}))}))},t.prototype.createRecognizerConfig=function(e){return new p.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,r,n){var i=r;return new p.TranscriptionServiceRecognizer(e,t,i,n,this)},t}(u.Recognizer);t.TranscriberRecognizer=h},79093:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptionServiceRecognizer=void 0;var a=r(51564),c=r(36514),u=r(80194),p=r(14703),h=function(e){function t(t,r,n,i,o){var s=e.call(this,t,r,n,i,o)||this;return s.sendSpeechEvent=function(e,t){var r=JSON.stringify(t);if(r)return e.send(new p.SpeechConnectionMessage(a.MessageType.Text,"speech.event",s.privRequestSession.requestId,"application/json",r))},s.privTranscriberRecognizer=o,s.sendPrePayloadJSONOverride=s.sendTranscriptionStartJSON,s}return i(t,e),t.prototype.sendSpeechEventAsync=function(e,t){return o(this,void 0,void 0,(function(){var r;return s(this,(function(n){switch(n.label){case 0:return this.privRequestSession.isRecognizing?[4,this.fetchConnection()]:[3,3];case 1:return r=n.sent(),[4,this.sendSpeechEvent(r,this.createSpeechEventPayload(e,t))];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,a,p,h,l,v,d;return s(this,(function(s){switch(s.label){case 0:switch((r=new c.PropertyCollection).setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),n=!1,e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":return[3,1];case"speech.phrase":return[3,2]}return[3,6];case 1:if(i=u.SpeechHypothesis.fromJSON(e.textBody),o=i.Offset+this.privRequestSession.currentTurnAudioOffset,t=new c.SpeechRecognitionResult(this.privRequestSession.requestId,c.ResultReason.RecognizingSpeech,i.Text,i.Duration,o,i.Language,i.LanguageDetectionConfidence,i.SpeakerId,void 0,e.textBody,r),this.privRequestSession.onHypothesis(o),a=new c.SpeechRecognitionEventArgs(t,i.Duration,this.privRequestSession.sessionId),this.privTranscriberRecognizer.recognizing)try{this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,a)}catch(e){}return n=!0,[3,7];case 2:return p=u.SimpleSpeechPhrase.fromJSON(e.textBody),h=u.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),c.ResultReason.Canceled!==h?[3,4]:(l=u.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),[4,this.cancelRecognitionLocal(l,u.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus),void 0)]);case 3:return s.sent(),[3,5];case 4:if((!this.privRequestSession.isSpeechEnded||h!==c.ResultReason.NoMatch||p.RecognitionStatus===u.RecognitionStatus.InitialSilenceTimeout)&&(this.privRecognizerConfig.parameters.getProperty(u.OutputFormatPropertyName)===c.OutputFormat[c.OutputFormat.Simple]?t=new c.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,e.textBody,r):(v=u.DetailedSpeechPhrase.fromJSON(e.textBody),t=new c.SpeechRecognitionResult(this.privRequestSession.requestId,h,v.RecognitionStatus===u.RecognitionStatus.Success?v.NBest[0].Display:void 0,v.Duration,v.Offset+this.privRequestSession.currentTurnAudioOffset,v.Language,v.LanguageDetectionConfidence,void 0,void 0,e.textBody,r)),d=new c.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),this.privTranscriberRecognizer.recognized))try{this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,d)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}s.label=5;case 5:return n=!0,[3,7];case 6:return[3,7];case 7:return[2,n]}}))}))},t.prototype.cancelRecognition=function(e,t,r,n,i){var o=new c.PropertyCollection;if(o.setProperty(u.CancellationErrorCodePropertyName,c.CancellationErrorCode[n]),this.privTranscriberRecognizer.canceled){var s=new c.ConversationTranscriptionCanceledEventArgs(r,i,n,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,s)}catch(e){}}if(this.privSuccessCallback){var a=new c.SpeechRecognitionResult(t,c.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch(e){}}},t.prototype.sendTranscriptionStartJSON=function(e){return o(this,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:return[4,this.sendSpeechContext(e)];case 1:return n.sent(),t=this.privTranscriberRecognizer.getConversationInfo(),r=this.createSpeechEventPayload(t,"start"),[4,this.sendSpeechEvent(e,r)];case 2:return n.sent(),[4,this.sendWaveHeader(e)];case 3:return n.sent(),[2]}}))}))},t.prototype.createSpeechEventPayload=function(e,t){var r={id:"meeting",name:t,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r.meeting.record="on"===e.conversationProperties.audiorecording?"true":"false",r},t}(u.ServiceRecognizerBase);t.TranscriptionServiceRecognizer=h},30787:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationConnectionFactory=void 0;var o=r(73442),s=r(36514),a=r(82753),c=r(80194),u=r(97923),p=r(51652),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.create=function(e,r,n){var i=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!i){var a=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,void 0),h=a&&a.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com";i=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+a+".s2s.speech"+h)+"/speech/translation/cognitiveservices/v1"}var l={from:e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),to:e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages)};t.setCommonUrlParams(e,l,i),t.setUrlParameter(s.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,p.QueryParameterNames.StableTranslation,e,l,i),void 0!==e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&(l.voice=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice),l.features="texttospeech");var v={};void 0!==r.token&&""!==r.token&&(v[r.headerName]=r.token),v[u.HeaderNames.ConnectionId]=n,e.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,i);var d="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(i,l,v,new c.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),d,n)},t}return i(t,e),t}(a.ConnectionFactoryBase);t.TranslationConnectionFactory=h},91126:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationServiceRecognizer=void 0;var a=r(51564),c=r(36514),u=r(80194),p=function(e){function t(t,r,n,i,a){var c=e.call(this,t,r,n,i,a)||this;return c.privTranslationRecognizer=a,c.connectionEvents.attach((function(e){return o(c,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return"ConnectionEstablishedEvent"!==e.name?[3,1]:(this.privTranslationRecognizer.onConnection(),[3,3]);case 1:return"ConnectionClosedEvent"!==e.name?[3,3]:[4,this.privTranslationRecognizer.onDisconnection()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))})),c}return i(t,e),t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,p,h,l,v,d,f,g,y;return s(this,(function(s){switch(s.label){case 0:switch(t=new c.PropertyCollection,r=!1,e.messageType===a.MessageType.Text&&t.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":return[3,1];case"translation.phrase":return[3,2];case"translation.synthesis":return[3,7];case"translation.synthesis.end":return[3,8]}return[3,9];case 1:if(n=this.fireEventForResult(u.TranslationHypothesis.fromJSON(e.textBody),t),this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+n.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,n)}catch(e){}return r=!0,[3,10];case 2:if(i=u.TranslationPhrase.fromJSON(e.textBody),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),i.RecognitionStatus!==u.RecognitionStatus.Success)return[3,3];if(o=this.fireEventForResult(i,t),this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,o)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(o.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}return[3,10];case 3:return p=u.EnumTranslation.implTranslateRecognitionResult(i.RecognitionStatus),h=new c.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,i.Text,i.Duration,this.privRequestSession.currentTurnAudioOffset+i.Offset,void 0,e.textBody,t),p!==c.ResultReason.Canceled?[3,5]:(l=u.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus),[4,this.cancelRecognitionLocal(l,u.EnumTranslation.implTranslateCancelErrorCode(i.RecognitionStatus),void 0)]);case 4:return s.sent(),[3,6];case 5:if((!this.privRequestSession.isSpeechEnded||p!==c.ResultReason.NoMatch||i.RecognitionStatus===u.RecognitionStatus.InitialSilenceTimeout)&&(v=new c.TranslationRecognitionEventArgs(h,h.offset,this.privRequestSession.sessionId),this.privTranslationRecognizer.recognized))try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,v)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(h)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}s.label=6;case 6:return r=!0,[3,10];case 7:return this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),r=!0,[3,10];case 8:switch((d=u.TranslationSynthesisEnd.fromJSON(e.textBody)).SynthesisStatus){case u.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){f=new c.TranslationSynthesisResult(c.ResultReason.Canceled,void 0),g=new c.TranslationSynthesisEventArgs(f,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,g)}catch(e){}}if(this.privTranslationRecognizer.canceled){y=new c.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,c.CancellationReason.Error,d.FailureReason,c.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,y)}catch(e){}}break;case u.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}return r=!0,[3,10];case 9:return[3,10];case 10:return[2,r]}}))}))},t.prototype.cancelRecognition=function(e,t,r,n,i){var o=new c.PropertyCollection;if(o.setProperty(u.CancellationErrorCodePropertyName,c.CancellationErrorCode[n]),this.privTranslationRecognizer.canceled){var s=new c.TranslationRecognitionCanceledEventArgs(e,r,i,n,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,s)}catch(e){}}if(this.privSuccessCallback){var a=new c.TranslationRecognitionResult(void 0,t,c.ResultReason.Canceled,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch(e){}}},t.prototype.fireEventForResult=function(e,t){var r,n;if(void 0!==e.Translation.Translations){r=new c.Translations;for(var i=0,o=e.Translation.Translations;i<o.length;i++){var s=o[i];r.set(s.Language,s.Text)}}n=e instanceof u.TranslationPhrase?e.Translation.TranslationStatus===a.TranslationStatus.Success?c.ResultReason.TranslatedSpeech:c.ResultReason.RecognizedSpeech:c.ResultReason.TranslatingSpeech;var p=e.Offset+this.privRequestSession.currentTurnAudioOffset,h=new c.TranslationRecognitionResult(r,this.privRequestSession.requestId,n,e.Text,e.Duration,p,e.Translation.FailureReason,JSON.stringify(e),t);return new c.TranslationRecognitionEventArgs(h,p,this.privRequestSession.sessionId)},t.prototype.sendSynthesisAudio=function(e,t){var r=void 0===e?c.ResultReason.SynthesizingAudioCompleted:c.ResultReason.SynthesizingAudio,n=new c.TranslationSynthesisResult(r,e),i=new c.TranslationSynthesisEventArgs(n,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,i)}catch(e){}},t}(u.ServiceRecognizerBase);t.TranslationServiceRecognizer=p},330:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,(r=t.TranslationStatus||(t.TranslationStatus={}))[r.Success=0]="Success",r[r.Error=1]="Error"},89181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageFormatter=void 0;var n=r(51564);t.WebsocketMessageFormatter=function(){var e=this;this.toConnectionMessage=function(t){var r=new n.Deferred;try{if(t.messageType===n.MessageType.Text){var i=t.textContent,o={},s=null;if(i){var a=i.split("\r\n\r\n");a&&a.length>0&&(o=e.parseHeaders(a[0]),a.length>1&&(s=a[1]))}r.resolve(new n.ConnectionMessage(t.messageType,s,o,t.id))}else if(t.messageType===n.MessageType.Binary){var c=t.binaryContent;if(o={},s=null,!c||c.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");var u=new DataView(c),p=u.getInt16(0);if(c.byteLength<p+2)throw new Error("Invalid binary message format. Header content missing.");for(var h="",l=0;l<p;l++)h+=String.fromCharCode(u.getInt8(l+2));o=e.parseHeaders(h),c.byteLength>p+2&&(s=c.slice(2+p)),r.resolve(new n.ConnectionMessage(t.messageType,s,o,t.id))}}catch(e){r.reject("Error formatting the message. Error: "+e)}return r.promise},this.fromConnectionMessage=function(t){var r=new n.Deferred;try{if(t.messageType===n.MessageType.Text){var i=e.makeHeaders(t)+"\r\n"+(t.textBody?t.textBody:"");r.resolve(new n.RawWebsocketMessage(n.MessageType.Text,i,t.id))}else if(t.messageType===n.MessageType.Binary){var o=e.makeHeaders(t),s=t.binaryBody,a=e.stringToArrayBuffer(o),c=new Int8Array(a),u=c.byteLength,p=new Int8Array(2+u+(s?s.byteLength:0));if(p[0]=u>>8&255,p[1]=255&u,p.set(c,2),s){var h=new Int8Array(s);p.set(h,2+u)}i=p.buffer,r.resolve(new n.RawWebsocketMessage(n.MessageType.Binary,i,t.id))}}catch(e){r.reject("Error formatting the message. "+e)}return r.promise},this.makeHeaders=function(e){var t="";if(e.headers)for(var r in e.headers)r&&(t+=r+": "+e.headers[r]+"\r\n");return t},this.parseHeaders=function(e){var t={};if(e){var r=e.match(/[^\r\n]+/g);if(t)for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o){var s=o.indexOf(":"),a=s>0?o.substr(0,s).trim().toLowerCase():o,c=s>0&&o.length>s+1?o.substr(s+1).trim():"";t[a]=c}}}return t},this.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new DataView(t),n=0;n<e.length;n++)r.setUint8(n,e.charCodeAt(n));return t}}},11628:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamNodeErrorEvent=t.AudioStreamNodeDetachedEvent=t.AudioStreamNodeAttachedEvent=t.AudioStreamNodeAttachingEvent=t.AudioStreamNodeEvent=t.AudioSourceErrorEvent=t.AudioSourceOffEvent=t.AudioSourceReadyEvent=t.AudioSourceInitializingEvent=t.AudioSourceEvent=void 0;var o=r(920),s=function(e){function t(t,r,n){void 0===n&&(n=o.EventType.Info);var i=e.call(this,t,n)||this;return i.privAudioSourceId=r,i}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.AudioSourceEvent=s;var a=function(e){function t(t){return e.call(this,"AudioSourceInitializingEvent",t)||this}return i(t,e),t}(s);t.AudioSourceInitializingEvent=a;var c=function(e){function t(t){return e.call(this,"AudioSourceReadyEvent",t)||this}return i(t,e),t}(s);t.AudioSourceReadyEvent=c;var u=function(e){function t(t){return e.call(this,"AudioSourceOffEvent",t)||this}return i(t,e),t}(s);t.AudioSourceOffEvent=u;var p=function(e){function t(t,r){var n=e.call(this,"AudioSourceErrorEvent",t,o.EventType.Error)||this;return n.privError=r,n}return i(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(s);t.AudioSourceErrorEvent=p;var h=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i.privAudioNodeId=n,i}return i(t,e),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(s);t.AudioStreamNodeEvent=h;var l=function(e){function t(t,r){return e.call(this,"AudioStreamNodeAttachingEvent",t,r)||this}return i(t,e),t}(h);t.AudioStreamNodeAttachingEvent=l;var v=function(e){function t(t,r){return e.call(this,"AudioStreamNodeAttachedEvent",t,r)||this}return i(t,e),t}(h);t.AudioStreamNodeAttachedEvent=v;var d=function(e){function t(t,r){return e.call(this,"AudioStreamNodeDetachedEvent",t,r)||this}return i(t,e),t}(h);t.AudioStreamNodeDetachedEvent=d;var f=function(e){function t(t,r,n){var i=e.call(this,"AudioStreamNodeErrorEvent",t,r)||this;return i.privError=n,i}return i(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(h);t.AudioStreamNodeErrorEvent=f},87070:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundEvent=void 0;var o=r(51564),s=function(e){function t(t){var r=e.call(this,"BackgroundEvent",o.EventType.Error)||this;return r.privError=t,r}return i(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.BackgroundEvent=s},6190:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedArrayBufferStream=void 0;var o=function(e){function t(t,r){var n=e.call(this,r)||this;return n.privTargetChunkSize=t,n.privNextBufferReadyBytes=0,n}return i(t,e),t.prototype.writeStreamChunk=function(t){if(t.isEnd||0===this.privNextBufferReadyBytes&&t.buffer.byteLength===this.privTargetChunkSize)e.prototype.writeStreamChunk.call(this,t);else for(var r=0;r<t.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=t.timeReceived);var n=Math.min(t.buffer.byteLength-r,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(t.buffer.slice(r,n+r));i.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=n,r+=n,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(e.prototype.writeStreamChunk.call(this,{buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}},t.prototype.close=function(){0===this.privNextBufferReadyBytes||this.isClosed||e.prototype.writeStreamChunk.call(this,{buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),e.prototype.close.call(this)},t}(r(51564).Stream);t.ChunkedArrayBufferStream=o},87379:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageSentEvent=t.ConnectionMessageReceivedEvent=t.ConnectionEstablishErrorEvent=t.ConnectionErrorEvent=t.ConnectionClosedEvent=t.ConnectionEstablishedEvent=t.ConnectionStartEvent=t.ConnectionEvent=t.ServiceEvent=void 0;var o=r(920),s=function(e){function t(t,r,n){void 0===n&&(n=o.EventType.Info);var i=e.call(this,t,n)||this;return i.privJsonResult=r,i}return i(t,e),Object.defineProperty(t.prototype,"jsonString",{get:function(){return this.privJsonResult},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.ServiceEvent=s;var a=function(e){function t(t,r,n){void 0===n&&(n=o.EventType.Info);var i=e.call(this,t,n)||this;return i.privConnectionId=r,i}return i(t,e),Object.defineProperty(t.prototype,"connectionId",{get:function(){return this.privConnectionId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.ConnectionEvent=a;var c=function(e){function t(t,r,n){var i=e.call(this,"ConnectionStartEvent",t)||this;return i.privUri=r,i.privHeaders=n,i}return i(t,e),Object.defineProperty(t.prototype,"uri",{get:function(){return this.privUri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){return this.privHeaders},enumerable:!1,configurable:!0}),t}(a);t.ConnectionStartEvent=c;var u=function(e){function t(t,r){return e.call(this,"ConnectionEstablishedEvent",t)||this}return i(t,e),t}(a);t.ConnectionEstablishedEvent=u;var p=function(e){function t(t,r,n){var i=e.call(this,"ConnectionClosedEvent",t,o.EventType.Debug)||this;return i.privReason=n,i.privStatusCode=r,i}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),t}(a);t.ConnectionClosedEvent=p;var h=function(e){function t(t,r,n){var i=e.call(this,"ConnectionErrorEvent",t,o.EventType.Debug)||this;return i.privMessage=r,i.privType=n,i}return i(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.privType},enumerable:!1,configurable:!0}),t}(a);t.ConnectionErrorEvent=h;var l=function(e){function t(t,r,n){var i=e.call(this,"ConnectionEstablishErrorEvent",t,o.EventType.Error)||this;return i.privStatusCode=r,i.privReason=n,i}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),t}(a);t.ConnectionEstablishErrorEvent=l;var v=function(e){function t(t,r,n){var i=e.call(this,"ConnectionMessageReceivedEvent",t)||this;return i.privNetworkReceivedTime=r,i.privMessage=n,i}return i(t,e),Object.defineProperty(t.prototype,"networkReceivedTime",{get:function(){return this.privNetworkReceivedTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),t}(a);t.ConnectionMessageReceivedEvent=v;var d=function(e){function t(t,r,n){var i=e.call(this,"ConnectionMessageSentEvent",t)||this;return i.privNetworkSentTime=r,i.privMessage=n,i}return i(t,e),Object.defineProperty(t.prototype,"networkSentTime",{get:function(){return this.privNetworkSentTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),t}(a);t.ConnectionMessageSentEvent=d},49647:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;var n,i=r(32420),o=r(24147);!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(n=t.MessageType||(t.MessageType={}));var s=function(){function e(e,t,r,s){if(this.privBody=null,e===n.Text&&t&&"string"!=typeof t)throw new i.InvalidOperationError("Payload must be a string");if(e===n.Binary&&t&&!(t instanceof ArrayBuffer))throw new i.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=r||{},this.privId=s||o.createNoDashGuid(),this.messageType){case n.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}return Object.defineProperty(e.prototype,"messageType",{get:function(){return this.privMessageType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.privHeaders},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBody",{get:function(){if(this.privMessageType===n.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryBody",{get:function(){if(this.privMessageType===n.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e}();t.ConnectionMessage=s},70221:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionOpenResponse=void 0;var r=function(){function e(e,t){this.privStatusCode=e,this.privReason=t}return Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),e}();t.ConnectionOpenResponse=r},82100:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SendingAgentContextMessageEvent=t.DialogEvent=void 0;var o=r(920),s=function(e){function t(t,r){return void 0===r&&(r=o.EventType.Info),e.call(this,t,r)||this}return i(t,e),t}(o.PlatformEvent);t.DialogEvent=s;var a=function(e){function t(t){var r=e.call(this,"SendingAgentContextMessageEvent")||this;return r.privAgentConfig=t,r}return i(t,e),Object.defineProperty(t.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),t}(s);t.SendingAgentContextMessageEvent=a},32420:function(e,t){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.InvalidOperationError=t.ArgumentNullError=void 0;var i=function(e){function t(t){var r=e.call(this,t)||this;return r.name="ArgumentNull",r.message=t,r}return n(t,e),t}(Error);t.ArgumentNullError=i;var o=function(e){function t(t){var r=e.call(this,t)||this;return r.name="InvalidOperation",r.message=t,r}return n(t,e),t}(Error);t.InvalidOperationError=o;var s=function(e){function t(t,r){var n=e.call(this,r)||this;return n.name=t+"ObjectDisposed",n.message=r,n}return n(t,e),t}(Error);t.ObjectDisposedError=s},19225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventSource=void 0;var n=r(32420),i=r(24147),o=function(){function e(e){var t=this;this.privEventListeners={},this.privIsDisposed=!1,this.onEvent=function(e){if(t.isDisposed())throw new n.ObjectDisposedError("EventSource");if(t.metadata)for(var r in t.metadata)r&&e.metadata&&(e.metadata[r]||(e.metadata[r]=t.metadata[r]));for(var i in t.privEventListeners)i&&t.privEventListeners[i]&&t.privEventListeners[i](e)},this.attach=function(e){var r=i.createNoDashGuid();return t.privEventListeners[r]=e,{detach:function(){return delete t.privEventListeners[r],Promise.resolve()}}},this.attachListener=function(e){return t.attach(e.onEvent)},this.isDisposed=function(){return t.privIsDisposed},this.dispose=function(){t.privEventListeners=null,t.privIsDisposed=!0},this.privMetadata=e}return Object.defineProperty(e.prototype,"metadata",{get:function(){return this.privMetadata},enumerable:!1,configurable:!0}),e}();t.EventSource=o},10621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;var n=r(32420),i=r(19225),o=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e.privInstance},enumerable:!1,configurable:!0}),e.privInstance=new i.EventSource,e.setEventSource=function(t){if(!t)throw new n.ArgumentNullError("eventSource");e.privInstance=t},e}();t.Events=o},51564:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(11628),t),i(r(87379),t),i(r(49647),t),i(r(70221),t),i(r(82100),t),i(r(32420),t),i(r(10621),t),i(r(19225),t),i(r(24147),t),i(r(35547),t),i(r(4631),t),i(r(77948),t),i(r(28937),t),i(r(58733),t),i(r(51209),t),i(r(48952),t),i(r(43091),t),i(r(80700),t),i(r(67748),t),i(r(920),t),i(r(81852),t),i(r(17453),t),i(r(55663),t),i(r(79819),t),i(r(96258),t);var o=r(330);Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return o.TranslationStatus}}),i(r(6190),t),i(r(99919),t),i(r(52300),t),i(r(45770),t),i(r(87070),t)},24147:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNoDashGuid=t.createGuid=void 0;var n=r(61324),i=function(){return n.v4()};t.createGuid=i,t.createNoDashGuid=function(){return i().replace(new RegExp("-","g"),"").toUpperCase()}},99919:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},35547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4631:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,(r=t.ConnectionState||(t.ConnectionState={}))[r.None=0]="None",r[r.Connected=1]="Connected",r[r.Connecting=2]="Connecting",r[r.Disconnected=3]="Disconnected"},77948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},28937:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},58733:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},48952:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},80700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},67748:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;var n=r(32420);t.List=function e(t){var r=this;if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.get=function(e){return r.throwIfDisposed(),r.privList[e]},this.first=function(){return r.get(0)},this.last=function(){return r.get(r.length()-1)},this.add=function(e){r.throwIfDisposed(),r.insertAt(r.privList.length,e)},this.insertAt=function(e,t){r.throwIfDisposed(),0===e?r.privList.unshift(t):e===r.privList.length?r.privList.push(t):r.privList.splice(e,0,t),r.triggerSubscriptions(r.privAddSubscriptions)},this.removeFirst=function(){return r.throwIfDisposed(),r.removeAt(0)},this.removeLast=function(){return r.throwIfDisposed(),r.removeAt(r.length()-1)},this.removeAt=function(e){return r.throwIfDisposed(),r.remove(e,1)[0]},this.remove=function(e,t){r.throwIfDisposed();var n=r.privList.splice(e,t);return r.triggerSubscriptions(r.privRemoveSubscriptions),n},this.clear=function(){r.throwIfDisposed(),r.remove(0,r.length())},this.length=function(){return r.throwIfDisposed(),r.privList.length},this.onAdded=function(e){r.throwIfDisposed();var t=r.privSubscriptionIdCounter++;return r.privAddSubscriptions[t]=e,{detach:function(){return delete r.privAddSubscriptions[t],Promise.resolve()}}},this.onRemoved=function(e){r.throwIfDisposed();var t=r.privSubscriptionIdCounter++;return r.privRemoveSubscriptions[t]=e,{detach:function(){return delete r.privRemoveSubscriptions[t],Promise.resolve()}}},this.onDisposed=function(e){r.throwIfDisposed();var t=r.privSubscriptionIdCounter++;return r.privDisposedSubscriptions[t]=e,{detach:function(){return delete r.privDisposedSubscriptions[t],Promise.resolve()}}},this.join=function(e){return r.throwIfDisposed(),r.privList.join(e)},this.toArray=function(){var e=Array();return r.privList.forEach((function(t){e.push(t)})),e},this.any=function(e){return r.throwIfDisposed(),e?r.where(e).length()>0:r.length()>0},this.all=function(e){return r.throwIfDisposed(),r.where(e).length()===r.length()},this.forEach=function(e){r.throwIfDisposed();for(var t=0;t<r.length();t++)e(r.privList[t],t)},this.select=function(t){r.throwIfDisposed();for(var n=[],i=0;i<r.privList.length;i++)n.push(t(r.privList[i],i));return new e(n)},this.where=function(t){r.throwIfDisposed();for(var n=new e,i=0;i<r.privList.length;i++)t(r.privList[i],i)&&n.add(r.privList[i]);return n},this.orderBy=function(t){return r.throwIfDisposed(),new e(r.toArray().sort(t))},this.orderByDesc=function(e){return r.throwIfDisposed(),r.orderBy((function(t,r){return e(r,t)}))},this.clone=function(){return r.throwIfDisposed(),new e(r.toArray())},this.concat=function(t){return r.throwIfDisposed(),new e(r.privList.concat(t.toArray()))},this.concatArray=function(t){return r.throwIfDisposed(),new e(r.privList.concat(t))},this.isDisposed=function(){return null==r.privList},this.dispose=function(e){r.isDisposed()||(r.privDisposeReason=e,r.privList=null,r.privAddSubscriptions=null,r.privRemoveSubscriptions=null,r.triggerSubscriptions(r.privDisposedSubscriptions))},this.throwIfDisposed=function(){if(r.isDisposed())throw new n.ObjectDisposedError("List",r.privDisposeReason)},this.triggerSubscriptions=function(e){if(e)for(var t in e)t&&e[t]()},this.privList=[],t)for(var i=0,o=t;i<o.length;i++){var s=o[i];this.privList.push(s)}}},45770:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.OCSPCacheUpdateErrorEvent=t.OCSPResponseRetrievedEvent=t.OCSPCacheFetchErrorEvent=t.OCSPVerificationFailedEvent=t.OCSPCacheHitEvent=t.OCSPCacheEntryNeedsRefreshEvent=t.OCSPCacheEntryExpiredEvent=t.OCSPWSUpgradeStartedEvent=t.OCSPStapleReceivedEvent=t.OCSPCacheUpdatehCompleteEvent=t.OCSPDiskCacheStoreEvent=t.OCSPMemoryCacheStoreEvent=t.OCSPCacheUpdateNeededEvent=t.OCSPDiskCacheHitEvent=t.OCSPCacheMissEvent=t.OCSPMemoryCacheHitEvent=t.OCSPEvent=void 0;var o=r(920),s=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i.privSignature=n,i}return i(t,e),t}(o.PlatformEvent);t.OCSPEvent=s;var a=function(e){function t(t){return e.call(this,"OCSPMemoryCacheHitEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPMemoryCacheHitEvent=a;var c=function(e){function t(t){return e.call(this,"OCSPCacheMissEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPCacheMissEvent=c;var u=function(e){function t(t){return e.call(this,"OCSPDiskCacheHitEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPDiskCacheHitEvent=u;var p=function(e){function t(t){return e.call(this,"OCSPCacheUpdateNeededEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPCacheUpdateNeededEvent=p;var h=function(e){function t(t){return e.call(this,"OCSPMemoryCacheStoreEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPMemoryCacheStoreEvent=h;var l=function(e){function t(t){return e.call(this,"OCSPDiskCacheStoreEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPDiskCacheStoreEvent=l;var v=function(e){function t(t){return e.call(this,"OCSPCacheUpdatehCompleteEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPCacheUpdatehCompleteEvent=v;var d=function(e){function t(){return e.call(this,"OCSPStapleReceivedEvent",o.EventType.Debug,"")||this}return i(t,e),t}(s);t.OCSPStapleReceivedEvent=d;var f=function(e){function t(t){return e.call(this,"OCSPWSUpgradeStartedEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPWSUpgradeStartedEvent=f;var g=function(e){function t(t,r){var n=e.call(this,"OCSPCacheEntryExpiredEvent",o.EventType.Debug,t)||this;return n.privExpireTime=r,n}return i(t,e),t}(s);t.OCSPCacheEntryExpiredEvent=g;var y=function(e){function t(t,r,n){var i=e.call(this,"OCSPCacheEntryNeedsRefreshEvent",o.EventType.Debug,t)||this;return i.privExpireTime=n,i.privStartTime=r,i}return i(t,e),t}(s);t.OCSPCacheEntryNeedsRefreshEvent=y;var m=function(e){function t(t,r,n){var i=e.call(this,"OCSPCacheHitEvent",o.EventType.Debug,t)||this;return i.privExpireTime=n,i.privExpireTimeString=new Date(n).toLocaleDateString(),i.privStartTime=r,i.privStartTimeString=new Date(r).toLocaleTimeString(),i}return i(t,e),t}(s);t.OCSPCacheHitEvent=m;var S=function(e){function t(t,r){var n=e.call(this,"OCSPVerificationFailedEvent",o.EventType.Debug,t)||this;return n.privError=r,n}return i(t,e),t}(s);t.OCSPVerificationFailedEvent=S;var b=function(e){function t(t,r){var n=e.call(this,"OCSPCacheFetchErrorEvent",o.EventType.Debug,t)||this;return n.privError=r,n}return i(t,e),t}(s);t.OCSPCacheFetchErrorEvent=b;var C=function(e){function t(t){return e.call(this,"OCSPResponseRetrievedEvent",o.EventType.Debug,t)||this}return i(t,e),t}(s);t.OCSPResponseRetrievedEvent=C;var P=function(e){function t(t,r){var n=e.call(this,"OCSPCacheUpdateErrorEvent",o.EventType.Debug,t)||this;return n.privError=r,n}return i(t,e),t}(s);t.OCSPCacheUpdateErrorEvent=P},920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;var n,i=r(24147);(n=t.EventType||(t.EventType={}))[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error";var o=function(){function e(e,t){this.privName=e,this.privEventId=i.createNoDashGuid(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.privName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventId",{get:function(){return this.privEventId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventTime",{get:function(){return this.privEventTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventType",{get:function(){return this.privEventType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.privMetadata},enumerable:!1,configurable:!0}),e}();t.PlatformEvent=o},81852:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0,function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(r=t.PromiseState||(t.PromiseState={}));var n=function(){function e(e){var t=this;this.throwIfError=function(){if(t.isError)throw t.error},e.on((function(e){t.privIsCompleted||(t.privIsCompleted=!0,t.privIsError=!1,t.privResult=e)}),(function(e){t.privIsCompleted||(t.privIsCompleted=!0,t.privIsError=!0,t.privError=e)}))}return Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this.privIsCompleted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return this.privIsError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),e}();t.PromiseResult=n;var i=function(){var e=this;this.setResult=function(t){e.privOnSetResult(t)},this.setError=function(t){e.privOnSetError(t)},this.on=function(t,r){e.privOnSetResult=t,e.privOnSetError=r}};t.PromiseResultEventSource=i;var o=function(){function e(){var e=this;this.resolve=function(t){return e.privResolve(t),e},this.reject=function(t){return e.privReject(t),e},this.privPromise=new Promise((function(t,r){e.privResolve=t,e.privReject=r}))}return Object.defineProperty(e.prototype,"promise",{get:function(){return this.privPromise},enumerable:!1,configurable:!0}),e}();t.Deferred=o;var s=function(){function e(){var e=this;this.privState=r.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.resolve=function(t){if(e.privState!==r.None)throw new Error("'Cannot resolve a completed promise'");e.privState=r.Resolved,e.privPromiseResultEvents.setResult(t);for(var n=0;n<e.privSuccessHandlers.length;n++)e.executeSuccessCallback(t,e.privSuccessHandlers[n],e.privErrorHandlers[n]);e.detachHandlers()},this.reject=function(t){if(e.privState!==r.None)throw new Error("'Cannot reject a completed promise'");e.privState=r.Rejected,e.privPromiseResultEvents.setError(t);for(var n=0,i=e.privErrorHandlers;n<i.length;n++){var o=i[n];e.executeErrorCallback(t,o)}e.detachHandlers()},this.on=function(t,n){null==t&&(t=function(e){}),e.privState===r.None?(e.privSuccessHandlers.push(t),e.privErrorHandlers.push(n)):(e.privState===r.Resolved?e.executeSuccessCallback(e.privPromiseResult.result,t,n):e.privState===r.Rejected&&e.executeErrorCallback(e.privPromiseResult.error,n),e.detachHandlers())},this.executeSuccessCallback=function(t,r,n){try{r(t)}catch(t){e.executeErrorCallback("'Unhandled callback error: "+t+"'",n)}},this.executeErrorCallback=function(e,t){if(!t)throw new Error("'Unhandled error: "+e+"'");try{t(e)}catch(t){throw new Error("'Unhandled callback error: "+t+". InnerError: "+e+"'")}},this.detachHandlers=function(){e.privErrorHandlers=[],e.privSuccessHandlers=[]},this.privPromiseResultEvents=new i,this.privPromiseResult=new n(this.privPromiseResultEvents)}return Object.defineProperty(e.prototype,"state",{get:function(){return this.privState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.privPromiseResult},enumerable:!1,configurable:!0}),e}();t.Sink=s,t.marshalPromiseToCallbacks=function(e,t,r){e.then((function(e){try{t&&t(e)}catch(e){if(r)try{if(e instanceof Error){var n=e;r(n.name+": "+n.message)}else r(e)}catch(e){}}}),(function(e){if(r)try{if(e instanceof Error){var t=e;r(t.name+": "+t.message)}else r(e)}catch(e){}}))}},17453:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;var o,s=r(32420),a=r(67748),c=r(81852);!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(o||(o={}));var u=function(){function e(e){var t=this;this.privPromiseStore=new a.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.enqueue=function(e){t.throwIfDispose(),t.enqueueFromPromise(new Promise((function(t,r){t(e)})))},this.enqueueFromPromise=function(e){t.throwIfDispose(),e.then((function(e){t.privList.add(e)}),(function(e){}))},this.dequeue=function(){t.throwIfDispose();var e=new c.Deferred;return t.privSubscribers&&(t.privSubscribers.add({deferral:e,type:o.Dequeue}),t.drain()),e.promise},this.peek=function(){t.throwIfDispose();var e=new c.Deferred;return t.privSubscribers&&(t.privSubscribers.add({deferral:e,type:o.Peek}),t.drain()),e.promise},this.length=function(){return t.throwIfDispose(),t.privList.length()},this.isDisposed=function(){return null==t.privSubscribers},this.drain=function(){if(!t.privIsDrainInProgress&&!t.privIsDisposing){t.privIsDrainInProgress=!0;var e=t.privSubscribers,r=t.privList;if(e&&r){for(;r.length()>0&&e.length()>0&&!t.privIsDisposing;){var n=e.removeFirst();if(n.type===o.Peek)n.deferral.resolve(r.first());else{var i=r.removeFirst();n.deferral.resolve(i)}}t.privSubscribers===e&&(t.privSubscribers=e),t.privList===r&&(t.privList=r)}t.privIsDrainInProgress=!1}},this.throwIfDispose=function(){if(t.isDisposed()){if(t.privDisposeReason)throw new s.InvalidOperationError(t.privDisposeReason);throw new s.ObjectDisposedError("Queue")}if(t.privIsDisposing)throw new s.InvalidOperationError("Queue disposing")},this.privList=e||new a.List,this.privDetachables=[],this.privSubscribers=new a.List,this.privDetachables.push(this.privList.onAdded(this.drain))}return e.prototype.drainAndDispose=function(e,t){return n(this,void 0,void 0,(function(){var r,n,o,s,a=this;return i(this,(function(i){switch(i.label){case 0:if(this.isDisposed()||this.privIsDisposing)return[3,5];if(this.privDisposeReason=t,this.privIsDisposing=!0,r=this.privSubscribers){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}n=0,o=this.privDetachables,i.label=1;case 1:return n<o.length?[4,o[n].detach()]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:if(this.privPromiseStore.length()>0&&e)return s=[],this.privPromiseStore.toArray().forEach((function(e){s.push(e)})),[2,Promise.all(s).finally((function(){a.privSubscribers=null,a.privList.forEach((function(t,r){e(t)})),a.privList=null})).then()];this.privSubscribers=null,this.privList=null,i.label=5;case 5:return[2]}}))}))},e.prototype.dispose=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.drainAndDispose(null,e)];case 1:return t.sent(),[2]}}))}))},e}();t.Queue=u},55663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawWebsocketMessage=void 0;var n=r(49647),i=r(32420),o=r(24147),s=function(){function e(e,t,r){if(this.privPayload=null,!t)throw new i.ArgumentNullError("payload");if(e===n.MessageType.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new i.InvalidOperationError("Payload must be ArrayBuffer");if(e===n.MessageType.Text&&"string"!=typeof t)throw new i.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=r||o.createNoDashGuid()}return Object.defineProperty(e.prototype,"messageType",{get:function(){return this.privMessageType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){if(this.privMessageType===n.MessageType.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryContent",{get:function(){if(this.privMessageType===n.MessageType.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e}();t.RawWebsocketMessage=s},79819:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RiffPcmEncoder=void 0;t.RiffPcmEncoder=function(e,t){var r=this;this.encode=function(e){var t=r.downSampleAudioFrame(e,r.privActualSampleRate,r.privDesiredSampleRate);if(!t)return null;var n=2*t.length,i=new ArrayBuffer(n),o=new DataView(i);return r.floatTo16BitPCM(o,0,t),i},this.setString=function(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},this.floatTo16BitPCM=function(e,t,r){for(var n=0;n<r.length;n++,t+=2){var i=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,i<0?32768*i:32767*i,!0)}},this.downSampleAudioFrame=function(e,t,r){if(r===t||r>t)return e;for(var n=t/r,i=Math.round(e.length/n),o=new Float32Array(i),s=0,a=0;a<i;){for(var c=Math.round((a+1)*n),u=0,p=0;s<c&&s<e.length;)u+=e[s++],p++;o[a++]=u/p}return o},this.privActualSampleRate=e,this.privDesiredSampleRate=t}},96258:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;var o=r(32420),s=r(24147),a=r(17453),c=function(){function e(e){var t=this;this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.read=function(){if(t.privIsReadEnded)throw new o.InvalidOperationError("Stream read has already finished");return t.privReaderQueue.dequeue().then((function(e){return n(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return void 0===e||e.isEnd?[4,this.privReaderQueue.dispose("End of stream reached")]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,e]}}))}))}))},this.readEnded=function(){t.privIsReadEnded||(t.privIsReadEnded=!0,t.privReaderQueue=new a.Queue)},this.throwIfClosed=function(){if(t.privIsWriteEnded)throw new o.InvalidOperationError("Stream closed")},this.privId=e||s.createNoDashGuid(),this.privReaderQueue=new a.Queue}return Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.privIsWriteEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReadEnded",{get:function(){return this.privIsReadEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e.prototype.close=function(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)},e.prototype.writeStreamChunk=function(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}},e}();t.Stream=c},52300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timeout=void 0;var r=function(){function e(){}return e.workerTimers=null,e.clearTimeout=function(t){return e.timers().clearTimeout(t)},e.setTimeout=function(t,r){return e.timers().setTimeout(t,r)},e.load=function(t){var r=new Map([[0,function(){}]]),n=new Map,i=new Worker(t);return i.addEventListener("message",(function(t){var i=t.data;if(e.isCallNotification(i)){var o=i.params.timerId,s=r.get(o);if("number"==typeof s){if(void 0===(c=n.get(s))||c!==o)throw new Error("The timer is in an undefined state.")}else{if(void 0===s)throw new Error("The timer is in an undefined state.");s(),r.delete(o)}}else{if(!e.isClearResponse(i)){var a=i.error.message;throw new Error(a)}var c,u=i.id;if(void 0===(c=n.get(u)))throw new Error("The timer is in an undefined state.");n.delete(u),r.delete(c)}})),{clearTimeout:function(e){var t=Math.random();n.set(t,e),r.set(e,t),i.postMessage({id:t,method:"clear",params:{timerId:e}})},setTimeout:function(e,t){var n=Math.random();return r.set(n,e),i.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:n}}),n}}},e.loadWorkerTimers=function(){return function(){if(null!==e.workerTimers)return e.workerTimers;var t=new Blob(['!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(t);return e.workerTimers=e.load(r),e.workerTimers.setTimeout((function(){return URL.revokeObjectURL(r)}),0),e.workerTimers}},e.timers=e.loadWorkerTimers(),e.isCallNotification=function(e){return void 0!==e.method&&"call"===e.method},e.isClearResponse=function(e){return null===e.error&&"number"==typeof e.id},e}();t.Timeout=r},25574:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityReceivedEventArgs=void 0;var r=function(){function e(e,t){this.privActivity=e,this.privAudioStream=t}return Object.defineProperty(e.prototype,"activity",{get:function(){return this.privActivity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioStream",{get:function(){return this.privAudioStream},enumerable:!1,configurable:!0}),e}();t.ActivityReceivedEventArgs=r},18467:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputConfigImpl=t.AudioConfigImpl=t.AudioConfig=void 0;var o=r(73442),s=r(61316),a=r(36514),c=r(22351),u=r(71579),p=r(7904),h=function(){function e(){}return e.fromDefaultMicrophoneInput=function(){var e=new o.PcmRecorder;return new l(new o.MicAudioSource(e))},e.fromMicrophoneInput=function(e){var t=new o.PcmRecorder;return new l(new o.MicAudioSource(t,e))},e.fromWavFileInput=function(e,t){return void 0===t&&(t="unnamedBuffer.wav"),new l(new o.FileAudioSource(e,t))},e.fromStreamInput=function(e){if(e instanceof a.PullAudioInputStreamCallback)return new l(new u.PullAudioInputStreamImpl(e));if(e instanceof a.AudioInputStream)return new l(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){var t=new o.PcmRecorder;return new l(new o.MicAudioSource(t,null,null,e))}throw new Error("Not Supported Type")},e.fromDefaultSpeakerOutput=function(){return new v(new a.SpeakerAudioDestination)},e.fromSpeakerOutput=function(t){if(void 0===t)return e.fromDefaultSpeakerOutput();if(t instanceof a.SpeakerAudioDestination)return new v(t);throw new Error("Not Supported Type")},e.fromAudioFileOutput=function(e){return new v(new c.AudioFileWriter(e))},e.fromStreamOutput=function(e){if(e instanceof a.PushAudioOutputStreamCallback)return new v(new p.PushAudioOutputStreamImpl(e));if(e instanceof a.PushAudioOutputStream)return new v(e);if(e instanceof a.PullAudioOutputStream)return new v(e);throw new Error("Not Supported Type")},e}();t.AudioConfig=h;var l=function(e){function t(t){var r=e.call(this)||this;return r.privSource=t,r}return i(t,e),Object.defineProperty(t.prototype,"format",{get:function(){return this.privSource.format},enumerable:!1,configurable:!0}),t.prototype.close=function(e,t){this.privSource.turnOff().then((function(){e&&e()}),(function(e){t&&t(e)}))},t.prototype.id=function(){return this.privSource.id()},Object.defineProperty(t.prototype,"blob",{get:function(){return this.privSource.blob},enumerable:!1,configurable:!0}),t.prototype.turnOn=function(){return this.privSource.turnOn()},t.prototype.attach=function(e){return this.privSource.attach(e)},t.prototype.detach=function(e){return this.privSource.detach(e)},t.prototype.turnOff=function(){return this.privSource.turnOff()},Object.defineProperty(t.prototype,"events",{get:function(){return this.privSource.events},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(e,t){if(s.Contracts.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)},t.prototype.getProperty=function(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")},Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return this.privSource.deviceInfo},enumerable:!1,configurable:!0}),t}(h);t.AudioConfigImpl=l;var v=function(e){function t(t){var r=e.call(this)||this;return r.privDestination=t,r}return i(t,e),Object.defineProperty(t.prototype,"format",{set:function(e){this.privDestination.format=e},enumerable:!1,configurable:!0}),t.prototype.write=function(e){this.privDestination.write(e)},t.prototype.close=function(){this.privDestination.close()},t.prototype.id=function(){return this.privDestination.id()},t.prototype.setProperty=function(e,t){throw new Error("This AudioConfig instance does not support setting properties.")},t.prototype.getProperty=function(e,t){throw new Error("This AudioConfig instance does not support getting properties.")},t}(h);t.AudioOutputConfigImpl=v},22351:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioFileWriter=void 0;var s=o(r(22088)),a=r(61316),c=function(){function e(e){var t=this;this.id=function(){return t.privId},a.Contracts.throwIfNullOrUndefined(s.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=s.openSync(e,"w")}return Object.defineProperty(e.prototype,"format",{set:function(e){a.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;var t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=s.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))},enumerable:!1,configurable:!0}),e.prototype.write=function(e){a.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))},e.prototype.close=function(){var e=this;void 0!==this.privFd&&(this.privWriteStream.on("finish",(function(){e.privAudioFormat.hasHeader&&(e.privAudioFormat.updateHeader(e.privWriteStream.bytesWritten),s.writeSync(e.privFd,new Int8Array(e.privAudioFormat.header),0,e.privAudioFormat.header.byteLength,0)),s.closeSync(e.privFd),e.privFd=void 0})),this.privWriteStream.end())},e}();t.AudioFileWriter=c},71579:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamImpl=t.PullAudioInputStream=t.PushAudioInputStreamImpl=t.PushAudioInputStream=t.AudioInputStream=void 0;var a=r(80194),c=r(51564),u=r(24147),p=r(36514),h=r(38022),l=function(){function e(){}return e.createPushStream=function(e){return v.create(e)},e.createPullStream=function(e,t){return f.create(e,t)},e}();t.AudioInputStream=l;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.create=function(e){return new d(e)},t}(l);t.PushAudioInputStream=v;var d=function(e){function t(t){var r=e.call(this)||this;return r.onEvent=function(e){r.privEvents.onEvent(e),c.Events.instance.onEvent(e)},r.privFormat=void 0===t?h.AudioStreamFormatImpl.getDefaultInputFormat():t,r.privEvents=new c.EventSource,r.privId=u.createNoDashGuid(),r.privStream=new c.ChunkedArrayBufferStream(r.privFormat.avgBytesPerSec/10),r}return i(t,e),Object.defineProperty(t.prototype,"format",{get:function(){return Promise.resolve(this.privFormat)},enumerable:!1,configurable:!0}),t.prototype.write=function(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})},t.prototype.close=function(){this.privStream.close()},t.prototype.id=function(){return this.privId},Object.defineProperty(t.prototype,"blob",{get:function(){var e=this;return this.attach("id").then((function(t){var r=[],n=Buffer.from(""),i=function(){return t.read().then((function(t){return!t||t.isEnd?"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof Blob?Promise.resolve(new Blob(r)):Promise.resolve(Buffer.from(n)):("undefined"!=typeof Blob?r.push(t.buffer):n=Buffer.concat([n,e.toBuffer(t.buffer)]),i())}))};return i()}))},enumerable:!1,configurable:!0}),t.prototype.turnOn=function(){this.onEvent(new c.AudioSourceInitializingEvent(this.privId)),this.onEvent(new c.AudioSourceReadyEvent(this.privId))},t.prototype.attach=function(e){return o(this,void 0,void 0,(function(){var t,r=this;return s(this,(function(n){switch(n.label){case 0:return this.onEvent(new c.AudioStreamNodeAttachingEvent(this.privId,e)),[4,this.turnOn()];case 1:return n.sent(),t=this.privStream,this.onEvent(new c.AudioStreamNodeAttachedEvent(this.privId,e)),[2,{detach:function(){return o(r,void 0,void 0,(function(){return s(this,(function(r){return t.readEnded(),this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e)),[2,this.turnOff()]}))}))},id:function(){return e},read:function(){return t.read()}}]}}))}))},t.prototype.detach=function(e){this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e))},t.prototype.turnOff=function(){},Object.defineProperty(t.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:a.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:a.type.Stream})},enumerable:!1,configurable:!0}),t.prototype.toBuffer=function(e){for(var t=Buffer.alloc(e.byteLength),r=new Uint8Array(e),n=0;n<t.length;++n)t[n]=r[n];return t},t}(v);t.PushAudioInputStreamImpl=d;var f=function(e){function t(){return e.call(this)||this}return i(t,e),t.create=function(e,t){return new g(e,t)},t}(l);t.PullAudioInputStream=f;var g=function(e){function t(t,r){var n=e.call(this)||this;return n.onEvent=function(e){n.privEvents.onEvent(e),c.Events.instance.onEvent(e)},n.privFormat=void 0===r?p.AudioStreamFormat.getDefaultInputFormat():r,n.privEvents=new c.EventSource,n.privId=u.createNoDashGuid(),n.privCallback=t,n.privIsClosed=!1,n.privBufferSize=n.privFormat.avgBytesPerSec/10,n}return i(t,e),Object.defineProperty(t.prototype,"format",{get:function(){return Promise.resolve(this.privFormat)},enumerable:!1,configurable:!0}),t.prototype.close=function(){this.privIsClosed=!0,this.privCallback.close()},t.prototype.id=function(){return this.privId},Object.defineProperty(t.prototype,"blob",{get:function(){return Promise.reject("Not implemented")},enumerable:!1,configurable:!0}),t.prototype.turnOn=function(){this.onEvent(new c.AudioSourceInitializingEvent(this.privId)),this.onEvent(new c.AudioSourceReadyEvent(this.privId))},t.prototype.attach=function(e){return o(this,void 0,void 0,(function(){var t=this;return s(this,(function(r){switch(r.label){case 0:return this.onEvent(new c.AudioStreamNodeAttachingEvent(this.privId,e)),[4,this.turnOn()];case 1:return r.sent(),this.onEvent(new c.AudioStreamNodeAttachedEvent(this.privId,e)),[2,{detach:function(){return t.privCallback.close(),t.onEvent(new c.AudioStreamNodeDetachedEvent(t.privId,e)),t.turnOff()},id:function(){return e},read:function(){for(var e,r=0;r<t.privBufferSize;){var n=new ArrayBuffer(t.privBufferSize-r),i=t.privCallback.read(n);if(void 0===e?e=n:new Int8Array(e).set(new Int8Array(n),r),0===i)break;r+=i}return Promise.resolve({buffer:e.slice(0,r),isEnd:t.privIsClosed||0===r,timeReceived:Date.now()})}}]}}))}))},t.prototype.detach=function(e){this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e))},t.prototype.turnOff=function(){},Object.defineProperty(t.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:a.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:a.type.Stream})},enumerable:!1,configurable:!0}),t}(f);t.PullAudioInputStreamImpl=g},92400:function(e,t,r){"use strict";var n,i,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputFormatImpl=void 0;var s=r(86449),a=r(38022),c=function(e){function t(t,r,n,i,o,s,a,c,u){var p=e.call(this,n,s,r,t)||this;return p.formatTag=t,p.avgBytesPerSec=i,p.blockAlign=o,p.priAudioFormatString=a,p.priRequestAudioFormatString=c,p.priHasHeader=u,p}return o(t,e),t.fromSpeechSynthesisOutputFormat=function(e){return void 0===e?t.getDefaultOutputFormat():t.fromSpeechSynthesisOutputFormatString(t.SpeechSynthesisOutputFormatToString[e])},t.fromSpeechSynthesisOutputFormatString=function(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new t(a.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new t(a.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new t(a.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new t(a.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new t(a.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new t(a.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new t(a.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new t(a.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new t(a.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new t(a.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new t(a.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new t(a.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new t(a.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new t(a.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new t(a.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new t(a.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new t(a.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new t(a.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new t(a.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new t(a.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new t(a.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new t(a.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new t(a.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new t(a.AudioFormatTag.WEBM_OPUS,1,16e3,8e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new t(a.AudioFormatTag.WEBM_OPUS,1,24e3,8e3,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new t(a.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new t(a.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new t(a.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);default:return new t(a.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}},t.getDefaultOutputFormat=function(){return t.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")},Object.defineProperty(t.prototype,"hasHeader",{get:function(){return this.priHasHeader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){if(this.hasHeader)return this.privHeader},enumerable:!1,configurable:!0}),t.prototype.updateHeader=function(e){this.priHasHeader&&new DataView(this.privHeader).setUint32(40,e,!0)},Object.defineProperty(t.prototype,"requestAudioFormatString",{get:function(){return this.priRequestAudioFormatString},enumerable:!1,configurable:!0}),t.SpeechSynthesisOutputFormatToString=((i={})[s.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]="raw-8khz-8bit-mono-mulaw",i[s.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]="riff-16khz-16kbps-mono-siren",i[s.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]="audio-16khz-16kbps-mono-siren",i[s.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]="audio-16khz-32kbitrate-mono-mp3",i[s.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]="audio-16khz-128kbitrate-mono-mp3",i[s.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]="audio-16khz-64kbitrate-mono-mp3",i[s.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]="audio-24khz-48kbitrate-mono-mp3",i[s.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]="audio-24khz-96kbitrate-mono-mp3",i[s.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]="audio-24khz-160kbitrate-mono-mp3",i[s.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]="raw-16khz-16bit-mono-truesilk",i[s.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]="riff-16khz-16bit-mono-pcm",i[s.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]="riff-8khz-16bit-mono-pcm",i[s.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]="riff-24khz-16bit-mono-pcm",i[s.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]="riff-8khz-8bit-mono-mulaw",i[s.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]="raw-16khz-16bit-mono-pcm",i[s.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]="raw-24khz-16bit-mono-pcm",i[s.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]="raw-8khz-16bit-mono-pcm",i[s.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]="ogg-16khz-16bit-mono-opus",i[s.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]="ogg-24khz-16bit-mono-opus",i[s.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]="raw-48khz-16bit-mono-pcm",i[s.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]="riff-48khz-16bit-mono-pcm",i[s.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]="audio-48khz-96kbitrate-mono-mp3",i[s.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]="audio-48khz-192kbitrate-mono-mp3",i[s.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]="ogg-48khz-16bit-mono-opus",i[s.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]="webm-16khz-16bit-mono-opus",i[s.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]="webm-24khz-16bit-mono-opus",i[s.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]="raw-24khz-16bit-mono-truesilk",i[s.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]="raw-8khz-8bit-mono-alaw",i[s.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]="riff-8khz-8bit-mono-alaw",i),t}(a.AudioStreamFormatImpl);t.AudioOutputFormatImpl=c},7904:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamImpl=t.PushAudioOutputStream=t.PullAudioOutputStreamImpl=t.PullAudioOutputStream=t.AudioOutputStream=void 0;var a=r(51564),c=r(61316),u=r(92400),p=function(){function e(){}return e.createPullStream=function(){return h.create()},e}();t.AudioOutputStream=p;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.create=function(){return new l},t}(p);t.PullAudioOutputStream=h;var l=function(e){function t(){var t=e.call(this)||this;return t.privId=a.createNoDashGuid(),t.privStream=new a.Stream,t}return i(t,e),Object.defineProperty(t.prototype,"format",{get:function(){return this.privFormat},set:function(e){null==e&&(this.privFormat=u.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClosed",{get:function(){return this.privStream.isClosed},enumerable:!1,configurable:!0}),t.prototype.id=function(){return this.privId},t.prototype.read=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i;return s(this,(function(o){switch(o.label){case 0:if(t=new Int8Array(e),r=0,void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),[2,Promise.resolve(e.byteLength)];t.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}o.label=1;case 1:return r<e.byteLength&&!this.privStream.isReadEnded?[4,this.privStream.read()]:[3,6];case 2:return void 0===(n=o.sent())||n.isEnd?[3,3]:(i=void 0,n.buffer.byteLength>e.byteLength-r?(i=n.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(n.buffer.slice(e.byteLength-r))):i=n.buffer,t.set(new Int8Array(i),r),r+=i.byteLength,[3,5]);case 3:return[4,this.privStream.readEnded()];case 4:o.sent(),o.label=5;case 5:return[3,1];case 6:return[2,r]}}))}))},t.prototype.write=function(e){c.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})},t.prototype.close=function(){this.privStream.close()},t}(h);t.PullAudioOutputStreamImpl=l;var v=function(e){function t(){return e.call(this)||this}return i(t,e),t.create=function(e){return new d(e)},t}(p);t.PushAudioOutputStream=v;var d=function(e){function t(t){var r=e.call(this)||this;return r.privId=a.createNoDashGuid(),r.privCallback=t,r}return i(t,e),Object.defineProperty(t.prototype,"format",{set:function(e){},enumerable:!1,configurable:!0}),t.prototype.write=function(e){this.privCallback.write&&this.privCallback.write(e)},t.prototype.close=function(){this.privCallback.close&&this.privCallback.close()},t.prototype.id=function(){return this.privId},t}(v);t.PushAudioOutputStreamImpl=d},38022:function(e,t){"use strict";var r,n,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0,function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw"}(n=t.AudioFormatTag||(t.AudioFormatTag={}));var o=function(){function e(){}return e.getDefaultInputFormat=function(){return s.getDefaultInputFormat()},e.getWaveFormatPCM=function(e,t,r){return new s(e,t,r)},e}();t.AudioStreamFormat=o;var s=function(e){function t(t,r,i,o){void 0===t&&(t=16e3),void 0===r&&(r=16),void 0===i&&(i=1),void 0===o&&(o=n.PCM);var s=e.call(this)||this;switch(s.setString=function(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},o){case n.PCM:s.formatTag=1;break;case n.ALaw:s.formatTag=6;break;case n.MuLaw:s.formatTag=7}s.bitsPerSample=r,s.samplesPerSec=t,s.channels=i,s.avgBytesPerSec=s.samplesPerSec*s.channels*(s.bitsPerSample/8),s.blockAlign=s.channels*Math.max(s.bitsPerSample,8),s.privHeader=new ArrayBuffer(44);var a=new DataView(s.privHeader);return s.setString(a,0,"RIFF"),a.setUint32(4,0,!0),s.setString(a,8,"WAVEfmt "),a.setUint32(16,16,!0),a.setUint16(20,s.formatTag,!0),a.setUint16(22,s.channels,!0),a.setUint32(24,s.samplesPerSec,!0),a.setUint32(28,s.avgBytesPerSec,!0),a.setUint16(32,s.channels*(s.bitsPerSample/8),!0),a.setUint16(34,s.bitsPerSample,!0),s.setString(a,36,"data"),a.setUint32(40,0,!0),s}return i(t,e),t.getDefaultInputFormat=function(){return new t},t.getAudioContext=function(e){var t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")},t.prototype.close=function(){},Object.defineProperty(t.prototype,"header",{get:function(){return this.privHeader},enumerable:!1,configurable:!0}),t}(o);t.AudioStreamFormatImpl=s},61358:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAudioPlayer=void 0;var o=r(32420),s=r(81852),a=r(36514),c=r(38022),u=function(){function e(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=a.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}return e.prototype.playAudioSample=function(e,t,r){s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){return this.ensureInitializedContext(),t=this.formatAudioData(e),(r=new Float32Array(this.samples.length+t.length)).set(this.samples,0),r.set(t,this.samples.length),this.samples=r,[2]}))})),t,r)},e.prototype.stopAudio=function(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then((function(){e&&e()}),(function(e){t&&t(e)})),this.audioContext=null)},e.prototype.init=function(e){this.audioFormat=e,this.samples=new Float32Array},e.prototype.ensureInitializedContext=function(){var e=this;null===this.audioContext&&(this.createAudioContext(),this.autoUpdateBufferTimer=setInterval((function(){e.updateAudioBuffer()}),200))},e.prototype.createAudioContext=function(){this.audioContext=c.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime},e.prototype.formatAudioData=function(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new o.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}},e.prototype.formatArrayBuffer=function(e,t){for(var r=new Float32Array(e.length),n=0;n<e.length;n++)r[n]=e[n]/t;return r},e.prototype.updateAudioBuffer=function(){if(0!==this.samples.length){for(var e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),r=this.samples.length/e,n=this.audioContext.createBuffer(e,r,this.audioFormat.samplesPerSec),i=0;i<e;i++)for(var o=i,s=n.getChannelData(i),a=0;a<this.samples.length;a++,o+=e)s[a]=this.samples[o];this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=n,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=n.duration,this.samples=new Float32Array}},e.prototype.playAudio=function(e){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:return null===this.audioContext&&this.createAudioContext(),t=this.audioContext.createBufferSource(),r=this.audioContext.destination,[4,this.audioContext.decodeAudioData(e,(function(e){t.buffer=e,t.connect(r),t.start(0)}))];case 1:return n.sent(),[2]}}))}))},e}();t.BaseAudioPlayer=u},22100:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamCallback=void 0;t.PullAudioInputStreamCallback=function(){}},51496:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamCallback=void 0;t.PushAudioOutputStreamCallback=function(){}},72043:function(e,t,r){"use strict";var n,i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerAudioDestination=void 0;var s=r(80194),a=r(51564),c=r(7904),u=r(38022),p=((n={})[u.AudioFormatTag.PCM]="audio/wav",n[u.AudioFormatTag.MuLaw]="audio/x-wav",n[u.AudioFormatTag.MP3]="audio/mpeg",n[u.AudioFormatTag.OGG_OPUS]="audio/ogg",n[u.AudioFormatTag.WEBM_OPUS]="audio/webm; codecs=opus",n[u.AudioFormatTag.ALaw]="audio/x-wav",n),h=function(){function e(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||a.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}return e.prototype.id=function(){return this.privId},e.prototype.write=function(e,t,r){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((function(){t&&t()}),(function(e){r&&r(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)},e.prototype.close=function(e,t){var r=this;if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((function(){e&&e()}),(function(e){t&&t(e)}));else if(void 0!==this.privAudioOutputStream)if(this.privFormat.formatTag!==u.AudioFormatTag.PCM&&this.privFormat.formatTag!==u.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==u.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){var n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then((function(i){n=s.SynthesisAdapterBase.addHeader(n,r.privFormat);var o=new Blob([n],{type:p[r.privFormat.formatTag]});r.privAudio.src=window.URL.createObjectURL(o),r.notifyPlayback().then((function(){e&&e()}),(function(e){t&&t(e)}))}),(function(e){t&&t(e)}))}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)},Object.defineProperty(e.prototype,"format",{set:function(e){var t=this;if("undefined"!=typeof AudioContext||void 0!==window.webkitAudioContext){this.privFormat=e;var r=p[this.privFormat.formatTag];void 0===r?console.warn("Unknown mimeType for format "+u.AudioFormatTag[this.privFormat.formatTag]+"; playback is not supported."):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=function(e){t.privMediaSourceOpened=!0,t.privMediaSource.duration=1800,t.privSourceBuffer=t.privMediaSource.addSourceBuffer(r),t.privSourceBuffer.onupdate=function(e){t.updateSourceBuffer().catch((function(e){a.Events.instance.onEvent(new a.BackgroundEvent(e))}))},t.privSourceBuffer.onupdateend=function(e){t.handleSourceBufferUpdateEnd().catch((function(e){a.Events.instance.onEvent(new a.BackgroundEvent(e))}))},t.privSourceBuffer.onupdatestart=function(e){t.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((function(e){a.Events.instance.onEvent(new a.BackgroundEvent(e))}))):(console.warn("Format "+u.AudioFormatTag[this.privFormat.formatTag]+" could not be played by MSE, streaming playback is not enabled."),this.privAudioOutputStream=new c.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.privIsClosed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return void 0!==this.privAudio?this.privAudio.currentTime:-1},enumerable:!1,configurable:!0}),e.prototype.pause=function(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)},e.prototype.resume=function(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((function(){e&&e()}),(function(e){t&&t(e)})),this.privIsPaused=!1)},Object.defineProperty(e.prototype,"internalAudio",{get:function(){return this.privAudio},enumerable:!1,configurable:!0}),e.prototype.updateSourceBuffer=function(){return i(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:if(!(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()))return[3,2];this.privAppendingToBuffer=!0,e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made"),[2]}return[4,this.notifyPlayback()];case 1:return t.sent(),[3,4];case 2:return this.canEndStream()?[4,this.handleSourceBufferUpdateEnd()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},e.prototype.handleSourceBufferUpdateEnd=function(){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.canEndStream()&&this.sourceBufferAvailable()?(this.privMediaSource.endOfStream(),[4,this.notifyPlayback()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.notifyPlayback=function(){return i(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return this.privPlaybackStarted||void 0===this.privAudio?[3,2]:(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=function(){e.onAudioEnd&&e.onAudioEnd(e)},this.privIsPaused?[3,2]:[4,this.privAudio.play()]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.canEndStream=function(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState},e.prototype.sourceBufferAvailable=function(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating},e}();t.SpeakerAudioDestination=h},15455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageConfig=void 0;var n=r(80194),i=r(61316),o=r(36514),s=function(){function e(){this.privProperties=new o.PropertyCollection}return e.fromOpenRange=function(){var t=new e;return t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.AutoDetectSourceLanguagesOpenRangeOptionName),t},e.fromLanguages=function(t){i.Contracts.throwIfArrayEmptyOrWhitespace(t,"languages");var r=new e;return r.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.join()),r},e.fromSourceLanguageConfigs=function(t){if(t.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");var r=new e,n=[];return t.forEach((function(e){if(n.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){var t=e.language+o.PropertyId.SpeechServiceConnection_EndpointId.toString();r.properties.setProperty(t,e.endpointId)}})),r.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.join()),r},Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();t.AutoDetectSourceLanguageConfig=s},76900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageResult=void 0;var n=r(61316),i=function(){function e(e,t){n.Contracts.throwIfNullOrUndefined(e,"language"),n.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}return e.fromResult=function(t){return new e(t.language,t.languageDetectionConfidence)},Object.defineProperty(e.prototype,"language",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageDetectionConfidence",{get:function(){return this.privLanguageDetectionConfidence},enumerable:!1,configurable:!0}),e}();t.AutoDetectSourceLanguageResult=i},55159:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.BotFrameworkConfig=void 0;var o=r(61316),s=r(24404),a=r(36514),c=function(e){function t(){return e.call(this)||this}return i(t,e),t.fromSubscription=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"subscription"),o.Contracts.throwIfNullOrWhitespace(t,"region");var n=new s.DialogServiceConfigImpl;return n.setProperty(a.PropertyId.Conversation_DialogType,s.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(a.PropertyId.SpeechServiceConnection_Key,e),n.setProperty(a.PropertyId.SpeechServiceConnection_Region,t),r&&n.setProperty(a.PropertyId.Conversation_ApplicationId,r),n},t.fromAuthorizationToken=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),o.Contracts.throwIfNullOrWhitespace(t,"region");var n=new s.DialogServiceConfigImpl;return n.setProperty(a.PropertyId.Conversation_DialogType,s.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e),n.setProperty(a.PropertyId.SpeechServiceConnection_Region,t),r&&n.setProperty(a.PropertyId.Conversation_ApplicationId,r),n},t.fromHost=function(e,t,r){o.Contracts.throwIfNullOrUndefined(e,"host");var n=e instanceof URL?e:new URL("wss://"+e+".convai.speech.azure.us");o.Contracts.throwIfNullOrUndefined(n,"resolvedHost");var i=new s.DialogServiceConfigImpl;return i.setProperty(a.PropertyId.Conversation_DialogType,s.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(a.PropertyId.SpeechServiceConnection_Host,n.toString()),void 0!==t&&i.setProperty(a.PropertyId.SpeechServiceConnection_Key,t),i},t.fromEndpoint=function(e,t){o.Contracts.throwIfNull(e,"endpoint");var r=new s.DialogServiceConfigImpl;return r.setProperty(a.PropertyId.Conversation_DialogType,s.DialogServiceConfig.DialogTypes.BotFramework),r.setProperty(a.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&r.setProperty(a.PropertyId.SpeechServiceConnection_Key,t),r},t}(s.DialogServiceConfigImpl);t.BotFrameworkConfig=c},80814:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetails=void 0;var o=r(80194),s=r(33158),a=r(36514),c=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return i(t,e),t.fromResult=function(e){var r=a.CancellationReason.Error,n=a.CancellationErrorCode.NoError;if(e instanceof a.RecognitionResult&&e.json){var i=o.SimpleSpeechPhrase.fromJSON(e.json);r=o.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus)}return e.properties&&(n=a.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,a.CancellationErrorCode[a.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)},t}(s.CancellationDetailsBase);t.CancellationDetails=c},33158:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetailsBase=void 0;var r=function(){function e(e,t,r){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}return Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ErrorCode",{get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),e}();t.CancellationDetailsBase=r},81034:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,(r=t.CancellationErrorCode||(t.CancellationErrorCode={}))[r.NoError=0]="NoError",r[r.AuthenticationFailure=1]="AuthenticationFailure",r[r.BadRequestParameters=2]="BadRequestParameters",r[r.TooManyRequests=3]="TooManyRequests",r[r.ConnectionFailure=4]="ConnectionFailure",r[r.ServiceTimeout=5]="ServiceTimeout",r[r.ServiceError=6]="ServiceError",r[r.RuntimeError=7]="RuntimeError"},33974:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationEventArgsBase=void 0;var o=function(e){function t(t,r,n,i,o){var s=e.call(this,i,o)||this;return s.privReason=t,s.privErrorDetails=r,s.privErrorCode=n,s}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),t}(r(36514).RecognitionEventArgs);t.CancellationEventArgsBase=o},7946:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,(r=t.CancellationReason||(t.CancellationReason={}))[r.Error=0]="Error",r[r.EndOfStream=1]="EndOfStream"},36428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;var n=r(80194),i=r(51564),o=r(14085),s=r(61316),a=r(36514),c=function(){function e(){}return e.fromRecognizer=function(t){var r=t.internalData,n=new e;return n.privInternalData=r,n.setupEvents(),n},e.fromSynthesizer=function(t){var r=t.internalData,n=new e;return n.privInternalData=r,n.setupEvents(),n},e.prototype.openConnection=function(e,t){i.marshalPromiseToCallbacks(this.privInternalData.connect(),e,t)},e.prototype.closeConnection=function(e,t){if(this.privInternalData instanceof n.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");i.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,t)},e.prototype.setMessageProperty=function(e,t,r){if(s.Contracts.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof n.ServiceRecognizerBase){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,r)}else if(this.privInternalData instanceof n.SynthesisAdapterBase){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,r)}},e.prototype.sendMessageAsync=function(e,t,r,n){i.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,t),r,n)},e.prototype.close=function(){},e.prototype.setupEvents=function(){var e=this;this.privEventListener=this.privInternalData.connectionEvents.attach((function(t){"ConnectionEstablishedEvent"===t.name?e.connected&&e.connected(new a.ConnectionEventArgs(t.connectionId)):"ConnectionClosedEvent"===t.name?e.disconnected&&e.disconnected(new a.ConnectionEventArgs(t.connectionId)):"ConnectionMessageSentEvent"===t.name?e.messageSent&&e.messageSent(new a.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(t.message))):"ConnectionMessageReceivedEvent"===t.name&&e.messageReceived&&e.messageReceived(new a.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(t.message)))})),this.privServiceEventListener=this.privInternalData.serviceEvents.attach((function(t){e.receivedServiceMessage&&e.receivedServiceMessage(new a.ServiceEventArgs(t.jsonString,t.name))}))},e}();t.Connection=c},53758:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionEventArgs=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(r(36514).SessionEventArgs);t.ConnectionEventArgs=o},14085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageImpl=t.ConnectionMessage=void 0;var n=r(97923),i=r(51564),o=r(45711),s=r(32816);t.ConnectionMessage=function(){};var a=function(){function e(e){var t=this;this.privConnectionMessage=e,this.privProperties=new o.PropertyCollection,this.privConnectionMessage.headers[n.HeaderNames.ConnectionId]&&this.privProperties.setProperty(s.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[n.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach((function(e,r,n){t.privProperties.setProperty(e,t.privConnectionMessage.headers[e])}))}return Object.defineProperty(e.prototype,"path",{get:function(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((function(e){return e.toLowerCase()==="path".toLowerCase()}))]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTextMessage",{get:function(){return this.privConnectionMessage.messageType===i.MessageType.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBinaryMessage",{get:function(){return this.privConnectionMessage.messageType===i.MessageType.Binary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TextMessage",{get:function(){return this.privConnectionMessage.textBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryMessage",{get:function(){return this.privConnectionMessage.binaryBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return""},e}();t.ConnectionMessageImpl=a},31952:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageEventArgs=void 0;var r=function(){function e(e){this.privConnectionMessage=e}return Object.defineProperty(e.prototype,"message",{get:function(){return this.privConnectionMessage},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Message: "+this.privConnectionMessage.toString()},e}();t.ConnectionMessageEventArgs=r},61316:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contracts=void 0;var r=function(){function e(){}return e.throwIfNullOrUndefined=function(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)},e.throwIfNull=function(e,t){if(null===e)throw new Error("throwIfNull:"+t)},e.throwIfNullOrWhitespace=function(t,r){if(e.throwIfNullOrUndefined(t,r),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+r)},e.throwIfDisposed=function(e){if(e)throw new Error("the object is already disposed")},e.throwIfArrayEmptyOrWhitespace=function(t,r){if(e.throwIfNullOrUndefined(t,r),0===t.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+r);for(var n=0,i=t;n<i.length;n++){var o=i[n];e.throwIfNullOrWhitespace(o,r)}},e.throwIfFileDoesNotExist=function(t,r){e.throwIfNullOrWhitespace(t,r)},e.throwIfNotUndefined=function(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)},e}();t.Contracts=r},23653:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionCanceledEventArgs=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(r(33974).CancellationEventArgsBase);t.ConversationTranscriptionCanceledEventArgs=o},49759:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCommandsConfig=void 0;var o=r(61316),s=r(24404),a=r(36514),c=function(e){function t(){return e.call(this)||this}return i(t,e),t.fromSubscription=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"applicationId"),o.Contracts.throwIfNullOrWhitespace(t,"subscription"),o.Contracts.throwIfNullOrWhitespace(r,"region");var n=new s.DialogServiceConfigImpl;return n.setProperty(a.PropertyId.Conversation_DialogType,s.DialogServiceConfig.DialogTypes.CustomCommands),n.setProperty(a.PropertyId.Conversation_ApplicationId,e),n.setProperty(a.PropertyId.SpeechServiceConnection_Key,t),n.setProperty(a.PropertyId.SpeechServiceConnection_Region,r),n},t.fromAuthorizationToken=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"applicationId"),o.Contracts.throwIfNullOrWhitespace(t,"authorizationToken"),o.Contracts.throwIfNullOrWhitespace(r,"region");var n=new s.DialogServiceConfigImpl;return n.setProperty(a.PropertyId.Conversation_DialogType,s.DialogServiceConfig.DialogTypes.CustomCommands),n.setProperty(a.PropertyId.Conversation_ApplicationId,e),n.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,t),n.setProperty(a.PropertyId.SpeechServiceConnection_Region,r),n},Object.defineProperty(t.prototype,"applicationId",{get:function(){return this.getProperty(a.PropertyId.Conversation_ApplicationId)},set:function(e){o.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(a.PropertyId.Conversation_ApplicationId,e)},enumerable:!1,configurable:!0}),t}(s.DialogServiceConfigImpl);t.CustomCommandsConfig=c},24404:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConfigImpl=t.DialogServiceConfig=void 0;var o=r(61316),s=r(36514),a=function(){function e(){}var t;return Object.defineProperty(e.prototype,"applicationId",{set:function(e){},enumerable:!1,configurable:!0}),e.DialogTypes=((t=function(){}).BotFramework="bot_framework",t.CustomCommands="custom_commands",t),e}();t.DialogServiceConfig=a;var c=function(e){function t(){var t=e.call(this)||this;return t.privSpeechConfig=new s.SpeechConfigImpl,t}return i(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privSpeechConfig.properties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechConfig.speechRecognitionLanguage},set:function(e){o.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this.privSpeechConfig.outputFormat},set:function(e){this.privSpeechConfig.outputFormat=e},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(e,t){this.privSpeechConfig.setProperty(e,t)},t.prototype.getProperty=function(e,t){return this.privSpeechConfig.getProperty(e)},t.prototype.setProxy=function(e,t,r,n){this.setProperty(s.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(s.PropertyId.SpeechServiceConnection_ProxyPort,""+t),r&&this.setProperty(s.PropertyId.SpeechServiceConnection_ProxyUserName,r),n&&this.setProperty(s.PropertyId.SpeechServiceConnection_ProxyPassword,n)},t.prototype.setServiceProperty=function(e,t,r){this.privSpeechConfig.setServiceProperty(e,t,r)},t.prototype.close=function(){},t}(a);t.DialogServiceConfigImpl=c},54962:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConnector=void 0;var a=r(72174),c=r(80194),u=r(51564),p=r(61316),h=r(36514),l=r(32816),v=function(e){function t(t,r){var n=this,i=t;p.Contracts.throwIfNull(t,"dialogConfig"),(n=e.call(this,r,i.properties,new a.DialogConnectionFactory)||this).isTurnComplete=!0,n.privIsDisposed=!1,n.privProperties=i.properties.clone();var o=n.buildAgentConfig();return n.privReco.agentConfig.set(o),n}return i(t,e),t.prototype.connect=function(e,t){u.marshalPromiseToCallbacks(this.privReco.connect(),e,t)},t.prototype.disconnect=function(e,t){u.marshalPromiseToCallbacks(this.privReco.disconnect(),e,t)},Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){p.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(l.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechActivityTemplate",{get:function(){return this.properties.getProperty(l.PropertyId.Conversation_Speech_Activity_Template)},set:function(e){this.properties.setProperty(l.PropertyId.Conversation_Speech_Activity_Template,e)},enumerable:!1,configurable:!0}),t.prototype.listenOnceAsync=function(e,t){var r=this;if(this.isTurnComplete){p.Contracts.throwIfDisposed(this.privIsDisposed);var n=o(r,void 0,void 0,(function(){var e,t;return s(this,(function(r){switch(r.label){case 0:return[4,this.privReco.connect()];case 1:return r.sent(),[4,this.implRecognizerStop()];case 2:return r.sent(),this.isTurnComplete=!1,e=new u.Deferred,[4,this.privReco.recognize(c.RecognitionMode.Conversation,e.resolve,e.reject)];case 3:return r.sent(),[4,e.promise];case 4:return t=r.sent(),[4,this.implRecognizerStop()];case 5:return r.sent(),[2,t]}}))}));n.catch((function(){r.dispose(!0).catch((function(){}))})),u.marshalPromiseToCallbacks(n.finally((function(){r.isTurnComplete=!0})),e,t)}},t.prototype.sendActivityAsync=function(e,t,r){u.marshalPromiseToCallbacks(this.privReco.sendMessage(e),t,r)},t.prototype.close=function(e,t){p.Contracts.throwIfDisposed(this.privIsDisposed),u.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.dispose=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return this.privIsDisposed?[2]:t?(this.privIsDisposed=!0,[4,this.implRecognizerStop()]):[3,3];case 1:return r.sent(),[4,e.prototype.dispose.call(this,t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.createRecognizerConfig=function(e){return new c.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,r,n){var i=r;return new c.DialogServiceAdapter(e,t,i,n,this)},t.prototype.buildAgentConfig=function(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(l.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(l.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(l.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}},t}(h.Recognizer);t.DialogServiceConnector=v},36514:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18467);Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return n.AudioConfig}});var i=r(38022);Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return i.AudioStreamFormat}});var o=r(71579);Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return o.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return o.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return o.PushAudioInputStream}});var s=r(7904);Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return s.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return s.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return s.PushAudioOutputStream}});var a=r(7946);Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return a.CancellationReason}});var c=r(22100);Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return c.PullAudioInputStreamCallback}});var u=r(51496);Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return u.PushAudioOutputStreamCallback}});var p=r(12765);Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return p.KeywordRecognitionModel}});var h=r(32239);Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return h.SessionEventArgs}});var l=r(57641);Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var v=r(45874);Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return v.OutputFormat}});var d=r(34251);Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var f=r(6251);Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return f.RecognitionResult}});var g=r(47424);Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return g.SpeechRecognitionResult}});var y=r(29502);Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return y.IntentRecognitionResult}});var m=r(25980);Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return m.LanguageUnderstandingModel}});var S=r(32252);Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return S.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return S.ConversationTranscriptionEventArgs}});var b=r(6);Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return b.SpeechRecognitionCanceledEventArgs}});var C=r(63127);Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return C.TranslationRecognitionEventArgs}});var P=r(95696);Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return P.TranslationSynthesisEventArgs}});var w=r(81295);Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return w.TranslationRecognitionResult}});var R=r(35758);Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return R.TranslationSynthesisResult}});var I=r(79343);Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return I.ResultReason}});var O=r(13189);Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return O.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return O.SpeechConfigImpl}});var E=r(41525);Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return E.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return E.SpeechTranslationConfigImpl}});var T=r(45711);Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return T.PropertyCollection}});var A=r(32816);Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return A.PropertyId}});var _=r(49609);Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return _.Recognizer}});var x=r(85686);Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return x.SpeechRecognizer}});var k=r(77858);Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return k.IntentRecognizer}});var M=r(25982);Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return M.VoiceProfileType}});var D=r(13300);Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return D.TranslationRecognizer}});var j=r(47521);Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return j.Translations}});var z=r(49750);Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return z.NoMatchReason}});var N=r(27986);Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return N.NoMatchDetails}});var L=r(16394);Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return L.TranslationRecognitionCanceledEventArgs}});var B=r(90587);Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return B.IntentRecognitionCanceledEventArgs}});var F=r(33158);Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return F.CancellationDetailsBase}});var U=r(80814);Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return U.CancellationDetails}});var q=r(81034);Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return q.CancellationErrorCode}});var V=r(53758);Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return V.ConnectionEventArgs}});var H=r(48980);Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return H.ServiceEventArgs}});var W=r(36428);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return W.Connection}});var K=r(84431);Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return K.PhraseListGrammar}});var J=r(24404);Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return J.DialogServiceConfig}});var G=r(55159);Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return G.BotFrameworkConfig}});var Q=r(49759);Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return Q.CustomCommandsConfig}});var $=r(54962);Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return $.DialogServiceConnector}});var X=r(25574);Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return X.ActivityReceivedEventArgs}});var Y=r(11529);Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Y.TurnStatusReceivedEventArgs}});var Z=r(75982);Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return Z.ServicePropertyChannel}});var ee=r(20817);Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return ee.ProfanityOption}});var te=r(61358);Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return te.BaseAudioPlayer}});var re=r(31952);Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return re.ConnectionMessageEventArgs}});var ne=r(14085);Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return ne.ConnectionMessage}});var ie=r(94358);Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return ie.VoiceProfile}});var oe=r(29144);Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return oe.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return oe.VoiceProfileEnrollmentCancellationDetails}});var se=r(30753);Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return se.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return se.VoiceProfileCancellationDetails}});var ae=r(75014);Object.defineProperty(t,"VoiceProfileAuthorizationPhraseResult",{enumerable:!0,get:function(){return ae.VoiceProfileAuthorizationPhraseResult}});var ce=r(24338);Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return ce.VoiceProfileClient}});var ue=r(77002);Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return ue.SpeakerRecognizer}});var pe=r(74484);Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return pe.SpeakerIdentificationModel}});var he=r(96509);Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return he.SpeakerVerificationModel}});var le=r(15455);Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return le.AutoDetectSourceLanguageConfig}});var ve=r(76900);Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return ve.AutoDetectSourceLanguageResult}});var de=r(58948);Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return de.SourceLanguageConfig}});var fe=r(76442);Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return fe.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return fe.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return fe.SpeakerRecognitionCancellationDetails}});var ge=r(3320);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return ge.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return ge.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return ge.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return ge.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return ge.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return ge.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return ge.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return ge.ConversationTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return ge.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return ge.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return ge.User}});var ye=r(86449);Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return ye.SpeechSynthesisOutputFormat}});var me=r(28365);Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return me.SpeechSynthesizer}});var Se=r(27338);Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return Se.SpeechSynthesisResult}});var be=r(46392);Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return be.SpeechSynthesisEventArgs}});var Ce=r(64242);Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Ce.SpeechSynthesisWordBoundaryEventArgs}});var Pe=r(10204);Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Pe.SpeechSynthesisBookmarkEventArgs}});var we=r(4675);Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return we.SpeechSynthesisVisemeEventArgs}});var Re=r(72043);Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Re.SpeakerAudioDestination}});var Ie=r(23653);Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Ie.ConversationTranscriptionCanceledEventArgs}});var Oe=r(35820);Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Oe.PronunciationAssessmentGradingSystem}});var Ee=r(89774);Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Ee.PronunciationAssessmentGranularity}});var Te=r(74173);Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Te.PronunciationAssessmentConfig}});var Ae=r(38136);Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Ae.PronunciationAssessmentResult}})},90587:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionCanceledEventArgs=void 0;var o=function(e){function t(t,r,n,i,o,s){var a=e.call(this,i,o,s)||this;return a.privReason=t,a.privErrorDetails=r,a.privErrorCode=n,a}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),t}(r(36514).IntentRecognitionEventArgs);t.IntentRecognitionCanceledEventArgs=o},34251:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionEventArgs=void 0;var o=function(e){function t(t,r,n){var i=e.call(this,r,n)||this;return i.privResult=t,i}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(r(36514).RecognitionEventArgs);t.IntentRecognitionEventArgs=o},29502:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionResult=void 0;var o=function(e){function t(t,r,n,i,o,s,a,c,u,p,h){var l=e.call(this,r,n,i,o,s,a,c,void 0,u,p,h)||this;return l.privIntentId=t,l}return i(t,e),Object.defineProperty(t.prototype,"intentId",{get:function(){return this.privIntentId},enumerable:!1,configurable:!0}),t}(r(36514).SpeechRecognitionResult);t.IntentRecognitionResult=o},77858:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognizer=void 0;var a=r(80194),c=r(51564),u=r(61316),p=r(36514),h=function(e){function t(t,r){var n=this;u.Contracts.throwIfNullOrUndefined(t,"speechConfig");var i=t;return u.Contracts.throwIfNullOrUndefined(i,"speechConfig"),(n=e.call(this,r,i.properties,new a.IntentConnectionFactory)||this).privAddedIntents=[],n.privAddedLmIntents={},n.privDisposedIntentRecognizer=!1,n.privProperties=i.properties,u.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage),p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),n}return i(t,e),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.recognizeOnceAsync=function(e,t){if(u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){var r=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",r.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(r.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}c.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(a.RecognitionMode.Interactive),e,t)},t.prototype.startContinuousRecognitionAsync=function(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){var r=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",r.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(r.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}c.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(a.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.startKeywordRecognitionAsync=function(e,t,r){u.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")},t.prototype.stopKeywordRecognitionAsync=function(e,t){e&&e()},t.prototype.addIntent=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),u.Contracts.throwIfNullOrWhitespace(t,"intentId"),u.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])},t.prototype.addIntentWithLanguageModel=function(e,t,r){u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),u.Contracts.throwIfNullOrWhitespace(e,"intentId"),u.Contracts.throwIfNull(t,"model");var n=t;u.Contracts.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privAddedLmIntents[e]=new a.AddedLmIntent(n,r)},t.prototype.addAllIntents=function(e,t){u.Contracts.throwIfNull(e,"model");var r=e;u.Contracts.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privUmbrellaIntent=new a.AddedLmIntent(r,t)},t.prototype.close=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),c.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.createRecognizerConfig=function(e){return new a.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,r,n){var i=r;return new a.IntentServiceRecognizer(e,t,i,n,this)},t.prototype.dispose=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return this.privDisposedIntentRecognizer?[2]:t?(this.privDisposedIntentRecognizer=!0,[4,e.prototype.dispose.call(this,t)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.buildSpeechContext=function(){var e,t,r,n=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(var i=0,o=Object.keys(this.privAddedLmIntents);i<o.length;i++){var s=o[i],a=this.privAddedLmIntents[s];if(void 0===e)e=a.modelImpl.appId;else if(e!==a.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=a.modelImpl.region;else if(t!==a.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===r)r=a.modelImpl.subscriptionKey;else if(r!==a.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");var c="luis/"+e+"-PRODUCTION#"+s;n.push(c)}return{Intent:{id:e,key:void 0===r?this.privProperties.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_Key]):r,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?n:["luis/"+e+"-PRODUCTION"]}},t}(p.Recognizer);t.IntentRecognizer=h},12765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordRecognitionModel=void 0;var n=r(61316),i=function(){function e(){this.privDisposed=!1}return e.fromFile=function(e){throw n.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")},e.fromStream=function(e){throw n.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")},e.prototype.close=function(){this.privDisposed||(this.privDisposed=!0)},e}();t.KeywordRecognitionModel=i},25980:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageUnderstandingModelImpl=t.LanguageUnderstandingModel=void 0;var o=r(61316),s=function(){function e(){}return e.fromEndpoint=function(e){o.Contracts.throwIfNull(e,"uri"),o.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");var t=new a,r=e.host.indexOf(".");if(-1===r)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,r);var n=e.pathname.lastIndexOf("/")+1;if(-1===n)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(n),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t},e.fromAppId=function(e){o.Contracts.throwIfNullOrWhitespace(e,"appId");var t=new a;return t.appId=e,t},e.fromSubscription=function(e,t,r){o.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),o.Contracts.throwIfNullOrWhitespace(t,"appId"),o.Contracts.throwIfNullOrWhitespace(r,"region");var n=new a;return n.appId=t,n.region=r,n.subscriptionKey=e,n},e}();t.LanguageUnderstandingModel=s;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(s);t.LanguageUnderstandingModelImpl=a},27986:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchDetails=void 0;var n=r(80194),i=r(36514),o=function(){function e(e){this.privReason=e}return e.fromResult=function(t){var r=n.SimpleSpeechPhrase.fromJSON(t.json),o=i.NoMatchReason.NotRecognized;switch(r.RecognitionStatus){case n.RecognitionStatus.BabbleTimeout:o=i.NoMatchReason.InitialBabbleTimeout;break;case n.RecognitionStatus.InitialSilenceTimeout:o=i.NoMatchReason.InitialSilenceTimeout;break;default:o=i.NoMatchReason.NotRecognized}return new e(o)},Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),e}();t.NoMatchDetails=o},49750:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,(r=t.NoMatchReason||(t.NoMatchReason={}))[r.NotRecognized=0]="NotRecognized",r[r.InitialSilenceTimeout=1]="InitialSilenceTimeout",r[r.InitialBabbleTimeout=2]="InitialBabbleTimeout"},45874:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,(r=t.OutputFormat||(t.OutputFormat={}))[r.Simple=0]="Simple",r[r.Detailed=1]="Detailed"},84431:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhraseListGrammar=void 0;var r=function(){function e(e){this.privGrammerBuilder=e.dynamicGrammar}return e.fromRecognizer=function(t){return new e(t.internalData)},e.prototype.addPhrase=function(e){this.privGrammerBuilder.addPhrase(e)},e.prototype.addPhrases=function(e){this.privGrammerBuilder.addPhrase(e)},e.prototype.clear=function(){this.privGrammerBuilder.clearPhrases()},e}();t.PhraseListGrammar=r},20817:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,(r=t.ProfanityOption||(t.ProfanityOption={}))[r.Masked=0]="Masked",r[r.Removed=1]="Removed",r[r.Raw=2]="Raw"},74173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentConfig=void 0;var n=r(61316),i=r(36514),o=function(){function e(e,t,r,o){void 0===t&&(t=i.PronunciationAssessmentGradingSystem.FivePoint),void 0===r&&(r=i.PronunciationAssessmentGranularity.Phoneme),void 0===o&&(o=!1),n.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new i.PropertyCollection,this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_GradingSystem,i.PronunciationAssessmentGradingSystem[t]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Granularity,i.PronunciationAssessmentGranularity[r]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}return e.fromJSON=function(t){n.Contracts.throwIfNullOrUndefined(t,"json");var r=new e("");return r.privProperties=new i.PropertyCollection,r.properties.setProperty(i.PropertyId.PronunciationAssessment_Json,t),r},e.prototype.toJSON=function(){return this.updateJson(),this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Params)},e.prototype.applyTo=function(e){this.updateJson(),e.internalData.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(i.PropertyId.PronunciationAssessment_Params))},Object.defineProperty(e.prototype,"referenceText",{get:function(){return this.properties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText)},set:function(e){n.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.updateJson=function(){var e=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),r=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText);r&&(t.referenceText=r);var n=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_GradingSystem);n&&(t.gradingSystem=n);var o=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Granularity);o&&(t.granularity=o),t.dimension="Comprehensive";var s=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_EnableMiscue);"true"===s?t.enableMiscue=!0:"false"===s&&(t.enableMiscue=!1),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Params,JSON.stringify(t))},e}();t.PronunciationAssessmentConfig=o},35820:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,(r=t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))[r.FivePoint=1]="FivePoint",r[r.HundredMark=2]="HundredMark"},89774:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,(r=t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))[r.Phoneme=1]="Phoneme",r[r.Word=2]="Word",r[r.FullText=3]="FullText"},38136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentResult=void 0;var n=r(61316),i=r(36514),o=function(){function e(e){var t=JSON.parse(e);n.Contracts.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}return e.fromResult=function(t){n.Contracts.throwIfNullOrUndefined(t,"result");var r=t.properties.getProperty(i.PropertyId.SpeechServiceResponse_JsonResult);return n.Contracts.throwIfNullOrUndefined(r,"json"),new e(r)},Object.defineProperty(e.prototype,"detailResult",{get:function(){return this.privPronJson},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accuracyScore",{get:function(){return this.detailResult.PronunciationAssessment.AccuracyScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pronunciationScore",{get:function(){return this.detailResult.PronunciationAssessment.PronScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completenessScore",{get:function(){return this.detailResult.PronunciationAssessment.CompletenessScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fluencyScore",{get:function(){return this.detailResult.PronunciationAssessment.FluencyScore},enumerable:!1,configurable:!0}),e}();t.PronunciationAssessmentResult=o},45711:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyCollection=void 0;var n=r(36514),i=function(){function e(){this.privKeys=[],this.privValues=[]}return e.prototype.getProperty=function(e,t){var r;r="string"==typeof e?e:n.PropertyId[e];for(var i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===r)return this.privValues[i];return t},e.prototype.setProperty=function(e,t){var r;r="string"==typeof e?e:n.PropertyId[e];for(var i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===r)return void(this.privValues[i]=t);this.privKeys.push(r),this.privValues.push(t)},e.prototype.clone=function(){for(var t=new e,r=0;r<this.privKeys.length;r++)t.privKeys.push(this.privKeys[r]),t.privValues.push(this.privValues[r]);return t},e.prototype.mergeTo=function(e){var t=this;this.privKeys.forEach((function(r){if(void 0===e.getProperty(r,void 0)){var n=t.getProperty(r);e.setProperty(r,n)}}))},e}();t.PropertyCollection=i},32816:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,(r=t.PropertyId||(t.PropertyId={}))[r.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",r[r.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",r[r.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",r[r.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",r[r.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",r[r.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",r[r.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",r[r.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",r[r.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",r[r.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",r[r.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",r[r.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",r[r.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",r[r.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",r[r.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",r[r.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",r[r.Speech_SessionId=16]="Speech_SessionId",r[r.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",r[r.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",r[r.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",r[r.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",r[r.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",r[r.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",r[r.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",r[r.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",r[r.CancellationDetails_Reason=25]="CancellationDetails_Reason",r[r.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",r[r.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",r[r.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",r[r.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",r[r.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",r[r.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",r[r.SpeechServiceConnection_EnableAudioLogging=32]="SpeechServiceConnection_EnableAudioLogging",r[r.SpeechServiceResponse_ProfanityOption=33]="SpeechServiceResponse_ProfanityOption",r[r.SpeechServiceResponse_PostProcessingOption=34]="SpeechServiceResponse_PostProcessingOption",r[r.SpeechServiceResponse_RequestWordLevelTimestamps=35]="SpeechServiceResponse_RequestWordLevelTimestamps",r[r.SpeechServiceResponse_StablePartialResultThreshold=36]="SpeechServiceResponse_StablePartialResultThreshold",r[r.SpeechServiceResponse_OutputFormatOption=37]="SpeechServiceResponse_OutputFormatOption",r[r.SpeechServiceResponse_TranslationRequestStablePartialResult=38]="SpeechServiceResponse_TranslationRequestStablePartialResult",r[r.Conversation_ApplicationId=39]="Conversation_ApplicationId",r[r.Conversation_DialogType=40]="Conversation_DialogType",r[r.Conversation_Initial_Silence_Timeout=41]="Conversation_Initial_Silence_Timeout",r[r.Conversation_From_Id=42]="Conversation_From_Id",r[r.Conversation_Conversation_Id=43]="Conversation_Conversation_Id",r[r.Conversation_Custom_Voice_Deployment_Ids=44]="Conversation_Custom_Voice_Deployment_Ids",r[r.Conversation_Speech_Activity_Template=45]="Conversation_Speech_Activity_Template",r[r.Conversation_Request_Bot_Status_Messages=46]="Conversation_Request_Bot_Status_Messages",r[r.Conversation_Agent_Connection_Id=47]="Conversation_Agent_Connection_Id",r[r.SpeechServiceConnection_Host=48]="SpeechServiceConnection_Host",r[r.ConversationTranslator_Host=49]="ConversationTranslator_Host",r[r.ConversationTranslator_Name=50]="ConversationTranslator_Name",r[r.ConversationTranslator_CorrelationId=51]="ConversationTranslator_CorrelationId",r[r.ConversationTranslator_Token=52]="ConversationTranslator_Token",r[r.PronunciationAssessment_ReferenceText=53]="PronunciationAssessment_ReferenceText",r[r.PronunciationAssessment_GradingSystem=54]="PronunciationAssessment_GradingSystem",r[r.PronunciationAssessment_Granularity=55]="PronunciationAssessment_Granularity",r[r.PronunciationAssessment_EnableMiscue=56]="PronunciationAssessment_EnableMiscue",r[r.PronunciationAssessment_Json=57]="PronunciationAssessment_Json",r[r.PronunciationAssessment_Params=58]="PronunciationAssessment_Params"},57641:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEventArgs=void 0;var o=function(e){function t(t,r){var n=e.call(this,r)||this;return n.privOffset=t,n}return i(t,e),Object.defineProperty(t.prototype,"offset",{get:function(){return this.privOffset},enumerable:!1,configurable:!0}),t}(r(36514).SessionEventArgs);t.RecognitionEventArgs=o},6251:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionResult=void 0;var r=function(){function e(e,t,r,n,i,o,s,a,c,u){this.privResultId=e,this.privReason=t,this.privText=r,this.privDuration=n,this.privOffset=i,this.privLanguage=o,this.privLanguageDetectionConfidence=s,this.privErrorDetails=a,this.privJson=c,this.privProperties=u}return Object.defineProperty(e.prototype,"resultId",{get:function(){return this.privResultId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.privText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.privDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this.privOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageDetectionConfidence",{get:function(){return this.privLanguageDetectionConfidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this.privJson},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();t.RecognitionResult=r},49609:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Recognizer=void 0;var o=r(80194),s=r(51564),a=r(61316),c=r(36514),u=function(){function e(e,t,r){this.audioConfig=void 0!==e?e:c.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=r,this.implCommonRecognizerSetup()}return e.prototype.close=function(e,t){a.Contracts.throwIfDisposed(this.privDisposed),s.marshalPromiseToCallbacks(this.dispose(!0),e,t)},Object.defineProperty(e.prototype,"internalData",{get:function(){return this.privReco},enumerable:!1,configurable:!0}),e.prototype.dispose=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.privDisposed?[2]:(this.privDisposed=!0,e&&this.privReco?[4,this.privReco.audioSource.turnOff()]:[3,3]);case 1:return t.sent(),[4,this.privReco.dispose()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},Object.defineProperty(e,"telemetryEnabled",{get:function(){return o.ServiceRecognizerBase.telemetryDataEnabled},enumerable:!1,configurable:!0}),e.enableTelemetry=function(e){o.ServiceRecognizerBase.telemetryDataEnabled=e},e.prototype.implCommonRecognizerSetup=function(){var t="undefined"!=typeof window?"Browser":"Node",r="unknown",n="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,r=navigator.userAgent,n=navigator.appVersion);var i=this.createRecognizerConfig(new o.SpeechServiceConfig(new o.Context(new o.OS(t,r,n))));this.privReco=this.createServiceRecognizer(e.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,i)},e.prototype.recognizeOnceAsyncImpl=function(e){return n(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:return a.Contracts.throwIfDisposed(this.privDisposed),t=new s.Deferred,[4,this.implRecognizerStop()];case 1:return n.sent(),[4,this.privReco.recognize(e,t.resolve,t.reject)];case 2:return n.sent(),[4,t.promise];case 3:return r=n.sent(),[4,this.implRecognizerStop()];case 4:return n.sent(),[2,r]}}))}))},e.prototype.startContinuousRecognitionAsyncImpl=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return a.Contracts.throwIfDisposed(this.privDisposed),[4,this.implRecognizerStop()];case 1:return t.sent(),[4,this.privReco.recognize(e,void 0,void 0)];case 2:return t.sent(),[2]}}))}))},e.prototype.stopContinuousRecognitionAsyncImpl=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return a.Contracts.throwIfDisposed(this.privDisposed),[4,this.implRecognizerStop()];case 1:return e.sent(),[2]}}))}))},e.prototype.implRecognizerStop=function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.privReco?[4,this.privReco.stopRecognizing()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.getAuthFromProperties=function(e){var t=e.getProperty(c.PropertyId.SpeechServiceConnection_Key,void 0);return t&&""!==t?new o.CognitiveSubscriptionKeyAuthentication(t):new o.CognitiveTokenAuthentication((function(t){var r=e.getProperty(c.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(r)}),(function(t){var r=e.getProperty(c.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(r)}))},e}();t.Recognizer=u},79343:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,(r=t.ResultReason||(t.ResultReason={}))[r.NoMatch=0]="NoMatch",r[r.Canceled=1]="Canceled",r[r.RecognizingSpeech=2]="RecognizingSpeech",r[r.RecognizedSpeech=3]="RecognizedSpeech",r[r.RecognizedKeyword=4]="RecognizedKeyword",r[r.RecognizingIntent=5]="RecognizingIntent",r[r.RecognizedIntent=6]="RecognizedIntent",r[r.TranslatingSpeech=7]="TranslatingSpeech",r[r.TranslatedSpeech=8]="TranslatedSpeech",r[r.SynthesizingAudio=9]="SynthesizingAudio",r[r.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",r[r.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",r[r.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",r[r.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",r[r.RecognizedSpeakers=14]="RecognizedSpeakers",r[r.RecognizedSpeaker=15]="RecognizedSpeaker",r[r.ResetVoiceProfile=16]="ResetVoiceProfile",r[r.DeletedVoiceProfile=17]="DeletedVoiceProfile"},48980:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceEventArgs=void 0;var o=function(e){function t(t,r,n){var i=e.call(this,n)||this;return i.privJsonResult=t,i.privEventName=r,i}return i(t,e),Object.defineProperty(t.prototype,"jsonString",{get:function(){return this.privJsonResult},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventName",{get:function(){return this.privEventName},enumerable:!1,configurable:!0}),t}(r(36514).SessionEventArgs);t.ServiceEventArgs=o},75982:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,(r=t.ServicePropertyChannel||(t.ServicePropertyChannel={}))[r.UriQueryParameter=0]="UriQueryParameter"},32239:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEventArgs=void 0;var r=function(){function e(e){this.privSessionId=e}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),e}();t.SessionEventArgs=r},58948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceLanguageConfig=void 0;var n=r(61316),i=function(){function e(e,t){n.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}return e.fromLanguage=function(t,r){return new e(t,r)},Object.defineProperty(e.prototype,"language",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endpointId",{get:function(){return this.privEndpointId},enumerable:!1,configurable:!0}),e}();t.SourceLanguageConfig=i},74484:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerIdentificationModel=void 0;var n=r(61316),i=r(36514),o=function(){function e(e){var t=this;if(this.privVoiceProfiles=[],n.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw new Error("Empty Voice Profiles array");e.forEach((function(e){if(e.profileType!==i.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+e.profileId);t.privVoiceProfiles.push(e)}))}return e.fromProfiles=function(t){return new e(t)},Object.defineProperty(e.prototype,"voiceProfileIds",{get:function(){return this.privVoiceProfiles.map((function(e){return e.profileId})).join(",")},enumerable:!1,configurable:!0}),e}();t.SpeakerIdentificationModel=o},76442:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;var o,s=r(80194),a=r(61316),c=r(36514);!function(e){e[e.Verify=0]="Verify",e[e.Identify=1]="Identify"}(o=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));var u=function(){function e(e,t,r,n){if(void 0===n&&(n=c.ResultReason.RecognizedSpeaker),this.privProperties=new c.PropertyCollection,this.privReason=n,this.privReason!==c.ResultReason.Canceled)if(e===o.Identify){var i=JSON.parse(t);a.Contracts.throwIfNullOrUndefined(i,"JSON"),this.privProfileId=i.identifiedProfile.profileId,this.privScore=i.identifiedProfile.score}else i=JSON.parse(t),a.Contracts.throwIfNullOrUndefined(i,"JSON"),this.privScore=i.score,"accept"!==i.recognitionResult.toLowerCase()&&(this.privReason=c.ResultReason.NoMatch),void 0!==r&&""!==r&&(this.privProfileId=r);else i=JSON.parse(t),a.Contracts.throwIfNullOrUndefined(i,"JSON"),this.privErrorDetails=i.statusText,this.privProperties.setProperty(s.CancellationErrorCodePropertyName,c.CancellationErrorCode[c.CancellationErrorCode.ServiceError]);this.privProperties.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,t)}return Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profileId",{get:function(){return this.privProfileId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this.privScore},enumerable:!1,configurable:!0}),e}();t.SpeakerRecognitionResult=u;var p=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return i(t,e),t.fromResult=function(e){var r=c.CancellationReason.Error,n=c.CancellationErrorCode.NoError;return e.properties&&(n=c.CancellationErrorCode[e.properties.getProperty(s.CancellationErrorCodePropertyName,c.CancellationErrorCode[c.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)},t}(c.CancellationDetailsBase);t.SpeakerRecognitionCancellationDetails=p},77002:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognizer=void 0;var o=r(80194),s=r(51564),a=r(61316),c=r(36514),u=function(){function e(e,t){var r=e;a.Contracts.throwIfNull(r,"speechConfig"),this.privAudioConfigImpl=t,a.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privProperties=r.properties.clone(),this.implSRSetup()}return Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.recognizeOnceAsync=function(e,t,r){if(e instanceof c.SpeakerIdentificationModel){var n=this.privAdapter.identifySpeaker(e,this.privAudioConfigImpl);s.marshalPromiseToCallbacks(this.getResult(n,c.SpeakerRecognitionResultType.Identify,void 0),t,r)}else{if(!(e instanceof c.SpeakerVerificationModel))throw new Error("SpeakerRecognizer.recognizeOnce: Unexpected model type");n=this.privAdapter.verifySpeaker(e,this.privAudioConfigImpl),s.marshalPromiseToCallbacks(this.getResult(n,c.SpeakerRecognitionResultType.Verify,e.voiceProfile.profileId),t,r)}},e.prototype.close=function(){},e.prototype.implSRSetup=function(){var e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);var n=new o.SpeakerRecognitionConfig(new o.Context(new o.OS(e,t,r)),this.privProperties);this.privAdapter=new o.SpeakerIdMessageAdapter(n)},e.prototype.getResult=function(e,t,r){return n(this,void 0,void 0,(function(){var n;return i(this,(function(i){switch(i.label){case 0:return[4,e];case 1:return n=i.sent(),[2,new c.SpeakerRecognitionResult(t,n.data,r,n.ok?c.ResultReason.RecognizedSpeaker:c.ResultReason.Canceled)]}}))}))},e}();t.SpeakerRecognizer=u},96509:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerVerificationModel=void 0;var n=r(61316),i=r(36514),o=function(){function e(e){if(n.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===i.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}return e.fromProfile=function(t){return new e(t)},Object.defineProperty(e.prototype,"voiceProfile",{get:function(){return this.privVoiceProfile},enumerable:!1,configurable:!0}),e}();t.SpeakerVerificationModel=o},13189:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConfigImpl=t.SpeechConfig=void 0;var o=r(80194),s=r(61316),a=r(36514),c=function(){function e(){}return e.fromSubscription=function(e,t){s.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),s.Contracts.throwIfNullOrWhitespace(t,"region");var r=new u;return r.setProperty(a.PropertyId.SpeechServiceConnection_Region,t),r.setProperty(a.PropertyId.SpeechServiceConnection_IntentRegion,t),r.setProperty(a.PropertyId.SpeechServiceConnection_Key,e),r},e.fromEndpoint=function(e,t){s.Contracts.throwIfNull(e,"endpoint");var r=new u;return r.setProperty(a.PropertyId.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&r.setProperty(a.PropertyId.SpeechServiceConnection_Key,t),r},e.fromHost=function(e,t){s.Contracts.throwIfNull(e,"hostName");var r=new u;return r.setProperty(a.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(a.PropertyId.SpeechServiceConnection_Key,t),r},e.fromAuthorizationToken=function(e,t){s.Contracts.throwIfNull(e,"authorizationToken"),s.Contracts.throwIfNullOrWhitespace(t,"region");var r=new u;return r.setProperty(a.PropertyId.SpeechServiceConnection_Region,t),r.setProperty(a.PropertyId.SpeechServiceConnection_IntentRegion,t),r.authorizationToken=e,r},e.prototype.close=function(){},e}();t.SpeechConfig=c;var u=function(e){function t(){var t=e.call(this)||this;return t.privProperties=new a.PropertyCollection,t.speechRecognitionLanguage="en-US",t.outputFormat=a.OutputFormat.Simple,t}return i(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endPoint",{get:function(){return new URL(this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subscriptionKey",{get:function(){return this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_Key)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"region",{get:function(){return this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_Region)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.privProperties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.privProperties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)},set:function(e){this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoDetectSourceLanguages",{get:function(){return this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)},set:function(e){this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return a.OutputFormat[this.privProperties.getProperty(o.OutputFormatPropertyName,void 0)]},set:function(e){this.privProperties.setProperty(o.OutputFormatPropertyName,a.OutputFormat[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endpointId",{get:function(){return this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId)},set:function(e){this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_EndpointId,e)},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(e,t){s.Contracts.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)},t.prototype.getProperty=function(e,t){return this.privProperties.getProperty(e,t)},t.prototype.setProxy=function(e,t,r,n){this.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_ProxyPassword],n)},t.prototype.setServiceProperty=function(e,t,r){var n=JSON.parse(this.privProperties.getProperty(o.ServicePropertiesPropertyName,"{}"));n[e]=t,this.privProperties.setProperty(o.ServicePropertiesPropertyName,JSON.stringify(n))},t.prototype.setProfanity=function(e){this.privProperties.setProperty(a.PropertyId.SpeechServiceResponse_ProfanityOption,a.ProfanityOption[e])},t.prototype.enableAudioLogging=function(){this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")},t.prototype.requestWordLevelTimestamps=function(){this.privProperties.setProperty(a.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")},t.prototype.enableDictation=function(){this.privProperties.setProperty(o.ForceDictationPropertyName,"true")},t.prototype.clone=function(){var e=new t;return e.privProperties=this.privProperties.clone(),e},Object.defineProperty(t.prototype,"speechSynthesisLanguage",{get:function(){return this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_SynthLanguage)},set:function(e){this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_SynthLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisVoiceName",{get:function(){return this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_SynthVoice)},set:function(e){this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_SynthVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisOutputFormat",{get:function(){return a.SpeechSynthesisOutputFormat[this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]},set:function(e){this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,a.SpeechSynthesisOutputFormat[e])},enumerable:!1,configurable:!0}),t}(c);t.SpeechConfigImpl=u},6:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionCanceledEventArgs=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(r(33974).CancellationEventArgsBase);t.SpeechRecognitionCanceledEventArgs=o},32252:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionEventArgs=t.SpeechRecognitionEventArgs=void 0;var o=function(e){function t(t,r,n){var i=e.call(this,r,n)||this;return i.privResult=t,i}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(r(36514).RecognitionEventArgs);t.SpeechRecognitionEventArgs=o;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(o);t.ConversationTranscriptionEventArgs=s},47424:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionResult=void 0;var o=function(e){function t(t,r,n,i,o,s,a,c,u,p,h){var l=e.call(this,t,r,n,i,o,s,a,u,p,h)||this;return l.privSpeakerId=c,l}return i(t,e),Object.defineProperty(t.prototype,"speakerId",{get:function(){return this.privSpeakerId},enumerable:!1,configurable:!0}),t}(r(36514).RecognitionResult);t.SpeechRecognitionResult=o},85686:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognizer=void 0;var a=r(80194),c=r(51564),u=r(61316),p=r(36514),h=function(e){function t(t,r){var n=this,i=t;return u.Contracts.throwIfNull(i,"speechConfig"),u.Contracts.throwIfNullOrWhitespace(i.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage),p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),(n=e.call(this,r,i.properties,new a.SpeechConnectionFactory)||this).privDisposedRecognizer=!1,n}return i(t,e),t.FromConfig=function(e,r,n){var i=e;return r.properties.mergeTo(i.properties),new t(e,n)},Object.defineProperty(t.prototype,"endpointId",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){u.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.OutputFormatPropertyName,p.OutputFormat[p.OutputFormat.Simple])===p.OutputFormat[p.OutputFormat.Simple]?p.OutputFormat.Simple:p.OutputFormat.Detailed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.recognizeOnceAsync=function(e,t){c.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(a.RecognitionMode.Interactive),e,t)},t.prototype.startContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(a.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.startKeywordRecognitionAsync=function(e,t,r){u.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")},t.prototype.stopKeywordRecognitionAsync=function(e,t){e&&e()},t.prototype.close=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedRecognizer),c.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.dispose=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return this.privDisposedRecognizer?[2]:t?(this.privDisposedRecognizer=!0,[4,this.implRecognizerStop()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[4,e.prototype.dispose.call(this,t)];case 3:return r.sent(),[2]}}))}))},t.prototype.createRecognizerConfig=function(e){return new a.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,r,n){var i=r;return new a.SpeechServiceRecognizer(e,t,i,n,this)},t}(p.Recognizer);t.SpeechRecognizer=h},10204:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBookmarkEventArgs=void 0;var r=function(){function e(e,t){this.privAudioOffset=e,this.privText=t}return Object.defineProperty(e.prototype,"audioOffset",{get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.privText},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisBookmarkEventArgs=r},46392:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisEventArgs=void 0;var r=function(){function e(e){this.privResult=e}return Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisEventArgs=r},86449:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,(r=t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))[r.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",r[r.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",r[r.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",r[r.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",r[r.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",r[r.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",r[r.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",r[r.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",r[r.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",r[r.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",r[r.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",r[r.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",r[r.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",r[r.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",r[r.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",r[r.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",r[r.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",r[r.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",r[r.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",r[r.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",r[r.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",r[r.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",r[r.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",r[r.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",r[r.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",r[r.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",r[r.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",r[r.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",r[r.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw"},27338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisResult=void 0;var r=function(){function e(e,t,r,n,i){this.privResultId=e,this.privReason=t,this.privAudioData=r,this.privErrorDetails=n,this.privProperties=i}return Object.defineProperty(e.prototype,"resultId",{get:function(){return this.privResultId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioData",{get:function(){return this.privAudioData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisResult=r},4675:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisVisemeEventArgs=void 0;var r=function(){function e(e,t,r){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=r}return Object.defineProperty(e.prototype,"audioOffset",{get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visemeId",{get:function(){return this.privVisemeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animation",{get:function(){return this.privAnimation},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisVisemeEventArgs=r},64242:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisWordBoundaryEventArgs=void 0;var r=function(){function e(e,t,r,n){this.privAudioOffset=e,this.privText=t,this.privWordLength=r,this.privTextOffset=n}return Object.defineProperty(e.prototype,"audioOffset",{get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.privText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordLength",{get:function(){return this.privWordLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textOffset",{get:function(){return this.privTextOffset},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisWordBoundaryEventArgs=r},28365:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRequest=t.SpeechSynthesizer=void 0;var o=r(80194),s=r(51564),a=r(22351),c=r(92400),u=r(7904),p=r(61316),h=r(36514),l=function(){function e(e,t){var r=e;p.Contracts.throwIfNull(r,"speechConfig"),null!==t&&(this.audioConfig=void 0===t?"undefined"==typeof window?void 0:h.AudioConfig.fromDefaultSpeakerOutput():t),this.privProperties=r.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new o.SpeechSynthesisConnectionFactory,this.synthesisRequestQueue=new s.Queue,this.implCommonSynthesizeSetup()}return Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){p.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(h.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDetectSourceLanguage",{get:function(){return this.properties.getProperty(h.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===o.AutoDetectSourceLanguagesOpenRangeOptionName},enumerable:!1,configurable:!0}),e.FromConfig=function(t,r,n){var i=t;return r.properties.mergeTo(i.properties),new e(t,n)},e.prototype.buildSsml=function(t){var r,n=((r={})["ar-EG"]="Microsoft Server Speech Text to Speech Voice (ar-EG, Hoda)",r["ar-SA"]="Microsoft Server Speech Text to Speech Voice (ar-SA, Naayf)",r["bg-BG"]="Microsoft Server Speech Text to Speech Voice (bg-BG, Ivan)",r["ca-ES"]="Microsoft Server Speech Text to Speech Voice (ca-ES, HerenaRUS)",r["cs-CZ"]="Microsoft Server Speech Text to Speech Voice (cs-CZ, Jakub)",r["da-DK"]="Microsoft Server Speech Text to Speech Voice (da-DK, HelleRUS)",r["de-AT"]="Microsoft Server Speech Text to Speech Voice (de-AT, Michael)",r["de-CH"]="Microsoft Server Speech Text to Speech Voice (de-CH, Karsten)",r["de-DE"]="Microsoft Server Speech Text to Speech Voice (de-DE, HeddaRUS)",r["el-GR"]="Microsoft Server Speech Text to Speech Voice (el-GR, Stefanos)",r["en-AU"]="Microsoft Server Speech Text to Speech Voice (en-AU, HayleyRUS)",r["en-CA"]="Microsoft Server Speech Text to Speech Voice (en-CA, HeatherRUS)",r["en-GB"]="Microsoft Server Speech Text to Speech Voice (en-GB, HazelRUS)",r["en-IE"]="Microsoft Server Speech Text to Speech Voice (en-IE, Sean)",r["en-IN"]="Microsoft Server Speech Text to Speech Voice (en-IN, PriyaRUS)",r["en-US"]="Microsoft Server Speech Text to Speech Voice (en-US, AriaRUS)",r["es-ES"]="Microsoft Server Speech Text to Speech Voice (es-ES, HelenaRUS)",r["es-MX"]="Microsoft Server Speech Text to Speech Voice (es-MX, HildaRUS)",r["fi-FI"]="Microsoft Server Speech Text to Speech Voice (fi-FI, HeidiRUS)",r["fr-CA"]="Microsoft Server Speech Text to Speech Voice (fr-CA, HarmonieRUS)",r["fr-CH"]="Microsoft Server Speech Text to Speech Voice (fr-CH, Guillaume)",r["fr-FR"]="Microsoft Server Speech Text to Speech Voice (fr-FR, HortenseRUS)",r["he-IL"]="Microsoft Server Speech Text to Speech Voice (he-IL, Asaf)",r["hi-IN"]="Microsoft Server Speech Text to Speech Voice (hi-IN, Kalpana)",r["hr-HR"]="Microsoft Server Speech Text to Speech Voice (hr-HR, Matej)",r["hu-HU"]="Microsoft Server Speech Text to Speech Voice (hu-HU, Szabolcs)",r["id-ID"]="Microsoft Server Speech Text to Speech Voice (id-ID, Andika)",r["it-IT"]="Microsoft Server Speech Text to Speech Voice (it-IT, LuciaRUS)",r["ja-JP"]="Microsoft Server Speech Text to Speech Voice (ja-JP, HarukaRUS)",r["ko-KR"]="Microsoft Server Speech Text to Speech Voice (ko-KR, HeamiRUS)",r["ms-MY"]="Microsoft Server Speech Text to Speech Voice (ms-MY, Rizwan)",r["nb-NO"]="Microsoft Server Speech Text to Speech Voice (nb-NO, HuldaRUS)",r["nl-NL"]="Microsoft Server Speech Text to Speech Voice (nl-NL, HannaRUS)",r["pl-PL"]="Microsoft Server Speech Text to Speech Voice (pl-PL, PaulinaRUS)",r["pt-BR"]="Microsoft Server Speech Text to Speech Voice (pt-BR, HeloisaRUS)",r["pt-PT"]="Microsoft Server Speech Text to Speech Voice (pt-PT, HeliaRUS)",r["ro-RO"]="Microsoft Server Speech Text to Speech Voice (ro-RO, Andrei)",r["ru-RU"]="Microsoft Server Speech Text to Speech Voice (ru-RU, EkaterinaRUS)",r["sk-SK"]="Microsoft Server Speech Text to Speech Voice (sk-SK, Filip)",r["sl-SI"]="Microsoft Server Speech Text to Speech Voice (sl-SI, Lado)",r["sv-SE"]="Microsoft Server Speech Text to Speech Voice (sv-SE, HedvigRUS)",r["ta-IN"]="Microsoft Server Speech Text to Speech Voice (ta-IN, Valluvar)",r["te-IN"]="Microsoft Server Speech Text to Speech Voice (te-IN, Chitra)",r["th-TH"]="Microsoft Server Speech Text to Speech Voice (th-TH, Pattara)",r["tr-TR"]="Microsoft Server Speech Text to Speech Voice (tr-TR, SedaRUS)",r["vi-VN"]="Microsoft Server Speech Text to Speech Voice (vi-VN, An)",r["zh-CN"]="Microsoft Server Speech Text to Speech Voice (zh-CN, HuihuiRUS)",r["zh-HK"]="Microsoft Server Speech Text to Speech Voice (zh-HK, TracyRUS)",r["zh-TW"]="Microsoft Server Speech Text to Speech Voice (zh-TW, HanHanRUS)",r),i=this.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),o=this.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthVoice,""),s=e.XMLEncode(t);return this.autoDetectSourceLanguage?i="en-US":o=o||n[i],o&&(s="<voice name='"+o+"'>"+s+"</voice>"),"<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='"+i+"'>"+s+"</speak>"},e.prototype.speakTextAsync=function(e,t,r,n){this.speakImpl(e,!1,t,r,n)},e.prototype.speakSsmlAsync=function(e,t,r,n){this.speakImpl(e,!0,t,r,n)},e.prototype.close=function(e,t){p.Contracts.throwIfDisposed(this.privDisposed),s.marshalPromiseToCallbacks(this.dispose(!0),e,t)},Object.defineProperty(e.prototype,"internalData",{get:function(){return this.privAdapter},enumerable:!1,configurable:!0}),e.prototype.dispose=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.privDisposed?[2]:e&&this.privAdapter?[4,this.privAdapter.dispose()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.privDisposed=!0,[2]}}))}))},e.prototype.createSynthesizerConfig=function(e){return new o.SynthesizerConfig(e,this.privProperties)},e.prototype.createSynthesisAdapter=function(e,t,r,n){return new o.SynthesisAdapterBase(e,t,n,this,this.audioConfig)},e.prototype.implCommonSynthesizeSetup=function(){var e=this,t="undefined"!=typeof window?"Browser":"Node",r="unknown",n="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,r=navigator.userAgent,n=navigator.appVersion);var i=this.createSynthesizerConfig(new o.SpeechServiceConfig(new o.Context(new o.OS(t,r,n)))),s=this.privProperties.getProperty(h.PropertyId.SpeechServiceConnection_Key,void 0),a=s&&""!==s?new o.CognitiveSubscriptionKeyAuthentication(s):new o.CognitiveTokenAuthentication((function(t){var r=e.privProperties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(r)}),(function(t){var r=e.privProperties.getProperty(h.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(r)}));this.privAdapter=this.createSynthesisAdapter(a,this.privConnectionFactory,this.audioConfig,i),this.privAdapter.audioOutputFormat=c.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(h.SpeechSynthesisOutputFormat[this.properties.getProperty(h.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])},e.prototype.speakImpl=function(e,t,r,n,i){var o=this;try{p.Contracts.throwIfDisposed(this.privDisposed);var c,l=s.createNoDashGuid();c=i instanceof h.PushAudioOutputStreamCallback?new u.PushAudioOutputStreamImpl(i):i instanceof h.PullAudioOutputStream?i:void 0!==i?new a.AudioFileWriter(i):void 0,this.synthesisRequestQueue.enqueue(new v(l,e,t,(function(e){if(o.privSynthesizing=!1,r)try{r(e)}catch(e){n&&n(e)}r=void 0,o.adapterSpeak().catch((function(){}))}),(function(e){n&&n(e)}),c)),this.adapterSpeak().catch((function(){}))}catch(e){if(n)if(e instanceof Error){var d=e;n(d.name+": "+d.message)}else n(e);this.dispose(!0).catch((function(){}))}},e.prototype.adapterSpeak=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return this.privDisposed||this.privSynthesizing?[3,2]:(this.privSynthesizing=!0,[4,this.synthesisRequestQueue.dequeue()]);case 1:return e=t.sent(),[2,this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)];case 2:return[2]}}))}))},e.XMLEncode=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},e}();t.SpeechSynthesizer=l;var v=function(e,t,r,n,i,o){this.requestId=e,this.text=t,this.isSSML=r,this.cb=n,this.err=i,this.dataStream=o};t.SynthesisRequest=v},41525:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechTranslationConfigImpl=t.SpeechTranslationConfig=void 0;var o=r(80194),s=r(61316),a=r(36514),c=function(e){function t(){return e.call(this)||this}return i(t,e),t.fromSubscription=function(e,t){s.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),s.Contracts.throwIfNullOrWhitespace(t,"region");var r=new u;return r.properties.setProperty(a.PropertyId.SpeechServiceConnection_Key,e),r.properties.setProperty(a.PropertyId.SpeechServiceConnection_Region,t),r},t.fromAuthorizationToken=function(e,t){s.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),s.Contracts.throwIfNullOrWhitespace(t,"region");var r=new u;return r.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e),r.properties.setProperty(a.PropertyId.SpeechServiceConnection_Region,t),r},t.fromHost=function(e,t){s.Contracts.throwIfNull(e,"hostName");var r=new u;return r.setProperty(a.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&r.setProperty(a.PropertyId.SpeechServiceConnection_Key,t),r},t.fromEndpoint=function(e,t){s.Contracts.throwIfNull(e,"endpoint"),s.Contracts.throwIfNull(t,"subscriptionKey");var r=new u;return r.properties.setProperty(a.PropertyId.SpeechServiceConnection_Endpoint,e.href),r.properties.setProperty(a.PropertyId.SpeechServiceConnection_Key,t),r},t}(a.SpeechConfig);t.SpeechTranslationConfig=c;var u=function(e){function t(){var t=e.call(this)||this;return t.privSpeechProperties=new a.PropertyCollection,t.outputFormat=a.OutputFormat.Simple,t}return i(t,e),Object.defineProperty(t.prototype,"authorizationToken",{set:function(e){s.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechProperties.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])},set:function(e){s.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subscriptionKey",{get:function(){return this.privSpeechProperties.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return a.OutputFormat[this.privSpeechProperties.getProperty(o.OutputFormatPropertyName,void 0)]},set:function(e){this.privSpeechProperties.setProperty(o.OutputFormatPropertyName,a.OutputFormat[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endpointId",{get:function(){return this.privSpeechProperties.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId)},set:function(e){this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceConnection_EndpointId,e)},enumerable:!1,configurable:!0}),t.prototype.addTargetLanguage=function(e){s.Contracts.throwIfNullOrWhitespace(e,"value");var t=this.targetLanguages;t.push(e),this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(","))},Object.defineProperty(t.prototype,"targetLanguages",{get:function(){return void 0!==this.privSpeechProperties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voiceName",{get:function(){return this.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationVoice])},set:function(e){s.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"region",{get:function(){return this.privSpeechProperties.getProperty(a.PropertyId.SpeechServiceConnection_Region)},enumerable:!1,configurable:!0}),t.prototype.setProxy=function(e,t,r,n){this.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_ProxyUserName],r),this.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_ProxyPassword],n)},t.prototype.getProperty=function(e,t){return this.privSpeechProperties.getProperty(e,t)},t.prototype.setProperty=function(e,t){this.privSpeechProperties.setProperty(e,t)},Object.defineProperty(t.prototype,"properties",{get:function(){return this.privSpeechProperties},enumerable:!1,configurable:!0}),t.prototype.close=function(){},t.prototype.setServiceProperty=function(e,t,r){var n=JSON.parse(this.privSpeechProperties.getProperty(o.ServicePropertiesPropertyName,"{}"));n[e]=t,this.privSpeechProperties.setProperty(o.ServicePropertiesPropertyName,JSON.stringify(n))},t.prototype.setProfanity=function(e){this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceResponse_ProfanityOption,a.ProfanityOption[e])},t.prototype.enableAudioLogging=function(){this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")},t.prototype.requestWordLevelTimestamps=function(){this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")},t.prototype.enableDictation=function(){this.privSpeechProperties.setProperty(o.ForceDictationPropertyName,"true")},Object.defineProperty(t.prototype,"speechSynthesisLanguage",{get:function(){return this.privSpeechProperties.getProperty(a.PropertyId.SpeechServiceConnection_SynthLanguage)},set:function(e){this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceConnection_SynthLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisVoiceName",{get:function(){return this.privSpeechProperties.getProperty(a.PropertyId.SpeechServiceConnection_SynthVoice)},set:function(e){this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceConnection_SynthVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisOutputFormat",{get:function(){return a.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]},set:function(e){this.privSpeechProperties.setProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,a.SpeechSynthesisOutputFormat[e])},enumerable:!1,configurable:!0}),t}(c);t.SpeechTranslationConfigImpl=u},4173:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationImpl=t.Conversation=void 0;var c=r(80194),u=r(51564),p=r(61316),h=r(36514),l=function(){function e(){}return e.createConversationAsync=function(e,t,r,n){if(p.Contracts.throwIfNullOrUndefined(e,c.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),p.Contracts.throwIfNullOrUndefined(e.region,c.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(h.PropertyId[h.PropertyId.SpeechServiceAuthorization_Token])||p.Contracts.throwIfNullOrUndefined(e.subscriptionKey,c.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof t){var i=new v(e,t);return u.marshalPromiseToCallbacks(o(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))})),r,n),i}i=new v(e);var a=t,l=r;return i.createConversationAsync((function(){a&&a()}),(function(e){l&&l(e)})),i},e}();t.Conversation=l;var v=function(e){function t(t,r){var n=e.call(this)||this;if(n.privIsDisposed=!1,n.privIsConnected=!1,n.privErrors=c.ConversationConnectionConfig.restErrors,n.privConversationId="",n.onConnected=function(e){n.privIsConnected=!0;try{n.privConversationTranslator.sessionStarted&&n.privConversationTranslator.sessionStarted(n.privConversationTranslator,e)}catch(e){}},n.onDisconnected=function(e){return o(n,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.close(!1)];case 1:t.sent();try{this.privConversationTranslator.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}return[2]}}))}))},n.onCanceled=function(e,t){return o(n,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.close(!1)];case 1:e.sent();try{this.privConversationTranslator.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(e){}return[2]}}))}))},n.onParticipantUpdateCommandReceived=function(e,t){var r,i;try{var o=n.privParticipants.getParticipant(t.id);if(void 0!==o){switch(t.key){case c.ConversationTranslatorCommandTypes.changeNickname:o.displayName=t.value;break;case c.ConversationTranslatorCommandTypes.setUseTTS:o.useTts=t.value;break;case c.ConversationTranslatorCommandTypes.setProfanityFiltering:o.profanity=t.value;break;case c.ConversationTranslatorCommandTypes.setMute:o.isMuted=t.value;break;case c.ConversationTranslatorCommandTypes.setTranslateToLanguages:o.translateToLanguages=t.value}n.privParticipants.addOrUpdateParticipant(o),(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(i=n.privConversationTranslator)||void 0===i||i.participantsChanged(n.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,[n.toParticipant(o)],t.sessionId)))}}catch(t){}},n.onLockRoomCommandReceived=function(e,t){},n.onMuteAllCommandReceived=function(e,t){var r,i;try{n.privParticipants.participants.forEach((function(e){return e.isMuted=!e.isHost&&t.isMuted})),(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(i=n.privConversationTranslator)||void 0===i||i.participantsChanged(n.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.Updated,n.toParticipants(!1),t.sessionId)))}catch(t){}},n.onParticipantJoinCommandReceived=function(e,t){var r,i;try{var o=n.privParticipants.addOrUpdateParticipant(t.participant);void 0!==o&&(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(i=n.privConversationTranslator)||void 0===i||i.participantsChanged(n.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,[n.toParticipant(o)],t.sessionId)))}catch(t){}},n.onParticipantLeaveCommandReceived=function(e,t){var r,i;try{var o=n.privParticipants.getParticipant(t.participant.id);void 0!==o&&(n.privParticipants.deleteParticipant(t.participant.id),(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(i=n.privConversationTranslator)||void 0===i||i.participantsChanged(n.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.LeftConversation,[n.toParticipant(o)],t.sessionId))))}catch(t){}},n.onTranslationReceived=function(e,t){var r,i,o,s,a,u;try{switch(t.command){case c.ConversationTranslatorMessageTypes.final:(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.transcribed)&&(null===(i=n.privConversationTranslator)||void 0===i||i.transcribed(n.privConversationTranslator,new h.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId)));break;case c.ConversationTranslatorMessageTypes.partial:(null===(o=n.privConversationTranslator)||void 0===o?void 0:o.transcribing)&&(null===(s=n.privConversationTranslator)||void 0===s||s.transcribing(n.privConversationTranslator,new h.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId)));break;case c.ConversationTranslatorMessageTypes.instantMessage:(null===(a=n.privConversationTranslator)||void 0===a?void 0:a.textMessageReceived)&&(null===(u=n.privConversationTranslator)||void 0===u||u.textMessageReceived(n.privConversationTranslator,new h.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId)))}}catch(t){}},n.onParticipantsListReceived=function(e,t){var r,i,o;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(n.privRoom.token=t.sessionToken),n.privParticipants.participants=a(t.participants),void 0!==n.privParticipants.me&&(n.privIsReady=!0),(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.participantsChanged)&&(null===(i=n.privConversationTranslator)||void 0===i||i.participantsChanged(n.privConversationTranslator,new h.ConversationParticipantsChangedEventArgs(h.ParticipantChangedReason.JoinedConversation,n.toParticipants(!0),t.sessionId))),n.me.isHost){var s=null===(o=n.privConversationTranslator)||void 0===o?void 0:o.properties.getProperty(h.PropertyId.ConversationTranslator_Name);void 0!==s&&s.length>0&&s!==n.me.displayName&&n.changeNicknameAsync(s)}}catch(t){}},n.onConversationExpiration=function(e,t){var r,i;try{(null===(r=n.privConversationTranslator)||void 0===r?void 0:r.conversationExpiration)&&(null===(i=n.privConversationTranslator)||void 0===i||i.conversationExpiration(n.privConversationTranslator,t))}catch(t){}},n.privProperties=new h.PropertyCollection,n.privManager=new c.ConversationManager,t.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage])||t.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage],c.ConversationConnectionConfig.defaultLanguageCode),n.privLanguage=t.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage]),r)n.privConversationId=r;else{0===t.targetLanguages.length&&t.addTargetLanguage(n.privLanguage),t.getProperty(h.PropertyId[h.PropertyId.SpeechServiceResponse_ProfanityOption])||t.setProfanity(h.ProfanityOption.Masked);var i=t.getProperty(h.PropertyId[h.PropertyId.ConversationTranslator_Name]);(null==i||i.length<=1||i.length>50)&&(i="Host"),t.setProperty(h.PropertyId[h.PropertyId.ConversationTranslator_Name],i)}n.privConfig=t;var u=t;return p.Contracts.throwIfNull(u,"speechConfig"),n.privProperties=u.properties.clone(),n.privIsConnected=!1,n.privParticipants=new c.InternalParticipants,n.privIsReady=!1,n.privTextMessageMaxLength=1e3,n}return i(t,e),Object.defineProperty(t.prototype,"conversationTranslator",{set:function(e){this.privConversationTranslator=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"room",{get:function(){return this.privRoom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connection",{get:function(){return this.privConversationRecognizer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.privToken},set:function(e){p.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.privConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversationId",{get:function(){return this.privRoom?this.privRoom.roomId:this.privConversationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMutedByHost",{get:function(){var e,t;return!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnected",{get:function(){return this.privIsConnected&&this.privIsReady},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.toParticipants(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"me",{get:function(){return this.toParticipant(this.privParticipants.me)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this.toParticipant(this.privParticipants.host)},enumerable:!1,configurable:!0}),t.prototype.createConversationAsync=function(e,t){var r=this;try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(function(n){n||r.handleError(new Error(r.privErrors.permissionDeniedConnect),t),r.privRoom=n,r.handleCallback(e,t)}),(function(e){r.handleError(e,t)}))}catch(e){this.handleError(e,t)}},t.prototype.startConversationAsync=function(e,t){var r=this;try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=c.ConversationRecognizerFactory.fromConfig(this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(function(){r.handleCallback(e,t)}),(function(e){r.handleError(e,t)}))}catch(e){this.handleError(e,t)}},t.prototype.addParticipantAsync=function(e,t,r){p.Contracts.throwIfNullOrUndefined(e,"Participant"),u.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,r)},t.prototype.joinConversationAsync=function(e,t,r,n,i){var o=this;try{p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),p.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),p.Contracts.throwIfNullOrWhitespace(r,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(function(e){p.Contracts.throwIfNullOrUndefined(e,o.privErrors.permissionDeniedConnect),o.privRoom=e,o.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,n&&n(e.cognitiveSpeechAuthToken)}),(function(e){o.handleError(e,i)}))}catch(e){this.handleError(e,i)}},t.prototype.deleteConversationAsync=function(e,t){u.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,t)},t.prototype.deleteConversationImplAsync=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return p.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),p.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),[4,this.privManager.leave(this.privProperties,this.privRoom.token)];case 1:return e.sent(),this.dispose(),[2]}}))}))},t.prototype.endConversationAsync=function(e,t){u.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,t)},t.prototype.endConversationImplAsync=function(){return this.close(!0)},t.prototype.lockConversationAsync=function(e,t){var r,n=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getLockCommand(!0),(function(){n.handleCallback(e,t)}),(function(e){n.handleError(e,t)}))}catch(e){this.handleError(e,t)}},t.prototype.muteAllParticipantsAsync=function(e,t){var r,n=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMuteAllCommand(!0),(function(){n.handleCallback(e,t)}),(function(e){n.handleError(e,t)}))}catch(e){this.handleError(e,t)}},t.prototype.muteParticipantAsync=function(e,t,r){var n,i=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getMuteCommand(e,!0),(function(){i.handleCallback(t,r)}),(function(e){i.handleError(e,r)}))}catch(e){this.handleError(e,r)}},t.prototype.removeParticipantAsync=function(e,t,r){var n,i=this;try{if(p.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))u.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,r);else{p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),r);var o="";"string"==typeof e?o=e:e.hasOwnProperty("id")?o=e.id:e.hasOwnProperty("userId")&&(o=e.userId),p.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex((function(e){return e.id===o}))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getEjectCommand(o),(function(){i.handleCallback(t,r)}),(function(e){i.handleError(e,r)}))}}catch(e){this.handleError(e,r)}},t.prototype.unlockConversationAsync=function(e,t){var r,n=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getLockCommand(!1),(function(){n.handleCallback(e,t)}),(function(e){n.handleError(e,t)}))}catch(e){this.handleError(e,t)}},t.prototype.unmuteAllParticipantsAsync=function(e,t){var r,n=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMuteAllCommand(!1),(function(){n.handleCallback(e,t)}),(function(e){n.handleError(e,t)}))}catch(e){this.handleError(e,t)}},t.prototype.unmuteParticipantAsync=function(e,t,r){var n,i=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),r),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getMuteCommand(e,!1),(function(){i.handleCallback(t,r)}),(function(e){i.handleError(e,r)}))}catch(e){this.handleError(e,r)}},t.prototype.sendTextMessageAsync=function(e,t,r){var n,i=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getMessageCommand(e),(function(){i.handleCallback(t,r)}),(function(e){i.handleError(e,r)}))}catch(e){this.handleError(e,r)}},t.prototype.changeNicknameAsync=function(e,t,r){var n,i=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),r),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getChangeNicknameCommand(e),(function(){i.handleCallback(t,r)}),(function(e){i.handleError(e,r)}))}catch(e){this.handleError(e,r)}},t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.dispose=function(e){var t;this.isDisposed||(this.privIsDisposed=!0,null===(t=this.config)||void 0===t||t.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privConversationRecognizer=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)},Object.defineProperty(t.prototype,"transcriberRecognizer",{get:function(){return this.privTranscriberRecognizer},enumerable:!1,configurable:!0}),t.prototype.connectTranscriberRecognizer=function(e){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.privTranscriberRecognizer?[4,this.privTranscriberRecognizer.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this,[2]}}))}))},Object.defineProperty(t.prototype,"conversationInfo",{get:function(){for(var e=this.conversationId,t=this.participants.map((function(e){return{id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}})),r={},n=0,i=c.ConversationConnectionConfig.transcriptionEventKeys;n<i.length;n++){var o=i[n],s=this.properties.getProperty(o,"");""!==s&&(r[o]=s)}return{id:e,participants:t,conversationProperties:r}},enumerable:!1,configurable:!0}),t.prototype.addParticipantImplAsync=function(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){var t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}},t.prototype.removeParticipantImplAsync=function(e){this.privParticipants.deleteParticipant(e.id);var t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")},t.prototype.close=function(e){var t,r;return o(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),this.privIsConnected=!1,[4,this.privConversationRecognizer.close()];case 1:return n.sent(),[4,null===(t=this.privTranscriberRecognizer)||void 0===t?void 0:t.close()];case 2:return n.sent(),this.privConversationRecognizer=void 0,null===(r=this.privConversationTranslator)||void 0===r||r.dispose(),[3,4];case 3:return n.sent(),[3,4];case 4:return e&&this.dispose(),[2]}}))}))},Object.defineProperty(t.prototype,"canSend",{get:function(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canSendAsHost",{get:function(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)},enumerable:!1,configurable:!0}),t.prototype.handleCallback=function(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}},t.prototype.handleError=function(e,t){if(t)if(e instanceof Error){var r=e;t(r.name+": "+r.message)}else t(e)},t.prototype.toParticipants=function(e){var t=this,r=this.privParticipants.participants.map((function(e){return t.toParticipant(e)}));return e?r:r.filter((function(e){return!1===e.isHost}))},t.prototype.toParticipant=function(e){return new h.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)},t.prototype.getMuteAllCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getMuteCommand=function(e,t){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand,value:t})},t.prototype.getLockCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getEjectCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand})},t.prototype.getChangeNicknameCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(e,"nickname"),p.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getMessageCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),p.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:c.ConversationTranslatorMessageTypes.instantMessage})},t}(l);t.ConversationImpl=v},93829:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationCommon=void 0;var r=function(){function e(e){this.privAudioConfig=e}return e.prototype.handleCallback=function(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}},e.prototype.handleError=function(e,t){if(t)if(e instanceof Error){var r=e;t(r.name+": "+r.message)}else t(e)},e}();t.ConversationCommon=r},11502:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationExpirationEventArgs=void 0;var o=function(e){function t(t,r){var n=e.call(this,r)||this;return n.privExpirationTime=t,n}return i(t,e),Object.defineProperty(t.prototype,"expirationTime",{get:function(){return this.privExpirationTime},enumerable:!1,configurable:!0}),t}(r(36514).SessionEventArgs);t.ConversationExpirationEventArgs=o},4753:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationParticipantsChangedEventArgs=void 0;var o=function(e){function t(t,r,n){var i=e.call(this,n)||this;return i.privReason=t,i.privParticipant=r,i}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.privParticipant},enumerable:!1,configurable:!0}),t}(r(36514).SessionEventArgs);t.ConversationParticipantsChangedEventArgs=o},20966:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriber=void 0;var o=r(80194),s=r(51564),a=r(61316),c=r(36514),u=function(){function e(e){this.privAudioConfig=e,this.privProperties=new c.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}return e.prototype.joinConversationAsync=function(e,t,r){var n=e;a.Contracts.throwIfNullOrUndefined(n,"Conversation"),this.privRecognizer=new o.TranscriberRecognizer(e.config,this.privAudioConfig),a.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectCallbacks(this),s.marshalPromiseToCallbacks(n.connectTranscriberRecognizer(this.privRecognizer),t,r)},Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speechRecognitionLanguage",{get:function(){return a.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.startTranscribingAsync=function(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)},e.prototype.stopTranscribingAsync=function(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)},e.prototype.leaveConversationAsync=function(e,t){this.privRecognizer.disconnectCallbacks(),s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))})),e,t)},e.prototype.close=function(e,t){a.Contracts.throwIfDisposed(this.privDisposedRecognizer),s.marshalPromiseToCallbacks(this.dispose(!0),e,t)},e.prototype.dispose=function(e){return n(this,void 0,void 0,(function(){return i(this,(function(t){return this.privDisposedRecognizer||e&&(this.privDisposedRecognizer=!0),[2]}))}))},e}();t.ConversationTranscriber=u},17083:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationCanceledEventArgs=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(r(33974).CancellationEventArgsBase);t.ConversationTranslationCanceledEventArgs=o},49136:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationEventArgs=void 0;var o=function(e){function t(t,r,n){var i=e.call(this,r,n)||this;return i.privResult=t,i}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(r(36514).RecognitionEventArgs);t.ConversationTranslationEventArgs=o},72720:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationResult=void 0;var o=function(e){function t(t,r,n,i,o,s,a,c,u,p,h){var l=e.call(this,r,i,o,s,a,c,u,p,h)||this;return l.privId=t,l.privOrigLang=n,l}return i(t,e),Object.defineProperty(t.prototype,"participantId",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalLang",{get:function(){return this.privOrigLang},enumerable:!1,configurable:!0}),t}(r(81295).TranslationRecognitionResult);t.ConversationTranslationResult=o},10149:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;var a,c=r(80194),u=r(51564),p=r(61316),h=r(36514),l=r(4173),v=r(3320);!function(e){e[e.Inactive=0]="Inactive",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(a=t.SpeechState||(t.SpeechState={}));var d=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;return i.privSpeechState=a.Inactive,n&&(i.privTranslator=n,i.sessionStarted=function(){i.privSpeechState=a.Connected},i.sessionStopped=function(){i.privSpeechState=a.Inactive},i.recognized=function(e,t){return o(i,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return(null===(e=t.result)||void 0===e?void 0:e.errorDetails)?[4,this.cancelSpeech()]:[3,2];case 1:r.sent(),this.fireCancelEvent(t.result.errorDetails),r.label=2;case 2:return[2]}}))}))},i.canceled=function(e,t){return o(i,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:if(this.privSpeechState===a.Inactive)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cancelSpeech()];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.privSpeechState=a.Inactive,[3,4];case 4:return[2]}}))}))}),i}return i(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this.privSpeechState},set:function(e){this.privSpeechState=e},enumerable:!1,configurable:!0}),t.prototype.onConnection=function(){this.privSpeechState=a.Connected},t.prototype.onDisconnection=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.privSpeechState=a.Inactive,[4,this.cancelSpeech()];case 1:return e.sent(),[2]}}))}))},t.prototype.fireCancelEvent=function(e){var t,r,n;try{if(this.privTranslator.canceled){var i=new v.ConversationTranslationCanceledEventArgs(null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:h.CancellationReason.Error,null!==(r=null==e?void 0:e.errorDetails)&&void 0!==r?r:e,null!==(n=null==e?void 0:e.errorCode)&&void 0!==n?n:h.CancellationErrorCode.RuntimeError,void 0,null==e?void 0:e.sessionId);this.privTranslator.canceled(this.privTranslator,i)}}catch(e){}},t.prototype.cancelSpeech=function(){var e;return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.stopContinuousRecognitionAsync(),[4,null===(e=this.privReco)||void 0===e?void 0:e.disconnect()];case 1:return t.sent(),this.privSpeechState=a.Inactive,[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},t}(h.TranslationRecognizer),f=function(e){function t(t){var r=e.call(this,t)||this;return r.privIsDisposed=!1,r.privIsSpeaking=!1,r.privErrors=c.ConversationConnectionConfig.restErrors,r.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",r.privPlaceholderRegion="westus",r.privProperties=new h.PropertyCollection,r}return i(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechRecognitionLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants},enumerable:!1,configurable:!0}),t.prototype.joinConversationAsync=function(e,t,r,n,i){var o=this;try{if("string"==typeof e){p.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),p.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),i);var s=r;null!=s&&""!==s||(s=c.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=h.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(h.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(s),this.privSpeechTranslationConfig.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_RecoLanguage],s),this.privSpeechTranslationConfig.setProperty(h.PropertyId[h.PropertyId.ConversationTranslator_Name],t);var a=this.privProperties.getProperty(h.PropertyId.ConversationTranslator_Host);a&&this.privSpeechTranslationConfig.setProperty(h.PropertyId[h.PropertyId.ConversationTranslator_Host],a);var u=this.privProperties.getProperty(h.PropertyId.SpeechServiceConnection_Host);u&&this.privSpeechTranslationConfig.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_Host],u),this.privConversation=new l.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,s,(function(e){e||o.handleError(new Error(o.privErrors.permissionDeniedConnect),i),o.privSpeechTranslationConfig.authorizationToken=e,o.privConversation.startConversationAsync((function(){o.handleCallback(n,i)}),(function(e){o.handleError(e,i)}))}),(function(e){o.handleError(e,i)}))}else"object"==typeof e?(p.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),p.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(h.PropertyId.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,p.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),p.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(r,n)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),n)}catch(e){this.handleError(e,"string"==typeof r?i:n)}},t.prototype.leaveConversationAsync=function(e,t){u.marshalPromiseToCallbacks(o(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.cancelSpeech()];case 1:return e.sent(),[4,this.privConversation.endConversationImplAsync()];case 2:return e.sent(),[4,this.privConversation.deleteConversationImplAsync()];case 3:return e.sent(),this.dispose(),[2]}}))})),e,t)},t.prototype.sendTextMessageAsync=function(e,t,r){var n;try{p.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),null===(n=this.privConversation)||void 0===n||n.sendTextMessageAsync(e,t,r)}catch(e){this.handleError(e,r)}},t.prototype.startTranscribingAsync=function(e,t){u.marshalPromiseToCallbacks(o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,6]),p.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),p.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0!==this.privCTRecognizer?[3,2]:[4,this.connectTranslatorRecognizer()];case 1:r.sent(),r.label=2;case 2:return p.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),[4,this.startContinuousRecognition()];case 3:return r.sent(),this.privIsSpeaking=!0,[3,6];case 4:return e=r.sent(),this.privIsSpeaking=!1,[4,this.cancelSpeech()];case 5:throw r.sent(),e;case 6:return[2]}}))})),e,t)},t.prototype.stopTranscribingAsync=function(e,t){u.marshalPromiseToCallbacks(o(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,6]),this.privIsSpeaking?[3,2]:[4,this.cancelSpeech()];case 1:return t.sent(),[2];case 2:return this.privIsSpeaking=!1,[4,new Promise((function(t,r){var n;null===(n=e.privCTRecognizer)||void 0===n||n.stopContinuousRecognitionAsync(t,r)}))];case 3:case 5:return t.sent(),[3,6];case 4:return t.sent(),[4,this.cancelSpeech()];case 6:return[2]}}))})),e,t)},t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.dispose=function(e,t,r){u.marshalPromiseToCallbacks(o(this,void 0,void 0,(function(){var e,t;return s(this,(function(r){switch(r.label){case 0:return this.isDisposed&&!this.privIsSpeaking?[2]:[4,this.cancelSpeech()];case 1:return r.sent(),this.privIsDisposed=!0,null===(e=this.privSpeechTranslationConfig)||void 0===e||e.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,null===(t=this.privConversation)||void 0===t||t.dispose(),this.privConversation=void 0,[2]}}))})),t,r)},t.prototype.cancelSpeech=function(){var e;return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.privIsSpeaking=!1,[4,null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onDisconnection()];case 1:return t.sent(),this.privCTRecognizer=void 0,[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.connectTranslatorRecognizer=function(){return o(this,void 0,void 0,(function(){var e,t,r,n;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,1,,3]),void 0===this.privAudioConfig&&(this.privAudioConfig=h.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_Key],""),e=encodeURIComponent(this.privConversation.room.token),t=(t=this.privSpeechTranslationConfig.getProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_Host],c.ConversationConnectionConfig.speechHost)).replace("{region}",this.privConversation.room.cognitiveSpeechRegion),r="wss://"+t+c.ConversationConnectionConfig.speechPath+"?"+c.ConversationConnectionConfig.configParams.token+"="+e,this.privSpeechTranslationConfig.setProperty(h.PropertyId[h.PropertyId.SpeechServiceConnection_Endpoint],r),this.privCTRecognizer=new d(this.privSpeechTranslationConfig,this.privAudioConfig,this),[3,3];case 1:return n=i.sent(),[4,this.cancelSpeech()];case 2:throw i.sent(),n;case 3:return[2]}}))}))},t.prototype.startContinuousRecognition=function(){var e=this;return new Promise((function(t,r){e.privCTRecognizer.startContinuousRecognitionAsync(t,r)}))},Object.defineProperty(t.prototype,"canSpeak",{get:function(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===a.Connected||this.privCTRecognizer.state===a.Connecting||this.privConversation.isMutedByHost)},enumerable:!1,configurable:!0}),t}(v.ConversationCommon);t.ConversationTranslator=f},3320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4173);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return n.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return n.ConversationImpl}});var i=r(93829);Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return i.ConversationCommon}});var o=r(11502);Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return o.ConversationExpirationEventArgs}});var s=r(4753);Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return s.ConversationParticipantsChangedEventArgs}});var a=r(17083);Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationCanceledEventArgs}});var c=r(49136);Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return c.ConversationTranslationEventArgs}});var u=r(72720);Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return u.ConversationTranslationResult}});var p=r(10149);Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return p.ConversationTranslator}});var h=r(20966);Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return h.ConversationTranscriber}});var l=r(42018);Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return l.User}});var v=r(23938);Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return v.ParticipantChangedReason}})},42018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Participant=t.User=void 0;var n=r(36514),i=function(){function e(e){this.privUserId=e}return Object.defineProperty(e.prototype,"userId",{get:function(){return this.privUserId},enumerable:!1,configurable:!0}),e}();t.User=i;var o=function(){function e(e,t,r,i,o,s,a,c){this.privId=e,this.privAvatar=t,this.privDisplayName=r,this.privIsHost=i,this.privIsMuted=o,this.privIsUsingTts=s,this.privPreferredLanguage=a,this.privVoice=c,this.privProperties=new n.PropertyCollection}return e.From=function(t,r,n){return new e(t,"",t,!1,!1,!1,r,n)},Object.defineProperty(e.prototype,"avatar",{get:function(){return this.privAvatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){return this.privDisplayName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preferredLanguage",{get:function(){return this.privPreferredLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this.privIsHost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMuted",{get:function(){return this.privIsMuted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsingTts",{get:function(){return this.privIsUsingTts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voice",{get:function(){return this.privVoice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();t.Participant=o},23938:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,(r=t.ParticipantChangedReason||(t.ParticipantChangedReason={}))[r.JoinedConversation=0]="JoinedConversation",r[r.LeftConversation=1]="LeftConversation",r[r.Updated=2]="Updated"},16394:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionCanceledEventArgs=void 0;var r=function(){function e(e,t,r,n,i){this.privCancelReason=t,this.privErrorDetails=r,this.privResult=i,this.privSessionId=e,this.privErrorCode=n}return Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privCancelReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e}();t.TranslationRecognitionCanceledEventArgs=r},63127:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionEventArgs=void 0;var o=function(e){function t(t,r,n){var i=e.call(this,r,n)||this;return i.privResult=t,i}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(r(36514).RecognitionEventArgs);t.TranslationRecognitionEventArgs=o},81295:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionResult=void 0;var o=function(e){function t(t,r,n,i,o,s,a,c,u){var p=e.call(this,r,n,i,o,s,void 0,void 0,void 0,a,c,u)||this;return p.privTranslations=t,p}return i(t,e),Object.defineProperty(t.prototype,"translations",{get:function(){return this.privTranslations},enumerable:!1,configurable:!0}),t}(r(36514).SpeechRecognitionResult);t.TranslationRecognitionResult=o},13300:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognizer=void 0;var a=r(80194),c=r(51564),u=r(61316),p=r(36514),h=function(e){function t(t,r){var n=this,i=t;return u.Contracts.throwIfNull(i,"speechConfig"),(n=e.call(this,r,i.properties,new a.TranslationConnectionFactory)||this).privDisposedTranslationRecognizer=!1,n.privProperties=i.properties.clone(),void 0!==n.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&u.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice),p.PropertyId[p.PropertyId.SpeechServiceConnection_TranslationVoice]),u.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages),p.PropertyId[p.PropertyId.SpeechServiceConnection_TranslationToLanguages]),u.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage),p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),n}return i(t,e),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetLanguages",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voiceName",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.recognizeOnceAsync=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),c.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(a.RecognitionMode.Conversation),e,t)},t.prototype.startContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(a.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.close=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),c.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.onConnection=function(){},t.prototype.onDisconnection=function(){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},t.prototype.dispose=function(t){return o(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return this.privDisposedTranslationRecognizer?[2]:(this.privDisposedTranslationRecognizer=!0,t?[4,this.implRecognizerStop()]:[3,3]);case 1:return r.sent(),[4,e.prototype.dispose.call(this,t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.createRecognizerConfig=function(e){return new a.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,r,n){var i=r;return new a.TranslationServiceRecognizer(e,t,i,n,this)},t}(p.Recognizer);t.TranslationRecognizer=h},95696:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEventArgs=void 0;var o=function(e){function t(t,r){var n=e.call(this,r)||this;return n.privResult=t,n}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(r(36514).SessionEventArgs);t.TranslationSynthesisEventArgs=o},35758:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisResult=void 0;var r=function(){function e(e,t){this.privReason=e,this.privAudio=t}return Object.defineProperty(e.prototype,"audio",{get:function(){return this.privAudio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),e}();t.TranslationSynthesisResult=r},47521:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;var n=r(36514),i=function(){function e(){this.privMap=new n.PropertyCollection}return e.prototype.get=function(e,t){return this.privMap.getProperty(e,t)},e.prototype.set=function(e,t){this.privMap.setProperty(e,t)},e}();t.Translations=i},11529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusReceivedEventArgs=void 0;var n=r(87135),i=function(){function e(e){this.privTurnStatus=n.TurnStatusResponsePayload.fromJSON(e)}return Object.defineProperty(e.prototype,"interactionId",{get:function(){return this.privTurnStatus.interactionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationId",{get:function(){return this.privTurnStatus.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.privTurnStatus.statusCode},enumerable:!1,configurable:!0}),e}();t.TurnStatusReceivedEventArgs=i},94358:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfile=void 0;var r=function(){function e(e,t){this.privId=e,this.privProfileType=t}return Object.defineProperty(e.prototype,"profileId",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profileType",{get:function(){return this.privProfileType},enumerable:!1,configurable:!0}),e}();t.VoiceProfile=r},75014:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileAuthorizationPhraseResult=void 0;var o=r(61316),s=function(e){function t(t,r,n){var i=e.call(this,t,r)||this;i.privPhrases=[],o.Contracts.throwIfNullOrUndefined(n,"phrases array");for(var s=0,a=n;s<a.length;s++){var c=a[s];i.privPhrases.push(c.passPhrase)}return i}return i(t,e),Object.defineProperty(t.prototype,"phrases",{get:function(){return this.privPhrases},enumerable:!1,configurable:!0}),t}(r(36514).VoiceProfileResult);t.VoiceProfileAuthorizationPhraseResult=s},24338:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileClient=void 0;var o=r(80194),s=r(51564),a=r(61316),c=r(36514),u=function(){function e(e){var t=e;a.Contracts.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.implClientSetup()}return Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.createProfileAsync=function(e,t,r,o){s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return[4,this.privAdapter.createProfile(e,t)];case 1:return r=i.sent(),n=r.json(),[2,new c.VoiceProfile(n.profileId,e)]}}))})),r,o)},e.prototype.retrieveEnrollmentResultAsync=function(e,t,r){s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.privAdapter.getProfileStatus(e)];case 1:return t=r.sent(),[2,new c.VoiceProfileEnrollmentResult(t.ok?c.ResultReason.EnrolledVoiceProfile:c.ResultReason.Canceled,t.data,t.statusText)]}}))})),t,r)},e.prototype.getAllProfilesAsync=function(e,t,r){s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.privAdapter.getProfiles(e)];case 1:return t=r.sent(),e===c.VoiceProfileType.TextIndependentIdentification?[2,c.VoiceProfileEnrollmentResult.FromIdentificationProfileList(t.json())]:[2,c.VoiceProfileEnrollmentResult.FromVerificationProfileList(t.json())]}}))})),t,r)},e.prototype.getAuthorizationPhrasesAsync=function(e,t,r){s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.privAdapter.getAuthorizationPhrases(e)];case 1:return t=r.sent(),[2,new c.VoiceProfileAuthorizationPhraseResult(t.ok?c.ResultReason.EnrollingVoiceProfile:c.ResultReason.Canceled,t.statusText,t.json())]}}))})),t,r)},e.prototype.enrollProfileAsync=function(e,t,r,o){var u=t;a.Contracts.throwIfNullOrUndefined(u,"audioConfig"),s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.privAdapter.createEnrollment(e,u)];case 1:return t=r.sent(),[2,new c.VoiceProfileEnrollmentResult(t.ok?c.ResultReason.EnrolledVoiceProfile:c.ResultReason.Canceled,t.data,t.statusText)]}}))})),r,o)},e.prototype.deleteProfileAsync=function(e,t,r){s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.privAdapter.deleteProfile(e)];case 1:return t=r.sent(),[2,this.getResult(t,c.ResultReason.DeletedVoiceProfile)]}}))})),t,r)},e.prototype.resetProfileAsync=function(e,t,r){s.marshalPromiseToCallbacks(n(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return[4,this.privAdapter.resetProfile(e)];case 1:return t=r.sent(),[2,this.getResult(t,c.ResultReason.ResetVoiceProfile)]}}))})),t,r)},e.prototype.close=function(){},e.prototype.implClientSetup=function(){var e="undefined"!=typeof window?"Browser":"Node",t="unknown",r="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,r=navigator.appVersion);var n=new o.SpeakerRecognitionConfig(new o.Context(new o.OS(e,t,r)),this.privProperties);this.privAdapter=new o.SpeakerIdMessageAdapter(n)},e.prototype.getResult=function(e,t,r){return new c.VoiceProfileResult(e.ok?t:c.ResultReason.Canceled,e.statusText)},e}();t.VoiceProfileClient=u},29144:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileEnrollmentCancellationDetails=t.VoiceProfileEnrollmentResult=void 0;var o=r(80194),s=r(36514),a=function(){function e(e,t,r){this.privReason=e,this.privProperties=new s.PropertyCollection,this.privReason!==s.ResultReason.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=s.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=r,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.ServiceError]))}return e.FromIdentificationProfileList=function(t){for(var r=[],n=0,i=t.profiles;n<i.length;n++){var o=i[n],a=new e("enrolling"===o.enrollmentStatus.toLowerCase()?s.ResultReason.EnrollingVoiceProfile:"enrolled"===o.enrollmentStatus.toLowerCase()?s.ResultReason.EnrolledVoiceProfile:s.ResultReason.Canceled,null,null);a.privDetails=this.getIdentificationDetails(o),r.push(a)}return r},e.FromVerificationProfileList=function(t){for(var r=[],n=0,i=t.profiles;n<i.length;n++){var o=i[n],a=new e("enrolling"===o.enrollmentStatus.toLowerCase()?s.ResultReason.EnrollingVoiceProfile:"enrolled"===o.enrollmentStatus.toLowerCase()?s.ResultReason.EnrolledVoiceProfile:s.ResultReason.Canceled,null,null);a.privDetails=this.getVerificationDetails(o),r.push(a)}return r},Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentsCount",{get:function(){return this.privDetails.enrollmentsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentsLength",{get:function(){return this.privDetails.enrollmentsLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentResultDetails",{get:function(){return this.privDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e.getIdentificationDetails=function(e){return{audioSpeechLength:e.speechTime?parseFloat(e.speechTime):0,enrollmentStatus:e.enrollmentStatus,enrollmentsLength:e.enrollmentSpeechTime?parseFloat(e.enrollmentSpeechTime):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentSpeechLength:e.remainingEnrollmentSpeechTime?parseFloat(e.remainingEnrollmentSpeechTime):0}},e.getVerificationDetails=function(e){return{enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentSpeechLength:e.remainingEnrollmentSpeechLength?parseFloat(e.remainingEnrollmentSpeechLength):0,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount}},e}();t.VoiceProfileEnrollmentResult=a;var c=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return i(t,e),t.fromResult=function(e){var r=s.CancellationReason.Error,n=s.CancellationErrorCode.NoError;return e.properties&&(n=s.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)},t}(s.CancellationDetailsBase);t.VoiceProfileEnrollmentCancellationDetails=c},30753:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileCancellationDetails=t.VoiceProfileResult=void 0;var o=r(80194),s=r(61316),a=r(36514),c=function(){function e(e,t){this.privReason=e,this.privProperties=new a.PropertyCollection,e===a.ResultReason.Canceled&&(s.Contracts.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,a.CancellationErrorCode[a.CancellationErrorCode.ServiceError]))}return Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e}();t.VoiceProfileResult=c;var u=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return i(t,e),t.fromResult=function(e){var r=a.CancellationReason.Error,n=a.CancellationErrorCode.NoError;return e.properties&&(n=a.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,a.CancellationErrorCode[a.CancellationErrorCode.NoError])]),new t(r,e.errorDetails,n)},t}(a.CancellationDetailsBase);t.VoiceProfileCancellationDetails=u},25982:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,(r=t.VoiceProfileType||(t.VoiceProfileType={}))[r.TextIndependentIdentification=0]="TextIndependentIdentification",r[r.TextDependentVerification=1]="TextDependentVerification",r[r.TextIndependentVerification=2]="TextIndependentVerification"},61324:(e,t,r)=>{var n=r(76622),i=r(55347),o=i;o.v1=n,o.v4=i,e.exports=o},90484:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,i=t;return[i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],"-",i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]],i[e[n++]]].join("")}},67504:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},76622:(e,t,r)=>{var n,i,o=r(67504),s=r(90484),a=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,p=t||[],h=(e=e||{}).node||n,l=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==l){var v=o();null==h&&(h=n=[1|v[0],v[1],v[2],v[3],v[4],v[5]]),null==l&&(l=i=16383&(v[6]<<8|v[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),f=void 0!==e.nsecs?e.nsecs:c+1,g=d-a+(f-c)/1e4;if(g<0&&void 0===e.clockseq&&(l=l+1&16383),(g<0||d>a)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,c=f,i=l;var y=(1e4*(268435455&(d+=122192928e5))+f)%4294967296;p[u++]=y>>>24&255,p[u++]=y>>>16&255,p[u++]=y>>>8&255,p[u++]=255&y;var m=d/4294967296*1e4&268435455;p[u++]=m>>>8&255,p[u++]=255&m,p[u++]=m>>>24&15|16,p[u++]=m>>>16&255,p[u++]=l>>>8|128,p[u++]=255&l;for(var S=0;S<6;++S)p[u+S]=h[S];return t||s(p)}},55347:(e,t,r)=>{var n=r(67504),i=r(90484);e.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},83300:(e,t)=>{"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},2480:(e,t,r)=>{"use strict";var n=(0,r(60530).default)(r(93476));e.exports=function(){var e={};return e.promise=new n.default((function(t,r){e.resolve=t,e.reject=r})),e}},57129:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,o,s=[];for(o in"string"!=typeof t&&(t="?"),e)if(r.call(e,o)){if((n=e[o])||null!=n&&!isNaN(n)||(n=""),o=i(o),n=i(n),null===o||null===n)continue;s.push(o+"="+n)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,i={};t=r.exec(e);){var o=n(t[1]),s=n(t[2]);null===o||null===s||o in i||(i[o]=s)}return i}},35666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),s=new T(n||[]);return o._invoke=function(e,t,r){var n=h;return function(i,o){if(n===v)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw o;return _()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=I(s,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var c=p(e,t,r);if("normal"===c.type){if(n=r.done?d:l,c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(e,r,s),o}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var h="suspendedStart",l="suspendedYield",v="executing",d="completed",f={};function g(){}function y(){}function m(){}var S={};S[o]=function(){return this};var b=Object.getPrototypeOf,C=b&&b(b(A([])));C&&C!==r&&n.call(C,o)&&(S=C);var P=m.prototype=g.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function r(i,o,s,a){var c=p(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,a)}))}a(c.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function I(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=p(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var o=i.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:_}}function _(){return{value:t,done:!0}}return y.prototype=P.constructor=m,m.constructor=y,y.displayName=c(m,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,a,"GeneratorFunction")),e.prototype=Object.create(P),e},e.awrap=function(e){return{__await:e}},w(R.prototype),R.prototype[s]=function(){return this},e.AsyncIterator=R,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var s=new R(u(t,r,n,i),o);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(P),c(P,a,"Generator"),P[o]=function(){return this},P.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return a.type="throw",a.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},47418:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},84564:(e,t,r)=>{"use strict";var n=r(47418),i=r(57129),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,p=/^[a-zA-Z]:/;function h(e){return(e||"").toString().replace(o,"")}var l=[["#","hash"],["?","query"],function(e,t){return f(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],v={hash:1,query:1};function d(e){var t,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||n);if("blob:"===e.protocol)i=new y(unescape(e.pathname),{});else if("string"===o)for(t in i=new y(e,{}),v)delete i[t];else if("object"===o){for(t in e)t in v||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function f(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=h(e)).replace(s,""),t=t||{};var r,n=u.exec(e),i=n[1]?n[1].toLowerCase():"",o=!!n[2],a=!!n[3],c=0;return o?a?(r=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(r=n[2]+n[4],c=n[2].length):a?(r=n[3]+n[4],c=n[3].length):r=n[4],"file:"===i?c>=2&&(r=r.slice(2)):f(i)?r=n[4]:i?o&&(r=r.slice(2)):c>=2&&f(t.protocol)&&(r=n[4]),{protocol:i,slashes:o||f(i),slashesCount:c,rest:r}}function y(e,t,r){if(e=(e=h(e)).replace(s,""),!(this instanceof y))return new y(e,t,r);var o,a,c,u,v,m,S=l.slice(),b=typeof t,C=this,P=0;for("object"!==b&&"string"!==b&&(r=t,t=null),r&&"function"!=typeof r&&(r=i.parse),o=!(a=g(e||"",t=d(t))).protocol&&!a.slashes,C.slashes=a.slashes||o&&t.slashes,C.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||p.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!f(C.protocol)))&&(S[3]=[/(.*)/,"pathname"]);P<S.length;P++)"function"!=typeof(u=S[P])?(c=u[0],m=u[1],c!=c?C[m]=e:"string"==typeof c?~(v="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof u[2]?(C[m]=e.slice(0,v),e=e.slice(v+u[2])):(C[m]=e.slice(v),e=e.slice(0,v))):(v=c.exec(e))&&(C[m]=v[1],e=e.slice(0,v.index)),C[m]=C[m]||o&&u[3]&&t[m]||"",u[4]&&(C[m]=C[m].toLowerCase())):e=u(e,C);r&&(C.query=r(C.query)),o&&t.slashes&&"/"!==C.pathname.charAt(0)&&(""!==C.pathname||""!==t.pathname)&&(C.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,i=r[n-1],o=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(o=!0),r.splice(n,1),s--);return o&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}(C.pathname,t.pathname)),"/"!==C.pathname.charAt(0)&&f(C.protocol)&&(C.pathname="/"+C.pathname),n(C.port,C.protocol)||(C.host=C.hostname,C.port=""),C.username=C.password="",C.auth&&(~(v=C.auth.indexOf(":"))?(C.username=C.auth.slice(0,v),C.username=encodeURIComponent(decodeURIComponent(C.username)),C.password=C.auth.slice(v+1),C.password=encodeURIComponent(decodeURIComponent(C.password))):C.username=encodeURIComponent(decodeURIComponent(C.auth)),C.auth=C.password?C.username+":"+C.password:C.username),C.origin="file:"!==C.protocol&&f(C.protocol)&&C.host?C.protocol+"//"+C.host:"null",C.href=C.toString()}y.prototype={set:function(e,t,r){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,n(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,c.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<l.length;u++){var p=l[u];p[4]&&(o[p[1]]=o[p[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&f(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,r=this,n=r.host,o=r.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(r.protocol&&r.slashes||f(r.protocol)?"//":"");return r.username?(s+=r.username,r.password&&(s+=":"+r.password),s+="@"):r.password?(s+=":"+r.password,s+="@"):"file:"!==r.protocol&&f(r.protocol)&&!n&&"/"!==r.pathname&&(s+="@"),(":"===n[n.length-1]||c.test(r.hostname)&&!r.port)&&(n+=":"),s+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(s+=r.hash),s}},y.extractProtocol=g,y.location=d,y.trimLeft=h,y.qs=i,e.exports=y},36427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(14616),i={AudioConfig:n.AudioConfig,OutputFormat:n.OutputFormat,ResultReason:n.ResultReason,SpeechConfig:n.SpeechConfig,SpeechRecognizer:n.SpeechRecognizer};t.default=i},91937:(e,t,r)=>{"use strict";var n=r(45872);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createSpeechRecognitionPonyfillFromRecognizer",{enumerable:!0,get:function(){return i.createSpeechRecognitionPonyfillFromRecognizer}}),t.default=void 0;var i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var c=s?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(i,a,c):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(23134));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var s=i.default;t.default=s},75834:(e,t,r)=>{"use strict";var n=r(96221);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(r(62331)),o=n(r(82110)),s=function(){function e(){(0,i.default)(this,e),this._phrases=[]}return(0,o.default)(e,[{key:"addFromString",value:function(){throw new Error("JSGF is not supported")}},{key:"phrases",get:function(){return this._phrases},set:function(e){if(Array.isArray(e))this._phrases=e;else{if("string"!=typeof e)throw new Error("The provided value is not an array or of type 'string'");this._phrases=[e]}}}]),e}();t.default=s},237:(e,t,r)=>{"use strict";var n=r(96221);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.maxAlternatives,n=void 0===r?1/0:r,o=t.textNormalization,c=void 0===o?"display":o;if(e.reason===s||e.reason===a&&!e.json.NBest){var u=[{confidence:.5,transcript:e.text}];return e.reason===a&&(u.isFinal=!0),u}if(e.reason===a){var p=(0,i.default)((e.json.NBest||[]).slice(0,n).map((function(e){var t=e.Confidence,r=e.Display,n=e.ITN,i=e.Lexical,o=e.MaskedITN;return{confidence:t,transcript:"itn"===c?n:"lexical"===c?i:"maskeditn"===c?o:r}})),{isFinal:!0});return p}return[]};var i=n(r(89360)),o=n(r(36427)).default.ResultReason,s=o.RecognizingSpeech,a=o.RecognizedSpeech},23134:(e,t,r)=>{"use strict";var n=r(96221);Object.defineProperty(t,"__esModule",{value:!0}),t.createSpeechRecognitionPonyfillFromRecognizer=x,t.default=void 0;var i=n(r(60407)),o=n(r(37452)),s=n(r(82110)),a=n(r(15460)),c=n(r(22790)),u=n(r(62331)),p=n(r(69028)),h=n(r(95414)),l=n(r(5881)),v=r(56434),d=n(r(237)),f=n(r(13289)),g=n(r(44765)),y=n(r(75834)),m=n(r(36427));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.default)(e);if(t){var i=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,h.default)(this,r)}}var P=m.default.AudioConfig,w=m.default.OutputFormat,R=m.default.ResultReason,I=m.default.SpeechConfig,O=m.default.SpeechRecognizer;function E(e){var t=e.duration,r=e.errorDetails,n=e.json,i=e.offset,o=e.properties,s=e.reason,a=e.resultId,c=e.text;return{duration:t,errorDetails:r,json:JSON.parse(n),offset:i,properties:o,reason:s,resultId:a,text:c}}function T(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Promise((function(t,n){return e.apply(void 0,r.concat([t,n]))}))}}var A=function(e){(0,p.default)(r,e);var t=C(r);function r(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.data,s=i.emma,a=i.interpretation,c=i.resultIndex,p=i.results;return(0,u.default)(this,r),(n=t.call(this,e)).data=o,n.emma=s,n.interpretation=a,n.resultIndex=c,n.results=p,n}return r}(v.Event);function _(e){var t,r,n=e.attach,o=e.attach.bind(e);return e.attach=(0,c.default)(i.default.mark((function n(){var s;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o();case 2:return s=n.sent,n.abrupt("return",b(b({},s),{},{read:function(){var n=(0,c.default)(i.default.mark((function n(){var o;return i.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.read();case 2:if(o=n.sent,!t&&(i=o.buffer,void 0,a=new Int16Array(i),[].reduce.call(a,(function(e,t){return e+Math.abs(t)}),0)/a.length>150)&&(e.events.onEvent({name:"FirstAudibleChunk"}),t=!0),!r){n.next=6;break}return n.abrupt("return",{buffer:new ArrayBuffer(0),isEnd:!0,timeReceived:Date.now()});case 6:return n.abrupt("return",o);case 7:case"end":return n.stop()}var i,a}),n)})));return function(){return n.apply(this,arguments)}}()}));case 4:case"end":return n.stop()}}),n)}))),{audioConfig:e,pause:function(){r=!0},unprepare:function(){e.attach=n}}}function x(e){var t=e.createRecognizer,r=e.enableTelemetry,n=e.looseEvents,a=e.referenceGrammars,h=e.textNormalization;O.enableTelemetry(!1!==r);var l=function(e){(0,p.default)(g,e);var r,l=C(g);function g(){var e;return(0,u.default)(this,g),(e=l.call(this))._continuous=!1,e._interimResults=!1,e._lang="undefined"!=typeof window?window.document.documentElement.getAttribute("lang")||window.navigator.language:"en-US",e._grammars=new y.default,e._maxAlternatives=1,e}return(0,s.default)(g,[{key:"emitCognitiveServices",value:function(e,t){this.dispatchEvent(new A("cognitiveservices",{data:b(b({},t),{},{type:e})}))}},{key:"continuous",get:function(){return this._continuous},set:function(e){this._continuous=e}},{key:"grammars",get:function(){return this._grammars},set:function(e){if(!(e instanceof y.default))throw new Error("The provided value is not of type 'SpeechGrammarList'");this._grammars=e}},{key:"interimResults",get:function(){return this._interimResults},set:function(e){this._interimResults=e}},{key:"maxAlternatives",get:function(){return this._maxAlternatives},set:function(e){this._maxAlternatives=e}},{key:"lang",get:function(){return this._lang},set:function(e){this._lang=e}},{key:"onaudioend",get:function(){return(0,v.getEventAttributeValue)(this,"audioend")},set:function(e){(0,v.setEventAttributeValue)(this,"audioend",e)}},{key:"onaudiostart",get:function(){return(0,v.getEventAttributeValue)(this,"audiostart")},set:function(e){(0,v.setEventAttributeValue)(this,"audiostart",e)}},{key:"oncognitiveservices",get:function(){return(0,v.getEventAttributeValue)(this,"cognitiveservices")},set:function(e){(0,v.setEventAttributeValue)(this,"cognitiveservices",e)}},{key:"onend",get:function(){return(0,v.getEventAttributeValue)(this,"end")},set:function(e){(0,v.setEventAttributeValue)(this,"end",e)}},{key:"onerror",get:function(){return(0,v.getEventAttributeValue)(this,"error")},set:function(e){(0,v.setEventAttributeValue)(this,"error",e)}},{key:"onresult",get:function(){return(0,v.getEventAttributeValue)(this,"result")},set:function(e){(0,v.setEventAttributeValue)(this,"result",e)}},{key:"onsoundend",get:function(){return(0,v.getEventAttributeValue)(this,"soundend")},set:function(e){(0,v.setEventAttributeValue)(this,"soundend",e)}},{key:"onsoundstart",get:function(){return(0,v.getEventAttributeValue)(this,"soundstart")},set:function(e){(0,v.setEventAttributeValue)(this,"soundstart",e)}},{key:"onspeechend",get:function(){return(0,v.getEventAttributeValue)(this,"speechend")},set:function(e){(0,v.setEventAttributeValue)(this,"speechend",e)}},{key:"onspeechstart",get:function(){return(0,v.getEventAttributeValue)(this,"speechstart")},set:function(e){(0,v.setEventAttributeValue)(this,"speechstart",e)}},{key:"onstart",get:function(){return(0,v.getEventAttributeValue)(this,"start")},set:function(e){(0,v.setEventAttributeValue)(this,"start",e)}},{key:"start",value:function(){var e=this;this._startOnce().catch((function(t){e.dispatchEvent(new ErrorEvent("error",{error:t,message:t&&(t.stack||t.message)}))}))}},{key:"_startOnce",value:(r=(0,c.default)(i.default.mark((function e(){var r,s,c,u,p,l,v,g,y,m,S,b,C,P,w,I,O,x=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(this.lang);case 2:return r=e.sent,s=_(r.audioConfig),c=s.pause,u=s.unprepare,e.prev=4,p=(0,f.default)(),y=r.audioConfig.events.attach((function(e){var t=e.name;"AudioSourceReadyEvent"===t?p.push({audioSourceReady:{}}):"AudioSourceOffEvent"===t?p.push({audioSourceOff:{}}):"FirstAudibleChunk"===t&&p.push({firstAudibleChunk:{}})})),m=y.detach,r.canceled=function(e,t){var r=t.errorDetails,n=t.offset,i=t.reason,o=t.sessionId;p.push({canceled:{errorDetails:r,offset:n,reason:i,sessionId:o}})},r.recognized=function(e,t){var r=t.offset,n=t.result,i=t.sessionId;p.push({recognized:{offset:r,result:E(n),sessionId:i}})},r.recognizing=function(e,t){var r=t.offset,n=t.result,i=t.sessionId;p.push({recognizing:{offset:r,result:E(n),sessionId:i}})},r.sessionStarted=function(e,t){var r=t.sessionId;p.push({sessionStarted:{sessionId:r}})},r.sessionStopped=function(e,t){var r=t.sessionId;p.push({sessionStopped:{sessionId:r}})},r.speechStartDetected=function(e,t){var r=t.offset,n=t.sessionId;p.push({speechStartDetected:{offset:r,sessionId:n}})},r.speechEndDetected=function(e,t){var r=t.sessionId;p.push({speechEndDetected:{sessionId:r}})},S=this.grammars.phrases,b=r.privReco.dynamicGrammar,a&&a.length&&b.addReferenceGrammar(a),S&&S.length&&b.addPhrase(S),e.next=20,T(r.startContinuousRecognitionAsync.bind(r))();case 20:r.stopContinuousRecognitionAsync?(this.abort=function(){return p.push({abort:{}})},this.stop=function(){return p.push({stop:{}})}):this.abort=this.stop=void 0,w=[],I=i.default.mark((function e(t){var s,a,u,f,y,m,S,b,I,O,E,_;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.shift();case 2:if(s=e.sent,a=s.abort,u=s.audioSourceOff,f=s.audioSourceReady,y=s.canceled,m=s.firstAudibleChunk,S=s.recognized,b=s.recognizing,I=s.stop,Object.keys(s).forEach((function(e){return x.emitCognitiveServices(e,s[e])})),O=y&&y.errorDetails,!/Permission[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]denied/.test(O||"")){e.next=9;break}return P={error:"not-allowed",type:"error"},e.abrupt("return","break");case 9:if(t||x.dispatchEvent(new A("start")),!O){e.next=15;break}return/1006/.test(O)?(C||(x.dispatchEvent(new A("audiostart")),x.dispatchEvent(new A("audioend"))),P={error:"network",type:"error"}):P={error:"unknown",type:"error"},e.abrupt("return","break");case 15:if(!a&&!I){e.next=22;break}if(a?(P={error:"aborted",type:"error"},g="abort"):(c(),g="stop"),!a||!r.stopContinuousRecognitionAsync){e.next=20;break}return e.next=20,T(r.stopContinuousRecognitionAsync.bind(r))();case 20:e.next=61;break;case 22:if(!f){e.next=27;break}x.dispatchEvent(new A("audiostart")),C=!0,e.next=61;break;case 27:if(!m){e.next=32;break}x.dispatchEvent(new A("soundstart")),l=!0,e.next=61;break;case 32:if(!u){e.next=40;break}return v&&x.dispatchEvent(new A("speechend")),l&&x.dispatchEvent(new A("soundend")),C&&x.dispatchEvent(new A("audioend")),C=l=v=!1,e.abrupt("return","break");case 40:if("abort"===g){e.next=61;break}if(!S||!S.result||S.result.reason!==R.NoMatch){e.next=45;break}P={error:"no-speech",type:"error"},e.next=61;break;case 45:if(!S&&!b){e.next=61;break}if(C||(x.dispatchEvent(new A("audiostart")),C=!0),l||(x.dispatchEvent(new A("soundstart")),l=!0),v||(x.dispatchEvent(new A("speechstart")),v=!0),!S){e.next=60;break}if(E=(0,d.default)(S.result,{maxAlternatives:x.maxAlternatives,textNormalization:h}),(_=!!E[0].transcript)&&(w=[].concat((0,o.default)(w),[E]),x.continuous&&x.dispatchEvent(new A("result",{results:w}))),P=x.continuous&&_?null:{results:w,type:"result"},x.continuous||!r.stopContinuousRecognitionAsync){e.next=57;break}return e.next=57,T(r.stopContinuousRecognitionAsync.bind(r))();case 57:n&&P&&_&&(x.dispatchEvent(new A(P.type,P)),P=null),e.next=61;break;case 60:b&&x.interimResults&&x.dispatchEvent(new A("result",{results:[].concat((0,o.default)(w),[(0,d.default)(b.result,{maxAlternatives:x.maxAlternatives,textNormalization:h})])}));case 61:case"end":return e.stop()}}),e)})),O=0;case 24:if(g&&!C){e.next=32;break}return e.delegateYield(I(O),"t0",26);case 26:if("break"!==e.t0){e.next=29;break}return e.abrupt("break",32);case 29:O++,e.next=24;break;case 32:v&&this.dispatchEvent(new A("speechend")),l&&this.dispatchEvent(new A("soundend")),C&&this.dispatchEvent(new A("audioend")),P&&("result"!==P.type||P.results.length||(P={error:"no-speech",type:"error"}),"error"===P.type?this.dispatchEvent(new ErrorEvent("error",P)):this.dispatchEvent(new A(P.type,P))),this.dispatchEvent(new A("end")),m(),e.next=44;break;case 40:throw e.prev=40,e.t1=e.catch(4),console.error(e.t1),e.t1;case 44:return e.prev=44,u(),r.dispose(),e.finish(44);case 48:case"end":return e.stop()}}),e,this,[[4,40,44,48]])}))),function(){return r.apply(this,arguments)})}]),g}(v.EventTarget);return{SpeechGrammarList:y.default,SpeechRecognition:l,SpeechRecognitionEvent:A}}t.default=function(e){var t=(0,g.default)(e),r=t.audioConfig,n=void 0===r?P.fromDefaultMicrophoneInput():r,o=t.enableTelemetry,s=void 0===o||o,a=t.fetchCredentials,u=t.looseEvents,p=t.referenceGrammars,h=t.speechRecognitionEndpointId,l=t.textNormalization,v=void 0===l?"display":l;if(!(n||window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia))return console.warn("web-speech-cognitive-services: This browser does not support WebRTC and it will not work with Cognitive Services Speech Services."),{};var d=function(){var e=(0,c.default)(i.default.mark((function e(t){var r,o,s,c,u,p,l;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return r=e.sent,o=r.authorizationToken,s=r.region,c=r.speechRecognitionHostname,u=r.subscriptionKey,c?(l={hostname:c,port:443,protocol:"wss:"},o?(p=I.fromHost(l)).authorizationToken=o:p=I.fromHost(l,u)):p=o?I.fromAuthorizationToken(o,s):I.fromSubscription(u,s),h&&(p.endpointId=h),p.outputFormat=w.Detailed,p.speechRecognitionLanguage=t||"en-US",e.abrupt("return",new O(p,n));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return x({audioConfig:n,createRecognizer:d,enableTelemetry:s,looseEvents:u,referenceGrammars:p,textNormalization:v})}},44765:(e,t,r)=>{"use strict";var n=r(96221);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.authorizationToken,n=t.credentials,o=t.looseEvent,p=t.looseEvents,v=t.region,d=void 0===v?"westus":v,f=t.subscriptionKey,g=(0,a.default)(t,u);if(void 0!==o&&(console.warn('web-speech-cognitive-services: The option "looseEvent" should be named as "looseEvents".'),p=o),!n){if(!r&&!f)throw new Error("web-speech-cognitive-services: Credentials must be specified.");console.warn("web-speech-cognitive-services: We are deprecating authorizationToken, region, and subscriptionKey. Please use credentials instead. The deprecated option will be removed on or after 2020-11-14."),n=function(){var e=(0,s.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return e.next=3,(0,c.default)(r);case 3:e.t1=e.sent,e.t2=d,e.t0={authorizationToken:e.t1,region:e.t2},e.next=13;break;case 8:return e.t3=d,e.next=11,(0,c.default)(f);case 11:e.t4=e.sent,e.t0={region:e.t3,subscriptionKey:e.t4};case 13:return e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}return h(h({},g),{},{fetchCredentials:(e=(0,s.default)(i.default.mark((function e(){var t,r,o,s,a,u,p,h;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)(n);case 2:if(t=e.sent,r=t.authorizationToken,o=t.customVoiceHostname,s=t.region,a=t.speechRecognitionHostname,u=t.speechSynthesisHostname,p=t.subscriptionKey,!(!r&&!p||r&&p)){e.next=13;break}throw new Error('web-speech-cognitive-services: Either "authorizationToken" or "subscriptionKey" must be provided.');case 13:if(s||a&&u){e.next=17;break}throw new Error('web-speech-cognitive-services: Either "region" or "speechRecognitionHostname" and "speechSynthesisHostname" must be set.');case 17:if(!s||!(o||a||u)){e.next=21;break}throw new Error('web-speech-cognitive-services: Only either "region" or "customVoiceHostname", "speechRecognitionHostname" and "speechSynthesisHostname" can be set.');case 21:if(!r){e.next=26;break}if("string"==typeof r){e.next=24;break}throw new Error('web-speech-cognitive-services: "authorizationToken" must be a string.');case 24:e.next=28;break;case 26:if("string"==typeof p){e.next=28;break}throw new Error('web-speech-cognitive-services: "subscriptionKey" must be a string.');case 28:return l&&p&&(console.warn("web-speech-cognitive-services: In production environment, subscription key should not be used, authorization token should be used instead."),l=!1),h=r?{authorizationToken:r}:{subscriptionKey:p},s?h.region=s:(h.customVoiceHostname=o,h.speechRecognitionHostname=a,h.speechSynthesisHostname=u),e.abrupt("return",h);case 32:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),looseEvents:p})};var i=n(r(60407)),o=n(r(15460)),s=n(r(22790)),a=n(r(59839)),c=n(r(41796)),u=["authorizationToken","credentials","looseEvent","looseEvents","region","subscriptionKey"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=!0},41796:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"function"==typeof e?e():e}},89360:(e,t,r)=>{"use strict";var n=r(96221);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=s(s(s({},[].reduce.call(e,(function(e,t,r){return e[r]=t,e}),{})),t),{},(0,i.default)({length:e.length},Symbol.iterator,(function(){return[].slice.call(r)[Symbol.iterator]()})));return r};var i=n(r(15460));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},13289:(e,t,r)=>{"use strict";var n=r(96221);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=[];return{push:function(r){if(e){var n=e.resolve;e=null,n(r)}else t.push(r)},shift:function(){return t.length?Promise.resolve(t.shift()):(e||(e=(0,i.default)())).promise}}};var i=n(r(83730))},42671:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0},51562:(e,t,r)=>{var n=r(42671);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},21455:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},22790:e=>{function t(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var s=e.apply(r,n);function a(e){t(s,i,o,a,c,"next",e)}function c(e){t(s,i,o,a,c,"throw",e)}a(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},62331:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},82110:e=>{function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0},15460:e=>{e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},5881:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},69028:(e,t,r)=>{var n=r(82925);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},96221:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},14553:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},37137:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},59839:(e,t,r)=>{var n=r(80789);e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.default=e.exports,e.exports.__esModule=!0},80789:e=>{e.exports=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i},e.exports.default=e.exports,e.exports.__esModule=!0},95414:(e,t,r)=>{var n=r(45872).default,i=r(21455);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?i(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},82925:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(r,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},37452:(e,t,r)=>{var n=r(51562),i=r(14553),o=r(89869),s=r(37137);e.exports=function(e){return n(e)||i(e)||o(e)||s()},e.exports.default=e.exports,e.exports.__esModule=!0},45872:e=>{function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},89869:(e,t,r)=>{var n=r(42671);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},60407:(e,t,r)=>{e.exports=r(35666)},83730:(e,t,r)=>{"use strict";var n=(0,r(60530).default)(r(93476));e.exports=function(){var e={};return e.promise=new n.default((function(t,r){e.resolve=t,e.reject=r})),e}},3339:()=>{},43108:()=>{},88275:()=>{},92505:()=>{},10146:()=>{},30173:()=>{},41137:()=>{},13829:()=>{},40739:()=>{},10592:()=>{},47400:()=>{},76916:()=>{},43740:()=>{},42104:()=>{},14151:()=>{},84270:()=>{},22914:()=>{},78549:()=>{},47721:()=>{},22088:()=>{}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";var e=n,t=r(95318);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createAdapters",{enumerable:!0,get:function(){return i.default}}),r(15634);var i=t(r(57241));if("undefined"!=typeof HTMLDocument&&"undefined"!=typeof document&&document instanceof HTMLDocument){var o=document.createElement("meta");o.setAttribute("name","botframework-directlinespeech:version"),o.setAttribute("content","4.15.1"),document.head.appendChild(o)}})(),window.DirectLineSpeech=n})();