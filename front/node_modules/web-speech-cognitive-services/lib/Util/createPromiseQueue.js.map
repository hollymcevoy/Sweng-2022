{"version":3,"sources":["../../src/Util/createPromiseQueue.js"],"names":["shiftDeferred","queue","push","value","resolve","shift","length","Promise","promise"],"mappings":";;;;;;;;;AAAA;;AAEe,oBAAW;AACxB,MAAIA,aAAJ;AACA,MAAMC,KAAK,GAAG,EAAd;;AAEA,MAAMC,IAAI,GAAG,SAAPA,IAAO,CAAAC,KAAK,EAAI;AACpB,QAAIH,aAAJ,EAAmB;AACjB,2BAAoBA,aAApB;AAAA,UAAQI,OAAR,kBAAQA,OAAR;AAEAJ,MAAAA,aAAa,GAAG,IAAhB;AACAI,MAAAA,OAAO,CAACD,KAAD,CAAP;AACD,KALD,MAKO;AACLF,MAAAA,KAAK,CAACC,IAAN,CAAWC,KAAX;AACD;AACF,GATD;;AAWA,MAAME,KAAK,GAAG,SAARA,KAAQ,GAAM;AAClB,QAAIJ,KAAK,CAACK,MAAV,EAAkB;AAChB,aAAOC,OAAO,CAACH,OAAR,CAAgBH,KAAK,CAACI,KAAN,EAAhB,CAAP;AACD;;AAED,WAAO,CAACL,aAAa,KAAKA,aAAa,GAAG,wBAArB,CAAd,EAAsDQ,OAA7D;AACD,GAND;;AAQA,SAAO;AACLN,IAAAA,IAAI,EAAJA,IADK;AAELG,IAAAA,KAAK,EAALA;AAFK,GAAP;AAID","sourcesContent":["import createDeferred from 'p-defer-es5';\n\nexport default function() {\n  let shiftDeferred;\n  const queue = [];\n\n  const push = value => {\n    if (shiftDeferred) {\n      const { resolve } = shiftDeferred;\n\n      shiftDeferred = null;\n      resolve(value);\n    } else {\n      queue.push(value);\n    }\n  };\n\n  const shift = () => {\n    if (queue.length) {\n      return Promise.resolve(queue.shift());\n    }\n\n    return (shiftDeferred || (shiftDeferred = createDeferred())).promise;\n  };\n\n  return {\n    push,\n    shift\n  };\n}\n"],"file":"createPromiseQueue.js"}