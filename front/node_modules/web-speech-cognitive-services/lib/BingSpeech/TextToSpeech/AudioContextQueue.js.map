{"version":3,"sources":["../../../src/BingSpeech/TextToSpeech/AudioContextQueue.js"],"names":["ponyfill","consumer","paused","queue","pause","utterance","push","startConsumer","resume","length","AudioContextConsumer","start","splice","stop"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;AAGE,oBAAYA,QAAZ,EAAsB;AAAA;AACpB,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,MAAL,GAAc,KAAd;AACA,SAAKF,QAAL,GAAgBA,QAAhB;AACA,SAAKG,KAAL,GAAa,EAAb;AACD;;;;WAED,iBAAQ;AACN,WAAKD,MAAL,GAAc,IAAd;AACA,WAAKD,QAAL,IAAiB,KAAKA,QAAL,CAAcG,KAAd,EAAjB;AACD;;;WAED,cAAKC,SAAL,EAAgB;AACd,WAAKF,KAAL,CAAWG,IAAX,CAAgBD,SAAhB;AACA,WAAKE,aAAL;AACD;;;WAED,kBAAS;AACP,WAAKL,MAAL,GAAc,KAAd;;AAEA,UAAI,KAAKD,QAAT,EAAmB;AACjB,aAAKA,QAAL,CAAcO,MAAd;AACD,OAFD,MAEO;AACL,aAAKD,aAAL;AACD;AACF;;;SAED,eAAe;AACb,aAAO,CAAC,CAAC,KAAKN,QAAd;AACD;;;;mGAED;AAAA;AAAA;AAAA;AAAA;AAAA,sBACS,CAAC,KAAKC,MAAN,IAAgB,KAAKC,KAAL,CAAWM,MAA3B,IAAqC,CAAC,KAAKR,QADpD;AAAA;AAAA;AAAA;;AAEI,qBAAKA,QAAL,GAAgB,IAAIS,6BAAJ,EAAhB;AAFJ;AAAA,uBAGU,KAAKT,QAAL,CAAcU,KAAd,CAAoB,KAAKR,KAAzB,EAAgC,KAAKH,QAArC,CAHV;;AAAA;AAII,qBAAKC,QAAL,GAAgB,IAAhB;AAJJ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;WAQA,gBAAO;AACL,WAAKE,KAAL,CAAWS,MAAX,CAAkB,CAAlB;AACA,WAAKX,QAAL,IAAiB,KAAKA,QAAL,CAAcY,IAAd,EAAjB;AACD","sourcesContent":["import AudioContextConsumer from './AudioContextConsumer';\n\nexport default class {\n  constructor(ponyfill) {\n    this.consumer = null;\n    this.paused = false;\n    this.ponyfill = ponyfill;\n    this.queue = [];\n  }\n\n  pause() {\n    this.paused = true;\n    this.consumer && this.consumer.pause();\n  }\n\n  push(utterance) {\n    this.queue.push(utterance);\n    this.startConsumer();\n  }\n\n  resume() {\n    this.paused = false;\n\n    if (this.consumer) {\n      this.consumer.resume();\n    } else {\n      this.startConsumer();\n    }\n  }\n\n  get speaking() {\n    return !!this.consumer;\n  }\n\n  async startConsumer() {\n    while (!this.paused && this.queue.length && !this.consumer) {\n      this.consumer = new AudioContextConsumer();\n      await this.consumer.start(this.queue, this.ponyfill);\n      this.consumer = null;\n    }\n  }\n\n  stop() {\n    this.queue.splice(0);\n    this.consumer && this.consumer.stop();\n  }\n}\n"],"file":"AudioContextQueue.js"}